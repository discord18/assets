(window.webpackJsonp=window.webpackJsonp||[]).push([[233],{5350:function(e,t,n){"use strict";t.__esModule=!0,t.getPageSize=M,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(435),i=n(232),l=n(495),s=C(n(3)),u=n(6125),d=n(238),c=C(n(5961)),f=C(n(5882)),p=n(6811),h=n(5993),v=C(n(5886)),m=n(5877),y=C(n(42)),_=C(n(45)),g=C(n(894)),E=C(n(5855)),I=C(n(6812)),T=C(n(6828)),S=n(0),O=C(n(10)),A=n(5908),N=C(n(5264));function C(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var P=(0,l.makeLazy)(function(){return Promise.all([n.e(0),n.e(272),n.e(228)]).then(n.t.bind(null,7164,7))});function M(e){return e<A.PAGE_WIDTH_THRESHOLD?A.PageSizes.SMALL:A.PageSizes.LARGE}s.default.initialize();var b=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderStoreListing=function(e){var n=e.match.params,r=n.skuId,a=n.applicationId,i=n.slug,l=e.location,s=t.props.width,u=(0,o.parse)(l.search);return R(E.default,{page:S.AnalyticsPages.STORE_LISTING,root:!0},void 0,R(T.default,{skuId:r,applicationId:a,slug:i,location:l,storeListingId:u.store_listing_id,pageSize:M(s)}))},t.renderContent=function(e,n){return R(i.Switch,{},void 0,R(i.Route,{path:S.Routes.APPLICATION_STORE,exact:!0,render:function(t){var r=t.location;return R(E.default,{page:S.AnalyticsPages.STORE_DIRECTORY_HOME,root:!0},void 0,R(I.default,{location:r,scrollTo:e,getScrollTop:n}))}}),R(i.Route,{path:S.Routes.APPLICATION_STORE_BROWSE,render:function(t){var r=t.location;return R(E.default,{page:S.AnalyticsPages.STORE_DIRECTORY_BROWSE,root:!0},void 0,R(I.default,{location:r,scrollTo:e,getScrollTop:n}))}}),R(i.Route,{path:S.Routes.APPLICATION_STORE_LISTING_APPLICATION(":applicationId",":slug"),render:t.renderStoreListing}),R(i.Route,{path:S.Routes.APPLICATION_STORE_LISTING_APPLICATION(":applicationId"),render:t.renderStoreListing}),R(i.Route,{path:S.Routes.APPLICATION_STORE_LISTING_SKU(":skuId",":slug"),render:t.renderStoreListing}),R(i.Route,{path:S.Routes.APPLICATION_STORE_LISTING_SKU(":skuId"),render:t.renderStoreListing}),R(i.Redirect,{to:S.Routes.APPLICATION_STORE}))},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){(0,u.updateLocation)(this.props.location),this.stopListeningToHistory=_.default.getHistory().listen(function(e){e.pathname.startsWith(S.Routes.APPLICATION_STORE)&&(0,u.updateLocation)(e)}),this.props.isAuthenticated&&(0,d.fetchPaymentSources)(),v.default.disable(),v.default.setLayout(p.APPLICATION_STORE_LAYOUT),v.default.enable(),(0,m.trackAppUIViewed)("application_store")},a.componentWillUnmount=function(){null!=this.stopListeningToHistory&&this.stopListeningToHistory(),v.default.disable(),v.default.setLayout(h.DEFAULT_LAYOUT),v.default.enable()},a.renderCustomErrorMessage=function(){return R("div",{},void 0,R("p",{},void 0,O.default.Messages.ERRORS_STORE_CRASH),R("p",{},void 0,O.default.Messages.ERRORS_ACTION_TO_TAKE))},a.render=function(){var e=this.props,t=e.isAuthenticated,n=e.location,r=e.theme,a=t?R("div",{className:N.default.applicationStore},void 0,this.renderContent()):R(P,{className:N.default.applicationStore,location:n,render:this.renderContent});return R(g.default,{theme:r,renderCustomMessage:this.renderCustomErrorMessage},void 0,a)},r}(a.Component);b.displayName="ApplicationStore";var L=(0,i.withRouter)((0,c.default)((0,f.default)(s.default.connectStores([y.default],function(){return{theme:y.default.theme}})(b))));t.default=L},5860:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EmptyStateText=t.EmptyStateImage=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=d(n(17)),i=d(n(158)),l=n(0),s=d(n(5235)),u=d(n(5270));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var h=a.createContext(l.ThemeTypes.DARK),v=h.Provider,m=h.Consumer,y=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.render=function(){var e=this.props,t=e.lightSrc,n=e.darkSrc,r=e.width,a=e.height,d=e.offsetX,p=e.offsetY,h=e.style;return c(m,{},void 0,function(e){return c(i.default.Child,{grow:0,className:(0,o.default)(u.default.image,s.default.marginBottom40),style:f({},h,{width:r,height:a,marginLeft:d,marginTop:p,backgroundImage:"url("+(e===l.ThemeTypes.DARK?n:t)+")"})})})},t}(a.PureComponent);t.EmptyStateImage=y,y.displayName="EmptyStateImage";var _=function(e){var t=e.children,n=e.className,r=e.noteClassName,a=e.note,l=e.style;return c(i.default.Child,{grow:0,direction:i.default.Direction.VERTICAL,style:l},void 0,t&&c("h4",{className:(0,o.default)(n,u.default.title)},void 0,t),a&&c("div",{className:(0,o.default)(r,u.default.text,s.default.marginTop8)},void 0,a))};t.EmptyStateText=_,_.displayName="EmptyStateText";var g=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.theme,r=e.className,a=e.style;return c(v,{value:n},void 0,c(i.default,{direction:i.default.Direction.VERTICAL,align:i.default.Align.CENTER,justify:i.default.Justify.CENTER,className:(0,o.default)(u.default.wrapper,r),style:a},void 0,t))},t}(a.PureComponent);t.default=g,g.displayName="EmptyState",g.Text=_,g.Image=y},5864:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(1))&&r.__esModule?r:{default:r},o=n(0);var i={selectChannel:function(e,t,n){a.default.dispatch({type:o.ActionTypes.DELAYED_CHANNEL_SELECT,guildId:e,channelId:t,analyticsSource:n})},flushSelection:function(e){void 0===e&&(e=!1),a.default.dispatch({type:o.ActionTypes.DELAYED_SELECT_FLUSH,immediate:e})}};t.default=i},5865:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.IMAGE_GIF_RE=void 0;var r,a,o=f(n(2)),i=n(5938),l=(r=n(6396))&&r.__esModule?r:{default:r},s=f(n(6045)),u=n(242),d=n(5881),c=n(805);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function p(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=/\.gif($|\?|#)/i;t.IMAGE_GIF_RE=m;var y=p(l.default,{}),_=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={readyState:s.ImageReadyStates.LOADING,hasMouseOver:!1},n._cancellers=new Set,n.observeVisibility=function(){r.visibilityObserver.observe(v(n))},n.unobserveVisibility=function(){r.visibilityObserver.unobserve(v(n))},n.handleImageLoad=function(e){return n.setState({readyState:e?s.ImageReadyStates.ERROR:s.ImageReadyStates.READY})},n.preloadImage=function(e,t){var r=e.width,a=e.height,o=n.props,i=o.width,l=o.height;1===i&&1===l||n.loadImage(n.getSrc((0,d.getRatio)(i,l,r,a)),t)},n.onMouseEnter=function(e){r.isAnimated(n.props)&&n.setState({hasMouseOver:!0});var t=n.props.onMouseEnter;null!=t&&t(e,{preloadImage:n.preloadImage})},n.onMouseLeave=function(){return n.setState({hasMouseOver:!1})},n.onClick=function(e){var t=n.props,r=t.onZoom,a=t.onClick;null!=a?a(e):null!=r&&(e.preventDefault(),r(e,{placeholder:n.getSrc(n.getRatio())}))},n.renderAccessory=function(){var e=n.state.hasMouseOver,t=null!=n.props.renderAccessory?n.props.renderAccessory():null;return e?t:y},(0,u.isImageLoaded)(n.getSrc(n.getRatio(),r.isAnimated(n.props)))&&(n.state.readyState=s.ImageReadyStates.READY),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.isAnimated=function(e){var t=e.src,n=e.original;return e.animated||m.test(n||t)};var a=r.prototype;return a.componentDidMount=function(){this.state.readyState===s.ImageReadyStates.LOADING&&this.loadImage(this.getSrc(this.getRatio(),r.isAnimated(this.props)),this.handleImageLoad),r.isAnimated(this.props)&&this.observeVisibility()},a.componentDidUpdate=function(e){var t=r.isAnimated(this.props);r.isAnimated(e)!==t&&(t?this.observeVisibility():this.unobserveVisibility())},a.componentWillUnmount=function(){r.isAnimated(this.props)&&this.unobserveVisibility(),this._cancellers.forEach(function(e){return e()}),this._cancellers.clear()},a.getSrc=function(e,t){void 0===t&&(t=!1);var n=this.props,r=n.src,a=n.width,o=n.height;return(0,u.getImageSrc)(r,a,o,e,t?"png":null)},a.getWidth=function(){var e=this.props,t=e.width,n=e.minWidth;return Math.max(Math.round(t*this.getRatio()),n)},a.getHeight=function(){var e=this.props,t=e.height,n=e.minHeight;return Math.max(Math.round(t*this.getRatio()),n)},a.getRatio=function(){var e=this.props,t=e.width,n=e.height,r=e.maxWidth,a=void 0===r?400:r,o=e.maxHeight,i=void 0===o?300:o;return(0,d.getRatio)(t,n,a,i)},a.loadImage=function(e,t){var n=this,r=this.props,a=r.width,o=r.height;if(1!==a||1!==o){var i=(0,u.loadImage)(e,function(e,r){null!=i&&n._cancellers.delete(i),t&&t(e,r)});null!=i&&this._cancellers.add(i)}},a.render=function(){var e=this.props,t=e.alt,n=e.placeholder,a=e.onZoom,i=e.shouldLink,l=e.onContextMenu,u=e.autoPlay,d=e.original,f=e.className,v=e.imageClassName,m=e.children,y=e.animated,_=e.shouldAnimate,g=e.minWidth,E=e.minHeight,I=e.renderItem,T=e.onClick,S=e.renderAccessory,O=e.tabIndex,A=this.state,N=A.readyState,C=A.hasMouseOver,R=!!a,P={alt:null!=t?t:"",readyState:N,onContextMenu:l,zoomable:R,className:f,imageClassName:v,minWidth:g,minHeight:E,tabIndex:O,width:this.getWidth(),height:this.getHeight(),renderItem:I,src:"",children:null!=m?function(e){var t=e.src,n=e.size,r=e.alt;return m({src:t,size:n,alt:r})}:void 0,onMouseEnter:this.onMouseEnter};if(1===P.width&&1===P.height)return null;switch((R||null!=T)&&(P.onClick=this.onClick),i&&(P.original=d||P.src),N){case s.ImageReadyStates.LOADING:null!=n&&(P.src=n);break;case s.ImageReadyStates.READY:if(r.isAnimated(this.props)){P.onMouseLeave=this.onMouseLeave;var M=(u||C)&&(null==_||_)&&r.visibilityObserver.isVisible(this);M?(P.src=this.getSrc(this.getRatio()),P.renderAccessory=S):(P.src=this.getSrc(this.getRatio(),!y),P.renderAccessory=this.renderAccessory),null!=m&&(P.children=function(e){var t=e.src,n=e.size,r=e.alt;return m({src:t,size:n,animating:M,alt:r})})}else P.src=this.getSrc(this.getRatio())}return p(c.BackgroundOpacityContext.Consumer,{},void 0,function(e){return o.createElement(s.default,h({},P,{backgroundOpacity:e.backgroundOpacity}))})},r}(o.Component);t.default=_,_.displayName="LazyImage",_.visibilityObserver=new i.VisibilityObserver({threshold:0}),_.defaultProps={alt:"",shouldLink:!1,autoPlay:!1,animated:!1,minWidth:0,minHeight:0}},5867:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=u(n(17)),o=n(810),i=u(n(305)),l=n(805),s=u(n(5324));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e){var t=e.icon,n=e.iconNode,r=e.timestamp,i=e.className,u=e.children;return d(l.BackgroundOpacityContext.Consumer,{},void 0,function(e){return d("div",{className:(0,a.default)(s.default.container,i)},void 0,null!=n&&d("div",{className:s.default.icon},void 0,n),null!=t&&d("div",{className:s.default.icon,style:{backgroundImage:"url('"+t+"')"}}),d("div",{className:(0,a.default)(s.default.content,s.default[e.backgroundOpacity+"BackgroundOpacity"])},void 0,u,d("time",{dateTime:r.toISOString(),className:(0,a.default)(s.default.timestamp,s.default[e.backgroundOpacity+"BackgroundOpacity"])},void 0,(0,o.calendarFormat)(r))))})}c.displayName="SystemMessage";var f=function(e){var t=e.onClick,n=e.children;return d("span",{className:s.default.action},void 0,"â€”",d(i.default,{onClick:t,className:s.default.actionAnchor},void 0,n))};f.displayName="SystemMessageAction",c.Action=f;var p=c;t.default=p},5870:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=c(n(17)),i=n(192),l=c(n(431)),s=c(n(5863)),u=n(0),d=c(n(5277));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var h={SMALL:"7px 10px",MEDIUM:"10px"},v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(){var e=t.props,n=e.onClick,r=e.option;return n&&n(r)},t}return p(t,e),t.prototype.render=function(){var e,t=this.props,n=t.checked,r=t.disabled,a=t.option,c=t.size,p=t.infoClassName,h=n?"checked":null,v=a.desc?f("div",{className:(0,i.getClass)(d.default,"desc",h)},void 0,a.desc):null,m=n?a.color||u.Colors.BRAND:"",y=n?u.Colors.WHITE:a.color,_=r||a.disabled;return f(l.default,{className:(0,o.default)(d.default.item,(e={},e[d.default.disabled]=_,e)),style:{borderColor:m,backgroundColor:m,padding:c},editable:!0,onClick:!_&&this.handleClick},void 0,f(s.default,{value:n,disabled:_,onChange:this.handleClick,color:m}),f("div",{className:(0,o.default)(d.default.info,p)},void 0,f("div",{className:(0,i.getClass)(d.default,"title",h),style:{color:y}},void 0,a.name),v))},t}(a.PureComponent);v.displayName="RadioItem";var m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderRadio=function(e){var n=t.props,r=n.value,a=n.disabled,o=n.size,i=n.itemInfoClassName,l=r===e.value;return f(v,{disabled:a,checked:l,option:e,onClick:t.props.onChange,size:o,infoClassName:i},e.value)},t}return p(t,e),t.prototype.render=function(){var e=this.props,t=e.options,n=e.className;return f("div",{className:(0,o.default)(d.default.radioGroup,n)},void 0,t.map(this.renderRadio))},t}(a.PureComponent);m.displayName="RadioGroup",m.Sizes=h,m.defaultProps={options:[],onChange:u.NOOP,value:null,disabled:!1,size:h.MEDIUM};var y=m;t.default=y},5871:function(e,t,n){"use strict";t.__esModule=!0,t.makeFile=function(e,t,n){if(null==t&&(t="unknown",e instanceof Blob))switch(e.type){case"image/png":t+=".png"}null==n&&(e instanceof Blob&&(n=e.type),n=n||o.default.lookup(t));if("function"!=typeof File||"Microsoft Edge"===i.default.name){var r=new Date,a=0;return null!=e.size&&"number"==typeof e.size?a=e.size:null!=e.byteLength&&"number"==typeof e.byteLength&&(a=e.byteLength),{lastModified:r.getTime(),lastModifiedDate:r,name:t,size:a,type:n}}return new File([e],t,{type:n})},t.classifyFile=function(e){return p(e.name,e.type)},t.classifyFileName=p,t.sizeString=function(e){return r.default.filesize(e)},t.maxFileSize=h,t.anyFileTooLarge=function(e,t){var n=h(t);return Array.from(e).some(function(e){return e.size>n})};var r=c(n(6101)),a=c(n(6)),o=c(n(6711)),i=c(n(32)),l=c(n(23)),s=c(n(14)),u=c(n(190)),d=n(0);function c(e){return e&&e.__esModule?e:{default:e}}var f=[{reType:/^image\/vnd.adobe.photoshop/,klass:"photoshop"},{reType:/^image\/svg\+xml/,klass:"webcode"},{reType:/^image\//,klass:"image"},{reType:/^video\//,klass:"video"},{reName:/\.pdf$/,klass:"acrobat"},{reName:/\.ae/,klass:"ae"},{reName:/\.sketch$/,klass:"sketch"},{reName:/\.ai$/,klass:"ai"},{reName:/\.(?:rar|zip|7z|tar|tar\.gz)$/,klass:"archive"},{reName:/\.(?:c\+\+|cpp|cc|c|h|hpp|mm|m|json|js|rb|rake|py|asm|fs|pyc|dtd|cgi|bat|rss|java|graphml|idb|lua|o|gml|prl|sls|conf|cmake|make|sln|vbe|cxx|wbf|vbs|r|wml|php|bash|applescript|fcgi|yaml|ex|exs|sh|ml|actionscript)$/,klass:"code"},{reName:/\.(?:txt|rtf|doc|docx|md|pages|ppt|pptx|pptm|key|log)$/,klass:"document"},{reName:/\.(?:xls|xlsx|numbers|csv)$/,klass:"spreadsheet"},{reName:/\.(?:html|xhtml|htm|js|xml|xls|xsd|css|styl)$/,klass:"webcode"},{reName:/\.(?:mp3|ogg|wav|flac)$/,klass:"audio"}];function p(e,t){e=e?e.toLowerCase():"";var n=a.default.find(f,function(n){return n.reType&&t?n.reType.test(t):!(!n.reName||!e)&&n.reName.test(e)});return n?n.klass:"unknown"}function h(e){var t=s.default.getCurrentUser(),n=t&&u.default.canUploadLargeFiles(t)?d.MAX_PREMIUM_ATTACHMENT_SIZE:d.MAX_ATTACHMENT_SIZE;if(null==e)return n;var r=l.default.getGuild(e),a=null!=r?d.PremiumGuildLimits[r.premiumTier].fileSize:d.MAX_ATTACHMENT_SIZE;return Math.max(a,n)}},5876:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(1))&&r.__esModule?r:{default:r},o=n(0);var i={updateChannelDimensions:function(e,t,n,r){a.default.dirtyDispatch({type:o.ActionTypes.UPDATE_CHANNEL_DIMENSIONS,channelId:e,scrollTop:t,scrollHeight:n,offsetHeight:r})},updateChannelListScroll:function(e,t){a.default.dirtyDispatch({type:o.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTop:t})},channelListScrollTo:function(e,t){a.default.dirtyDispatch({type:o.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTo:t})},clearChannelListScrollTo:function(e){a.default.dirtyDispatch({type:o.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTo:null})},clearChannelDimensions:function(e){this.updateChannelDimensions(e,null,null,null)},updateGuildListScrollTo:function(e){a.default.dirtyDispatch({type:o.ActionTypes.UPDATE_GUILD_LIST_DIMENSIONS,scrollTop:e})}};t.default=i},5877:function(e,t,n){"use strict";t.__esModule=!0,t.trackAppUIViewed=function(e){l.trackAppUIViewed(e)};var r=i(n(135)),a=i(n(18)),o=n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l=new(function(){function e(){this.loadId=r.default.v4(),this.appUIViewed=!1}var t=e.prototype;return t.trackEvent=function(e,t){var n=this,r=Date.now();requestIdleCallback(function(){a.default.track(e,{load_id:n.loadId,screen_name:t,duration_ms_since_app_opened:r-window.GLOBAL_ENV.HTML_TIMESTAMP})})},t.trackAppUIViewed=function(e){this.appUIViewed||(this.trackEvent(o.AnalyticEvents.APP_UI_VIEWED,e),this.appUIViewed=!0)},e}())},5878:function(e,t,n){"use strict";t.__esModule=!0,t.getIconNameForChannel=h,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=d(n(17)),i=d(n(231)),l=d(n(302)),s=n(0),u=d(n(5306));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var f={SELECTED:u.default.modeSelected,CONNECTED:u.default.modeConnected,UNREAD:u.default.modeUnread,MUTED:u.default.modeMuted,LOCKED:u.default.modeLocked};function p(e){e.stopPropagation()}function h(e,t,n,r){if(void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),null==e)return null;switch(e.type){case s.ChannelTypes.GUILD_NEWS:return l.default.Names.NEWSPAPER;case s.ChannelTypes.GUILD_STORE:return l.default.Names.STORE_TAG;case s.ChannelTypes.DM:case s.ChannelTypes.GROUP_DM:return l.default.Names.NOVA_AT;case s.ChannelTypes.GUILD_TEXT:return null!=e.isNSFW&&e.isNSFW()?l.default.Names.CHANNEL_TEXT_NSFW:e.isRoleRequired()?l.default.Names.CHANNEL_TEXT_LIMITED:l.default.Names.CHANNEL_TEXT;case s.ChannelTypes.GUILD_VOICE:return t?l.default.Names.LOCK_CLOSED:r?l.default.Names.LIVE_STREAM:e.isRoleRequired()?n?l.default.Names.VIDEO_CAMERA_LIMITED:l.default.Names.SPEAKER_LIMITED:n?l.default.Names.VIDEO_CAMERA:l.default.Names.SPEAKER;case s.ChannelTypes.GUILD_CATEGORY:default:return null}}function v(e){switch(e){case s.ChannelTypes.GUILD_VOICE:return u.default.typeVoice;case s.ChannelTypes.GUILD_NEWS:case s.ChannelTypes.GUILD_TEXT:case s.ChannelTypes.GUILD_STORE:default:return u.default.typeDefault}}var m=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props,r=n.onClick,a=n.channel;r&&r(e,a)},t.handleMouseDown=function(e){var n=t.props,r=n.onMouseDown,a=n.channel;r&&r(e,a)},t.handleMouseUp=function(e){var n=t.props,r=n.onMouseUp,a=n.channel;r&&r(e,a)},t.handleContextMenu=function(e){var n=t.props,r=n.onContextMenu,a=n.channel;r&&r(e,a)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=r.prototype;return s.getModeClassName=function(){var e=this.props,t=e.muted,n=e.selected,r=e.connected,a=e.unread,o=e.locked;return n?f.SELECTED:r?f.CONNECTED:o?f.LOCKED:t?f.MUTED:a?f.UNREAD:null},s.renderUnread=function(){var e=this.props,t=e.unread,n=e.muted,r=e.selected;return n||!t||r?null:c("div",{className:u.default.unread})},s.renderTypeIcon=function(){var e=this.props,t=h(e.channel,e.locked);return null!=t?c(l.default,{name:t,className:u.default.icon}):null},s.renderName=function(){var e=this.props.channel.name;return c("div",{className:u.default.name},void 0,e)},s.renderIcons=function(){var e=this.props.children;return a.Children.count(e)>0?c("div",{onClick:p,className:u.default.children},void 0,e):null},s.render=function(){var e=this.props,t=e.onClick,n=e.onMouseDown,r=e.onMouseUp,a=e.onContextMenu,l=e.connectDragPreview,s=e.className,d=e.channel.type,f=c("div",{className:u.default.content},void 0,this.renderTypeIcon(),this.renderName(),this.renderIcons()),p=null!=t||null!=r||null!=n;return c(i.default,{className:(0,o.default)(s,p?u.default.wrapper:u.default.notInteractive,this.getModeClassName(),v(d)),onClick:t&&this.handleClick,onMouseUp:r&&this.handleMouseUp,onMouseDown:n&&this.handleMouseDown,onContextMenu:a&&this.handleContextMenu},void 0,this.renderUnread(),l?l(f):f)},r}(a.Component);m.displayName="ChannelItem";var y=m;t.default=y},5880:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.Divider=t.Icon=t.Title=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=c(n(17)),o=c(n(231)),i=c(n(302)),l=c(n(426)),s=c(n(5883)),u=c(n(855)),d=c(n(5338));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=function(e){var t,n=e.className,r=e.children,o=e.onContextMenu,i=e.onClick,l=e.muted,u=void 0!==l&&l;return f(s.default,{className:(0,a.default)(n,d.default.title,(t={},t[d.default.titleMuted]=u,t)),size:s.default.Sizes.SIZE_16,muted:u,onContextMenu:o,onClick:i},void 0,r)};t.Title=p,p.displayName="Title";var h=function(e){var t,n=e.className,r=e.iconClassName,s=e.selected,c=void 0!==s&&s,p=e.disabled,h=void 0!==p&&p,v=e.showBadge,m=void 0!==v&&v,y=e.foreground,_=e.background,g=e.name,E=e.onClick,I=e.onContextMenu,T=e.onMouseEnter,S=e.onMouseLeave,O=e.tooltip,A=e.hideOnClick,N=void 0===A||A,C=e.role,R=e["aria-label"],P=e["aria-checked"],M=e["aria-roledescription"],b=f(i.default,{x:0,y:0,width:24,height:24,name:g,className:(0,a.default)(r,d.default.icon),foreground:y,background:_});return b=f(o.default,{tag:"div",onClick:h?null:E,onContextMenu:h?null:I,onMouseEnter:T,onMouseLeave:S,className:(0,a.default)(n,(t={},t[d.default.iconWrapper]=!0,t[d.default.clickable]=!h&&null!=E,t[d.default.selected]=c,t)),role:C,"aria-label":R,"aria-checked":P,"aria-roledescription":M},void 0,m?f(u.default,{mask:u.default.Masks.HEADER_BAR_BADGE},void 0,b):b,m?f("span",{className:d.default.iconBadge}):null),null!=O?f(l.default,{text:O,position:l.default.Positions.BOTTOM,hideOnClick:N},void 0,b):b};t.Icon=h,h.Names=i.default.Names;var v=function(e){var t=e.className;return f("div",{className:(0,a.default)(d.default.divider,t)})};t.Divider=v,v.displayName="Divider";var m=function(e){var t,n=e.className,r=e.children,o=e.toolbar,i=e.transparent,l=void 0!==i&&i;return f("div",{className:(0,a.default)(n,(t={},t[d.default.container]=!0,t[d.default.transparent]=l,t))},void 0,f("div",{className:d.default.children},void 0,r),null!=o?f("div",{className:d.default.toolbar},void 0,o):null)};m.displayName="HeaderBar",m.Icon=h,m.Title=p,m.Divider=v;var y=m;t.default=y},5885:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=oe(n(2)),i=ae(n(17)),l=ae(n(163)),s=ae(n(3)),u=n(59),d=ae(n(311)),c=ae(n(73)),f=ae(n(6342)),p=n(461),h=ae(n(233)),v=oe(n(6332)),m=ae(n(20)),y=ae(n(5991)),_=ae(n(159)),g=ae(n(101)),E=ae(n(309)),I=ae(n(87)),T=ae(n(50)),S=ae(n(160)),O=ae(n(194)),A=ae(n(306)),N=ae(n(42)),C=ae(n(14)),R=ae(n(132)),P=ae(n(436)),M=ae(n(305)),b=ae(n(112)),L=ae(n(231)),D=n(5860),w=ae(n(158)),k=ae(n(302)),U=ae(n(188)),G=ae(n(5858)),F=ae(n(5856)),j=ae(n(128)),H=ae(n(799)),x=ae(n(426)),B=n(796),V=ae(n(18)),K=ae(n(5889)),W=n(5869),Y=oe(n(196)),z=ae(n(5884)),$=ae(n(869)),q=ae(n(5893)),X=ae(n(5992)),Q=n(0),J=ae(n(10)),Z=ae(n(312)),ee=ae(n(5235)),te=ae(n(5247)),ne=ae(n(862)),re=ae(n(5272));function ae(e){return e&&e.__esModule?e:{default:e}}function oe(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function le(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function se(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ue=Y.default.getMaxAgeOptions,de=Y.default.getMaxUsesOptions,ce=Y.default.INVITE_OPTIONS_FOREVER,fe=Y.default.INVITE_OPTIONS_1_DAY,pe=Y.default.INVITE_OPTIONS_12_HOURS,he=Y.default.INVITE_OPTIONS_6_HOURS,ve=Y.default.INVITE_OPTIONS_1_HOUR,me=Y.default.INVITE_OPTIONS_30_MINUTES,ye=Y.default.INVITE_OPTIONS_UNLIMITED,_e=25,ge={MINUTES:"minutes",HOURS:"hours",DAYS:"days",NEVER:"never"},Ee=((r={})[me.value]={value:30,type:ge.MINUTES},r[ve.value]={value:1,type:ge.HOURS},r[he.value]={value:6,type:ge.HOURS},r[pe.value]={value:12,type:ge.HOURS},r[fe.value]={value:1,type:ge.DAYS},r[ce.value]={value:0,type:ge.NEVER},r),Ie=(0,l.default)({GROUP_DM:null,DM:null,FRIEND:null});function Te(e,t){var n=new Set,r=[],a={numFriends:0,numDms:0,numGroupDms:0};return""===e?(P.default.getPrivateChannelIds().forEach(function(e){var o=m.default.getChannel(e);if(null!=o){if(o.type===Q.ChannelTypes.GROUP_DM)return r.push({type:Ie.GROUP_DM,item:o}),void a.numGroupDms++;if(null!=E.default.lastMessageId(o.id)){var i=o.getRecipientId();if(null!=i&&!t.has(i)){var l=C.default.getUser(i);null!=l&&(n.add(l.id),r.push({type:Ie.DM,item:l}),a.numDms++)}}}}),I.default.getFriendIDs().forEach(function(e){if(!t.has(e)&&!n.has(e)){var o=C.default.getUser(e);null!=o&&(r.push({type:Ie.FRIEND,item:o}),a.numFriends++)}})):(K.default.queryDMUsers(e,50,!1).forEach(function(e){var o=e.user;if(!t.has(o.id)){var i=m.default.getDMFromUserId(o.id);if(null!=i)null!=E.default.lastMessageId(i)&&(n.add(o.id),r.push({type:Ie.DM,item:o}),a.numDms++)}}),K.default.queryGroupDMs(e,50,!1).forEach(function(e){var t=e.channel;r.push({type:Ie.GROUP_DM,item:t}),a.numGroupDms++}),K.default.queryFriends(e,500,!1).forEach(function(e){var o=e.user;t.has(o.id)||n.has(o.id)||(r.push({type:Ie.FRIEND,item:o}),a.numFriends++)})),{rows:r,counts:a}}var Se=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={sending:!1,invited:!1,hovered:!1},t.handleMouseEnter=function(){t.setState({hovered:!0})},t.handleMouseLeave=function(){t.setState({hovered:!1})},t.handleClickInvite=function(){var e=t.props,n=e.user,r=e.channel,a=e.location,o=e.code;t.setState({sending:!0}),f.default.enqueue({code:o,user:n,channel:r,location:a},function(e){t.setState({sending:!1,invited:e})})},t}return se(t,e),t.prototype.render=function(){var e,t=this.props,n=t.user,r=t.channel,a=this.state,o=a.sending,i=a.invited,l=a.hovered;return e=i?le(b.default,{look:b.default.Looks.LINK,size:b.default.Sizes.SMALL,disabled:!0,color:b.default.Colors.GREY},void 0,J.default.Messages.INVITE_FRIEND_MODAL_SENT):le(b.default,{color:b.default.Colors.GREEN,look:l?b.default.Looks.FILLED:b.default.Looks.OUTLINED,className:re.default.inviteRowButton,size:b.default.Sizes.SMALL,submitting:o,onClick:this.handleClickInvite},void 0,J.default.Messages.INVITE_FRIEND_MODAL_INVITE),le("div",{className:re.default.inviteRow,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,le("div",{className:re.default.inviteRowInfo},void 0,le(z.default,{channel:r,user:n,size:"small",outerClassName:re.default.inviteRowAvatar}),le("div",{className:re.default.inviteRowName},void 0,null!=n?n.toString():null,null!=r?r.toString():null)),e)},t}(o.Component);Se.displayName="InviteRow";var Oe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={focused:!1,copied:!1},t._unsetCopiedState=new u.DelayedCall(1e3,function(){return t.setState({copied:!1})}),t.handleCopy=function(){var e=t.props,n=e.value,r=e.onCopy;t.setState({copied:!0}),t._unsetCopiedState.delay(),r(n)},t}se(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._unsetCopiedState.cancel()},n.render=function(){var e,t=this,n=this.props,r=n.value,a=n.autoFocus,o=n.hideValue,l=this.state,s=l.focused,u=l.copied;return le("div",{className:(0,i.default)(ne.default.input,Z.default.flexJustifyBetween,Z.default.flexCenter,(e={},e[ne.default.success]=u,e[ne.default.focused]=s,e))},void 0,le(H.default,{className:re.default.copyInput,name:"invite",value:o?J.default.Messages.INSTANT_INVITE_HIDDEN:r,editable:!1,inputClassName:re.default.noBorder,autoFocus:a,onFocus:function(){return a?t.setState({focused:!0}):null},onBlur:function(){return a?t.setState({focused:!1}):null},spellCheck:"false",onClick:function(e){return e.currentTarget.select()}}),W.SUPPORTS_COPY?le(b.default,{size:b.default.Sizes.SMALL,color:u?b.default.Colors.GREEN:b.default.Colors.BRAND,className:re.default.copyButton,onClick:this.handleCopy},void 0,u?J.default.Messages.INVITE_COPIED:J.default.Messages.COPY):null)},t}(o.PureComponent);Oe.displayName="InviteCopyInput";var Ae=s.default.connectStores([A.default],function(){return{hideValue:A.default.hideInstantInvites}})(Oe),Ne=le(X.default,{}),Ce=function(e){function t(t){var n;(n=e.call(this,t)||this)._scroller=o.createRef(),n.handleGenerateNewLink=function(){var e=n.props,t=e.channel,r=e.source,a=null!=t?t.id:T.default.getChannelId();null!=a&&d.default.createInvite(a,{max_age:n.state.maxAge,max_uses:n.state.maxUses,temporary:n.state.temporary},r),n.state.maxAge===ce.value||n.state.savedMaxAge===ce.value?n.setState({settingsOpen:!1}):n.setState({settingsOpen:!1,savedMaxAge:ce.value})},n.handleCopy=function(e){var t=n.props,r=t.channel,a=t.source,o=t.code;(0,W.copy)(e);var i,l=null!=r?r.id:T.default.getChannelId();if(null!=r)i=r.type;else{var s=m.default.getChannel(l);null!=s&&(i=s.type)}V.default.track(Q.AnalyticEvents.COPY_INSTANT_INVITE,{server:S.default.getGuildId(),channel:l,channel_type:i,location:a,code:o})},n.openSettings=function(){n.setState({settingsOpen:!0})},n.maxAgeString=function(){var e=n.state,t=e.maxAge,r=e.maxUses,a=parseInt(r,10),o=0===a,i=Ee[t].value;switch(Ee[t].type){case ge.MINUTES:return o?J.default.Messages.INVITE_EXPIRES_MINUTES:J.default.Messages.INVITE_EXPIRES_MINUTES_OR_USES.format({numUses:a});case ge.HOURS:return o?J.default.Messages.INVITE_EXPIRES_HOURS.format({numHours:i}):J.default.Messages.INVITE_EXPIRES_HOURS_OR_USES.format({numHours:i,numUses:a});case ge.DAYS:return o?J.default.Messages.INVITE_EXPIRES_DAYS:J.default.Messages.INVITE_EXPIRES_DAYS_OR_USES.format({numUses:a});case ge.NEVER:return o?J.default.Messages.INVITE_EXPIRES_NEVER:J.default.Messages.INVITE_EXPIRES_USES.format({numUses:a});default:return""}},n.handleSelectMaxAge=function(e){n.setState({maxAge:parseInt(e.value,10),savedMaxAge:n.state.maxAge})},n.handleSelectMaxUses=function(e){n.setState({maxUses:parseInt(e.value,10)})},n.handleToggleTemporary=function(e){n.setState({temporary:e.currentTarget.checked})},n.handleQueryChange=function(e){var t=n._scroller.current;null!=t&&t.scrollTo(0);var r=Te(e,n.omitUserIds).rows;n.setState({query:e,rows:r})},n.handleClearSearch=function(){n.handleQueryChange("")},n.handleToggleMaxAge=function(){n.setState({maxAge:n.state.savedMaxAge,savedMaxAge:n.state.maxAge},n.handleGenerateNewLink)},n.handleDone=function(){var e=n.props.onDone;n.state.settingsOpen?n.setState({settingsOpen:!1}):c.default.pop(),e&&e()};var r=t.maxAge,a=t.maxUses,i=t.temporary,l=t.channel,s=t.streamUserId,u=null!=l?l.id:T.default.getChannelId(),f=null!=l?l.getGuildId():null;n.omitUserIds=new Set,null!=s?R.default.getVoiceStatesForChannel(f,u).forEach(function(e){var t=e.userId;n.omitUserIds.add(t)}):null!=f&&v.default.getProps(f,u).rows.forEach(function(e){e.type===v.MemberListRowTypes.MEMBER&&n.omitUserIds.add(e.userId)});var p=Te("",n.omitUserIds),h=p.rows,y=p.counts;return n.state={query:"",rows:h,settingsOpen:!1,maxAge:null!=r?r:fe.value,savedMaxAge:r===ce.value?fe.value:ce.value,maxUses:a||ye.value,temporary:i||!1,showFriends:h.length>=_e,initialCounts:y},n}se(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.channel,n=e.code,r=e.source,a=e.canCreateInvites,o=e.analyticsLocation,i=e.streamUserId,l=e.targetUserType,s=e.targetUserId,u=this.state,c=u.rows,f=u.maxAge,v=u.maxUses,m=u.temporary,y=u.showFriends,_=u.initialCounts;if(a){var E=null!=t?t.id:T.default.getChannelId();if(null==E)return;d.default.createInvite(E,{validate:n||null,max_age:f,max_uses:v,target_user_id:s,target_user_type:l,temporary:m},r)}var I=this.props.guild;if(y&&V.default.track(Q.AnalyticEvents.INVITE_SUGGESTION_OPENED,{location:r,num_suggestions:c.length,num_friends:_.numFriends,num_dms:_.numDms,num_group_dms:_.numGroupDms,guild_id:I.id}),null!=i){var S=h.default.getActiveStream(),A=(0,p.getStreamerApplication)(S,g.default,O.default,C.default);V.default.track(Q.AnalyticEvents.OPEN_MODAL,{Type:"Send Stream Invite",Source:r,location:o,other_user_id:i,application_id:null!=A?A.id:null,application_name:null!=A?A.name:null,game_id:null!=A?A.id:null})}else V.default.track(Q.AnalyticEvents.OPEN_MODAL,{Type:"Instant Invite Modal",Source:r})},n.getInviteCode=function(){var e=this.props,t=e.code,n=e.vanityURLCode;return t||n},n.renderCopyInput=function(){var e=this.props.canCreateInvites,t=this.state.showFriends,n=(0,Y.getInviteURL)(this.getInviteCode()||"");return le(o.Fragment,{},void 0,le(Ae,{value:n,autoFocus:t,onCopy:this.handleCopy}),e?le(j.default,{className:(0,i.default)(ee.default.marginTop8,re.default.footerText)},void 0,this.maxAgeString()," ",t?le(M.default,{onClick:this.openSettings},void 0,J.default.Messages.INVITE_EDIT_LINK):null):null)},n.renderHeader=function(){var e=this.props,t=e.guild,n=e.streamUserId,r=this.state,a=r.showFriends,o=r.settingsOpen,i=r.query,l=null,s=null!=n?J.default.Messages.INVITE_STREAM_HEADER:J.default.Messages.GROUP_DM_INVITE_WITH_NAME.format({groupname:t.toString()});return l=o?le(B.FormTitle,{tag:B.FormTitle.Tags.H2,className:ee.default.marginReset},void 0,J.default.Messages.INVITE_SETTINGS_TITLE):a?le("div",{className:re.default.header},void 0,le(B.FormTitle,{tag:B.FormTitle.Tags.H2,className:ee.default.marginBottom8},void 0,s),le(q.default,{query:i,className:ee.default.marginTop4,onQueryChange:this.handleQueryChange,placeholder:J.default.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch})):le(B.FormTitle,{tag:B.FormTitle.Tags.H2,className:ee.default.marginReset},void 0,s),le(U.default.Header,{separator:a&&!o},void 0,le(U.default.CloseButton,{className:re.default.closeButton,onClick:this.handleDone}),null!=n?Ne:null,l)},n.renderSettingsBody=function(){var e=this.state,t=e.maxAge,n=e.maxUses,r=e.temporary,a=ue.find(function(e){return e.value===t}),o=de.find(function(e){return e.value===n});return le(U.default.Content,{outerClassName:re.default.settingsContent,className:re.default.noScroll},void 0,le("form",{onSubmit:this.handleGenerateNewLink},void 0,le(B.FormItem,{title:J.default.Messages.EXPIRE_AFTER,className:ee.default.marginTop20},void 0,le(G.default,{value:a,clearable:!1,searchable:!1,options:ue,onChange:this.handleSelectMaxAge,className:re.default.select})),le(B.FormItem,{title:J.default.Messages.MAX_NUMBER_OF_USES,className:(0,i.default)(ee.default.marginTop20,ee.default.marginBottom4)},void 0,le(G.default,{value:o,clearable:!1,searchable:!1,options:de,onChange:this.handleSelectMaxUses,className:re.default.select})),le(B.FormItem,{className:ee.default.marginTop20},void 0,le(F.default,{value:r,clearable:!1,searchable:!1,options:de,onChange:this.handleToggleTemporary,note:J.default.Messages.TEMPORARY_MEMBERSHIP_EXPLANATION,hideBorder:!0},void 0,le(j.default,{},void 0,J.default.Messages.GRANT_TEMPORARY_MEMBERSHIP)))))},n.renderFriendsBody=function(){var e,t=this.props.analyticsLocation,n=this.state.rows,r=this.getInviteCode();if(0===n.length?e=J.default.Messages.INVITE_FRIEND_MODAL_NO_RESULTS:null==r&&(e=J.default.Messages.INVITE_FRIEND_MODAL_LOADING),null!=e)return le(U.default.Content,{className:ee.default.marginBottom20},void 0,le(D.EmptyStateText,{},void 0,e));var a=n.map(function(e){var n=e.type+"-"+e.item.id;switch(e.type){case Ie.GROUP_DM:return le(Se,{channel:e.item,code:r,location:t},n);case Ie.DM:case Ie.FRIEND:return le(Se,{user:e.item,code:r,location:t},n);default:return null}});return le(U.default.LazyContent,{className:re.default.scroller,elementHeight:44,scrollerRef:this._scroller},void 0,a)},n.renderBody=function(){var e=this.props,t=e.guild,n=e.streamUserId,r=this.state,a=r.settingsOpen,o=r.showFriends;if(a)return this.renderSettingsBody();if(o)return this.renderFriendsBody();var i=C.default.getCurrentUser(),l=t.isOwner(i)?J.default.Messages.INVITE_SHARE_LINK_OWN_SERVER:J.default.Messages.SHARE_INVITE_LINK_FOR_ACCESS;return null!=n&&(l=J.default.Messages.INVITE_SHARE_LINK_TO_STREAM),le(U.default.Content,{className:re.default.noScroll},void 0,le(w.default,{direction:w.default.Direction.VERTICAL,className:ee.default.marginBottom20},void 0,le(j.default,{className:re.default.subText},void 0,l),this.renderCopyInput()))},n.renderFooter=function(){var e,t=this.props,n=t.canCreateInvites,r=t.streamUserId,a=this.state,l=a.showFriends,s=a.settingsOpen,u=a.maxAge,d=N.default.theme,c=null;if(s)c=le(o.Fragment,{},void 0,le(b.default,{onClick:this.handleGenerateNewLink},void 0,J.default.Messages.GENERATE_A_NEW_LINK),le(b.default,{look:b.default.Looks.LINK,color:d===Q.ThemeTypes.LIGHT?b.default.Colors.PRIMARY:b.default.Colors.WHITE,onClick:this.handleDone},void 0,J.default.Messages.CANCEL));else if(l){var f=null!=r?J.default.Messages.INVITE_STREAM_FOOTER_LINK_HEADER:J.default.Messages.INVITE_FOOTER_LINK_HEADER;c=le(w.default,{direction:w.default.Direction.VERTICAL,className:re.default.content},void 0,le(B.FormTitle,{tag:B.FormTitle.Tags.H5,className:ee.default.marginBottom8},void 0,f),this.renderCopyInput())}else n&&(c=le(w.default,{justify:w.default.Justify.BETWEEN,className:ee.default.marginTop20},void 0,le($.default,{checked:u===ce.value,onChange:this.handleToggleMaxAge},void 0,le(j.default,{className:re.default.checkBoxLabel},void 0,J.default.Messages.SET_INVITE_LINK_NEVER_EXPIRE)),le(x.default,{text:J.default.Messages.LINK_SETTINGS},void 0,le(L.default,{onClick:this.openSettings,className:te.default.cursorPointer},void 0,le(k.default,{name:k.default.Names.GEAR,width:18,height:18,color:Q.Colors.PRIMARY_DARK_400})))));return null!=c?le(U.default.Footer,{className:s?re.default.settingsFooter:(0,i.default)((e={},e[re.default.noPadding]=!l,e[re.default.footer]=l,e))},void 0,c):null},n.render=function(){return le("div",{className:this.state.showFriends?re.default.wrapper:void 0},void 0,le(U.default,{className:re.default.modal},void 0,this.renderHeader(),this.renderBody(),this.renderFooter()))},t}(o.PureComponent);Ce.displayName="InstantInviteModal",Ce.defaultProps={analyticsLocation:Q.AnalyticsLocations.GUILD_CREATE_INVITE_SUGGESTION};var Re=s.default.connectStores([y.default,m.default,_.default],function(e){var t=e.channel,n=e.guild,r=e.streamUserId,a=null!=t?t.id:T.default.getChannelId(),o=null!=t?t:m.default.getChannel(a),i=null!=o&&_.default.can(Q.Permissions.CREATE_INSTANT_INVITE,o),l={vanityURLCode:i?null:n.vanityURLCode,canCreateInvites:i},s=null==r?null:Q.InviteTargetUserTypes.STREAM,u=r,d=null!=a?y.default.getInvite(a,s,u):null,c={targetUserType:s,targetUserId:u};return null==d?ie({},l,c):ie({},l,c,{code:d.code,maxAge:d.maxAge,maxUses:d.maxUses,temporary:d.temporary})},{forwardRef:!0})(Ce);t.default=Re},5886:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=d(n(6030)),o=d(n(6162)),i=d(n(32)),l=n(5968),s=d(n(5951)),u=d(n(8));function d(e){return e&&e.__esModule?e:{default:e}}var c=!1,f=(0,o.default)(new a.default(window)),p=/Darwin|OS X/.test(i.default.os.family||""),h=p?"cmd":"ctrl",v=p?"opt":"alt",m=p?"return":"enter",y=[].concat(l.JUMP_TO_GUILD.binds,["mod+shift+[","mod+shift+]","ctrl+shift+tab","ctrl+tab","mod+n","mod+t","mod+shift+t","mod+plus","mod+minus","mod+0"]).map(function(e){return e.replace("mod",h)}),_=[];u.default.isDesktop()&&new a.default(document).bind("backspace",function(e){return e.preventDefault()});function g(e){var t=[];for(var n in e)t=t.concat(e[n].binds);return t.map(function(e){return e.replace("mod",h)})}function E(e){var t=function(t){var n=e[t],r=s.default.getKeybindList();u.default.embedded||(r=r.concat(y));var a=n.binds.filter(function(e){return e=e.replace("mod",h),r.indexOf(e)<0});if(0===a.length)return"continue";var o,i,l,d=n.global?f.bindGlobal:f.bind;if(n.action&&d.call(f,a,n.action),n.keyup&&d.call(f,a,n.keyup,"keyup"),n.keydown){var c=a.indexOf("any-character");-1!==c&&(o="keydown",i=n.keydown,l=function(e){return i(e,e.key)},document.addEventListener(o,l),_.push(function(){return document.removeEventListener(o,l)}),a.splice(c,1)),a.length>0&&d.call(f,a,n.keydown,"keydown")}n.keypress&&d.call(f,a,n.keypress,"keypress")};for(var n in e)t(n)}var I={combokeys:f,modKey:h,altKey:v,returnKey:m,checkDupes:function(e){for(var t={},n=[],r=g(e),a=0,o=r.length;a<o;a++)void 0===t[r[a]]?t[r[a]]=0:t[r[a]]+=1;for(var i in t)t[i]&&n.push(i);n.length&&console.warn("Duplicate keyboard shortcuts defined:",n)},setLayout:function(e){r=e},enable:function(){c||(c=!0,this.checkDupes(r),E(r))},enableTemp:function(e){E(e),c=!0},disableTemp:function(){this.disable(),this.enable()},disable:function(){c&&(c=!1,_.forEach(function(e){return e()}),_=[],f.reset())},validateKeybind:function(e){c&&this.hasBind(e)&&f.unbind(e)},hasBind:function(e){var t=g(r);return e=(e=e.replace("meta","cmd")).replace(/right|left/i,"").trim(),!(t.indexOf(e)<0)}};t.default=I},5888:function(e,t,n){"use strict";t.__esModule=!0,t.transitionToChannel=function(e,t){if(i.default.hasModalOpen())return;o.default.closeAll(),a.default.channelListScrollTo(e,t),r.default.selectChannel(e,t)},t.transitionToPage=function(e){if(i.default.hasModalOpen())return;o.default.closeAll(),l.default.replaceWith(e)};var r=s(n(5864)),a=s(n(5876)),o=s(n(802)),i=s(n(438)),l=s(n(45));function s(e){return e&&e.__esModule?e:{default:e}}},5889:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=O(n(5887)),a=O(n(6)),o=n(6025),i=n(129),l=O(n(20)),s=O(n(241)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(99)),d=O(n(74)),c=O(n(23)),f=O(n(236)),p=O(n(101)),h=O(n(87)),v=O(n(50)),m=O(n(160)),y=O(n(14)),_=O(n(189)),g=O(n(436)),E=O(n(5931)),I=O(n(102)),T=O(n(198)),S=n(0);function O(e){return e&&e.__esModule?e:{default:e}}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var N,C=10,R=5,P=1,M=50,b=function(){return!0},L=/(\t|\s)/,D=(N=n(6343).default).MENTION_EVERYONE,w=N.MENTION_HERE,k=N.LAUNCHABLE_APPLICATIONS;function U(e,t,n,a,o){return void 0===o&&(o=!0),t.test(e)?C:n.test(e)?R:o&&(0,r.default)(a,e)?P:0}function G(e,t,n,a){for(var i=y.default.getUsers(),l=m.default.getGuildId(),s=(e=e.toLocaleLowerCase()).length,u=[],c=[],f=t.length,p=0,h=0;p<f;){var v=t[p],_=void 0,g=void 0;if(v.userId?(_=v.nick,g=i[v.userId]):(g=v,_=d.default.getNick(l,g.id)),!a||a(g)){var E=g.usernameLowerCase,I=null!=_?_.toLocaleLowerCase():null;E.substr(0,s)===e||_&&I.substr(0,s)===e?u.push({comparator:I||E,score:C,nick:_,user:g}):h<M&&((0,r.default)(e,E)||_&&(0,r.default)(e,I))&&(c.push({comparator:I||E,score:P,nick:_,user:g}),h+=1)}p+=1}return u.sort(o.sortByMatchScore),u.length<n&&(c.sort(o.sortByMatchScore),u=u.concat(c.slice(0,Math.max(0,n-u.length)))),u.length>n&&(u.length=n),u}function F(e,t){var n=l.default.getChannel(e);return(0,a.default)(f.default.getMessages(e).toArray()).reverse().map(function(e){return e.author}).reject(function(e){return e.isNonUserBot()}).uniqBy(function(e){return e.id}).map(function(e){var t=d.default.getMember(n.getGuildId(),e.id)||{};return{nick:t.nick||null,score:0,comparator:t.nick||e.username,user:e}}).take(t).value()}var j={queryFriends:function(e,t,n,r){return void 0===t&&(t=10),void 0===n&&(n=!0),G(e,h.default.getFriendIDs().map(function(e){return y.default.getUser(e)}),t,r)},queryDMUsers:function(e,t,n,r){return void 0===t&&(t=10),void 0===n&&(n=!0),G(e,l.default.getDMUserIds().map(function(e){return y.default.getUser(e)}),t,r)},queryChannelUsers:function(e,t,n,r){void 0===n&&(n=10),void 0===r&&(r=!0);var a,o=l.default.getChannel(e);if(null==o)return[];if(o.isPrivate()){a=o.recipients.map(function(e){return{userId:e,nick:o.nicks[e]}});var i=y.default.getCurrentUser();a.push({userId:i.id,nick:o.nicks[i.id]})}else if(0===t.length){var s=F(o.id,n);if(null!=s&&s.length>0)return s;a=d.default.getMembers(o.guild_id)}else a=d.default.getMembers(o.guild_id),r&&E.default.requestMembers(o.guild_id,t,n);return G(t,a,n,function(e){return o.isPrivate()||I.default.can(S.Permissions.VIEW_CHANNEL,e,o)})},queryGuildUsers:function(e,t,n,r,a){if(void 0===n&&(n=10),void 0===r&&(r=!0),null==c.default.getGuild(e))return[];if(0===t.length)return F(v.default.getChannelId(e),n);var o=d.default.getMembers(e);return r&&t.length>0&&E.default.requestMembers(e,t,n),G(t,o,n,a)},queryUsers:function(e,t,n,r,o){return void 0===t&&(t=10),void 0===n&&(n=!0),void 0===r&&(r=!0),r&&e.length>0&&E.default.requestMembers(null,e,t),G(e,(0,a.default)(y.default.getUsers()).values().value(),t,o)},queryChannels:function(e,t,n,r,s,d){void 0===n&&(n=10),void 0===r&&(r=!0),void 0===s&&(s=b),void 0===d&&(d=u.GUILD_SELECTABLE_CHANNELS_KEY),e=e.toLocaleLowerCase();var f=new RegExp("^"+T.default.escape(e),"i"),p=new RegExp(T.default.escape(e),"i"),h=y.default.getCurrentUser();return(t?(0,a.default)(u.default.getChannels(t)[d]).map(function(e){return e.channel}):(0,a.default)(l.default.getChannels()).values()).map(function(n){if(d!==n.type&&(d!==u.GUILD_SELECTABLE_CHANNELS_KEY||!(0,i.isGuildSelectableChannelType)(n.type))||(0,i.isGuildSelectableChannelType)(n.type)&&!I.default.can(S.Permissions.VIEW_CHANNEL,h,n)||d===S.ChannelTypes.GUILD_VOICE&&!I.default.can(S.Permissions.VIEW_CHANNEL|S.Permissions.CONNECT,h,n)||!s(n))return null;var a=c.default.getGuild(n.guild_id),o=l.default.getChannel(n.parent_id),v=U((t?n.toString()+" "+(null!=o?o.toString():""):n.toString()+" "+(null!=o?o.toString():"")+" "+a.toString()).toLocaleLowerCase(),f,p,e,r);return v>0?{channel:n,score:v,comparator:n.toString()}:null}).filter(Boolean).sortBy(function(e){return e.channel.name}).sort(o.sortByMatchScore).take(n).value()},queryGuilds:function(e,t,n,r){void 0===t&&(t=10),void 0===n&&(n=!0),void 0===r&&(r=b),e=e.toLocaleLowerCase();var i=new RegExp("^"+T.default.escape(e),"i"),l=new RegExp(T.default.escape(e),"i");return(0,a.default)(c.default.getGuilds()).values().map(function(t){if(r(t)){var a=U(t.name.toLocaleLowerCase(),i,l,e,n);if(a>0)return{guild:t,score:a,comparator:t.toString()}}return null}).filter(Boolean).sortBy(function(e){return e.guild.name}).sort(o.sortByMatchScore).take(t).value()},queryGroupDMs:function(e,t,n,r){void 0===t&&(t=10),void 0===n&&(n=!0),void 0===r&&(r=b),e=e.toLocaleLowerCase();var i=new RegExp("^"+T.default.escape(e),"i"),s=new RegExp(T.default.escape(e),"i"),u=g.default.getPrivateChannelIds(),d=l.default.getChannels();return(0,a.default)(u).map(function(e){return d[e]}).map(function(t){if(t.type!==S.ChannelTypes.GROUP_DM||!r(t))return null;var a=U(t.toString().toLocaleLowerCase(),i,s,e,n);return a>0?{channel:t,score:a,comparator:t.toString()}:null}).filter(Boolean).sort(o.sortByMatchScore).value()},queryApplications:function(e,t,n,r){void 0===t&&(t=10),void 0===n&&(n=!0),void 0===r&&(r=b),e=e.toLocaleLowerCase();var i=new RegExp("^"+T.default.escape(e),"i"),l=new RegExp(T.default.escape(e),"i"),s=k();return(0,a.default)(s).map(function(t){var a=t.application;if(r(a)){var o=a.name.toLocaleLowerCase(),s=U(o,i,l,e,n);if(s>0)return{application:a,score:s,comparator:o}}return null}).filter(Boolean).sort(o.sortByMatchScore).take(t).value()},querySKUs:function(e,t,n,r){void 0===t&&(t=10),void 0===n&&(n=!0),void 0===r&&(r=b),e=e.toLocaleLowerCase();var i=new RegExp("^"+T.default.escape(e),"i"),l=new RegExp(T.default.escape(e),"i"),s=_.default.getSKUs();return(0,a.default)(s).values().map(function(t){if(t.type===S.SKUTypes.GAME&&r(t)){var a=t.name.toLocaleLowerCase(),o=U(a,i,l,e,n);if(o>0)return{sku:t,score:o,comparator:a}}return null}).filter(Boolean).sort(o.sortByMatchScore).take(t).value()},getRecentlyTalked:F,queryMentionResults:function(e,t,n){var o=this.queryChannelUsers(t.id,e).map(function(e){return A({},e,{status:p.default.getStatus(e.user.id)})}),i=o.length,l=[];if(i<S.MAX_AUTOCOMPLETE_RESULTS){var s=c.default.getGuild(t.getGuildId());null!=s&&((0,a.default)(s.roles).filter(function(t){var n=t.mentionable,a=t.name;return n&&(0,r.default)(e,a.toLowerCase())}).take(S.MAX_AUTOCOMPLETE_RESULTS-i).forEach(function(e){return l.push(e)}),i+=l.length)}var u=[];return t.isDM()||t.isGroupDM()||!n||(i<S.MAX_AUTOCOMPLETE_RESULTS&&(0,r.default)(e,D().test)&&(u.push(D()),i+=1),i<S.MAX_AUTOCOMPLETE_RESULTS&&(0,r.default)(e,w().test)&&u.push(w())),{users:o,globals:u,roles:l}},queryChannelResults:function(e,t){return{channels:this.queryChannels(e,t.getGuildId()).map(function(e){return e.channel})}},queryEmojiResults:function(e,t){return{emojis:s.default.search(t,e,S.MAX_AUTOCOMPLETE_RESULTS)}},matchSentinel:function(e,t,n){return!L.test(t)&&e===n}};t.default=j},5890:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=v(n(6)),a=v(n(3)),o=v(n(24)),i=v(n(1)),l=v(n(6464)),s=n(6465),u=v(n(6466)),d=n(5898),c=v(n(20)),f=v(n(23)),p=v(n(87)),h=n(0);function v(e){return e&&e.__esModule?e:{default:e}}var m=.05,y={},_=!1;function g(e){return null==y[e]&&(y[e]={searchId:e,searchType:E(e),isIndexing:!1,isHistoricalIndexing:!1,isSearching:!1,analyticsId:null,editorState:null,offset:0,query:null,hasError:!1,searchFetcher:null,searchResults:null,results:null,totalResults:0,documentsIndexed:0,resultsBlocked:0,showBlockedResults:!1,showNoResultsAlt:!1}),y[e]}function E(e){return f.default.getGuild(e)?h.SearchTypes.GUILD:c.default.getChannel(e)?h.SearchTypes.CHANNEL:null}function I(e,t,n){if(void 0===n&&(n=null),null==e)return n;var r=y[e];return null==r?n:t(r)}var T="SearchStore",S=!1,O={},A=null;function N(e){var t=e.searchId,n=y[t];if(null==n)return!1;null!=n.searchFetcher&&n.searchFetcher.cancel(),delete y[t]}function C(){(0,d.refreshSearchTokens)()}var R=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(f.default,c.default);var e,t=o.default.get(T);t&&t.history&&(e=t.history,Object.keys(e).forEach(function(t){Array.isArray(e[t])&&(e[t]=e[t].filter(function(e){return"string"==typeof e&&e.trim()})),Array.isArray(e[t])&&e[t].length||delete e[t]}),O=e),S=!!o.default.get("tokenized")||!1},a.isOpen=function(){return _},a.getCurrentSearchId=function(){return A},a.isActive=function(e){return void 0===e&&(e=A),null!=e&&(this.isIndexing(e)||this.isSearching(e)||this.hasResults(e))},a.isTokenized=function(){return S},a.getSearchType=function(e){return I(e||A,function(e){return e.searchType})},a.getResults=function(e){return I(e,function(e){return e.searchResults})},a.hasResults=function(e){return null!=I(e,function(e){return e.searchResults})},a.isIndexing=function(e){return I(e,function(e){return e.isIndexing})||!1},a.isHistoricalIndexing=function(e){return I(e,function(e){return e.isHistoricalIndexing})||!1},a.isSearching=function(e){return I(e,function(e){return e.isSearching})||!1},a.getAnalyticsId=function(e){return I(e,function(e){return e.analyticsId})},a.getResultsBlocked=function(e){return I(e,function(e){return e.resultsBlocked})},a.getDocumentsIndexedCount=function(e){return I(e,function(e){return e.documentsIndexed})},a.getSearchFetcher=function(e){return I(e,function(e){return e.searchFetcher})},a.getTotalResults=function(e){return I(e,function(e){return e.totalResults})||0},a.getEditorState=function(e){return I(e,function(e){return e.editorState})},a.getHistory=function(e){return O[e]},a.getOffset=function(e){return I(e,function(e){return e.offset})||0},a.getQuery=function(e){return I(e,function(e){return e.query})},a.hasError=function(e){return I(e,function(e){return e.hasError})||!1},a.shouldShowBlockedResults=function(e){return I(e,function(e){return e.showBlockedResults},!1)||!1},a.shouldShowNoResultsAlt=function(e){return I(e,function(e){return e.showNoResultsAlt},!1)||!1},a.getResultsState=function(e){return{isSearching:this.isSearching(e),isIndexing:this.isIndexing(e),isHistoricalIndexing:this.isHistoricalIndexing(e),documentsIndexed:this.getDocumentsIndexedCount(e),offset:this.getOffset(e),results:this.getResults(e),totalResults:this.getTotalResults(e),hasError:this.hasError(e),resultsBlocked:this.getResultsBlocked(e),showBlockedResults:this.shouldShowBlockedResults(e),showNoResultsAlt:this.shouldShowNoResultsAlt(e)}},r}(a.default.Store))(i.default,{SEARCH_START:function(e){var t=e.queryString,n=e.searchId,a=e.query,s=g(n);s.searchFetcher&&(s.searchFetcher.cancel(),s.searchFetcher=null);var u=new l.default(n,s.searchType,a);s.searchFetcher=u,s.isSearching=!0,s.searchResults=null,s.analyticsId=null,s.query=r.default.omit(a,"type"),s.offset=a.offset?a.offset:0,s.showBlockedResults=!1,function(e,t){if("string"==typeof t){var n=O[e]=O[e]||[];t=t.trim();var r=n.indexOf(t);-1!==r?(n.splice(r,1),n.unshift(t)):n[0]&&t.startsWith(n[0])?n[0]=t:r<0&&n.unshift(t),n.length>5&&n.splice(5,n.length),o.default.set(T,{history:O})}}(n,t),u.fetch(function(e){i.default.dispatch({type:h.ActionTypes.SEARCH_FINISH,searchId:n,analyticsId:e.body.analytics_id,totalResults:e.body.total_results,messages:e.body.messages,hasError:!1,doingHistoricalIndex:e.body.doing_deep_historical_index,documentsIndexed:e.body.documents_indexed})},function(){i.default.dispatch({type:h.ActionTypes.SEARCH_INDEXING,searchId:n})},function(){i.default.dispatch({type:h.ActionTypes.SEARCH_FINISH,searchId:n,messages:[],totalResults:0,analyticsId:null,hasError:!0,doingHistoricalIndex:!1,documentsIndexed:0})})},SEARCH_INDEXING:function(e){var t=g(e.searchId);t.isIndexing=!0,t.isHistoricalIndexing=!0,t.isSearching=!1},SEARCH_FINISH:function(e){var t=g(e.searchId);t.isSearching=!1,t.isIndexing=!1,t.isHistoricalIndexing=e.doingHistoricalIndex,t.searchFetcher=null,t.totalResults=e.totalResults,t.hasError=e.hasError,t.analyticsId=e.analyticsId,t.documentsIndexed=null!=e.documentsIndexed?e.documentsIndexed:0,t.showNoResultsAlt=Math.random()<m;var n=t.query;if(n){var a=(0,s.createASTHighlighter)(n.content||""),o=0;t.searchResults=(0,r.default)(e.messages).map(function(e){return e.map(function(e){return u.default.create(e,a)})}).map(function(e){return e.filter(function(e){var t=p.default.isBlocked(e.message.author.id);return t&&e.hit&&o++,!t||e.hit})}).value(),t.resultsBlocked=o}else t.hasError=!0},SEARCH_EDITOR_STATE_CLEAR:N,SEARCH_ENSURE_SEARCH_STATE:function(e){var t=e.searchId;t&&g(t)},SEARCH_EDITOR_STATE_CHANGE:function(e){var t=e.searchId,n=e.editorState;g(t).editorState=n},SEARCH_SET_SHOW_BLOCKED_RESULTS:function(e){var t=e.searchId,n=e.showBlocked;g(t).showBlockedResults=n},CHANNEL_SELECT:function(e){var t=e.guildId,n=e.channelId,r=t||n;if(r===A)return!1;r&&!y[r]&&g(r),A=r},CHANNEL_TOGGLE_SECTION:function(e){return null!=A&&N({searchId:A})},SEARCH_CLEAR_HISTORY:function(e){var t=e.searchId;null==t?(o.default.remove(T),O={}):(delete O[t],o.default.set(T,{history:O}))},LOGOUT:function(e){return o.default.remove(T),void(O={})},CONNECTION_OPEN:function(e){Object.keys(y).forEach(function(e){null!=y[e]&&(y[e].searchType=E(e))})},SEARCH_MODAL_OPEN:function(e){_=!0},SEARCH_MODAL_CLOSE:function(e){_=!1},USER_SETTINGS_UPDATE:function(e){return C()},I18N_LOAD_SUCCESS:function(e){return C()}});t.default=R},5891:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=f(n(5880)),i=n(819),l=f(n(6477)),s=f(n(6488)),u=f(n(6489)),d=f(n(6495)),c=f(n(5252));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=p(d.default,{}),v=p(u.default,{}),m=p(s.default,{}),y=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=r.prototype;return s.renderSearch=function(){var e=this.props,t=e.guildId,n=e.channelId;return null!=n?p(l.default,{className:c.default.search},t||n):null},s.renderToolbar=function(){var e=this.props,t=e.isGuest,n=e.renderToolbar,r=null!=n?n():null;return i.isMobile?null:p(a.Fragment,{},void 0,r,this.renderSearch(),h,t?null:v,m)},s.renderOverlayToolbar=function(){var e=this.props.renderToolbar;return null!=e?e():null},s.renderLoggedOut=function(){var e=this.props,t=e.children,n=e.className;return p(o.default,{className:n},void 0,t)},s.renderLoggedIn=function(){var e=this.props,t=e.children,n=e.className,r=e.transparent;return p(o.default,{className:n,toolbar:__OVERLAY__?this.renderOverlayToolbar():this.renderToolbar(),transparent:r},void 0,t)},s.render=function(){return this.props.isAuthenticated?this.renderLoggedIn():this.renderLoggedOut()},r}(a.Component);y.displayName="HeaderBarContainer",y.Title=o.default.Title,y.Icon=o.default.Icon,y.Divider=o.default.Divider,y.defaultProps={isAuthenticated:!0,transparent:!1};var _=y;t.default=_},5893:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SearchBarIcon=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=h(n(17)),i=h(n(163)),l=h(n(305)),s=h(n(231)),u=h(n(302)),d=n(113),c=n(0),f=h(n(10)),p=h(n(5271));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=Object.freeze({SMALL:p.default.small,MEDIUM:p.default.medium,LARGE:p.default.large}),y=(0,i.default)({INHERITED:null,DARK:null,LIGHT:null}),_=function(e){var t,n,r,a=e.hasContent,i=e.onClear,l=e.className,d=e.themeMode,c=void 0===d?y.INHERITED:d,f=e.size,h=void 0===f?m.SMALL:f;return v(s.default,{className:(0,o.default)(l,p.default.iconLayout,h,(t={},t[p.default.darkTheme]=c===y.DARK,t[p.default.lightTheme]=c===y.LIGHT,t[p.default.clear]=a,t)),onClick:function(e){e.stopPropagation(),null!=i&&i(e)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},void 0,v("div",{className:p.default.iconContainer},void 0,v(u.default,{name:u.default.Names.SEARCH,className:(0,o.default)((n={},n[p.default.icon]=!0,n[p.default.visible]=!a,n))}),v(u.default,{name:u.default.Names.CLOSE,className:(0,o.default)((r={},r[p.default.icon]=!0,r[p.default.visible]=a,r))})))};t.SearchBarIcon=_,_.displayName="SearchBarIcon";var g=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).ref=a.createRef(),t.handleKeyDown=function(e){var n=t.props,r=n.onActivate,a=n.onQueryChange,o=t.ref.current;if(null!=o&&null==r)return e.keyCode===c.KeyboardKeys.ESCAPE&&o.value&&o.value.length>0?(o.value="",void(null!=a&&a(""))):void(t.props.gridResults?t.handleKeyDownGrid(e):t.handleKeyDownList(e));e.keyCode!==c.KeyboardKeys.TAB&&null!=r&&r(e)},t.handleChange=function(e){var n=t.props.onQueryChange;null!=n&&n(e.currentTarget.value)},t.handleFocus=function(e){var n=t.props.onFocus;null!=n&&n(e)},t.handleClear=function(){var e=t.props.onClear,n=t.ref.current;null!=e&&e(),null!=n&&n.focus()},t.handleRemoveTag=function(e){var n=t.props.onRemoveTag;n&&n(e)},t.focus=function(){var e=t.ref.current;null!=e&&e.focus()},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){var e=this.props.subscribeToFocusEvent;e&&d.ComponentDispatch.subscribe(e,this.focus)},i.componentWillUnmount=function(){var e=this.props.subscribeToFocusEvent;e&&d.ComponentDispatch.unsubscribe(e,this.focus)},i.handleKeyDownGrid=function(e){var t=this.props,n=t.selectedRow,r=t.selectedColumn,a=t.sections,o=t.query,i=t.tags,l=t.onSelectionChange,s=t.onSelect,u=t.onRemoveTag;if(0!==a.length){switch(e.keyCode){case c.KeyboardKeys.BACKSPACE:(null==o||0===o.length)&&null!=i&&i.length>0&&(e.preventDefault(),e.stopPropagation(),u&&u(i.length-1));break;case c.KeyboardKeys.TAB:if(c.EnableAccessibility)break;case c.KeyboardKeys.ARROW_DOWN:e.preventDefault(),e.stopPropagation(),-1===n?(n=0,r=0):((n+=1)>=a.length&&(n=a.length-1),r>=a[n]&&(r=a[n]-1));break;case c.KeyboardKeys.ARROW_UP:e.preventDefault(),e.stopPropagation(),(n-=1)<0?(n=0,r=0):r>=a[n]&&(r=a[n]-1);break;case c.KeyboardKeys.ARROW_LEFT:e.preventDefault(),e.stopPropagation(),-1===n&&(n=0),(r-=1)<0&&((n-=1)>=0?r=a[n]-1:n<0&&(n=0,r=0));break;case c.KeyboardKeys.ARROW_RIGHT:e.preventDefault(),e.stopPropagation(),-1===n&&(n=0),(r+=1)>=a[n]&&(r=0,(n+=1)>=a.length&&(r=a[n=a.length-1]-1));break;case c.KeyboardKeys.ENTER:if(e.preventDefault(),e.stopPropagation(),-1===n&&(n=0),-1===r&&(r=0),n>=a.length||r>=a[n])return;return void(null!=s&&s(n,r,e));case c.KeyboardKeys.ESCAPE:return e.preventDefault(),e.stopPropagation(),void(null!=s&&s(null,null,e));default:return}null!=l&&l(n,r)}},i.handleKeyDownList=function(e){var t=this.props,n=t.sections,r=t.selectedSection,a=t.selectedRow,o=t.onSelect,i=t.onSelectionChange,l=t.query,s=t.tags,u=t.onKeyDown,d=this.ref.current;if(null!=u&&u(e),null!=d)switch(e.keyCode){case c.KeyboardKeys.BACKSPACE:(null==l||0===l.length)&&null!=s&&s.length>0&&(e.preventDefault(),e.stopPropagation(),this.props.onRemoveTag&&this.props.onRemoveTag(s.length-1));break;case c.KeyboardKeys.TAB:if(c.EnableAccessibility)break;case c.KeyboardKeys.ARROW_DOWN:e.preventDefault(),e.stopPropagation(),n.length>r&&++a>=n[r]&&(++r>=n.length&&(r=0),a=0),i&&i(r,a);break;case c.KeyboardKeys.ARROW_UP:e.preventDefault(),e.stopPropagation(),--a<0&&(--r<0&&(r=n.length-1),a=n[r]-1),i&&i(r,a);break;case c.KeyboardKeys.ENTER:e.preventDefault(),e.stopPropagation(),n.length>r&&n[r]>a&&o&&o(r,a,e);break;case c.KeyboardKeys.ESCAPE:e.preventDefault(),e.stopPropagation(),o&&o(null,null,e),d.blur()}},i.render=function(){var e,t=this,n=this.props,r=n.autoFocus,i=n.query,s=n.placeholder,d=n.themeMode,c=n.disabled,f=n.onClear,h=n.size,m=n.tags,g=n.onActivate,E=n.className,I=null!=i&&i.length>0,T=[];return null!=m&&m.forEach(function(e,n){return T.push(v(l.default,{className:p.default.tag,onClick:t.handleRemoveTag.bind(t,n)},n,e,v(u.default,{name:u.default.Names.CLOSE,className:p.default.close})))}),v("div",{className:(0,o.default)(E,p.default.container,h,(e={},e[p.default.darkTheme]=d===y.DARK,e[p.default.lightTheme]=d===y.LIGHT,e[p.default.disabled]=c,e))},void 0,v("div",{className:p.default.inner},void 0,T,a.createElement("input",{className:p.default.input,type:"text",ref:this.ref,spellCheck:"false",placeholder:s,value:i,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,disabled:c,autoFocus:r,onMouseDown:g}),f?v(_,{size:h,themeMode:d,hasContent:I,onClear:this.handleClear}):null))},r}(a.Component);g.displayName="SearchBar",g.Sizes=m,g.ThemeModes=y,g.defaultProps={themeMode:y.INHERITED,size:m.SMALL,query:"",sections:[],selectedSection:0,selectedRow:-1,selectedColumn:-1,gridResults:!1,placeholder:f.default.Messages.DM_SEARCH_PLACEHOLDER,disabled:!1,autoFocus:!1};var E=g;t.default=E},5894:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.Item=t.Separator=t.Header=t.Types=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=d(n(17)),i=n(239),l=d(n(231)),s=n(0),u=d(n(5274));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p={SIDE:u.default.side,TOP:u.default.top,TOP_PILL:u.default.topPill};t.Types=p;var h=function(e){var t=e.className,n=e.onClick,r=e.children;return f(l.default,{className:(0,o.default)(u.default.header,t),onClick:n},void 0,r)};t.Header=h,h.displayName="Header";var v=function(e){var t=e.style;return f("div",{className:u.default.separator,style:t})};t.Separator=v,v.displayName="Separator";var m={DEFAULT:"Default",HOVER:"Hover",SELECTED:"Selected"};function y(e,t){if(null==e)return null;var n={};return t===m.SELECTED?(n.backgroundColor=e,n.color=s.Colors.WHITE,n):(t===m.HOVER&&(n.backgroundColor=(0,i.hex2rgb)(e,.1)),n.color=e,n)}var _=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={hover:!1,active:!1},t.handleClick=function(e){var n=t.props,r=n.onClick,a=n.id,o=n.onItemSelect;null!=r?r(e):null!=o&&o(a)},t.handleMouseDown=function(){null!=t.props.color&&t.setState({active:!0})},t.handleMouseUp=function(){t.setState({active:!1})},t.handleMouseOver=function(){t.setState({hover:!0})},t.handleMouseOut=function(){t.setState({hover:!1,active:!1})},t}c(t,e);var n=t.prototype;return n.getStyle=function(){var e=this.props,t=e.color,n=e.id,r=e.selectedItem,a=e.itemType,o=this.state,l=o.hover,s=o.active;return null==t?null:a===p.SIDE?null!=n&&r===n||s?y(t,m.SELECTED):l?y(t,m.HOVER):y(t):a===p.TOP?r===n?{borderColor:t,color:t}:l?{borderColor:(0,i.hex2rgb)(t,.1),color:(0,i.hex2rgb)(t,.6)}:{borderColor:"transparent",color:(0,i.hex2rgb)(t,.4)}:null},n.render=function(){var e,t=this.props,n=t.children,r=t.className,a=t.id,i=t.selectedItem,s=t.color,d=this.props["aria-label"];return f(l.default,{className:(0,o.default)(r,(e={},e[u.default.item]=!0,e[u.default.selected]=null==s&&i===a,e[u.default.themed]=null==s,e)),style:this.getStyle(),onMouseEnter:null!=s?this.handleMouseOver:null,onClick:this.handleClick,onMouseLeave:null!=s?this.handleMouseOut:null,onMouseUp:null!=s?this.handleMouseUp:null,onMouseDown:this.handleMouseDown,"aria-label":d},void 0,n)},t}(a.Component);t.Item=_,_.displayName="Item";var g=function(e){function t(){return e.apply(this,arguments)||this}c(t,e);var n=t.prototype;return n.renderChildren=function(e){var t=this.props,n=t.selectedItem,r=t.onItemSelect,o=t.type,i=void 0===o?p.SIDE:o;return null==e?null:a.cloneElement(e,{selectedItem:n,onItemSelect:r,itemType:i})},n.render=function(){var e=this.props,t=e.className,n=e.children,r=e.type,i=void 0===r?p.SIDE:r,l=e.style;return f("div",{className:(0,o.default)(t,i),style:l},void 0,a.Children.map(n,this.renderChildren,this))},t}(a.Component);g.displayName="TabBar",g.Types=p,g.Header=h,g.Item=_,g.Separator=v;var E=g;t.default=E},5896:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(6)),a=i(n(3)),o=i(n(1));n(0);function i(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={},u={favorites:[],timesFavorited:0};var d=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(e){null!=e&&(u=e).favorites.forEach(function(e){s[e.url]=e})},o.getState=function(){return u},o.getFavorites=function(){return u.favorites},o.shouldShowTooltipOnFavorite=function(){return u.timesFavorited<=2},o.getIsFavorite=function(e){return null!=s[e]},o.getRandomFavorite=function(){return r.default.sample(u.favorites)},a}(a.default.PersistedStore);d.persistKey="GIFFavoritesStore",d.migrations=[function(e){return null==e?{favorites:[],timesFavorited:0}:Array.isArray(e)?{favorites:e,timesFavorited:0}:e},function(e){return Array.isArray(e.favorites)?e:{favorites:[],timesFavorited:0}}];var c=new d(o.default,{GIF_FAVORITE_ADD:function(e){var t=e.gif;if(null!=s[t.url])return!1;u=l({},u,{favorites:[t].concat(u.favorites)}),s[t.url]=t,u.timesFavorited+=1},GIF_FAVORITE_REMOVE:function(e){var t=e.url;if(!delete s[t])return!1;var n=u.favorites,r=n.findIndex(function(e){var n=e.url;return t===n});if(null==r)return!1;u.favorites=n.slice(0,r).concat(n.slice(r+1,n.length))}});t.default=c},5897:function(e,t,n){"use strict";t.__esModule=!0,t.getTierName=function(e){switch(e){case a.PremiumGuildTiers.TIER_1:return o.default.Messages.PREMIUM_GUILD_TIER_1;case a.PremiumGuildTiers.TIER_2:return o.default.Messages.PREMIUM_GUILD_TIER_2;case a.PremiumGuildTiers.TIER_3:return o.default.Messages.PREMIUM_GUILD_TIER_3;case a.PremiumGuildTiers.NONE:return null;default:throw new Error("Not a valid tier type")}},t.getGuildTierFromSubscriberCount=function(e){for(var t=0,n=l;t<n.length;t++){var r=n[t];if(e>=r.amount)return r.tier}return a.PremiumGuildTiers.NONE},t.getNextGuildTierFromSubscriberCount=function(e){for(var t=0,n=l;t<n.length;t++){var r=n[t];if(e>=r.amount)return r.nextTier}return a.PremiumGuildTiers.TIER_1},t.getPremiumGuildSubscriptionMonths=function(e){return(0,r.default)().diff((0,r.default)(e),"months")||1},t.getUserLevel=function(e){for(var t=(0,r.default)().diff(e,"months"),n=0,o=0,i=Object.keys(a.UserPremiumGuildSubscriptionMonths);o<i.length;o++){var l=i[o];t<a.UserPremiumGuildSubscriptionMonths[l]||(n=+l)}return n},t.GuildTierSubscriptionsOrdered=void 0;var r=i(n(4)),a=n(0),o=i(n(10));function i(e){return e&&e.__esModule?e:{default:e}}var l=[{tier:a.PremiumGuildTiers.TIER_3,amount:a.PremiumGuildSubscriptionsRequired[a.PremiumGuildTiers.TIER_3],nextTier:null},{tier:a.PremiumGuildTiers.TIER_2,amount:a.PremiumGuildSubscriptionsRequired[a.PremiumGuildTiers.TIER_2],nextTier:a.PremiumGuildTiers.TIER_3},{tier:a.PremiumGuildTiers.TIER_1,amount:a.PremiumGuildSubscriptionsRequired[a.PremiumGuildTiers.TIER_1],nextTier:a.PremiumGuildTiers.TIER_2}];t.GuildTierSubscriptionsOrdered=l},5898:function(e,t,n){"use strict";t.__esModule=!0,t.getSearchOptionAnswer=function(e){switch(e){case s.SearchTokenTypes.FILTER_FROM:return u.default.Messages.SEARCH_ANSWER_FROM;case s.SearchTokenTypes.FILTER_MENTIONS:return u.default.Messages.SEARCH_ANSWER_MENTIONS;case s.SearchTokenTypes.FILTER_HAS:return u.default.Messages.SEARCH_ANSWER_HAS;case s.SearchTokenTypes.FILTER_BEFORE:case s.SearchTokenTypes.FILTER_ON:case s.SearchTokenTypes.FILTER_AFTER:return u.default.Messages.SEARCH_ANSWER_DATE;case s.SearchTokenTypes.FILTER_IN:return u.default.Messages.SEARCH_ANSWER_IN;case s.SearchTokenTypes.FILTER_FILE_TYPE:return u.default.Messages.SEARCH_ANSWER_FILE_TYPE;case s.SearchTokenTypes.FILTER_FILE_NAME:return u.default.Messages.SEARCH_ANSWER_FILE_NAME}},t.getSearchQueryFromTokens=function(e){var t={};e.forEach(function(e){var n=e.type;if(!s.IS_SEARCH_FILTER_TOKEN.test(n)){switch(n){case s.SearchTokenTypes.ANSWER_BEFORE:case s.SearchTokenTypes.ANSWER_ON:case s.SearchTokenTypes.ANSWER_AFTER:var r=e.getData("start"),a=e.getData("end");return r&&(t.min_id=l.default.fromTimestamp(r)),void(a&&(t.max_id=l.default.fromTimestamp(a)))}var o=function(e){var t=i.default[e],n=t?t.queryKey:null;n||(n="content");return n}(n);null==t[o]&&(t[o]=new Set);var u=t[o];switch(n){case s.SearchTokenTypes.ANSWER_USERNAME_FROM:case s.SearchTokenTypes.ANSWER_USERNAME_MENTIONS:u.add(e.getData("user").id);break;case s.SearchTokenTypes.ANSWER_FILE_TYPE:case s.SearchTokenTypes.ANSWER_FILE_NAME:u.add(e.getMatch(1));break;case s.SearchTokenTypes.ANSWER_IN:u.add(e.getData("channel").id);break;case s.SearchTokenTypes.ANSWER_HAS:u.add(e.getData("has"));break;default:u.add(e.getFullMatch().trim())}}});for(var n=0,r=Object.entries(t);n<r.length;n++){var a=r[n],o=a[0],u=a[1];u instanceof Set&&(t[o]=Array.from(u))}t.content&&(t.content=t.content.join(" ").trim(),t.content||delete t.content);return t},t.getNonTokenQuery=function(e){return e.map(function(e){return e.type===o.default.NON_TOKEN_TYPE?e.getFullMatch():""}).join(" ").trim()},t.getSelectionScope=function(e,t,n){var r,a,o=e.find(function(o,i){return t>=o.start&&t<=o.end&&n>=o.start&&n<=o.end?(e[i+1]&&(a=e[i+1]),!0):(r=o,!1)});if(!o)return null;return{previousToken:r,currentToken:o,nextToken:a,focusOffset:t,anchorOffset:n}},t.getAutocompleteMode=function(e,t){var n,r=e=e||{},a=r.currentToken,i=r.nextToken,l=r.previousToken;if(0===t.length)return{type:s.SearchPopoutModes.EMPTY,filter:null,token:null};if(!a)return{type:s.SearchPopoutModes.FILTER_ALL,filter:null,token:null};if(s.IS_SEARCH_FILTER_TOKEN.test(a.type)){if(!i||i.type===o.default.NON_TOKEN_TYPE)return{type:s.SearchPopoutModes.FILTER,filter:a.type,token:i};if(i&&!s.IS_SEARCH_ANSWER_TOKEN.test(i.type))return{type:s.SearchPopoutModes.FILTER,filter:a.type,token:null}}if(a.type===o.default.NON_TOKEN_TYPE&&l&&s.IS_SEARCH_FILTER_TOKEN.test(l.type))return{type:s.SearchPopoutModes.FILTER,filter:l.type,token:a};a.type===o.default.NON_TOKEN_TYPE&&(n=a);return{type:s.SearchPopoutModes.FILTER_ALL,filter:null,token:n}},t.getFlattenedStringArray=function(e,t){var n=[];return(0,a.default)(e).forEach(function(e){if(e&&e.results.length){var r=e.group;n=n.concat(e.results.map(function(e){var n=e.text;if(t===s.SearchPopoutModes.FILTER_ALL){r=e.group||r;var a=i.default[r];a&&a.key&&(n=a.key+" "+n)}return n}))}}),n.filter(function(e){return e})},t.getTotalResults=function(e){return e.reduce(function(e,t){return t?t.results.length+e:e},0)},t.getQueryFromTokens=function(e){if(!e)return"";return e.map(function(e){return e.getFullMatch()}).join("")},t.tokenizeQuery=function(e){return p.tokenize(e)},t.clearTokenCache=function(){return p.clearCache()},t.showDatePicker=function(e){return f[e]},t.filterHasAnswer=function(e,t){var n=s.IS_SEARCH_FILTER_TOKEN.test(e.type);if(!t&&n||t&&n&&!s.IS_SEARCH_ANSWER_TOKEN.test(t.type))return!1;return!0},t.refreshSearchTokens=function(){(0,i.refreshSearchTokens)(),p.reset(),(0,a.default)(i.default).forOwn(function(e,t){return p.addRule(c({type:t},e))})},t.ShowDatePicker=void 0;var r,a=d(n(6)),o=d(n(5919)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(5899)),l=d(n(116)),s=n(0),u=d(n(10));function d(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=((r={})[s.SearchTokenTypes.FILTER_BEFORE]=!0,r[s.SearchTokenTypes.FILTER_AFTER]=!0,r[s.SearchTokenTypes.FILTER_ON]=!0,r);t.ShowDatePicker=f;var p=new o.default},5899:function(e,t,n){"use strict";t.__esModule=!0,t.getRandomDateShortcut=function(){return o.default.sample(w())},t.refreshSearchTokens=function(){Object.assign(B,(t=[y.default.Messages.SEARCH_ANSWER_HAS_LINK,y.default.Messages.SEARCH_ANSWER_HAS_EMBED,y.default.Messages.SEARCH_ANSWER_HAS_ATTACHMENT,y.default.Messages.SEARCH_ANSWER_HAS_VIDEO,y.default.Messages.SEARCH_ANSWER_HAS_IMAGE,y.default.Messages.SEARCH_ANSWER_HAS_SOUND],(e={})[m.SearchTokenTypes.FILTER_FROM]={regex:P(y.default.Messages.SEARCH_FILTER_FROM),componentType:x.FILTER,key:R(y.default.Messages.SEARCH_FILTER_FROM),validator:j,getAutocompletions:G},e[m.SearchTokenTypes.ANSWER_USERNAME_FROM]={follows:[m.SearchTokenTypes.FILTER_FROM],regex:H,validator:M,mutable:!0,componentType:x.ANSWER,queryKey:"author_id"},e[m.SearchTokenTypes.FILTER_MENTIONS]={regex:P(y.default.Messages.SEARCH_FILTER_MENTIONS),componentType:x.FILTER,key:R(y.default.Messages.SEARCH_FILTER_MENTIONS),validator:j,getAutocompletions:G},e[m.SearchTokenTypes.ANSWER_USERNAME_MENTIONS]={follows:[m.SearchTokenTypes.FILTER_MENTIONS],regex:H,validator:M,mutable:!0,componentType:x.ANSWER,queryKey:"mentions"},e[m.SearchTokenTypes.FILTER_HAS]={regex:P(y.default.Messages.SEARCH_FILTER_HAS),componentType:x.FILTER,key:R(y.default.Messages.SEARCH_FILTER_HAS),getAutocompletions:function(e,n,r){return U(e,r,t)}},e[m.SearchTokenTypes.ANSWER_HAS]={regex:new RegExp("(?:\\s*-?("+t.map(function(e){return v.default.escape(e)}).join("|")+"))","i"),follows:[m.SearchTokenTypes.FILTER_HAS],validator:D,componentType:x.ANSWER,queryKey:"has"},e[m.SearchTokenTypes.FILTER_FILE_TYPE]={regex:P(y.default.Messages.SEARCH_FILTER_FILE_TYPE),key:R(y.default.Messages.SEARCH_FILTER_FILE_TYPE),componentType:x.FILTER},e[m.SearchTokenTypes.ANSWER_FILE_TYPE]={regex:/(?:\s*([^\s]+))/,follows:[m.SearchTokenTypes.FILTER_FILE_TYPE],mutable:!0,componentType:x.ANSWER,queryKey:"attachment_extensions"},e[m.SearchTokenTypes.FILTER_FILE_NAME]={regex:P(y.default.Messages.SEARCH_FILTER_FILE_NAME),key:R(y.default.Messages.SEARCH_FILTER_FILE_NAME),componentType:x.FILTER},e[m.SearchTokenTypes.ANSWER_FILE_NAME]={regex:/(?:\s*([^\s]+)(?=\s))/,follows:[m.SearchTokenTypes.FILTER_FILE_NAME],mutable:!0,componentType:x.ANSWER,queryKey:"attachment_filename"},e[m.SearchTokenTypes.FILTER_BEFORE]={regex:P(y.default.Messages.SEARCH_FILTER_BEFORE),componentType:x.FILTER,key:R(y.default.Messages.SEARCH_FILTER_BEFORE),getAutocompletions:function(e,t,n){return k(e,n,m.SearchTokenTypes.FILTER_BEFORE)}},e[m.SearchTokenTypes.FILTER_ON]={regex:P("("+y.default.Messages.SEARCH_FILTER_ON+"|"+y.default.Messages.SEARCH_FILTER_DURING+")"),componentType:x.FILTER,key:R(y.default.Messages.SEARCH_FILTER_DURING),getAutocompletions:function(e,t,n){return k(e,n,m.SearchTokenTypes.FILTER_ON)}},e[m.SearchTokenTypes.FILTER_AFTER]={regex:P(y.default.Messages.SEARCH_FILTER_AFTER),componentType:x.FILTER,key:R(y.default.Messages.SEARCH_FILTER_AFTER),getAutocompletions:function(e,t,n){return k(e,n,m.SearchTokenTypes.FILTER_AFTER)}},e[m.SearchTokenTypes.ANSWER_BEFORE]={regex:C,follows:[m.SearchTokenTypes.FILTER_BEFORE],componentType:x.ANSWER,mutable:!0,validator:function(e){return b(e,"before")}},e[m.SearchTokenTypes.ANSWER_ON]={regex:C,follows:[m.SearchTokenTypes.FILTER_ON],componentType:x.ANSWER,mutable:!0,validator:function(e){return b(e,"on")}},e[m.SearchTokenTypes.ANSWER_AFTER]={regex:C,follows:[m.SearchTokenTypes.FILTER_AFTER],componentType:x.ANSWER,mutable:!0,validator:function(e){return b(e,"after")}},e[m.SearchTokenTypes.FILTER_IN]={regex:P(y.default.Messages.SEARCH_FILTER_IN),componentType:x.FILTER,key:R(y.default.Messages.SEARCH_FILTER_IN),validator:F,getAutocompletions:function(e,t,n){"#"===e[0]&&(e=e.substring(1));var r=h.default.queryChannels(e,t,1/0).map(function(e){var t=e.channel;return t});if(!e.trim()){var a=d.default.getChannelId(t),i=r.find(function(e){return e.id===a});i&&(r.splice(r.indexOf(i),1),r.unshift(i))}var s=l.default.getTextChannelNameDisambiguations(t);return(0,o.default)(r).take(n).map(function(e){return{text:""+s[e.id].name,channel:e}}).value()}},e[m.SearchTokenTypes.ANSWER_IN]={regex:/(?:\s*#?([^ ]+))/i,mutable:!0,follows:[m.SearchTokenTypes.FILTER_IN],componentType:x.ANSWER,validator:L,queryKey:"channel_id"},e));var e,t},t.getFilterAutocompletions=function(e,t){void 0===t&&(t=Object.keys(B).length);return(0,o.default)(Object.keys(B)).filter(function(e){return m.IS_SEARCH_FILTER_TOKEN.test(e)}).filter(function(e){return B[e].key}).map(function(e){return{token:e,text:B[e].key}}).filter(function(t){var n=t.text;return(0,r.default)(e.toLowerCase(),n)}).take(t).value()},t.default=t.ComponentTypes=void 0;var r=_(n(5887)),a=_(n(163)),o=_(n(6)),i=_(n(4)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(99)),s=_(n(87)),u=_(n(5890)),d=_(n(50)),c=_(n(160)),f=_(n(306)),p=_(n(14)),h=_(n(5889)),v=_(n(198)),m=n(0),y=_(n(10));function _(e){return e&&e.__esModule?e:{default:e}}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(){return new Set(i.default.months().map(function(e){return e.toLowerCase()}))}function I(){return new Set(i.default.weekdays().map(function(e){return e.toLowerCase()}))}function T(){var e=(new Date).getFullYear();return new Set(o.default.range(2015,e+1).map(function(e){return e.toString()}))}function S(e,t){return[e,e.clone().add(1,t)]}function O(e,t){return void 0===t&&(t=0),S((0,i.default)().startOf(e).add(t,e),e)}function A(e,t,n){return S((0,i.default)(e,t).local(),n)}function N(){var e;return(e={})[y.default.Messages.SEARCH_SHORTCUT_TODAY]=function(){return O("day")},e[y.default.Messages.SEARCH_SHORTCUT_YESTERDAY]=function(){return O("day",-1)},e[y.default.Messages.SEARCH_SHORTCUT_WEEK]=function(){return O("week")},e[y.default.Messages.SEARCH_SHORTCUT_MONTH]=function(){return O("month")},e[y.default.Messages.SEARCH_SHORTCUT_YEAR]=function(){return O("year")},e}var C=new RegExp("(?:\\s*(([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})|([0-9]{4})-([0-9]{1,2})|\\d{4}|([a-z]+)))","i");function R(e){return e+":"}function P(e){return new RegExp(R(e),"i")}function M(e){var t;return!!(t=e.getMatch(1)===m.ME?p.default.getCurrentUser():p.default.findByTag(e.getMatch(2),e.getMatch(3)))&&(e.setData("user",t),!0)}function b(e,t){var n,r,a=e.getFullMatch().trim().toLowerCase(),o=N()[a];if(null!=o){var i=o();n=i[0],r=i[1]}else if(E().has(a)){var l=A(a,"MMMM","month");n=l[0],r=l[1]}else if(I().has(a)){var s=A(a,"dddd","day");n=s[0],r=s[1]}else if(T().has(a)){var u=A(a,"YYYY","year");n=u[0],r=u[1]}else{var d=A(a,m.SEARCH_DATE_FORMAT,"day");n=d[0],r=d[1]}return!(!n.isValid()||!r.isValid())&&("before"===t?(r=n,n=null):"after"===t&&(n=r,r=null),e.setData("start",n),e.setData("end",r),!0)}function L(e){var t=e.getMatch(1),n=c.default.getGuildId(),r=l.default.getChannels(n)[l.GUILD_SELECTABLE_CHANNELS_KEY],a=l.default.getTextChannelNameDisambiguations(n),i=o.default.chain(r).map(function(e){return e.channel}).find(function(e){return t===a[e.id].name}).value();return!!i&&(e.setData("channel",i),!0)}function D(e){var t,n=(t={},t[y.default.Messages.SEARCH_ANSWER_HAS_LINK]="link",t[y.default.Messages.SEARCH_ANSWER_HAS_EMBED]="embed",t[y.default.Messages.SEARCH_ANSWER_HAS_ATTACHMENT]="file",t[y.default.Messages.SEARCH_ANSWER_HAS_VIDEO]="video",t[y.default.Messages.SEARCH_ANSWER_HAS_IMAGE]="image",t[y.default.Messages.SEARCH_ANSWER_HAS_SOUND]="sound",t)[e.getMatch(1)];return!!n&&(e.setData("has",n),!0)}function w(){return[].concat(Array.from(E()),Array.from(I()),Array.from(T()),Object.keys(N()))}function k(e,t,n){return U(e,t,w()).map(function(e){return g({},e,{group:n,key:n+"-"+e.text})})}function U(e,t,n){return(0,o.default)(n).filter(function(t){return(0,r.default)(e.toLocaleLowerCase(),t.toLowerCase())}).take(t).map(function(e){return{text:e}}).value()}function G(e,t,n,r){void 0===n&&(n=10),void 0===r&&(r=!1);var a,o=u.default.getSearchType(t);switch(e=e.split("#")[0],o){case m.SearchTypes.GUILD:a=h.default.queryGuildUsers;break;case m.SearchTypes.CHANNEL:a=h.default.queryChannelUsers;break;default:return[]}return a(t,e,n,r).filter(function(e){var t=e.user;return!s.default.isBlocked(t.id)}).map(function(e){var t=e.user;return{text:t.tag,user:t}})}function F(){return u.default.getSearchType()===m.SearchTypes.GUILD}function j(){return!f.default.hidePersonalInformation}var H=/^(?:\s*(@me|([^@#:]+)#([0-9]{4})))/i,x=(0,a.default)({FILTER:null,ANSWER:null});t.ComponentTypes=x;var B={};var V=B;t.default=V},5900:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(6)),a=l(n(3)),o=l(n(1)),i=l(n(23));n(0);function l(e){return e&&e.__esModule?e:{default:e}}var s=null,u={};var d=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(){this.waitFor(i.default)},o.getOptimalRegion=function(e){void 0===e&&(e=null);var t=this.getRegions(e);return null!=t?t.find(function(e){return e.optimal})||r.default.sample(t):null},o.getOptimalRegionId=function(e){void 0===e&&(e=null);var t=this.getOptimalRegion(e);return null!=t?t.id:null},o.getRandomRegion=function(e){void 0===e&&(e=null);var t=this.getRegions(e);return null!=t?r.default.sample(t):null},o.getRandomRegionId=function(e){void 0===e&&(e=null);var t=this.getRandomRegion(e);return null!=t?t.id:null},o.getRegions=function(e){return null!=e?u[e]:s},a}(a.default.Store))(o.default,{LOAD_REGIONS:function(e){var t=r.default.sortBy(e.regions,function(e){return e.name});e.guildId?u[e.guildId]=t:s=t},GUILD_DELETE:function(e){delete u[e.guild.id]}});t.default=d},5901:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=p(n(6)),a=p(n(3)),o=p(n(1)),i=p(n(11)),l=p(n(20)),s=p(n(159)),u=p(n(309)),d=p(n(50)),c=p(n(237)),f=n(0);function p(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v={},m={},y={},_={};function g(e){switch(e){case"null":case null:case void 0:return null;default:return e}}function E(e){var t,n,r,a=g(e),o=!1,i=!1,l=0,s=0,d=_[a];(null==d&&(I(),d=_[a]||new Set),d.forEach(function(e){null!==a&&(i=i||!c.default.isGuildOrCategoryOrChannelMuted(a,e)&&u.default.hasUnread(e),s+=u.default.getUnreadCount(e)),l+=u.default.getMentionCount(e)}),i)?null==a||v[a]||(v=h({},v,((t={})[a]=!0,t)),o=!0):null!=a&&v[a]&&(delete(v=h({},v))[a],o=!0);null!=a&&y[a]!==s&&(y=h({},y,((n={})[a]=s,n)),o=!0);m[a]!==l&&(m=h({},m,((r={})[a]=l,r)),o=!0);return o}function I(){_={},r.default.forEach(l.default.getChannels(),function(e){if(e.type!==f.ChannelTypes.GUILD_VOICE&&(e.isPrivate()||s.default.can(f.Permissions.VIEW_CHANNEL,{channelId:e.id}))){var t=e.getGuildId(),n=_[t];null==n&&(n=new Set,_[t]=n),n.add(e.id)}})}function T(e){return I(),E(e)}function S(e,t){var n=l.default.getChannel(e);if(null!=n)return t(g(n.getGuildId()));for(var r=0,a=Object.keys(_);r<a.length;r++){var o=a[r];if(_[o].has(e))return t(g(o))}return!1}function O(e){var t=e.guilds;v={},m={},y={},I(),E(null),t.forEach(function(e){return E(e.id)})}function A(e){return S(e.channelId,E)}function N(e){return S(e.channel.id,T)}function C(e){return T(e.guildId)}var R=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(){this.waitFor(l.default,d.default,u.default,s.default,i.default,c.default)},o.hasAnyUnread=function(){return Object.keys(v).length>0},o.getUnreadGuilds=function(){return v},o.getGuildUnreadCount=function(e){return void 0===e?0:y[e]||0},o.hasUnread=function(e){return v[e]||!1},o.getMentionCounts=function(){return m},o.getUnreadGuildsIgnoreMuted=function(e){var t=_[e];return null!=t&&Array.from(t).some(function(e){return u.default.hasUnread(e)})},o.getTotalMentionCount=function(){return(0,r.default)(m).values().sum()},a}(a.default.Store))(o.default,{CONNECTION_OPEN:O,OVERLAY_INITIALIZE:O,GUILD_CREATE:function(e){return T(e.guild.id)},GUILD_DELETE:function(e){var t=e.guild;null!=v[t.id]&&delete(v=h({},v))[t.id],null!=y[t.id]&&delete(y=h({},y))[t.id],null!=m[t.id]&&delete(m=h({},m))[t.id],delete _[t.id]},MESSAGE_CREATE:A,MESSAGE_ACK:A,UPDATE_CHANNEL_DIMENSIONS:A,CHANNEL_SELECT:function(e){return E(e.guildId)},CHANNEL_DELETE:function(e){var t=e.channel;return S(t.id,function(e){return _[e].delete(t.id),E(e)})},WINDOW_FOCUS:function(e){return null!=(t=d.default.getChannelId())&&S(t,E);var t},GUILD_ACK:function(e){return E(e.guildId)},GUILD_ROLE_CREATE:C,GUILD_ROLE_DELETE:C,GUILD_ROLE_UPDATE:C,CHANNEL_CREATE:N,CHANNEL_UPDATE:N,GUILD_MEMBER_UPDATE:function(e){var t=e.user,n=e.guildId;return t.id===i.default.getId()&&T(n)},USER_GUILD_SETTINGS_UPDATE:function(e){Object.keys(v).forEach(E)}});t.default=R},5902:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.InLibraryPrice=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=u(n(17)),i=u(n(302)),l=u(n(10)),s=u(n(5254));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c=Object.freeze({DIRECTORY_HERO:1,DIRECTORY_TILE:2,DIRECTORY_SEARCH:3,LISTING:4,EMBED:5}),f=Object.freeze({IN_LIBRARY:1,ON_SALE:2,PREMIUM:3,DEFAULT:4,ENTITLEMENT_BRANCH:5}),p=function(e){var t=e.className;return d("div",{className:(0,o.default)(s.default.row,t)},void 0,d(i.default,{className:s.default.icon,name:i.default.Names.LIBRARY}),l.default.Messages.APPLICATION_STORE_IN_LIBRARY)};t.InLibraryPrice=p,p.displayName="InLibraryPrice";var h=function(e){var t=e.sku,n=e.className;return d("div",{className:(0,o.default)(s.default.row,n)},void 0,d(i.default,{className:s.default.icon,name:i.default.Names.NITRO_WHEEL}),t.getDisplayPrice())};h.displayName="PremiumPrice";var v=function(e){var t=e.sku,n=e.className;return d("div",{className:(0,o.default)(s.default.salePercentage,n)},void 0,t.getDisplaySalePercentage())};v.displayName="SalePercent";var m=function(e){var t=e.sku,n=e.className;return d("div",{className:(0,o.default)(s.default.originalAmount,n)},void 0,t.getDisplayPrice(!1))};m.displayName="OriginalAmount";var y=function(e){var t=e.sku;return d("div",{className:e.className},void 0,t.getDisplayPrice())};y.displayName="Price";var _=function(e){var t=e.sku,n=e.className;return d("div",{className:(0,o.default)(s.default.row,n)},void 0,d(v,{sku:t}),d(m,{sku:t}),d(y,{sku:t}))};_.displayName="InlineSale";var g=function(e){return d("div",{className:e.className},void 0,l.default.Messages.APPLICATION_STORE_FREE)};g.displayName="EntitlementBranchPrice";var E=d(g,{}),I=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getState=function(){var e=this.props,t=e.inLibrary,n=e.sku;return e.hasEntitlementBranch?f.ENTITLEMENT_BRANCH:t?f.IN_LIBRARY:n.available?n.premium?f.PREMIUM:n.isOnSale?f.ON_SALE:null!=n.getPrice()?f.DEFAULT:null:f.DEFAULT},i.renderGeneric=function(e,t){var n=this.props,r=n.className,a=n.sku;switch(e){case f.ENTITLEMENT_BRANCH:return d(g,{className:(0,o.default)(t,r)});case f.IN_LIBRARY:return d(p,{className:(0,o.default)(t,r)});case f.PREMIUM:return d(h,{sku:a,className:(0,o.default)(t,r)});case f.ON_SALE:return d(_,{sku:a,className:(0,o.default)(t,r)});default:return d(y,{className:(0,o.default)(t,r),sku:a})}},i.renderDirectoryHero=function(e){var t=this.props,n=t.className,r=t.sku;switch(e){case f.ENTITLEMENT_BRANCH:return d(g,{className:(0,o.default)(n)});case f.PREMIUM:return d(h,{sku:r,className:(0,o.default)(s.default.directoryHeroPricePremium,n)});case f.ON_SALE:return d(_,{sku:r,className:(0,o.default)(s.default.directoryHeroPrice,n)});default:return d(y,{className:(0,o.default)(s.default.directoryHeroPrice,n),sku:r})}},i.renderListing=function(e){var t,n=this.props,r=n.className,i=n.sku;switch(e){case f.ENTITLEMENT_BRANCH:t=E;break;case f.ON_SALE:t=d(a.Fragment,{},void 0,d("div",{className:s.default.row},void 0,d(y,{sku:i}),d(v,{sku:i})),d(m,{sku:i}));break;default:t=d(y,{sku:i})}return d("div",{className:(0,o.default)(s.default.listingPrice,r)},void 0,t)},i.render=function(){var e=this.getState();if(null==e)return null;switch(this.props.type){case c.DIRECTORY_HERO:return this.renderDirectoryHero(e);case c.DIRECTORY_TILE:return this.renderGeneric(e,s.default.directoryTilePrice);case c.DIRECTORY_SEARCH:return this.renderGeneric(e,s.default.directorySearchPrice);case c.LISTING:return this.renderListing(e);case c.EMBED:return this.renderGeneric(e,s.default.embedPrice);default:throw new Error("Invalid Price Unit Type")}},r}(a.PureComponent);I.displayName="PriceUnit",I.Types=c;var T=I;t.default=T},5905:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SearchIcon=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=c(n(17)),i=c(n(231)),l=c(n(302)),s=c(n(427)),u=c(n(10)),d=c(n(5276));function c(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=Object.freeze({SMALL:d.default.small,MEDIUM:d.default.medium,LARGE:d.default.large}),v=function(e){var t,n,r,u=e.hasContent,c=e.onClear,f=e.className,v=e.isLoading,m=e.size,y=void 0===m?h.SMALL:m;return p(i.default,{className:(0,o.default)(f,d.default.iconLayout,y,(t={},t[d.default.pointer]=u,t)),onClick:function(e){e.stopPropagation(),null!=c&&c(e)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},void 0,p("div",{className:d.default.iconContainer},void 0,v?p(s.default,{type:s.default.Type.SPINNING_CIRCLE,className:(0,o.default)(d.default.icon,d.default.visible)}):p(a.Fragment,{},void 0,p(l.default,{name:l.default.Names.SEARCH,className:(0,o.default)(d.default.icon,(n={},n[d.default.visible]=!u,n))}),p(l.default,{name:l.default.Names.CLOSE,className:(0,o.default)(d.default.clear,(r={},r[d.default.visible]=u,r))}))))};t.SearchIcon=v,v.displayName="SearchIcon",v.Sizes=h;var m=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).inputRef=a.createRef(),t.handleOnChange=function(e){var n=t.props.onChange;n&&n(e.currentTarget.value)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.focus=function(){var e=this.inputRef.current;null!=e&&e.focus()},i.blur=function(){var e=this.inputRef.current;null!=e&&e.blur()},i.render=function(){var e,t=this.props,n=t.query,r=t.autoFocus,i=t.onClear,l=t.className,s=t.placeholder,u=t.iconClassName,c=t.onKeyDown,h=t.onKeyUp,m=t.onKeyPress,y=t.isLoading,_=t.size,g=t.disabled,E=(t.onChange,t.onBlur),I=t.onFocus,T=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["query","autoFocus","onClear","className","placeholder","iconClassName","onKeyDown","onKeyUp","onKeyPress","isLoading","size","disabled","onChange","onBlur","onFocus"]);return a.createElement("div",f({className:(0,o.default)(l,d.default.container,_,(e={},e[d.default.disabled]=g,e))},T),p("div",{className:d.default.inner},void 0,a.createElement("input",{onFocus:I,onBlur:E,className:d.default.input,value:n,onChange:this.handleOnChange,onKeyDown:c,onKeyUp:h,onKeyPress:m,placeholder:s,disabled:g,autoFocus:r,ref:this.inputRef}),p(v,{size:_,hasContent:n.length>0,onClear:i,className:u,isLoading:y})))},r}(a.PureComponent);m.displayName="SearchBar",m.Sizes=h,m.defaultProps={size:h.SMALL,placeholder:u.default.Messages.SEARCH,isLoading:!1,disabled:!1};var y=m;t.default=y},5908:function(e,t,n){"use strict";t.__esModule=!0,t.PageSizes=t.PAGE_WIDTH_THRESHOLD=void 0;t.PAGE_WIDTH_THRESHOLD=1e3;var r=Object.freeze({SMALL:"small",LARGE:"large"});t.PageSizes=r},5912:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(3)),a=u(n(1)),o=u(n(5904)),i=u(n(50)),l=u(n(436)),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=null,f=!1;function p(e){var t=e.link;c=t}var h=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,s,u,p=r.prototype;return p.initialize=function(){this.waitFor(o.default,l.default,i.default)},p.getHomeLink=function(){return c||o.default.defaultRoute},a=r,(s=[{key:"hasHandledRedirect",get:function(){return f}}])&&d(a.prototype,s),u&&d(a,u),r}(r.default.Store))(a.default,{OVERLAY_INITIALIZE:function(e){return t=l.default.getPrivateChannelIds(),void(((n=i.default.getChannelId(s.ME))||t[0])&&(c=s.Routes.CHANNEL(s.ME,n||t[0])));var t,n},APP_VIEW_SET_HOME_LINK:p,ACTIVITY_FEED_HANDLE_REDIRECT:function(e){f=!0},APPLICATION_STORE_LOCATION_CHANGE:function(e){p({link:e.location.pathname})},APPLICATION_STORE_RESET_NAVIGATION:function(e){return function(){if(null==c||!c.startsWith(s.Routes.APPLICATION_STORE))return!1;c=s.Routes.APPLICATION_STORE}()},CHANNEL_SELECT:function(e){var t=e.guildId,n=e.channelId;if(null==t&&null!=n){var r=s.Routes.CHANNEL(s.ME,n);if(r!==c)return c=r,!0}return!1}});t.default=h},5913:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(3)),a=s(n(1)),o=n(808),i=s(n(821)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u=null;function d(e){(u=e.requiredAction)===l.UserRequiredActions.REQUIRE_CAPTCHA||u===l.UserRequiredActions.REQUIRE_VERIFIED_EMAIL||u===l.UserRequiredActions.REQUIRE_VERIFIED_PHONE?(0,o.pushLayer)(l.Layers.VERIFICATION):i.default.hasLayers()&&null==u&&(0,o.popLayer)()}var c=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.hasAction=function(){return null!=u},a.getAction=function(){return u},r}(r.default.Store))(a.default,{CONNECTION_OPEN:d,USER_REQUIRED_ACTION_UPDATE:d});t.default=c},5916:function(e,t,n){"use strict";t.__esModule=!0,t.trackSearchStart=m,t.trackSearchResultViewed=y,t.search=function(e,t,n){void 0===n&&(n=!1);""===e?E():(i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY,query:e}),n?_(e,t):g(e,t))},t.fetchSuggestions=function(e){if(""===e||null==e)return;o.default.get({url:f.Endpoints.GIFS_SUGGEST,query:{q:e,provider:f.GIFProviders.TENOR,limit:5,locale:s.default.locale}}).then(function(t){var n=t.body;i.default.dispatch({type:f.ActionTypes.GIF_PICKER_SUGGESTIONS_SUCCESS,query:e,items:n})})},t.resetSearch=E,t.trackSelectGIF=function(e){var t=e.type,n=e.index,r=e.offset,a=e.limit,i=e.results,s=e.totalResults,d=e.query,p=e.gifId,v=(0,c.calculateAnalyticsMetadata)(u.default.getAnalyticsID(),t,{offset:r,limit:a,results:i,totalResults:s});l.default.trackWithMetadata(f.AnalyticEvents.SEARCH_RESULT_SELECTED,h({},v,{index_num:n,source_object:"GIF Picker"})),null!=p&&o.default.post({url:f.Endpoints.GIFS_SELECT,body:{id:p,q:d}})},t.initializeSearch=function(){var e=a.default.v4().replace(v,"");l.default.trackWithMetadata(f.AnalyticEvents.SEARCH_OPENED,{search_type:f.SearchTypes.GIF,load_id:e}),i.default.dispatch({type:f.ActionTypes.GIF_PICKER_INITIALIZE,analyticsID:e})},t.fetchTrending=function(){o.default.get({url:f.Endpoints.GIFS_TRENDING,query:{provider:f.GIFProviders.TENOR,locale:s.default.locale}}).then(function(e){var t=e.body,n=t.categories,r=t.gifs;i.default.dispatch({type:f.ActionTypes.GIF_PICKER_TRENDING_FETCH_SUCCESS,trendingCategories:n,trendingGIFPreview:r[0]})})},t.fetchTrendingGIFs=function(){var e=Date.now();m(f.GIFPickerResultTypes.TRENDING_GIFS),o.default.get({url:f.Endpoints.GIFS_TRENDING_GIFS,query:{media_format:u.default.getSelectedFormat(),provider:f.GIFProviders.TENOR,locale:s.default.locale}}).then(function(t){var n=t.body;y(n,f.GIFPickerResultTypes.TRENDING_GIFS,{startTime:e}),i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY_SUCCESS,items:n})},function(){i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY_FAILURE})})},t.addFavoriteGIF=function(e){i.default.dispatch({type:f.ActionTypes.GIF_FAVORITE_ADD,gif:e}),d.default.track(f.AnalyticEvents.GIF_FAVORITED)},t.removeFavoriteGIF=function(e){i.default.dispatch({type:f.ActionTypes.GIF_FAVORITE_REMOVE,url:e}),d.default.track(f.AnalyticEvents.GIF_UNFAVORITED)};var r=p(n(6)),a=p(n(135)),o=p(n(9)),i=p(n(1)),l=p(n(191)),s=p(n(42)),u=p(n(5953)),d=p(n(18)),c=n(6389),f=n(0);function p(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=/-/g;function m(e){var t,n=null!=e?((t={})[e]=1,t):{};l.default.trackWithMetadata(f.AnalyticEvents.SEARCH_STARTED,{search_type:f.SearchTypes.GIF,load_id:u.default.getAnalyticsID(),num_modifiers:Object.keys(n).length,modifiers:n})}function y(e,t,n){void 0===n&&(n={});var r=n,a=r.startTime,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(r,["startTime"]),i={offset:0,limit:null,totalResults:e.length},s=(0,c.calculateAnalyticsMetadata)(u.default.getAnalyticsID(),t,h({},i,o,{results:e})),d=null==a?{}:{load_duration_ms:Date.now()-a};l.default.trackWithMetadata(f.AnalyticEvents.SEARCH_RESULT_VIEWED,h({},s,d))}function _(e,t){var n=Date.now();m(t),o.default.get({url:f.Endpoints.GIFS_SEARCH,query:{q:e,media_format:u.default.getSelectedFormat(),provider:f.GIFProviders.TENOR,locale:s.default.locale}}).then(function(r){var a=r.body;y(a,t,{startTime:n}),i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY_SUCCESS,query:e,items:a})},function(){return i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY_FAILURE,query:e})})}var g=r.default.debounce(_,250);function E(){i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY,query:""})}},5917:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=c(n(17)),i=c(n(131)),l=c(n(5849)),s=c(n(302)),u=c(n(5247)),d=c(n(5294));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t,n){return f("div",{className:t},n,e)}p.displayName="defaultRenderMoreUsers";var h=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).defaultRenderUser=function(e,n,r,a){var s=t.props,c=s.onClick,p=s.size,h=e instanceof i.default?e:null!=e?e.user:null;return null==h?f("div",{className:(0,o.default)(d.default.emptyUser,n)},r):f(l.default,{src:h.getAvatarURL("png"),size:p,className:(0,o.default)(n,u.default.cursorPointer),onClick:function(e){return null!=c?c(e,h,t._ref):null}},h.id)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var c=r.prototype;return c.renderUsers=function(){for(var e=this.props,t=e.users,n=e.max,r=e.renderUser,a=void 0===r?this.defaultRenderUser:r,o=e.renderMoreUsers,i=[],l=t.length===n?t.length:n-1,s=0;s<l&&s<t.length;){var u=s===t.length-1;i.push(a(t[s]||null,u?null:d.default.avatarMasked,"user-"+s,u)),s++}if(s<t.length){var c=Math.min(t.length-s,99);i.push(o("+"+c,d.default.moreUsers,"more-users",c))}return i},c.renderIcon=function(){return this.props.icon?f("div",{className:d.default.iconContainer},void 0,f(s.default,{name:s.default.Names.SPEAKER,width:16,height:16,foreground:d.default.foreground,className:d.default.icon})):null},c.render=function(){var e=this,t=this.props.className;return a.createElement("div",{className:(0,o.default)(t,d.default.container),ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e._ref=t})},this.renderIcon(),this.renderUsers())},r}(a.PureComponent);h.displayName="VoiceUserSummaryItem",h.defaultProps={max:10,renderMoreUsers:p,size:l.default.Sizes.XSMALL};var v=h;t.default=v},5918:function(e,t,n){"use strict";t.__esModule=!0,t.GIFAccessoryContext=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)).createContext(function(){return null});t.GIFAccessoryContext=r},5919:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.__esModule=!0,t.default=t.Token=t.QueryTokenizer=t.NON_TOKEN_TYPE=void 0;var a=/.+/g;function o(e,t,n){if(!t)return null;for(var r=0;r<t.length;r++){var a=t[r],o=i(e.match(a.regex),n),l=void 0;if(o){var u=a.cache;if(u&&(l=u.get(o[0]))&&((l=new s(l)).start=o.index),!l){if(l=new s(o,a.type),a.validator&&!a.validator(l))continue;u&&!u.has(o[0])&&u.set(o[0],l)}return l}}return null}function i(e,t){if(!e)return null;var n=[].concat(e);return n.index=t,n}t.NON_TOKEN_TYPE="NON_TOKEN";var l=function(){function e(e,t){var n=this;void 0===e&&(e=[]),this.reset(e,t),e.forEach(function(e){return n.addRule(e)})}var t=e.prototype;return t.reset=function(e){this._rules=[],this._followers={},this._nonTokenType=e||"NON_TOKEN"},t.addRule=function(e){var t,n=this,r=e.type,a=e.follows,o=e.validator,i=e.regex;"^"!==i.source.charAt(0)&&(i=new RegExp("^"+i.source,i.flags)),o&&(t=new Map),a?a.forEach(function(e){n._followers[e]||(n._followers[e]=[]),n._followers[e].push({regex:i,type:r,validator:o,cache:t})}):this._rules.push({regex:i,type:r,validator:o,cache:t})},t.tokenize=function(e){for(var t,n=e,r="",o=0,l=[];n.length;){var u=this._getMatch(n,t,o+r.length);u?(r&&l.push(new s(i(r.match(a),o),this._nonTokenType)),t=u,l.push(u),o+=t.length+r.length,n=n.substring(t.length),r=""):(r+=n[0],n=n.substring(1))}return r&&l.push(new s(i(r.match(a),o),this._nonTokenType)),l},t.clearCache=function(){for(var e in this._rules.forEach(function(e){return e.cache&&e.cache.clear()}),this._followers){this._followers[e].forEach(function(e){return e.cache&&e.cache.clear()})}},t._getMatch=function(e,t,n){var r,a=t?t.type:null;return t&&t.end===n&&(r=o(e,this._followers[a],n)),r||(r=o(e,this._rules,n)),r},e}();t.QueryTokenizer=l;var s=function(){function e(t,n){t instanceof e?(this.match=[].concat(t.match),this.start=t.start,this.type=t.type,t._data&&(this._data=t._data)):(this.match=[].concat(t),this.start=t.index||0,this.type=n)}var t,n,a,o=e.prototype;return o.valueOf=function(){return this.match[0]},o.getFullMatch=function(){return this.match[0]},o.getMatch=function(e){return void 0===e&&(e=0),this.match[e]},o.setData=function(e,t){this._data||(this._data=new Map),this._data.set(e,t)},o.getData=function(e){if(this._data)return this._data.get(e)},t=e,(n=[{key:"end",get:function(){return this.start+this.length}},{key:"length",get:function(){return this.match[0].length}}])&&r(t.prototype,n),a&&r(t,a),e}();t.Token=s,l.NON_TOKEN_TYPE="NON_TOKEN",l.Token=s;var u=l;t.default=u},5922:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.default=void 0;var r,a=f(n(9)),o=f(n(1)),i=f(n(310)),l=f(n(99)),s=f(n(18)),u=(f(n(6340)),f(n(801))),d=f(n(73)),c=n(0);function f(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(t){l.default.addConditionalChangeListener(function(){var n=l.default.getDefaultChannel(t.id);if(null!=n)return e(function(){null!=r?(v(),setTimeout(function(){d.default.push(r,{guild:new i.default(p({},t)),channel:n,source:c.InstantInviteSources.GUILD_CREATE})},1e3)):v()}),!1})}function v(){o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_CLOSE})}r=r=n(5885).default;var m={open:function(e,t,n){switch(void 0===t&&(t=null),void 0===n&&(n=null),o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_OPEN,screen:e}),e){case c.CreateGuildModalScreens.CreateGuild:s.default.track(c.AnalyticEvents.OPEN_MODAL,{Type:"Create Guild Step 2",Source:t,location_section:n});break;case c.CreateGuildModalScreens.JoinGuild:s.default.track(c.AnalyticEvents.OPEN_MODAL,{Type:"Join Guild",Source:t,location_section:n});break;default:s.default.track(c.AnalyticEvents.OPEN_MODAL,{Type:"Create Guild",Source:t,location_section:n})}},setScreen:function(e){o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_SET_SCREEN,screen:e})},close:v,updateTemporaryGuild:function(e){o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_UPDATE,guild:e})},createGuild:function(e,t,n){void 0===n&&(n=null),o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_SUBMIT}),a.default.post({url:c.Endpoints.GUILDS,body:{name:e,region:t,icon:n}}).then(function(e){h(e.body),u.default.transitionToGuildSync(e.body.id)},function(e){return o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_SUBMIT_FAILURE,errors:e.body})})},createGuildPromise:function(e,t,n){return void 0===n&&(n=null),a.default.post({url:c.Endpoints.GUILDS,body:{name:e,region:t,icon:n}}).then(function(e){h(e.body),u.default.transitionToGuildSync(e.body.id)},function(e){throw e.body})},createGuildPromiseSimple:function(e,t,n){return void 0===n&&(n=null),a.default.post({url:c.Endpoints.GUILDS,body:{name:e,region:t,icon:n}}).then(function(e){o.default.dispatch({type:c.ActionTypes.MOBILE_NUF_GUILD_CREATED}),u.default.transitionToGuildSync(e.body.id)})}};t.default=m}).call(this,n(30).setImmediate)},5923:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=B(n(2)),o=x(n(17)),i=x(n(5887)),l=x(n(6)),s=x(n(32)),u=x(n(3)),d=x(n(5990)),c=x(n(6369)),f=x(n(73)),p=B(n(826)),h=x(n(5999)),v=x(n(191)),m=x(n(831)),y=x(n(20)),_=x(n(5896)),g=x(n(99)),E=x(n(6034)),I=x(n(159)),T=x(n(194)),S=x(n(306)),O=x(n(42)),A=x(n(6035)),N=x(n(6370)),C=x(n(158)),R=x(n(427)),P=n(805),M=x(n(18)),b=x(n(5889)),L=n(113),D=x(n(198)),w=n(6374),k=x(n(6036)),U=x(n(6388)),G=x(n(6392)),F=n(0),j=x(n(10)),H=x(n(5297));function x(e){return e&&e.__esModule?e:{default:e}}function B(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Y="@",z="#",$=":",q="+",X="/",Q="COMMAND";function J(e){switch(e.title){case F.ChannelTextAreaIntegrations.GIPHY.title:case F.ChannelTextAreaIntegrations.TENOR.title:return j.default.Messages.COMMAND_GIPHY_DESCRIPTION;default:return""}}var Z=[].concat((0,l.default)(F.ChannelTextAreaIntegrations).values().map(function(e){return W({},e,{isIntegration:!0,horizontal:e.type===F.ChannelTextAreaIntegrationTypes.GIF,description:J(e)})}).value(),[{command:"tts",description:j.default.Messages.COMMAND_TTS_DESCRIPTION,predicate:function(e){return O.default.enableTTSCommand&&(e.isPrivate()||I.default.can(F.Permissions.SEND_TSS_MESSAGES,e))}},{command:"me",description:j.default.Messages.COMMAND_ME_DESCRIPTION},{command:"tableflip",description:j.default.Messages.COMMAND_TABLEFLIP_DESCRIPTION},{command:"unflip",description:j.default.Messages.COMMAND_TABLEUNFLIP_DESCRIPTION},{command:"shrug",description:j.default.Messages.COMMAND_SHRUG_DESCRIPTION},{command:"spoiler",description:j.default.Messages.COMMAND_SPOILER_DESCRIPTION},{command:"nick",description:j.default.Messages.COMMAND_NICK_DESCRIPTION,predicate:function(e){return!e.isPrivate()&&(I.default.can(F.Permissions.CHANGE_NICKNAME,e)||I.default.can(F.Permissions.MANAGE_NICKNAMES,e))}}]),ee=new RegExp("^("+Z.filter(function(e){return e.isIntegration}).map(function(e){return e.command}).join("|")+")\\s(.+)","i");function te(e,t,n,r){var a=n.length>0?e.format({prefix:r(n)}):t;return K(A.default.Title,{title:a},"autocomplete-title-"+a)}function ne(e,t,n,r,o,i,l,s,u,d){if(null==n||0===n.length)return null;var c=n.map(function(e,n){return a.createElement(s,W({onClick:o,onHover:r,selected:t===n,index:n},u(e,n)))});return[te(i,l,e,d),c]}te.displayName="renderHeader";var re=K(A.default.Divider,{},"autocomplete-divider-1"),ae=K(A.default.Divider,{},"autocomplete-divider-2");function oe(e,t,n,r,a,u){var d;return(d={MENTIONS:{matches:function(e,t){return b.default.matchSentinel(e,t,Y)},queryResults:function(t){return b.default.queryMentionResults(t,e,a)},renderResults:function(e,n,r,a,o){var i=o.users,l=o.globals,s=o.roles;if(null==i||null==l||null==s||0===i.length&&0===l.length&&0===s.length)return null;var d=i.map(function(e,o){return K(A.default.User,{onClick:a,onHover:r,selected:n===o,index:o,user:e.user,nick:e.nick,status:e.status,hidePersonalInformation:t,colorblindMode:u},e.user.id)}),c=l.map(function(e,t){return K(A.default.Generic,{onClick:a,onHover:r,selected:n===t+i.length,index:i.length+t,text:e.text,description:e.description},e.text)}),f=s.map(function(e,t){return K(A.default.Role,{onClick:a,onHover:r,selected:n===t+i.length+l.length,index:i.length+l.length+t,role:e},e.id)});return[te(j.default.Messages.MEMBERS_MATCHING,j.default.Messages.MEMBERS,e,function(e){return""+Y+e}),d,i.length>0&&l.length>0?re:null,c,i.length>0&&s.length>0||l.length>0&&s.length>0?ae:null,f]},getText:function(e,n){var r=n.users,a=n.globals,o=n.roles;if(null==r||null==a||null==o)return"";var i=r[e],l=a[e-r.length],s=o[e-r.length-a.length];return null!=i?t?""+Y+i.user.username:""+Y+i.user.tag:null!=l?l.text:null!=s?""+Y+s.name:""}},CHANNELS:{matches:function(t,n){return!e.isDM()&&!e.isGroupDM()&&b.default.matchSentinel(t,n,z)},queryResults:function(t){return b.default.queryChannelResults(t,e)},renderResults:function(e,t,n,r,a){return ne(e,t,a.channels,n,r,j.default.Messages.TEXT_CHANNELS_MATCHING,j.default.Messages.TEXT_CHANNELS,A.default.Channel,function(e){return{channel:e,key:e.id,category:y.default.getChannel(e.parent_id)}},function(e){return""+z+e})},getText:function(e,t){var n=t.channels;if(null==n)return"";var r=n[e];if(null==r)return"";var a=g.default.getTextChannelNameDisambiguations(r.guild_id)[r.id];return"#"+(null!=a?a.name:r.name)}},EMOJIS:{matches:function(e,t){return t.length>1&&e===$},queryResults:function(t){return b.default.queryEmojiResults(t,e)},renderResults:function(e,t,n,r,a){return ne(e,t,a.emojis,n,r,j.default.Messages.EMOJI_MATCHING,j.default.Messages.EMOJI,A.default.Emoji,function(e){return{emoji:e,key:e.id||e.uniqueName||e.name,sentinel:$}},function(e){return""+$+e})},getText:function(e,t){var n=t.emojis;return null==n||null==n[e]?"":""+$+n[e].name+$}},REACTIONS:{matches:function(e,t,n){return 0===n&&e===q&&t.startsWith($)},queryResults:function(t){return b.default.queryEmojiResults(t.substring(1),e)},renderResults:function(e,t,n,r,a){return ne(e,t,a.emojis,n,r,j.default.Messages.REACTIONS_MATCHING,j.default.Messages.EMOJI,A.default.Emoji,function(e){return{emoji:e,key:e.id||e.uniqueName||e.name,sentinel:$}},function(e){return""+q+e})},getText:function(e,t){var n=t.emojis;return null==n||null==n[e]?"":""+q+$+n[e].name+$}}})[Q]={matches:function(e,t,n){return 0===n&&(e===X||null!=t.match(ee))},queryResults:function(t){var n=t.match(ee);if(n){var r=n[1],a=l.default.findKey(F.ChannelTextAreaIntegrations,function(e){return e.command===r});return c.default.search(a,n[2]),{integrationQuery:n[2],integration:a}}var o=new RegExp("^"+D.default.escape(t),"i"),s=[],u=[];(0,l.default)(Z).forEach(function(n){(null==n.predicate||n.predicate(e))&&(o.test(n.command)?s.push(n):(0,i.default)(t,n.command.toLowerCase())&&u.push(n))});var d=[],f=function(e){var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var a;if(n){if(r>=t.length)break;a=t[r++]}else{if((r=t.next()).done)break;a=r.value}var o=a;if(!(d.length<F.MAX_AUTOCOMPLETE_RESULTS))break;d.push(o)}};return f(s),f(u),{commands:d}},renderResults:function(e,t,a,i,l){if(null!=l&&null!=l.commands)return ne(e,t,l.commands,a,i,j.default.Messages.COMMANDS_MATCHING,j.default.Messages.COMMANDS,A.default.Command,function(e){return{command:e.command,description:e.description,key:e.command}},function(e){return""+X+e});if(r)return K(R.default,{className:H.default.spinner,type:R.default.Type.SPINNING_CIRCLE});if(null!=n&&null!=n.integrations){var u,d=e.match(ee);if(null==d||null==n.integrations)return null;var c=!1,f=n.integrations.map(function(e,n){switch(e.type){case F.ChannelTextAreaIntegrationTypes.GIF:return c=!0,K(A.default.GIFIntegration,{className:H.default.horizontalAutocomplete,onClick:i,onHover:a,selected:t===n,index:n,width:e.meta.width,height:e.meta.height,src:e.meta.src,url:e.meta.url},""+e.meta.url+e.meta.src)}}),p=Z.find(function(e){return e.command===d[1]}),h=e.length>0&&null!=p&&null!=p.title?j.default.Messages.CONTENT_MATCHING.format({query:d[2],command:p.title}):null!=p&&null!=p.title?p.title:d[1];return[K(A.default.Title,{title:h},"autocomplete-title-"+h),c?K(C.default,{className:(0,o.default)((u={},u[H.default.horizontalAutocompletes]="Firefox"!==s.default.name,u))},"autocomplete-horizontal-completes",f):f]}},getText:function(e,t){var n=t.commands,r=t.integrations;return null!=n&&null!=n[e]?""+X+n[e].command:null!=r&&null!=r[e]?r[e].meta.url:""},onSelect:function(e,t,n){var r=n.commands,a=n.integrations;if(null==r&&null!=a){var o=e.match(ee);if(null==o)return;var i=o[1];v.default.trackWithMetadata(F.AnalyticEvents.SLASH_COMMAND_USED,{command:i}),"giphy"!==i&&"tenor"!==i||v.default.trackWithMetadata(F.AnalyticEvents.SEARCH_RESULT_SELECTED,{search_type:F.SearchTypes.GIF,index_num:t,source_object:"/"+i})}}},d}var ie=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this)._gifPickerRef=a.createRef(),n.handleFavorite=function(){n.setState({justFavorited:!0}),clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.setState({justFavorited:!1})},1500)},n.toggleGIFPicker=function(){n.setState(function(e){return{isGIFPickerActive:!e.isGIFPickerActive}})},n.handleCloseGIFPicker=function(){return n.setState({isGIFPickerActive:!1})},n.closeGIFPicker=function(e){if(n.state.isGIFPickerActive){for(var t=e.target;t instanceof Element;){if(t===n._gifPickerRef.current)return;if(t===n.getGIFPickerButton())return;t=t.parentNode}n.setState({isGIFPickerActive:!1}),null!=document.activeElement&&"BODY"!==document.activeElement.tagName||n.focus()}},n.handlePremiumGiftClick=function(e){var t=n.props.channel;p.openModal({mode:F.PremiumPaymentSubscriptionModes.NEW,skuId:F.PremiumSubscriptionSKUs.TIER_2,isGift:!0,isGiftingFromChat:!0,analyticsLocation:{page:t.isPrivate()?F.AnalyticsPages.DM_CHANNEL:F.AnalyticsPages.GUILD_CHANNEL,section:F.AnalyticsSections.CHANNEL_TEXT_AREA,object:F.AnalyticsObjects.BUTTON_ICON,objectType:F.AnalyticsObjectTypes.GIFT}}).catch(F.NOOP_NULL)},n.renderGIFPreview=function(){return a.createElement(U.default,{onSelectGIF:n.handleSelectGIF,ref:n._gifPickerRef})},n.handleSelectGIF=function(e){n.setState({isGIFPickerActive:!1});var t=V(n)._ref;null!=t&&t.handleSelectGIF(e)},n.handleGIFPickerToggle=function(e){e.stopPropagation(),e.preventDefault(),n.toggleGIFPicker()},l.default.bindAll(V(n),["renderEmojiPickerPopout","handleSetRef","handleSaveCurrentText","handleFileUpload","handleInviteToPlay","handleInviteToSpectate","handleInviteToListen","handleInviteToWatch","handleAutocompleteQuery"]);var r={};return n.state={integration:null,integrationQuery:null,autocompleteOptions:oe(t.channel,t.hidePersonalInformation,r,!1,t.canMentionEveryone,t.colorblindMode),autocompletes:r,isAutocompletesLoading:!1,isGIFPickerActive:!1,justFavorited:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.props.focused&&this.focus(),L.ComponentDispatch.subscribe(F.ComponentActions.FAVORITE_GIF,this.handleFavorite)},o.componentDidUpdate=function(e,t){var n=this;this.grabIntegrationResults(e,t,function(){return n.grabAutocompleteOptions(e,t)}),this.fixFocus(e),!t.isGIFPickerActive&&this.state.isGIFPickerActive?this.setupGIFPickerHandlers():t.isGIFPickerActive&&!this.state.isGIFPickerActive&&this.cleanupGIFPickerHandlers()},o.componentWillUnmount=function(){this.cleanupGIFPickerHandlers(),L.ComponentDispatch.unsubscribe(F.ComponentActions.FAVORITE_GIF,this.handleFavorite),clearTimeout(this._timeout)},o.fixFocus=function(e){e.focused&&!this.props.focused?this.blur():!e.focused&&this.props.focused&&this.focus()},o.focus=function(){this._ref&&this._ref.focus()},o.blur=function(){this._ref&&this._ref.blur()},o.setupGIFPickerHandlers=function(){document.addEventListener("click",this.closeGIFPicker,!0),document.addEventListener("contextmenu",this.closeGIFPicker,!0),L.ComponentDispatch.subscribe(F.ComponentActions.CLOSE_GIF_PICKER,this.handleCloseGIFPicker)},o.cleanupGIFPickerHandlers=function(){document.removeEventListener("click",this.closeGIFPicker,!0),document.removeEventListener("contextmenu",this.closeGIFPicker,!0),L.ComponentDispatch.unsubscribe(F.ComponentActions.CLOSE_GIF_PICKER,this.handleCloseGIFPicker)},o.getGIFPickerButton=function(){var e=this._ref;return null!=e?e.getGIFPickerButton():null},o.grabIntegrationResults=function(e,t,n){var r=this.state,a=r.integration,o=r.integrationQuery,i=r.autocompletes,l=E.default.getResults(a,o);null==l||null!=i&&i.integrations===l.results?n():this.setState({autocompletes:{integrations:l.results},isAutocompletesLoading:l.loading},n)},o.grabAutocompleteOptions=function(e,t){var n=this.props,r=n.channel,a=n.hidePersonalInformation,o=n.canMentionEveryone,i=n.colorblindMode,l=this.state,s=l.autocompletes,u=l.isAutocompletesLoading;if(r!==e.channel||a!==e.hidePersonalInformation||!(null!=s&&null!=t.autocompletes||null==s&&null!=t.autocompletes||null!=s&&null!=t.autocompletes&&s.integrations!==t.autocompletes.integrations)||u!==t.isAutocompletesLoading||o!==e.canMentionEveryone||i!==e.colorblindMode){var d=oe(r,a,s,u,o,i);this.setState({autocompleteOptions:d})}},o.getPlaceholder=function(){var e=this.props,t=e.disabled,n=e.placeholder;return t?j.default.Messages.NO_SEND_MESSAGES_PERMISSION_PLACEHOLDER:n},o.renderEmojiPickerPopout=function(e,t){return a.createElement(k.default,W({},e,t))},o.render=function(){var e=this,t=this.props,n=t.value,r=t.className,o=t.disabled,i=t.channel,l=t.type,s=t.canAttachFiles,u=t.canSendInvites,d=t.canPasteFiles,c=t.disableGIFPicker,f=t.shouldRenderPremiumGiftButton,p=t.activities,h=t.onChange,v=t.onResize,m=t.onKeyDown,y=t.onKeyUp,_=t.onBlur,g=t.onFocus,E=t.onSubmit,I=t.shouldShowTooltipOnFavorite,T=this.state,S=T.autocompletes,O=T.autocompleteOptions,A=T.isGIFPickerActive,R=T.justFavorited;return K(P.BackgroundOpacityContext.Consumer,{},void 0,function(t){return K(C.default,{direction:C.default.Direction.VERTICAL},void 0,a.createElement(N.default,{ref:e.handleSetRef,value:n,className:r,backgroundOpacity:t.backgroundOpacity,disabled:o,placeholder:e.getPlaceholder(),channel:i,type:l,canAttachFiles:s,canSendInvites:u,canPasteFiles:d,activities:p,autocompleteOptions:O,autocompletes:S,renderCustomAutocomplete:A?e.renderGIFPreview:null,renderEmojiPickerPopout:e.renderEmojiPickerPopout,shouldRenderPremiumGiftButton:f,onChange:h,onResize:v,onKeyDown:m,onKeyUp:y,onSaveCurrentText:e.handleSaveCurrentText,onFileUpload:e.handleFileUpload,onInviteToPlay:e.handleInviteToPlay,onInviteToSpectate:e.handleInviteToSpectate,onInviteToListen:e.handleInviteToListen,onInviteToWatch:e.handleInviteToWatch,onOpenAttachPopout:e.handleOpenAttachPopout,onGIFPickerToggle:c?null:e.handleGIFPickerToggle,isGIFPickerActive:A,justFavorited:R,shouldShowTooltipOnFavorite:I,onPremiumGiftClick:e.handlePremiumGiftClick,onBlur:_,onFocus:g,onAutocompleteQuery:e.handleAutocompleteQuery,onSubmit:E}))})},o.handleSetRef=function(e){this._ref=e},o.handleSaveCurrentText=function(e){d.default.saveDraft(e,this.props.value)},o.handleFileUpload=function(e){(0,w.promptToUpload)(e,this.props.channel)},o.handleStartFileUpload=function(){this._ref&&this._ref.handleStartFileUpload()},o.handleInviteToPlay=function(e){var t=this.props.channel;M.default.track(F.AnalyticEvents.OPEN_MODAL,{type:"Send Join Invite",application_id:e.application_id,location:F.AnalyticsSections.CHANNEL_TEXT_AREA}),f.default.push(function(){return K(G.default,{activity:e,channel:t,activityActionType:F.ActivityActionTypes.JOIN})})},o.handleInviteToSpectate=function(e){var t=this.props.channel;M.default.track(F.AnalyticEvents.OPEN_MODAL,{type:"Send Spectate Invite",application_id:e.application_id,location:F.AnalyticsSections.CHANNEL_TEXT_AREA}),f.default.push(function(){return K(G.default,{activity:e,channel:t,activityActionType:F.ActivityActionTypes.SPECTATE})})},o.handleInviteToListen=function(e){var t=this.props.channel;M.default.track(F.AnalyticEvents.OPEN_MODAL,{type:"Send Listen Invite",location:F.AnalyticsSections.CHANNEL_TEXT_AREA}),f.default.push(function(){return K(G.default,{activity:e,channel:t,activityActionType:F.ActivityActionTypes.LISTEN})})},o.handleInviteToWatch=function(e){var t=this.props.channel;M.default.track(F.AnalyticEvents.OPEN_MODAL,{type:"Send Watch Invite",location:F.AnalyticsSections.CHANNEL_TEXT_AREA}),f.default.push(function(){return K(G.default,{activity:e,channel:t,activityActionType:F.ActivityActionTypes.WATCH})})},o.handleInsertText=function(e){var t=e.content;this._ref&&this._ref.insertText(t),this.focus()},o.handleOpenAttachPopout=function(){M.default.track(F.AnalyticEvents.OPEN_POPOUT,{type:"Send Attachment"})},o.handleAutocompleteQuery=function(e,t,n){var r=e.queryResults(t);n===Q&&null==r.commands?this.setState({autocompletes:null,integrationQuery:r.integrationQuery,integration:r.integration}):this.setState({autocompletes:r,integrationQuery:null})},r}(a.PureComponent);ie.displayName="ChannelTextAreaContainer",ie.defaultProps={type:F.TextareaTypes.NORMAL,disableGIFPicker:!0,disableActivity:!1,disableAttachments:!1,disableImagePaste:!1,disableInvites:!1,focused:!1,shouldRenderPremiumGiftButton:!1};var le=(0,h.default)(function(e,t){var n;return(n={})[F.ComponentActions.UPLOAD_FILE]=t.handleStartFileUpload.bind(t),n[F.ComponentActions.INSERT_TEXT]=t.handleInsertText.bind(t),n[F.ComponentActions.TOGGLE_GIF_PICKER]=t.toggleGIFPicker,n})(ie),se=u.default.connectStores([E.default,I.default,T.default,S.default,m.default,_.default],function(e){var t=e.channel,n=e.disableAttachments,r=e.disableImagePaste,a=e.disableActivity,o=e.disableInvites,i=e.type,l=t.isPrivate(),s=l||I.default.can(F.Permissions.ATTACH_FILES,t),u=l||I.default.can(F.Permissions.EMBED_LINKS,t);return{query:E.default.getQuery(),canAttachFiles:!n&&s,canPasteFiles:!r&&s,canSendInvites:!o&&u,disabled:!l&&!I.default.can(F.Permissions.SEND_MESSAGES,t),canMentionEveryone:l||I.default.can(F.Permissions.MENTION_EVERYONE,t),activities:a?null:T.default.getActivities(),hidePersonalInformation:S.default.hidePersonalInformation,colorblindMode:m.default.colorblindMode,disableGIFPicker:null!=i&&i!==F.TextareaTypes.NORMAL,shouldShowTooltipOnFavorite:_.default.shouldShowTooltipOnFavorite()}},{forwardRef:!0})(le);t.default=se},5924:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EmbedGIFV=t.EmbedVideo=t.EmbedLink=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=E(n(17)),i=E(n(114)),l=n(810),s=n(5881),u=E(n(305)),d=E(n(6045)),c=E(n(5865)),f=E(n(833)),p=E(n(6397)),h=E(n(5949)),v=n(5918),m=n(853),y=n(0),_=E(n(5300)),g=E(n(5249));function E(e){return e&&e.__esModule?e:{default:e}}function I(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function T(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var O=function(e){return a.createElement(u.default,e)};t.EmbedLink=O,O.displayName="EmbedLink";var A=function(e){var t=e.href,n=e.image,r=e.ImageComponent,o=e.zoomable,i=void 0===o||o,l=e.backgroundOpacity;return a.createElement(r,S({src:n.proxyURL||n.url,original:i?n.url:t,width:n.width,height:n.height,zoomable:i,backgroundOpacity:l},e))};A.displayName="EmbedImage";var N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={playing:t.props.autoPlay},t.handlePlay=function(e){e.preventDefault(),e.stopPropagation();var n=t.props.onPlay;n&&n(!1),t.setState({playing:!0})},t}T(t,e);var n=t.prototype;return n.componentDidUpdate=function(){!this.props.playable&&this.state.playing&&this.setState({playing:!1})},n.render=function(){var e=this.props,t=e.className,n=e.maxWidth,r=e.maxHeight,l=e.thumbnail,u=e.video,d=e.allowFullScreen,c=e.ImageComponent,f=e.VideoComponent,p=e.LinkComponent,v=e.playable,m=e.backgroundOpacity,y=e.mediaPlayerRef,g=e.autoPlay,E=e.autoMute,T=e.volume,O=e.onPlay,A=e.onEnded,N=e.onVolumeChange,C=e.onMute,R=this.state.playing,P=l.width,M=l.height;R&&null!=u&&(P=u.width,M=u.height);var b=(0,s.fit)(P,M,n,r);P=b.width,M=b.height;var L=l.proxyURL||l.url;if(null!=u&&null!=u.proxyURL){var D={poster:L,src:u.proxyURL,width:P,height:M,naturalWidth:u.width,naturalHeight:u.height,maxWidth:n,maxHeight:r,playable:v,mediaPlayerRef:y,autoPlay:g,autoMute:E,volume:T,onPlay:O,onEnded:A,onMute:C};return I("div",{className:(0,o.default)(_.default.embedVideo,t),style:{width:P,height:M}},void 0,null!=f?a.createElement(f,S({},D,{onVolumeChange:N,onMute:C})):a.createElement("video",S({},D,{controls:!0})))}if(R&&null!=u){var w=i.default.parse(u.url,!0);w.query=S({},w.query,{autoplay:1,auto_play:1}),delete w.search;var k=i.default.format(w);return I("div",{className:(0,o.default)(_.default.embedVideo,t),style:{width:P,height:M}},void 0,I("iframe",{className:_.default.embedIframe,src:k,width:P,height:M,frameBorder:0,allowFullScreen:d}))}return I("div",{className:(0,o.default)(_.default.embedVideo,t),style:{width:P,height:M}},void 0,I(c,{src:L,width:P,height:M,className:_.default.embedVideoImageComponent,imageClassName:_.default.embedVideoImageComponentInner,onClick:v&&null!=u?this.handlePlay:null}),I("div",{className:_.default.embedVideoActions},void 0,I("div",{className:_.default.centerContent},void 0,v?I(h.default,{onPlay:null!=u?this.handlePlay:null,externalURL:this.props.href,LinkComponent:p,backgroundOpacity:m}):null)))},t}(a.PureComponent);t.EmbedVideo=N,N.displayName="EmbedVideo",N.defaultProps={allowFullScreen:!0,playable:!0,LinkComponent:O,ImageComponent:c.default,autoPlay:!1,autoMute:!1};var C=function(e){function t(){return e.apply(this,arguments)||this}return T(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.href,r=e.autoPlay,a=e.maxWidth,i=e.maxHeight,l=e.thumbnail,u=e.video,d=e.LinkComponent,c=e.GIFVComponent,f=e.ImageComponent,p=e.playable;if(null!=c)return I(c,{className:(0,o.default)(_.default.embedGIFV,t),original:n,poster:l.proxyURL||l.url,src:u.proxyURL||u.url,width:l.width,height:l.height,naturalHeight:u.height,naturalWidth:u.width,maxWidth:a,maxHeight:i,autoPlay:r,ImageComponent:f,playable:p});var h=(0,s.fit)(l.width,l.height,a,i),v=h.width,m=h.height;return I(d,{className:(0,o.default)(_.default.embedGIFV,t),href:n,tabIndex:p?0:-1},void 0,I("video",{width:v,height:m,poster:l.proxyURL||l.url,src:u.proxyURL||u.url,muted:!0,loop:!0,autoPlay:p&&r,preload:"none"}))},t}(a.PureComponent);function R(e){var t=e.className,n=e.embed.url,r=e.backgroundOpacity;if(null==n)return null;var a=null,l=null;try{var s=i.default.parse(n,!0);a=s.host,l=s.pathname}catch(e){return null}if("open.spotify.com"!==a||null==l)return null;var u=l.split("/"),d=null!=u[1]?u[1].toLowerCase():null,c=null!=u[3]?u[3].toLowerCase():null;return!["track","playlist","album","artist","user"].includes(d)||"user"===d&&"playlist"!==c?null:I(p.default,{className:(0,o.default)(_.default.embedSpotify,t,_.default[r+"BackgroundOpacity"]),src:y.SpotifyEndpoints.EMBED(l),style:{width:400,height:"track"===d?80:300}})}t.EmbedGIFV=C,C.displayName="EmbedGIFV",C.defaultProps={LinkComponent:O,playable:!0},R.displayName="SpotifyEmbed";var P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:!t.props.embed.spoiler},t.onReveal=function(){t.setState({isVisible:!0})},t}T(t,e);var n=t.prototype;return n.renderProvider=function(e){var t,n=void 0===e?{}:e,r=n.hasMargin,a=void 0!==r&&r,i=n.focusable,l=void 0===i||i,s=this.props,u=s.embed.provider,d=s.LinkComponent;return null==u?null:I("div",{className:(0,o.default)((t={},t[_.default.embedMargin]=a,t))},void 0,null!=u.url?I(d,{className:_.default.embedProviderLink,href:u.url,tabIndex:l?0:-1},void 0,u.name):I("span",{className:_.default.embedProvider},void 0,u.name))},n.renderAuthor=function(e){var t,n=void 0===e?{}:e,r=n.hasMargin,a=void 0!==r&&r,i=n.focusable,l=void 0===i||i,s=this.props,u=s.embed.author,d=s.LinkComponent;return null==u?null:I("div",{className:(0,o.default)(_.default.embedAuthor,(t={},t[_.default.embedMargin]=a,t))},void 0,null!=u.iconProxyURL?I("img",{alt:"",className:_.default.embedAuthorIcon,src:u.iconProxyURL}):null,null!=u.url?I(d,{className:_.default.embedAuthorNameLink,href:u.url,tabIndex:l?0:-1},void 0,u.name):I("span",{className:_.default.embedAuthorName},void 0,u.name))},n.renderTitle=function(e){var t,n=void 0===e?{}:e,r=n.hasMargin,a=void 0!==r&&r,i=n.focusable,l=void 0===i||i,s=this.props,u=s.embed,d=u.title,c=u.url,f=s.LinkComponent;return null==d?null:I("div",{className:(0,o.default)((t={},t[_.default.embedMargin]=a,t))},void 0,null!=c?I(f,{className:_.default.embedTitleLink,href:c,tabIndex:l?0:-1},void 0,d):I("span",{className:_.default.embedTitle},void 0,d))},n.renderDescription=function(e){var t;void 0===e&&(e=!1);var n=this.props.embed.description;return null==n?null:I("div",{className:(0,o.default)(_.default.embedDescription,(t={},t[_.default.embedMargin]=e,t))},void 0,n)},n.renderThumbnail=function(e){void 0===e&&(e=!0);var t=this.props,n=t.embed,r=n.url,a=n.thumbnail,o=t.maxThumbnailWidth,i=t.maxThumbnailHeight,l=t.ImageComponent,s=t.autoPlayGif,u=t.backgroundOpacity;return null==a?null:I(m.MessagesInteractionContext.Consumer,{},void 0,function(t){return I(A,{className:_.default.embedThumbnail,image:a,href:r,maxWidth:o,maxHeight:i,zoomable:!1,ImageComponent:l,autoPlay:s&&!t.disableAnimations,backgroundOpacity:u,shouldLink:e})})},n.renderFields=function(e){var t;void 0===e&&(e=!1);var n=this.props.embed.fields;return null==n?null:I("div",{className:(0,o.default)(_.default.embedFields,(t={},t[_.default.embedMargin]=e,t))},void 0,n.map(function(e,t){var n,r=e.name,a=e.value,i=e.inline;return I("div",{className:(0,o.default)(_.default.embedField,(n={},n[_.default.embedFieldInline]=i,n))},t,I("div",{className:_.default.embedFieldName},void 0,r),I("div",{className:_.default.embedFieldValue},void 0,a))}))},n.renderImage=function(e){var t=void 0===e?{}:e,n=t.hasMargin,r=void 0!==n&&n,a=t.hiddenSpoiler,i=void 0!==a&&a,l=t.isVisible,s=void 0===l||l,u=this.props,d=u.embed,f=d.url,p=d.image,h=u.maxMediaWidth,y=u.maxMediaHeight,g=u.ImageComponent,E=u.className,T=u.autoPlayGif,S=u.backgroundOpacity;if(null==p)return null;var O=c.default.isAnimated({src:p.proxyURL||p.url,original:p.url,animated:!1});return I(v.GIFAccessoryContext.Consumer,{},void 0,function(e){return I(m.MessagesInteractionContext.Consumer,{},void 0,function(t){var n;return I(A,{className:(0,o.default)(_.default.embedImage,(n={},n[_.default.embedMarginLarge]=r,n),E),image:p,href:f,maxWidth:h,maxHeight:y,ImageComponent:g,autoPlay:T&&!t.disableAnimations&&!i,backgroundOpacity:S,renderAccessory:O?e:null,shouldLink:s})})})},n.renderVideo=function(e){var t,n=void 0===e?{}:e,r=n.hasMargin,a=n.gifv,i=void 0!==a&&a,l=n.isVisible,s=void 0===l||l,u=this.props,d=u.embed,c=d.url,f=d.thumbnail,p=d.video,h=u.maxMediaWidth,v=u.maxMediaHeight,y=u.ImageComponent,g=u.VideoComponent,E=u.GIFVComponent,T=u.LinkComponent,S=u.allowFullScreen,O=u.autoPlayGif,A=u.backgroundOpacity;return null==c?null:null==f?null:i?null==p?null:I(m.MessagesInteractionContext.Consumer,{},void 0,function(e){var t;return I(C,{className:(0,o.default)((t={},t[_.default.embedMarginLarge]=r,t)),href:c,thumbnail:f,video:p,maxWidth:h,maxHeight:v,autoPlay:O&&!e.disableAnimations&&s,LinkComponent:T,GIFVComponent:E,ImageComponent:y,playable:s})}):I(N,{className:(0,o.default)((t={},t[_.default.embedMarginLarge]=r,t)),href:c,allowFullScreen:S,thumbnail:f,video:p,maxWidth:h,maxHeight:v,VideoComponent:g,LinkComponent:T,backgroundOpacity:A,playable:s})},n.renderFooter=function(e){void 0===e&&(e=!1);var t,n=this.props.embed,r=n.footer,a=n.timestamp;if(null!=r){var i,s=r.iconProxyURL||r.iconURL;return I("div",{className:(0,o.default)(_.default.embedFooter,(i={},i[_.default.embedMarginLarge]=e,i))},void 0,null!=s?I("img",{alt:"",className:_.default.embedFooterIcon,src:s}):null,I("span",{className:_.default.embedFooterText},void 0,r.text,null!=r.text&&null!=a?I("span",{className:_.default.embedFooterSeparator},void 0,"â€¢"):null,null!=a?(0,l.calendarFormat)(a):null))}if(null!=a)return I("div",{className:(0,o.default)(_.default.embedFooter,_.default.embedFooterText,(t={},t[_.default.embedMargin]=e,t))},void 0,(0,l.calendarFormat)(a))},n.renderMedia=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=this.props.embed,r=this.state.isVisible;switch(n.type){case y.EmbedTypes.GIFV:return this.renderVideo({hasMargin:e,gifv:!0,hiddenSpoiler:t,isVisible:r});case y.EmbedTypes.VIDEO:default:return null!=n.video?this.renderVideo({hasMargin:e,gifv:!1,hiddenSpoiler:t,isVisible:r}):this.renderImage({hasMargin:e,hiddenSpoiler:t,isVisible:r})}},n.renderAll=function(){var e=this.props,t=e.embed,n=e.hideMedia,r=this.state.isVisible,a=!1,o=this.renderProvider({focusable:r});a=null!=o;var i=this.renderAuthor({hasMargin:a,focusable:r});a=a||null!=i;var l,s=this.renderTitle({hasMargin:a,focusable:r});switch(t.type){case y.EmbedTypes.IMAGE:case y.EmbedTypes.VIDEO:case y.EmbedTypes.GIFV:break;default:a=a||null!=s,l=this.renderDescription(a)}a=a||null!=l;var u,d=this.renderFields(a);n||(a=a||null!=d,u=this.renderMedia(a,!r)),a=a||null!=u;var c=this.renderFooter(a),f=null==u;return t.type===y.EmbedTypes.RICH&&(f=null==t.video),{provider:o,author:i,title:s,description:l,thumbnail:!n&&f?this.renderThumbnail(r):null,fields:d,media:u,footer:c}},n.getMaxWidth=function(){var e=this.props,t=e.maxMediaWidth,n=e.embed,r=n.image,a=n.thumbnail,o=n.video;if(null!=r||null!=o){var i=r||a||o;return null!=i&&i.width>=t?t+26:void 0}},n.isInline=function(){var e=this.props,t=e.hideMedia,n=e.inlineGIFV,r=e.embed,a=r.type,o=r.author,i=r.title,l=r.image,s=r.video;return!t&&((null!=l||null!=s)&&(a===y.EmbedTypes.GIFV&&n||a!==y.EmbedTypes.RICH&&null==o&&null==i))},n.render=function(){var e=this,t=this.props,n=t.className,r=t.embed,i=t.backgroundOpacity;if(null!=r.provider&&"Spotify"===r.provider.name)return a.createElement(R,this.props);if(this.isInline()){var l=function(t){var a;return void 0===t&&(t=!1),I("div",{"aria-hidden":t,className:(0,o.default)(_.default.embed,n,(a={},a[_.default.spoilerAttachment]=r.spoiler,a[_.default.hiddenSpoiler]=t,a))},void 0,e.renderMedia(!1,t))};return r.spoiler?I(f.default,{type:f.default.Types.ATTACHMENT,onReveal:this.onReveal},void 0,function(e){return l(e)}):l()}var s=this.renderAll(),u=s.provider,d=s.author,c=s.title,p=s.description,h=s.fields,v=s.thumbnail,m=s.media,y=s.footer,E=function(t){var a;return void 0===t&&(t=!1),I("div",{className:(0,o.default)(_.default.embed,n,i&&_.default[i+"BackgroundOpacity"],(a={},a[_.default.hiddenSpoiler]=t,a[_.default.spoilerEmbed]=r.spoiler,a)),"aria-hidden":t,style:{maxWidth:e.getMaxWidth()}},void 0,I("div",{className:_.default.embedPill,style:{backgroundColor:t?null:r.color}}),I("div",{className:_.default.embedInner},void 0,I("div",{className:_.default.embedContent},void 0,I("div",{className:(0,o.default)(_.default.embedContentInner,g.default.markup)},void 0,u,d,c,p,h),v),m,y))};return r.spoiler?I(f.default,{type:f.default.Types.EMBED,onReveal:this.onReveal},void 0,function(e){return E(e)}):E()},t}(a.PureComponent);t.default=P,P.displayName="Embed",P.defaultProps={hideMedia:!1,allowFullScreen:!0,inlineGIFV:!0,maxThumbnailWidth:80,maxThumbnailHeight:80,maxMediaWidth:400,maxMediaHeight:300,LinkComponent:O,ImageComponent:d.default}},5931:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(6)),a=l(n(866)),o=l(n(801)),i=l(n(23));function l(e){return e&&e.__esModule?e:{default:e}}var s,u=new a.default({maxAge:6e4});var d={requestMembers:function(e,t,n){void 0===n&&(n=10);var a=(e||"")+":"+t;null==u.get(a)&&(u.set(a,!0),function(e,t,n){null!=s&&clearTimeout(s),s=setTimeout(function(){var a=[],l=function(e){a.push(e.id)};if(null==e)r.default.forEach(i.default.getGuilds(),l);else{var s=i.default.getGuild(e);null!=s&&l(s)}a.length>0&&o.default.requestMembers(a,t.toLocaleLowerCase(),n)},200)}(e,t,n))},getAcronym:function(e){return null!=e?e.replace(/\w+/g,function(e){return e[0]}).replace(/\s/g,""):""}};t.default=d},5932:function(e,t,n){"use strict";t.__esModule=!0,t.ack=c,t.ackCategory=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!1);var r=i.default.getChannel(e);if(null==r||null==r.guild_id)return;var a=l.default.getCategories(r.guild_id);if(null==a[e])return;a[e].filter(function(e){var t=e.channel;return(0,o.isGuildTextChannelType)(t.type)}).forEach(function(e){var r=e.channel;s.default.hasUnread(r.id)&&c(r.id,t,n)})},t.localAck=function(e){a.default.dispatch({type:u.ActionTypes.CHANNEL_LOCAL_ACK,channelId:e})},t.manualAck=function(e,t){r.default.post({url:u.Endpoints.MESSAGE_ACK(e,t),body:{manual:!0}})};var r=d(n(9)),a=d(n(1)),o=n(129),i=d(n(20)),l=d(n(820)),s=d(n(309)),u=n(0);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),a.default.dispatch({type:u.ActionTypes.CHANNEL_ACK,channelId:e,immediate:t,force:n,context:u.CURRENT_APP_CONTEXT})}},5933:function(e,t,n){"use strict";t.__esModule=!0,t.show=N,t.hide=C,t.toggle=function(e){void 0===e&&(e="KEYBIND");f.default.isOpen()?C():N(e)},t.search=function(e){r.default.dispatch({type:g.ActionTypes.QUICKSWITCHER_SEARCH,query:e,options:S()})},t.selectResult=function(e){r.default.dispatch({type:g.ActionTypes.QUICKSWITCHER_SELECT,selectedIndex:e})},t.switchToResult=function(e){O(g.AnalyticEvents.QUICKSWITCHER_RESULT_SELECTED,e);var t,n=e.type,s=e.record,f={page:g.AnalyticsPages.QUICK_SWITCHER};switch(n){case g.AutocompleterResultTypes.GUILD:t=p.default.getChannelId(s.id),o.default.selectChannel(s.id,t,f),o.default.flushSelection(!0);break;case g.AutocompleterResultTypes.TEXT_CHANNEL:null!=(t=d.default.getChannel(s.id))&&(o.default.selectChannel(t.guild_id,s.id,f),o.default.flushSelection(!0));break;case g.AutocompleterResultTypes.VOICE_CHANNEL:null!=(t=d.default.getChannel(s.id))&&l.default.selectVoiceChannel(t.guild_id,s.id);break;case g.AutocompleterResultTypes.USER:a.default.openPrivateChannel(u.default.getId(),[s.id]),i.default.channelListScrollTo(g.ME,s.id);break;case g.AutocompleterResultTypes.GROUP_DM:o.default.selectChannel(g.ME,s.id),o.default.flushSelection(!0),i.default.channelListScrollTo(g.ME,s.id);break;case g.AutocompleterResultTypes.APPLICATION:var h=(0,y.getLibraryApplicationForApplicationId)(s.id,c.default,v.default);I(s.id,h,{analyticsParams:{source:g.AnalyticsLocations.QUICK_SWITCHER,location:g.AnalyticsLocations.QUICK_SWITCHER}})}r.default.dispatch({type:g.ActionTypes.QUICKSWITCHER_SWITCH_TO,result:e}),A()};var r=E(n(1)),a=E(n(430)),o=E(n(5864)),i=E(n(5876)),l=E(n(133)),s=E(n(129)),u=E(n(11)),d=E(n(20)),c=E(n(88)),f=E(n(6027)),p=E(n(50)),h=E(n(160)),v=E(n(246)),m=E(n(18)),y=n(117),_=n(6085),g=n(0);function E(e){return e&&e.__esModule?e:{default:e}}var I=function(){return Promise.resolve()},T=n(5910);function S(){return{selectedGuildId:h.default.getGuildId(),selectedChannelId:p.default.getChannelId(),lastSelectedChannelId:p.default.getLastSelectedChannelId()}}function O(e,t){var n=f.default.getProps(),r=n.results,a=n.queryMode,o=n.query,i=h.default.getGuildId(),l=p.default.getChannelId(i),u=r[(0,_.findNextSelected)("down",-1,r)],c={current_channel_id:l,current_guild_id:i,query_mode:a||"GENERAL",query_length:o.length,top_result_type:u?u.type:null,top_result_score:u?u.score:null,num_results_total:f.default.getResultTotals(),num_results_users:f.default.getResultTotals(g.AutocompleterResultTypes.USER),num_results_text_channels:f.default.getResultTotals(g.AutocompleterResultTypes.TEXT_CHANNEL),num_results_voice_channels:f.default.getResultTotals(g.AutocompleterResultTypes.VOICE_CHANNEL),num_results_guilds:f.default.getResultTotals(g.AutocompleterResultTypes.GUILD),num_results_group_dms:f.default.getResultTotals(g.AutocompleterResultTypes.GROUP_DM)};if(null!=l){var v=d.default.getChannel(l);c.current_channel_type=null!=v?v.type:null}if(null!=t){var y=t.type,E=t.score,I=t.record;switch(c.selected_type=y,c.selected_score=E,c.selected_index=r.indexOf(t),y){case g.AutocompleterResultTypes.GUILD:c.selected_guild_id=I.id;break;case g.AutocompleterResultTypes.TEXT_CHANNEL:case g.AutocompleterResultTypes.VOICE_CHANNEL:I instanceof s.default&&(c.selected_guild_id=null!=I.guild_id?I.guild_id:null),c.selected_channel_id=I.id;break;case g.AutocompleterResultTypes.GROUP_DM:c.selected_channel_id=I.id;break;case g.AutocompleterResultTypes.USER:c.selected_user_id=I.id}}m.default.track(e,c)}function A(){r.default.dispatch({type:g.ActionTypes.QUICKSWITCHER_HIDE})}function N(e,t){void 0===e&&(e="KEYBIND"),void 0===t&&(t=""),function(e){if(!f.default.isOpen()){var t,n=h.default.getGuildId(),r=p.default.getChannelId(n);if(null!=r){var a=d.default.getChannel(r);t=null!=a?a.type:null}m.default.track(g.AnalyticEvents.QUICKSWITCHER_OPENED,{source:e,current_guild_id:n,current_channel_id:r,current_channel_type:t})}}(e),r.default.dispatch({type:g.ActionTypes.QUICKSWITCHER_SHOW,query:t,options:S()})}function C(){O(g.AnalyticEvents.QUICKSWITCHER_CLOSED),A()}I=T.playApplication},5935:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=v(n(17)),i=v(n(73)),l=v(n(800)),s=v(n(466)),u=v(n(231)),d=v(n(18)),c=n(0),f=v(n(10)),p=v(n(5248)),h=v(n(5275));function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var y=function(){return m("div",{className:h.default.premiumPromo},void 0,m(u.default,{onClick:function(){d.default.track(c.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_page:null,location_section:c.AnalyticsSections.FILE_UPLOAD_POPOUT}),i.default.pop(),l.default.open(c.UserSettingsSections.PREMIUM)},className:h.default.content},void 0,f.default.Messages.PREMIUM_UPLOAD_PROMO.format({maxUploadPremium:f.default.Messages.FILE_UPLOAD_LIMIT_PREMIUM}),m("img",{alt:"",className:h.default.navArrow,src:n(6359)})))};y.displayName="PremiumPromo";var _=m(y,{}),g=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props.promo;return m("div",{className:p.default.uploadModalIn},void 0,m("div",{className:(0,o.default)(p.default.uploadDropModal,p.default.error)},void 0,m("div",{className:p.default.inner},void 0,m("div",{className:p.default.icons},void 0,m("div",{className:p.default.wrapOne},void 0,m("div",{className:(0,o.default)(p.default.icon,p.default.one)})),m("div",{className:p.default.wrapThree},void 0,m("div",{className:(0,o.default)(p.default.icon,p.default.three)})),m("div",{className:p.default.wrapTwo},void 0,m("div",{className:(0,o.default)(p.default.icon,p.default.two)}))),m("div",{className:p.default.title},void 0,this.props.title),m("div",{className:p.default.instructions},void 0,this.props.help),e?_:null)))},r}(a.Component);g.displayName="UploadError",g.modalConfig={backdropStyle:s.default.Styles.DARK,backdropInstant:!0};var E=g;t.default=E},5936:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=z(n(3)),i=z(n(5937)),l=n(303),s=z(n(5857)),u=z(n(162)),d=z(n(73)),c=n(5998),f=n(5932),p=z(n(5987)),h=z(n(11)),v=z(n(6167)),m=z(n(35)),y=z(n(23)),_=z(n(318)),g=z(n(159)),E=z(n(306)),I=z(n(161)),T=z(n(5972)),S=n(5849),O=n(805),A=z(n(795)),N=z(n(6364)),C=z(n(6367)),R=z(n(6368)),P=n(5930),M=n(113),b=n(6033),L=n(136),D=z(n(314)),w=z(n(8)),k=z(n(5923)),U=z(n(6395)),G=n(6046),F=z(n(6426)),j=z(n(6440)),H=z(n(5942)),x=z(n(5956)),B=z(n(6454)),V=z(n(5237)),K=n(0),W=z(n(10)),Y=z(n(5235));function z(e){return e&&e.__esModule?e:{default:e}}function $(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var X=function(e){var t=e.guildId;return g.default.can(K.Permissions.MANAGE_GUILD,{guildId:t})},Q=function(e){var t=e.message,n=e.channel,r=e.canChat,a=e.renderReactions,o=e.canAddNewReactions,i=e.isLurking,l=n.isPrivate(),s=t.type!==K.MessageTypes.DEFAULT,u=!s&&(r||l);return{disableReactionReads:!a,disableReactionCreates:i||!u||!(!s&&(!0===o||l)),disableReactionUpdates:i||!u}},J=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).onResize=function(e){var n=e.target,r=e.isEditing,a=t.props,o=a.onEdit,i=a.onUpdate;r?o&&n&&o(n):i&&n&&i(n)},t.onClickUsername=function(e,n){var r=n.user;if(e.shiftKey&&!r.isNonUserBot()){var a=t.props.disablePersonalInformation,o=r.username,i=r.tag,l="@"+(a?o:i);M.ComponentDispatch.dispatchToLastSubscribed(K.ComponentActions.INSERT_TEXT,{content:l}),e.preventDefault(),e.stopPropagation();var s=t.props.channel;null!=s&&p.default.startTyping(s.id)}},t.onContextMenuMessage=function(e,t){if(w.default.embedded){var n=t.message.type!==K.MessageTypes.DEFAULT?K.ContextMenuTypes.MESSAGE_SYSTEM:K.ContextMenuTypes.MESSAGE_MAIN;(0,l.openContextMenu)(e,function(e){return a.createElement(j.default,q({},e,t,{type:n}))})}},t.onContextMenuUser=function(e,t){var n=t.user,r=t.channel;(0,b.openUserContextMenu)(e,n,r)},t.handleSaveMessage=function(e,n,r){var a=r.content,o=t.props,i=o.editingMessage;o.canCrosspost&&null!=i&&(0,L.hasFlag)(i.flags,K.MessageFlags.CROSSPOSTED)?H.default.confirmEdit(e,n,a):u.default.editMessage(e,n,{content:a})},t.handlePublishMessage=function(e,t){H.default.confirmPublish(e,t)},t.renderAccessories=function(e){var n=e.message,r=t.props,o=r.compact,i=r.channel,l=r.accessoriesClassName,s=r.gifAutoPlay,u=r.renderReactions,d=r.canAddNewReactions,c=r.inlineAttachmentMedia,f=r.inlineEmbedMedia,p=r.renderEmbeds,h=r.canChat,v=r.isLurking,m=Q({message:n,channel:i,canChat:h,renderReactions:u,canAddNewReactions:d,isLurking:v});return $(O.BackgroundOpacityContext.Consumer,{},void 0,function(e){return a.createElement(U.default,q({},m,{className:l,message:n,channel:i,isCompact:o,disableAutoPlayGif:!s,disableEmbeds:!p,inlineAttachmentMedia:c,inlineEmbedMedia:f,onContextMenuMessage:t.onContextMenuMessage,backgroundOpacity:e.backgroundOpacity}))})},t.renderButtonsMessage=function(e){var n=e.message,r=e.channel,o=n.state===K.MessageStates.SENDING,l=t.props,d=l.developerMode,f=l.canManageMessages,p=l.messageOption,h=l.currentUserId,v=l.canPromoteNews,m=l.canCrosspost;if(!1===p||o)return null;var y,_,g=n.author,E=f||g.id===h,I=n.type!==K.MessageTypes.DEFAULT,T=!I&&(f||r.isPrivate()),S=!I&&t.props.canEdit,O=t.props,A=O.canChat,N=O.canAddNewReactions,P=O.renderReactions,M=O.isLurking,b=Q({message:n,channel:r,canChat:A,renderReactions:P,canAddNewReactions:N,isLurking:M}).disableReactionCreates,w=m&&g.id===h;if(v){var k=D.default.findNewsLink(n);if(null!=k){var U=w?W.default.Messages.NEWS_CHANNEL_POST_TO_ACTIVITY:W.default.Messages.NEWS_CHANNEL_PUBLISH_NEWS;null!=k.embed&&k.embed.type===K.EmbedTypes.APPLICATION_NEWS&&(U=W.default.Messages.NEWS_CHANNEL_EDIT_NEWS),y=$(R.default,{title:U,onClick:function(){return(0,c.open)(n,r)},color:w?R.default.Colors.PRIMARY:R.default.Colors.BRAND})}}if(w){var F=(0,L.hasFlag)(n.flags,K.MessageFlags.CROSSPOSTED);_=$(R.default,{title:F?W.default.Messages.NEWS_CHANNEL_PUBLISHED:W.default.Messages.NEWS_CHANNEL_PUBLISH,onClick:function(){return t.handlePublishMessage(r.id,n.id)},look:F?R.default.Looks.LINK:R.default.Looks.FILLED,disabled:F})}return $(a.Fragment,{},void 0,_,y,!b&&!I&&$(G.ButtonAddReaction,{message:n,channel:r}),$(C.default,{channel:r,message:n,developerMode:d,canEdit:S,canPin:T,canDelete:E,onStartEditMessage:u.default.startEditMessage,onRetrySendMessage:u.default.retrySendMessage,onDeleteMessage:u.default.deleteMessage,onConfirmDelete:H.default.confirmDelete,onConfirmPin:H.default.confirmPin,onOpenGuildSettings:s.default.open,onUnpinMessage:i.default.unpinMessage,onConfirmUnpin:H.default.confirmUnpin,onCanManageGuild:X,onShowReactionsModal:t.renderReactionsModal,currentUserId:h}))},t.renderEditor=function(e){var t=e.value,n=e.message,r=e.channel,a=e.onChange,o=e.onSubmit,i=e.onKeyDown,l=e.onResize;return $(k.default,{className:Y.default.marginTop8,value:t,channel:r,type:K.TextareaTypes.EDIT,onChange:a,onSubmit:o,onKeyDown:i,onResize:l},n.id)},t.renderPopoutUser=function(e){return a.createElement(V.default,e)},t.renderPopoutGuild=function(e){return a.createElement(B.default,e)},t.renderSystemMessage=function(e){return a.createElement(F.default,q({},e,{key:e.message.id,onContextMenu:t.onContextMenuMessage}))},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.validateEdit=function(e){var t=e.value,n=e.channel;return(0,P.applyChatRestrictions)(null,t,n,!1,!1)},o.renderReactionsModal=function(e){var t=e.message;d.default.push(x.default,{message:t})},o.render=function(){var e=this,t=this.props,n=t.onClickAnywhere,r=t.hasDivider,o=t.compact,i=t.canFlash,l=t.enableInteraction,s=t.messages,d=t.channel,c=t.jumpSequenceId,p=t.jumpMessageId,h=t.registerMessageDOMNode,v=t.renderMentioned,m=t.groupOption,y=t.editingMessage,_=t.disableInteractionLabel,g=t.editingContent,E=t.isFocusedWindow,I=t.className,T=t.cozyClassName,S=t.canChat,A=t.renderReactions,C=t.canAddNewReactions,R=t.gifAutoPlay,P=t.renderEmbeds,M=t.canManageMessages,b=t.developerMode,L=t.isLurking,D=t.canPromoteNews,w={messages:s,channel:d,jumpSequenceId:c,jumpMessageId:p,registerMessageDOMNode:h,editingMessageId:null!=y?y.id:null,disableInteractionLabel:_,editingContent:g,isFocusedWindow:E},k=q({},Q({message:s[0],channel:d,canChat:S,renderReactions:A,canAddNewReactions:C,isLurking:L}),{disableAutoPlayGif:!R,disableEmbeds:!P,disableManageMessages:!M,disableDeveloperMode:!b,disablePromoteButton:!D});return $(O.BackgroundOpacityContext.Consumer,{},void 0,function(t){return a.createElement(N.default,q({isCompact:o,onClick:n,disableDivider:r,disableJumpFlash:!i,disableInteraction:!l,disableMentionStyles:!v,onResize:e.onResize,validateEdit:e.validateEdit,onCancelEditing:u.default.endEditMessage,onConfirmDelete:H.default.confirmDelete,onChange:u.default.updateEditMessage,saveMessage:e.handleSaveMessage,editingMessage:y,onManualAck:f.manualAck,onClickUsername:e.onClickUsername,onContextMenuMessage:e.onContextMenuMessage,onContextMenuUser:e.onContextMenuUser,onDeleteMessage:u.default.deleteMessage,renderAccessories:e.renderAccessories,renderButtonsMessage:e.renderButtonsMessage,renderEditor:e.renderEditor,renderPopoutUser:e.renderPopoutUser,renderPopoutGuild:e.renderPopoutGuild,renderSystemMessage:e.renderSystemMessage,renderButtonsGroup:m,className:I,cozyClassName:T,backgroundOpacity:t.backgroundOpacity},w,k))})},r}(a.Component);J.displayName="ConnectedMessageGroup",J.defaultProps={canManageMessages:!1,hasDivider:!1,popoutPosition:A.default.Positions.RIGHT,avatarSize:S.AvatarSizes.LARGE,compact:!1,messageOption:!0,canEdit:!0,jumpTargetIndex:-1,enableInteraction:!0,developerMode:!1,canFlash:!0,renderMentioned:!0,inlineAttachmentMedia:!1,inlineEmbedMedia:!1,gifAutoPlay:!1,renderEmbeds:!1,renderEmbedsSmall:!1,renderReactions:!0,canChat:!1};var Z=o.default.connectStores([v.default,h.default,I.default,g.default,m.default,y.default,T.default,_.default],function(e){var t=e.channel,n=e.messages,r=e.canEdit,a=t.id,o=t.getGuildId(),i=!1!==r&&n.some(function(e){return e&&v.default.isEditing(a,e.id)}),l=i?v.default.getEditingMessage():null,s=i?v.default.getEditingContent():null,u=I.default.isFocused(),d=E.default.hidePersonalInformation,c=_.default.isLurking(o),f=y.default.getGuild(o),p=m.default.getApplicationsForGuild(o),S=t.type===K.ChannelTypes.GUILD_NEWS,O=null!=f&&f.hasFeature(K.GuildFeatures.NEWS),A=g.default.can(K.Permissions.SEND_MESSAGES,t),N=null!=p&&p.length>0,C=S&&O&&A&&N,R=T.default.inExperiment(t.guild_id)&&S&&O&&A;return{currentUserId:h.default.getId(),editingMessage:l,isFocusedWindow:u,disablePersonalInformation:d,editingContent:s,isLurking:c,canPromoteNews:C,canCrosspost:R}})(J);t.default=Z},5937:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(9)),a=u(n(1)),o=u(n(164)),i=u(n(6166)),l=n(0),s=u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}var d={pinMessage:function(e,t){var n=e.id,a=e.name;r.default.put({url:l.Endpoints.PIN(n,t)}).catch(function(){var t;t=e.isPrivate()?s.default.Messages.PIN_MESSAGE_TOO_MANY_BODY_PRIVATE_CHANNEL.format({maxPins:l.MAX_PINS_PER_CHANNEL}):s.default.Messages.PIN_MESSAGE_TOO_MANY_BODY.format({maxPins:l.MAX_PINS_PER_CHANNEL,channelName:a}),o.default.show({title:s.default.Messages.PIN_MESSAGE_TOO_MANY_TITLE,body:t,confirmText:s.default.Messages.OKAY})})},unpinMessage:function(e,t){r.default.delete({url:l.Endpoints.PIN(e.id,t)}).catch(function(){return o.default.show({title:s.default.Messages.UNPIN_MESSAGE_FAILED_TITLE,body:s.default.Messages.UNPIN_MESSAGE_FAILED_BODY,confirmText:s.default.Messages.TRY_AGAIN,cancelText:s.default.Messages.CANCEL,onConfirm:d.unpinMessage.bind(d,e,t)})})},ackPins:function(e){a.default.dirtyDispatch({type:l.ActionTypes.CHANNEL_PINS_ACK,channelId:e})},fetchPins:function(e){var t=i.default.getPinnedMessages(e);t&&(t.loaded||t.loading)||(a.default.dirtyDispatch({type:l.ActionTypes.LOAD_PINNED_MESSAGES,channelId:e}),r.default.get({url:l.Endpoints.PINS(e),retries:2}).then(function(t){a.default.dispatch({type:l.ActionTypes.LOAD_PINNED_MESSAGES_SUCCESS,messages:t.body,channelId:e})},function(){a.default.dispatch({type:l.ActionTypes.LOAD_PINNED_MESSAGES_FAILURE,channelId:e})}))}},c=d;t.default=c},5939:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),a=u(n(5865)),o=u(n(5973)),i=n(5871),l=n(0),s=u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e){var t,n;function u(){return e.apply(this,arguments)||this}return n=e,(t=u).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,u.prototype.render=function(){var e=this.props,t=e.src,n=e.fileSize,u=e.className,c=e.mediaPlayerClassName,f=e.poster,p=e.fileName,h=e.naturalWidth,v=e.naturalHeight,m=e.playable,y=e.volume,_=e.autoPlay,g=e.autoMute,E=e.mediaPlayerRef,I=e.onPlay,T=e.onEnded,S=e.onVolumeChange,O=e.onMute,A=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["src","fileSize","className","mediaPlayerClassName","poster","fileName","naturalWidth","naturalHeight","playable","volume","autoPlay","autoMute","mediaPlayerRef","onPlay","onEnded","onVolumeChange","onMute"]);return r.createElement(a.default,d({alt:s.default.Messages.VIDEO,className:u,src:f},A,{minWidth:o.default.minWidth,shouldLink:!1,shouldAnimate:!1}),function(e){var a=e.src,s=e.size,u=s.width,d=s.height,f=!(h<=l.MAX_VIDEO_WIDTH&&v<=l.MAX_VIDEO_HEIGHT||h<=l.MAX_VIDEO_HEIGHT&&v<=l.MAX_VIDEO_WIDTH);return r.createElement(o.default,{className:c,forceExternal:f,src:t,poster:a,width:u,height:d,volume:y,autoPlay:_||!1,autoMute:g||!1,type:o.default.Types.VIDEO,fileName:p,fileSize:(0,i.sizeString)(n),playable:m,ref:E,onPlay:I,onEnd:T,onVolumeChange:S,onMute:O})})},u}(r.Component);t.default=c,c.displayName="LazyVideo"},5940:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=i(n(17)),o=i(n(5310));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,n=e.tag,i=void 0===n?"div":n,l=e.padded,s=void 0===l||l,u=e.inset,d=void 0!==u&&u,c=e.className,f=e.children,p=e.onClick;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(i,{onClick:p,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,className:(0,a.default)(c,(t={},t[o.default.outer]=!d,t[o.default.inset]=d,t[o.default.padded]=s,t[o.default.interactive]=null!=p,t))},void 0,f)}},5942:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=T(n(17)),i=T(n(3)),l=T(n(5937)),s=T(n(162)),u=T(n(73)),d=n(5998),c=T(n(5972)),f=T(n(5988)),p=T(n(5856)),h=T(n(128)),v=n(6445),m=T(n(5936)),y=T(n(6446)),_=T(n(433)),g=n(0),E=T(n(10)),I=T(n(5327));function T(e){return e&&e.__esModule?e:{default:e}}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var A=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={report:!1},t.handleDelete=function(){var e=t.state.report,n=t.props,r=n.channel,a=n.message;if(e)u.default.push(y.default,{channel:r,message:a,onReport:function(){s.default.deleteMessage(r.id,a.id)}});else{var o=a.firstNewsEmbed();r.type===g.ChannelTypes.GUILD_NEWS&&null!=o&&null!=o.referenceId&&(0,d.deleteNews)(o.referenceId,a.channel_id),s.default.deleteMessage(r.id,a.id)}},t.handleToggleReport=function(e){t.setState({report:e.currentTarget.checked})},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e,t,n=this.state.report,r=this.props,o=r.channel,i=r.message,l=r.showContextMenuHint,s=r.canCrosspostMessage,u=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(r,["channel","message","showContextMenuHint","canCrosspostMessage"]),d=s&&o.type===g.ChannelTypes.GUILD_NEWS;return l&&(e=O(f.default,{className:I.default.spacingTop},void 0,E.default.Messages.DELETE_MESSAGE_CONTEXT_MENU_HINT.format())),(0,v.canReportMessage)(i)&&(t=O(p.default,{value:n,onChange:this.handleToggleReport,hideBorder:!0,className:I.default.spacingTop},void 0,E.default.Messages.DELETE_MESSAGE_REPORT)),a.createElement(_.default,S({header:d?E.default.Messages.MODIFY_FOLLOWED_NEWS_HEADER:E.default.Messages.DELETE_MESSAGE_TITLE,confirmText:E.default.Messages.DELETE,cancelText:E.default.Messages.CANCEL,onConfirm:this.handleDelete},u),O(h.default,{size:h.default.Sizes.MEDIUM,color:h.default.Colors.PRIMARY,className:I.default.spacing},void 0,d?E.default.Messages.DELETE_FOLLOWED_NEWS_BODY:E.default.Messages.DELETE_MESSAGE_BODY),O("div",{className:I.default.message},void 0,O(m.default,{channel:o,messages:[i],enableInteraction:!1})),t,e)},r}(a.PureComponent);A.displayName="DeleteModal";var N=i.default.connectStores([c.default],function(e){var t=e.channel;return{canCrosspostMessage:c.default.inExperiment(t.guild_id)}})(A);var C={confirmPin:function(e,t){var n=O(m.default,{channel:e,messages:[t],enableInteraction:!1});u.default.push(function(r){var o;return o=e.isPrivate()?E.default.Messages.PIN_MESSAGE_BODY_PRIVATE_CHANNEL:E.default.Messages.PIN_MESSAGE_BODY.format({channelName:e.toString()}),a.createElement(_.default,S({red:!1,header:E.default.Messages.PIN_MESSAGE_TITLE,confirmText:E.default.Messages.PIN_CONFIRM,cancelText:E.default.Messages.CANCEL,onConfirm:function(){return l.default.pinMessage(e,t.id)}},r),O(h.default,{size:h.default.Sizes.MEDIUM,color:h.default.Colors.PRIMARY,className:I.default.spacing},void 0,o),O("div",{className:I.default.message},void 0,n))})},confirmUnpin:function(e,t){var n=O(m.default,{channel:e,messages:[t],enableInteraction:!1});u.default.push(function(r){return a.createElement(_.default,S({header:E.default.Messages.UNPIN_MESSAGE_TITLE,confirmText:E.default.Messages.UNPIN_CONFIRM,cancelText:E.default.Messages.CANCEL,onConfirm:function(){return l.default.unpinMessage(e,t.id)}},r),O(h.default,{size:h.default.Sizes.MEDIUM,color:h.default.Colors.PRIMARY,className:I.default.spacing},void 0,E.default.Messages.UNPIN_MESSAGE_BODY),O("div",{className:(0,o.default)(I.default.message,I.default.spacing)},void 0,n),O(f.default,{},void 0,E.default.Messages.UNPIN_MESSAGE_CONTEXT_MENU_HINT.format()))})},confirmDelete:function(e,t,n){void 0===n&&(n=!1),u.default.push(function(r){return a.createElement(N,S({channel:e,message:t,showContextMenuHint:n},r))})},confirmEdit:function(e,t,n){u.default.push(function(r){return a.createElement(_.default,S({header:E.default.Messages.MODIFY_FOLLOWED_NEWS_HEADER,confirmText:E.default.Messages.CONFIRM,cancelText:E.default.Messages.CANCEL,red:!1,onConfirm:function(){return s.default.editMessage(e,t,{content:n})}},r),O(h.default,{size:h.default.Sizes.MEDIUM,color:h.default.Colors.PRIMARY,className:I.default.spacing},void 0,E.default.Messages.EDIT_FOLLOWED_NEWS_BODY))})},confirmPublish:function(e,t){u.default.push(function(n){return a.createElement(_.default,S({header:E.default.Messages.MODIFY_FOLLOWED_NEWS_HEADER,confirmText:E.default.Messages.CONFIRM,cancelText:E.default.Messages.CANCEL,red:!1,onConfirm:function(){return s.default.crosspostMessage(e,t)}},n),O(h.default,{size:h.default.Sizes.MEDIUM,color:h.default.Colors.PRIMARY,className:I.default.spacing},void 0,E.default.Messages.PUBLISH_FOLLOWED_NEWS_BODY))})}};t.default=C},5950:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(1))&&r.__esModule?r:{default:r},o=n(0);var i={show:function(){this.deactivateRagingDemon(),a.default.dispatch({type:o.ActionTypes.SHOW_KEYBOARD_SHORTCUTS})},hide:function(){a.default.dispatch({type:o.ActionTypes.HIDE_KEYBOARD_SHORTCUTS})},activateRagingDemon:function(){a.default.dispatch({type:o.ActionTypes.ACTIVATE_RAGING_DEMON})},deactivateRagingDemon:function(){a.default.dispatch({type:o.ActionTypes.DEACTIVATE_RAGING_DEMON})}};t.default=i},5951:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.default=void 0;var r=I(n(6030)),a=I(n(6162)),o=I(n(6)),i=I(n(3)),l=n(37),s=I(n(1)),u=I(n(235)),d=I(n(316)),c=I(n(6031)),f=I(n(5886)),p=I(n(18)),h=I(n(8)),v=n(243),m=I(n(43)),y=I(n(454)),_=I(n(195)),g=I(n(306)),E=n(0);function I(e){return e&&e.__esModule?e:{default:e}}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S={},O={},A=0,N=!0,C={},R=[E.KeybindCustomActions.PUSH_TO_TALK,E.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK,E.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET];function P(t){if(h.default.embedded)h.default.inputEventUnregister(parseInt(t,10));else if(S[t]){var n=O[t],r=C[n.action];r&&!0===r.isPressed&&e.nextTick(function(){return r.onTrigger(!1)}),S[t].reset(),S[t]=null}}function M(e){if(N&&!__OVERLAY__){var t=e.shortcut,n=e.action,o=e.context;if(""!==t&&null!=t&&n!==E.KeybindCustomActions.UNASSIGNED)if(null!=C[n]){var i=e.id,l=C[n].keyEvents;!function(e,t,n,o){if(h.default.embedded)h.default.inputEventRegister(parseInt(e),t,n,o);else{P(e);var i=(0,a.default)(new r.default(document));o.keyup&&i.bindGlobal((0,v.toString)(t),function(){return n(!1)},"keyup"),o.keydown&&i.bindGlobal((0,v.toString)(t),function(){return n(!0)},"keydown"),S[e]=i}}(i,t,function(e){return function(e,t,n){var r=O[e];null!=r&&C[r.action].onTrigger(t,n)}(i,e,o)},T({focused:!0,blurred:!0,keydown:!1,keyup:!1},l)),f.default.validateKeybind((0,v.toString)(e.shortcut))}else console.error("KeybindStore: Looking for callback action "+n+" but it doesn't exist in this version. Skipping")}}function b(e){var t,n=T({id:A.toString(),action:E.KeybindCustomActions.UNASSIGNED,shortcut:[],managed:!1},e);return O=T({},O,((t={})[n.id]=n,t)),A+=1,n}function L(e){P(e.id),delete(O=T({},O))[e.id]}function D(e){var t,n=e.keybind;O=T({},O,((t={})[n.id]=n,t)),__OVERLAY__||(p.default.track(E.AnalyticEvents.USER_SETTINGS_KEYBIND_UPDATED,{keybind_action:n.action,keybind_is_bound:!0,keybind_has_shortcut:!!n.shortcut.length}),n.action===E.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK?p.default.track(E.AnalyticEvents.OVERLAY_SETTINGS_UPDATED,{hotkey:n.action===E.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK?(0,v.toString)(n.shortcut):null}):n.action===E.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET&&p.default.track(E.AnalyticEvents.OVERLAY_SETTINGS_UPDATED,{text_activation_hotkey:n.action===E.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET?(0,v.toString)(n.shortcut):null})),M(n)}function w(){return!1!==(e=m.default.getShortcuts(),o.default.each(O,function(t){t.action!==E.KeybindCustomActions.PUSH_TO_TALK||!0!==t.managed||null!=t.context&&null!=e[t.context]||L(t)}),o.default.reduce(m.default.getShortcuts(),function(e,t,n){var r=o.default.find(O,function(e){return e.action===E.KeybindCustomActions.PUSH_TO_TALK&&!0===e.managed&&e.context===n});if(null==r)M(b({action:E.KeybindCustomActions.PUSH_TO_TALK,shortcut:t,managed:!0,context:n}));else{if(null==t)return e||!1;D({keybind:T({},r,{shortcut:"string"==typeof t?(0,v.toCombo)(t):t,context:n})})}return!0},!1)||function(){if(y.default.enabled){if(null!=o.default.find(O,function(e){return e.action===E.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK&&!0===e.managed}))return!1;var e=(0,v.toCombo)("shift+`");M(b({action:E.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK,shortcut:e,managed:!0}))}}()||function(){if(!y.default.enabled)return!1;if(null!=o.default.find(O,function(e){return e.action===E.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET&&!0===e.managed}))return!1;var e=(0,v.toCombo)("]");M(b({action:E.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET,shortcut:e,managed:!0}))}());var e}C[E.KeybindCustomActions.UNASSIGNED]={onTrigger:function(){},keyEvents:{}},C[E.KeybindCustomActions.PUSH_TO_TALK]={onTrigger:function(e,t){m.default.getMode(t)===E.InputModes.PUSH_TO_TALK&&(C[E.KeybindCustomActions.PUSH_TO_TALK].isPressed=e,m.default.getMediaEngine().eachConnection(function(t){return t.setForceAudioInput(e,!1)},t))},keyEvents:{keyup:!0,keydown:!0},isPressed:!1},C[E.KeybindCustomActions.PUSH_TO_TALK_PRIORITY]={onTrigger:function(e){m.default.getMode()===E.InputModes.PUSH_TO_TALK&&(C[E.KeybindCustomActions.PUSH_TO_TALK_PRIORITY].isPressed=e,m.default.getMediaEngine().eachConnection(function(t){return t.setForceAudioInput(e,!0)},l.MediaEngineContextTypes.DEFAULT))},keyEvents:{keyup:!0,keydown:!0},isPressed:!1},C[E.KeybindCustomActions.PUSH_TO_MUTE]={onTrigger:function(e){m.default.getMode()===E.InputModes.VOICE_ACTIVITY&&(m.default.isSelfDeaf()||(C[E.KeybindCustomActions.PUSH_TO_MUTE].isPressed=e,u.default.setTemporarySelfMute(e)))},keyEvents:{keyup:!0,keydown:!0},isPressed:!1},C[E.KeybindCustomActions.TOGGLE_MUTE]={onTrigger:function(){u.default.toggleSelfMute()},keyEvents:{keyup:!0,keydown:!1}},C[E.KeybindCustomActions.TOGGLE_DEAFEN]={onTrigger:function(){u.default.toggleSelfDeaf()},keyEvents:{keyup:!0,keydown:!1}},C[E.KeybindCustomActions.TOGGLE_VOICE_MODE]={onTrigger:function(){var e=m.default.getMode()===E.InputModes.PUSH_TO_TALK?E.InputModes.VOICE_ACTIVITY:E.InputModes.PUSH_TO_TALK;u.default.setMode(e)},keyEvents:{keyup:!0,keydown:!1}},C[E.KeybindCustomActions.TOGGLE_OVERLAY]={onTrigger:function(){var e=y.default.enabled;d.default.setEnabled(!e)},keyEvents:{keyup:!0,keydown:!1}},C[E.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK]={onTrigger:function(e){var t=y.default.getFocusedPID();null!=t&&(y.default.isReady(t)||y.default.isCrashed(t))&&(e?d.default.setUILocked(!_.default.isUILocked(t),t):d.default.setInputLocked(!y.default.isInputLocked(t),t))},keyEvents:{keyup:!0,keydown:!0}},C[E.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET]={onTrigger:function(){var e=y.default.getFocusedPID();null!=e&&(null!=e||!1)&&_.default.isPinned(E.OverlayWidgets.TEXT)&&y.default.isReady(e)&&y.default.isInputLocked(e)&&d.default.activateRegion(E.OverlayActiveRegions.TEXT_WIDGET)},keyEvents:{keyup:!0,keydown:!1}},C[E.KeybindCustomActions.TOGGLE_STREAMER_MODE]={onTrigger:function(){c.default.setEnabled(!g.default.enabled)},keyEvents:{keyup:!0,keydown:!1}};var k=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(e){__OVERLAY__||this.waitFor(m.default,y.default),O=e||{},o.default.forEach(O,function(e){A=Math.max(parseInt(e.id,10),A)+1;try{M(e)}catch(t){console.error("Failed to register keybind",e,t)}})},a.getState=function(){return O},a.getKeybindList=function(){var e=[];for(var t in O)O.hasOwnProperty(t)&&e.push((0,v.toString)(O[t].shortcut));return e},a.getOverlayKeybind=function(){return o.default.find(O,function(e){return e.action===E.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK&&!0===e.managed})},a.getOverlayChatKeybind=function(){return o.default.find(O,function(e){return e.action===E.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET&&!0===e.managed})},r}(i.default.PersistedStore);k.persistKey="keybinds",k.migrations=[function(e){void 0===e&&(e={});var t=e,n=t.v,r=t.keybinds,a=void 0===r?e:r;return o.default.reduce(a,function(e,t,r){var a=parseInt(t.id,10);return isNaN(a)||t.id!==r?e:((null==n||n<2)&&("string"==typeof t.shortcut?(t.shortcut=t.shortcut.replace("escape","esc").replace("capslock","caps lock").replace("numlock","num lock").replace("pageup","page up").replace("pagedown","page down"),t.shortcut=(0,v.toCombo)(t.shortcut)):t.shortcut=t.shortcut.map(function(e){return e.length<3?[].concat(e,[(0,v.getEnv)()]):e})),e[r]=t,e)},{})},function(e){return Object.keys(e).filter(function(t){var n=e[t];return R.includes(n.action)&&!0===n.managed}).length!==R.length?(w(),O):e}];var U=new k(s.default,{CONNECTION_OPEN:function(e){return w()},AUDIO_SET_MODE:function(e){return w()},OVERLAY_SET_ENABLED:function(e){return w()},RPC_APP_CONNECTED:function(e){return w()},RPC_APP_DISCONNECTED:function(e){return w()},KEYBINDS_ADD_KEYBIND:function(e){b()},KEYBINDS_DELETE_KEYBIND:function(e){var t=e.id,n=O[t];__OVERLAY__||p.default.track(E.AnalyticEvents.USER_SETTINGS_KEYBIND_UPDATED,{keybind_action:n.action,keybind_is_bound:!1,keybind_has_shortcut:!1}),null!=n&&L(n)},KEYBINDS_SET_KEYBIND:D,KEYBINDS_ENABLE_ALL_KEYBINDS:function(e){var t=e.enable;N=t,t?(f.default.enable(),o.default.forEach(O,M)):(f.default.disable(),o.default.forEach(O,function(e){return P(e.id)}))}});t.default=U}).call(this,n(61))},5952:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(1))&&r.__esModule?r:{default:r},o=n(0);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=i({},n(6375).default,{cancel:function(e){a.default.dispatch({type:o.ActionTypes.UPLOAD_CANCEL_REQUEST,file:e})}});t.default=l},5953:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(3)),a=u(n(1)),o=u(n(449)),i=u(n(8)),l=n(0),s=u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=i.default.isOSX()?l.TenorFormats.MEDIUMGIF:l.TenorFormats.MP4,f=null,p="",h="",v=[],m=[],y=c,_=[];function g(e){switch(e){case l.GIPHYFormats.FIXED_HEIGHT_MP4:case l.GIPHYFormats.FIXED_HEIGHT_SMALL_MP4:case l.GIPHYFormats.FIXED_WIDTH_MP4:case l.GIPHYFormats.FIXED_WIDTH_SMALL_MP4:case l.GIPHYFormats.DOWNSIZED_SMALL_MP4:case l.GIPHYFormats.ORIGINAL_MP4:case l.TenorFormats.MP4:case l.TenorFormats.TINYMP4:case l.TenorFormats.NANOMP4:case l.TenorFormats.WEBM:case l.TenorFormats.TINYWEBM:case l.TenorFormats.NANOWEBM:return!0;default:return!1}}var E=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getAnalyticsID=function(){return f},a.getQuery=function(){return p},a.getResultQuery=function(){return h},a.getResultItems=function(){return v},a.getTrendingCategories=function(){return m},a.getSelectedFormat=function(){return y},a.getSuggestions=function(){return _},r}(r.default.Store))(a.default,{GIF_PICKER_INITIALIZE:function(e){f=e.analyticsID},GIF_PICKER_QUERY:function(e){""===(p=e.query)&&(h="",v=[],_=[])},GIF_PICKER_QUERY_SUCCESS:function(e){if(null!=e.query&&p===h)return!1;null!=e.query&&(h=e.query),v=e.items.map(function(e){return{width:e.width,height:e.height,src:e.src,url:e.url,id:e.id,format:g(y)?l.GIFResultFormat.VIDEO:l.GIFResultFormat.IMAGE}})},GIF_PICKER_QUERY_FAILURE:function(e){var t=e.query;if(null==t)return!1;h=t,v=[]},GIF_PICKER_TRENDING_FETCH_SUCCESS:function(e){var t=e.trendingCategories;m=[{type:l.GIFPickerResultTypes.TRENDING_GIFS,icon:o.default.TRENDING_UP,name:s.default.Messages.GIF_PICKER_RESULT_TYPE_TRENDING_GIFS,src:e.trendingGIFPreview.src,format:l.GIFResultFormat.IMAGE}].concat(t.map(function(e){return d({},e,{type:l.GIFPickerResultTypes.TRENDING_CATEGORY,format:l.GIFResultFormat.IMAGE})}))},GIF_PICKER_SUGGESTIONS_SUCCESS:function(e){var t=e.items;_=t}});t.default=E},5954:function(e,t,n){"use strict";t.__esModule=!0,t.ResponsiveLoadingEmbedTile=t.ResponsiveEmbedTile=t.HORIZONTAL_EMBED_BREAKPOINT=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=s(n(17)),i=s(n(6048)),l=s(n(5315));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.HORIZONTAL_EMBED_BREAKPOINT=660;var c=function(e){var t;return a.createElement(i.default,d({},e,{className:(0,o.default)(e.className,(t={},t[l.default.embedVertical]=!e.isHorizontal,t[l.default.embedHorizontal]=e.isHorizontal,t))}))};t.ResponsiveEmbedTile=c,c.displayName="ResponsiveEmbedTile";var f=function(e){var t=e.isHorizontal;return a.createElement(c,d({},e,{media:function(){var e;return u("div",{className:(0,o.default)(l.default.loadingDescription)},void 0,u("div",{className:(0,o.default)(l.default.loadingBackgroundWrapper,(e={},e[l.default.loadingBackgroundWrapperHorizontal]=t,e))},void 0,u("div",{className:l.default.loadingBackground})))},title:function(){var e;return u("div",{className:(0,o.default)(l.default.loadingImage,(e={},e[l.default.loadingImageHorizontal]=t,e))})}}))};t.ResponsiveLoadingEmbedTile=f,f.displayName="ResponsiveLoadingEmbedTile"},5955:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=v(n(17)),i=v(n(304)),l=n(59),s=v(n(803)),u=n(819),d=v(n(231)),c=v(n(302)),f=v(n(6109)),p=v(n(427)),h=v(n(5318));function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var _=400,g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._animatedValue=new i.default.Value(1),t.state={imageLoadError:!1,imageLoading:!0},t.componentWillEnter=function(e){t._animatedValue.setValue(0),i.default.timing(t._animatedValue,{toValue:1,duration:_}).start(e)},t.componentWillLeave=function(e){i.default.timing(t._animatedValue,{toValue:0,duration:_}).start(e)},t.getImageStyle=function(){return{opacity:t._animatedValue}},t.handleImageError=function(){t.setState({imageLoadError:!0,imageLoading:!1})},t.handleImageLoaded=function(){t.setState({imageLoading:!1})},t}y(t,e);var n=t.prototype;return n.renderMedia=function(){var e,t=this.props,n=t.src,r=t.className,a=t.title,l=this.state.imageLoading;return m(i.default.img,{className:(0,o.default)((e={},e[h.default.imageLoading]=l,e),r),src:n,alt:a,style:this.getImageStyle(),onError:this.handleImageError,onLoad:this.handleImageLoaded})},n.render=function(){var e=this.props,t=e.className,n=e.title,r=e.src,a=this.state,l=a.imageLoadError,s=a.imageLoading;return null==r||l?m(i.default.div,{className:(0,o.default)(h.default.titleContainer,t),style:this.getImageStyle()},void 0,n):m(i.default.div,{className:(0,o.default)(s?h.default.loadingContainer:null,t),style:this.getImageStyle()},void 0,s?m(p.default,{className:h.default.spinner,itemClassName:h.default.spinnerItem,type:p.default.Type.PULSING_ELLIPSIS,animated:!0}):null,this.renderMedia())},t}(a.Component);g.displayName="TileMediaImage";var E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={currentIndex:0,videoLoadError:!1,videoLoaded:!1},t._video=a.createRef(),t.videoTimeout=new l.Timeout,t.videoPlaying=!1,t.handleToggleMute=function(e){e.stopPropagation(),e.preventDefault();var n=t.props.onToggleMute;n&&n(e)},t.handleVideoError=function(){t.setState({videoLoadError:!0})},t.handleVideoLoaded=function(){t.setState({videoLoaded:!0})},t.renderTypeVideo=function(){var e,n=t.state.videoLoaded,r=t.props,i=r.video,l=r.image,f=r.title,p=r.playing,v=r.muted,y=r.splashClassName,_=r.splashPlaceholderClassName,E=r.renderMediaOverlay;return m(a.Fragment,{},void 0,u.isMobile?null:a.createElement("video",{className:(0,o.default)(h.default.splash,y),muted:v,loop:!0,preload:"none",ref:t._video,onLoadedMetadata:t.handleVideoLoaded,onError:t.handleVideoError},m("source",{src:i,type:"video/mp4"})),m(s.default,{},void 0,p&&n?null:m(g,{className:(0,o.default)(h.default.splashPlaceholder,_),src:l,title:f},0)),m(d.default,{className:(0,o.default)(h.default.muteContainer,(e={},e[h.default.muteContainerPlaying]=p&&n,e[h.default.muteContainerMediaOverlay]=null!=E,e)),onClick:t.handleToggleMute},void 0,p&&n?m(c.default,{name:v?c.default.Names.SPEAKER_OFF:c.default.Names.SPEAKER,className:h.default.mute}):null))},t.nextItem=function(){var e=t.props.slideImages;null!=e&&t.setState({currentIndex:(t.state.currentIndex+1)%e.length})},t.renderSlideItem=function(e){var n=t.props,r=n.image,a=n.title,i=n.playing,l=n.splashClassName,s=t.state.currentIndex;return i?m(g,{className:(0,o.default)(h.default.splash,l),src:e[s],title:a},s):m(g,{className:(0,o.default)(h.default.splash,l),src:r,title:a},"image")},t}y(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.videoTimeout.stop()},n.componentDidUpdate=function(e){var t=this,n=this.props.playing,r=this._video.current;if(null!=r)if(n&&!e.playing){this.videoTimeout.stop(),isFinite(r.duration)&&isFinite(r.currentTime)&&(r.currentTime=0),r.volume=.3;var a=r.play();null!=a&&a.then(function(){t.videoPlaying=!0})}else e.playing&&!n&&this.videoTimeout.start(_,function(){t.videoPlaying&&(r.pause(),t.videoPlaying=!1)})},n.renderTypeImage=function(){var e=this.props,t=e.playing,n=e.slideImages,r=e.image,a=e.title,i=e.splashClassName;return null==n?m(g,{className:(0,o.default)(h.default.splash,i),src:r,title:a},"image"):m(f.default,{onInterval:this.nextItem,interval:2e3,className:h.default.slideshowWrapper,disable:!t},void 0,m(s.default,{},void 0,this.renderSlideItem(n)))},n.render=function(){var e=this.props,t=e.video,n=e.className,r=e.placeholder,a=e.renderMediaOverlay,i=e.playing,l=this.state,s=l.videoLoadError,u=l.videoLoaded;return r?m("div",{className:n}):m("figure",{className:(0,o.default)(h.default.tileMedia,n)},void 0,null==t||s?this.renderTypeImage():this.renderTypeVideo(),null!=a&&a(i&&u))},t}(a.Component);E.displayName="TileMedia";var I=E;t.default=I},5956:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.default=void 0;var r,a=U(n(2)),o=k(n(17)),i=k(n(6)),l=k(n(3)),s=n(303),u=U(n(446)),d=k(n(5236)),c=k(n(199)),f=k(n(20)),p=k(n(74)),h=k(n(861)),v=k(n(236)),m=k(n(42)),y=k(n(14)),_=k(n(231)),g=k(n(158)),E=k(n(302)),I=k(n(188)),T=k(n(307)),S=k(n(427)),O=k(n(128)),A=k(n(426)),N=k(n(81)),C=k(n(169)),R=k(n(102)),P=k(n(5884)),M=k(n(5929)),b=k(n(822)),L=n(0),D=k(n(5235)),w=k(n(5326));function k(e){return e&&e.__esModule?e:{default:e}}function U(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function H(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var x=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){var e,t,n=this.props,r=n.emoji,a=n.count,i=n.selected,l=n.setSelected,s=null==r.id?C.default.getURL(r.name):N.default.getEmojiURL({id:r.id,animated:r.animated});t=null==r.id?c.default.convertSurrogateToName(r.name):":"+r.name+":";var u=s?j("img",{className:w.default.emoji,src:s,alt:r.name}):j("span",{className:(0,o.default)(w.default.emoji,w.default.emojiText)},void 0,r.name);return j(A.default,{position:A.default.Positions.LEFT,text:t},void 0,j(_.default,{className:(0,o.default)((e={},e[w.default.reactionDefault]=!i,e[w.default.reactionSelected]=i,e)),onClick:l},void 0,u,j(O.default,{color:O.default.Colors.PRIMARY,className:w.default.count},void 0,a)))},t}(a.PureComponent);x.displayName="Reaction";var B=function(e){function t(t){var n;return F(n=e.call(this,t)||this).renderUserContextMenu=n.renderUserContextMenu.bind(F(n)),F(n).removeReaction=n.removeReaction.bind(F(n)),n}H(t,e);var n=t.prototype;return n.removeReaction=function(){var e=this.props,t=e.emoji,n=e.user,r=e.message,a=e.channel;u.removeReaction(a.id,r.id,t,n.id)},n.renderUserContextMenu=function(e){var t=this;(0,s.openContextMenu)(e,function(e){return a.createElement(d.default,G({},e,{type:L.ContextMenuTypes.USER_CHANNEL_MEMBERS,user:t.props.user,guildId:t.props.guildId,channelId:t.props.channel.id}))})},n.render=function(){var e,t=this.props,n=t.user,r=t.guildId,a=t.channel,i=t.final,l=R.default.can(L.Permissions.MANAGE_MESSAGES,y.default.getCurrentUser(),a)?j(_.default,{onClick:this.removeReaction},void 0,j(E.default,{name:E.default.Names.CLOSE,width:16,height:16,className:w.default.remove})):null,s=null!=r&&p.default.getNick(r,n.id);return j(g.default,{className:(0,o.default)((e={},e[w.default.reactorDefault]=!i,e[w.default.reactorFinal]=i,e)),onContextMenu:this.renderUserContextMenu,align:g.default.Align.CENTER},void 0,j(g.default.Child,{wrap:!0,grow:0,shrink:0,className:D.default.marginReset},void 0,j(P.default,{user:n,size:"xsmall"})),j(g.default.Child,{},void 0,j(O.default,{color:O.default.Colors.PRIMARY,className:w.default.name},void 0,s&&j("span",{className:w.default.nickname},void 0,s),j(M.default,{user:n,className:s?w.default.tagFaded:w.default.tag,discriminatorClass:w.default.discriminator}))),l)},t}(a.PureComponent);B.displayName="Reactor";var V=l.default.connectStores([h.default],function(e){var t=e.message,n=e.reaction,r=h.default.getReactions(t.getChannelId(),t.id,n.emoji);return{hasMore:n.count>Object.keys(r).length,reactors:Object.values(r)}})(function(e){function t(t){var n;return F(n=e.call(this,t)||this).handleScroll=n.handleScroll.bind(F(n)),n.state={lastId:null,loadingMore:!1},n}H(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this.loadMore()},n.UNSAFE_componentWillReceiveProps=function(e){var t=this;i.default.isEqual(this.props.reaction,e.reaction)||this.setState({lastId:null,loadingMore:!1},function(){return t.loadMore()})},n.handleScroll=function(){var e=this.refs.SCROLLER_REF.getScrollerNode();e.scrollTop+e.offsetHeight>=e.scrollHeight-44&&this.props.hasMore&&!this.state.loadingMore&&this.loadMore()},n.loadMore=function(){var e=this,t=this.props,n=t.message,r=t.reaction,a=this.state.lastId;this.setState({loadingMore:!0}),u.getReactions(n.getChannelId(),n.id,r.emoji,a).then(function(t){return e.setState({loadingMore:!1,lastId:t[t.length-1].id})})},n.render=function(){var e=this.props,t=e.message,n=e.guildId,r=e.channel,o=e.reaction,i=e.hasMore,l=e.reactors,s=l.map(function(e,a){return j(B,{message:t,emoji:o.emoji,guildId:n,channel:r,user:e,final:a===l.length-1},e.id)});return!s.length&&this.state.loadingMore?s.push(j(S.default,{className:w.default.spinner},"loadingMore")):i&&s.push(j(S.default,{className:w.default.spinnerMore},"hasMore")),a.createElement(b.default,{outerClassName:w.default.reactors,className:"scroller",fade:!0,theme:b.default.Themes.GHOST_HAIRLINE,ref:"SCROLLER_REF",onScroll:i?this.handleScroll:void 0,elementHeight:44,batchEndMultiplier:2},s)},t}(a.PureComponent)),K=j(S.default,{}),W=function(t){function n(e){var n,r=(n=t.call(this,e)||this).props.reactions;return n.state={selectedReaction:r[0]},n}H(n,t);var r=n.prototype;return r.UNSAFE_componentWillUpdate=function(t){var n=this.props,r=n.reactions,a=n.onClose;r.length!==t.reactions.length&&0===t.reactions.length&&e(a)},r.setSelectedReaction=function(e){this.setState({selectedReaction:e})},r.render=function(){var e=this,t=this.props,n=t.message,r=t.reactions,o=this.state.selectedReaction;if(!o)return K;var l=f.default.getChannel(n.getChannelId());if(null==l)throw new Error("MessageReactions.render: Message does not have a channelId");var s=null==l||l.isPrivate()?null:l.getGuildId(),u=r.map(function(e,t){return G({},e,{pos:t})}).sort(function(e,t){return e.count!==t.count?t.count-e.count:e.pos-t.pos}).map(function(t){return a.createElement(x,G({key:(t.emoji.id||"")+":"+t.emoji.name,selected:i.default.isEqual(o.emoji,t.emoji),setSelected:function(){return e.setSelectedReaction(t)}},t))});return j(I.default,{size:w.default.size,className:w.default.container},void 0,j(T.default,{outerClassName:w.default.sidebar,className:w.default.scroller,theme:T.default.Themes.GHOST_HAIRLINE,fade:!0},void 0,u),j(V,{message:n,reaction:o,guildId:s,channel:l},(o.emoji.id||"")+":"+o.emoji.name))},n}(a.PureComponent);W.displayName="MessageReactions";var Y=l.default.connectStores([v.default,m.default],function(e){var t=e.message,n=v.default.getMessage(t.getChannelId(),t.id),r=null!=n?n.reactions:[];return{theme:m.default.theme,reactions:r}},{forwardRef:!0})(W);t.default=Y}).call(this,n(30).setImmediate)},5958:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(3)),a=i(n(24)),o=i(n(1));n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l="GuildNSFWAgreeStore",s={};var u=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initialize=function(){s=a.default.get(l)||s},o.didAgree=function(e){return null!=e&&(s[e]||!1)},r}(r.default.Store))(o.default,{GUILD_NSFW_AGREE:function(e){var t=e.guildId;s[t]=!0,a.default.set(l,s)}});t.default=u},5961:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return function(t){var n,r;function l(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).state={isAuthenticated:o.default.isAuthenticated()},e.onStoreChange=function(){e.setState({isAuthenticated:o.default.isAuthenticated()})},e}r=t,(n=l).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var s=l.prototype;return s.componentDidMount=function(){o.default.addChangeListener(this.onStoreChange)},s.componentWillUnmount=function(){o.default.removeChangeListener(this.onStoreChange)},s.render=function(){return a.createElement(e,i({},this.props,{isAuthenticated:this.state.isAuthenticated}))},l}(a.Component)};var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=(r=n(11))&&r.__esModule?r:{default:r};function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},5967:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(e){this.code=e.code||"",this.temporary=e.temporary||!1,this.revoked=e.revoked||!1,this.uses=e.uses||0,this.maxUses=e.maxUses||0,this.maxAge=e.maxAge||0,this.createdAt=e.createdAt||new Date,this.channel=e.channel,this.guild=e.guild,this.inviter=e.inviter||null,this.targetUserType=e.targetUserType||null,this.targetUser=e.targetUser||null},o.isExpired=function(){var e=this.maxAge;if(e>0&&(0,r.default)(this.createdAt).add(e,"seconds").isBefore(Date.now()))return!0;return!1},o.getExpiresAt=function(){return this.maxAge>0?(0,r.default)(this.createdAt).add(this.maxAge,"seconds").toDate():1/0},o.toString=function(){return this.code},a}(a(n(52)).default);t.default=o},5968:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.JUMP_TO_GUILD=void 0;var r=s(n(50)),a=s(n(160)),o=s(n(441)),i=s(n(45)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u={binds:function(){for(var e=[],t=1;t<10;t++)e.push("mod+"+t);return e}(),global:!0,action:function(e,t){var n,s=parseInt(t.split("+")[1],10);if((0===s&&(s=10),s)&&(n=1===s?l.ME:o.default.guildPositions[s-2])){var u=r.default.getChannelId(n);return n===l.ME&&null==a.default.getGuildId()&&(u=null),i.default.transitionTo(l.Routes.CHANNEL(n,u)),!1}}};t.JUMP_TO_GUILD=u;var d={JUMP_TO_GUILD:u};t.default=d},5969:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(6)),a=s(n(3)),o=s(n(1)),i=s(n(20)),l=s(n(245));n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u=2500,d={};function c(e){return e.length>u&&(e=e.substr(0,u)),e}function f(e){var t=e.channelId,n=e.draft;return n?d[t]={timestamp:Date.now(),draft:c(n)}:delete d[t],!1}function p(){if(!(l.default.totalUnavailableGuilds>0))for(var e in d)null==i.default.getChannel(e)&&delete d[e]}var h=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(e){d=e||{},this.waitFor(i.default,l.default)},o.getState=function(){return d},o.getRecentlyEditedDrafts=function(){return(0,r.default)(d).toPairs().map(function(e){var t=e[0],n=e[1];return{channelId:t,timestamp:n.timestamp,draft:n.draft}}).sortBy(function(e){return-e.timestamp}).value()},o.getDraft=function(e){var t=d[e];return null==t?"":t.draft},a}(a.default.PersistedStore);h.persistKey="DraftStore";var v=new h(o.default,{CONNECTION_OPEN:function(e){return p(),!1},GUILD_DELETE:function(e){return p(),!1},CHANNEL_DELETE:function(e){var t=e.channel.id;return null!=d[t]&&delete d[t],!1},DRAFT_SAVE:function(e){f(e)},DRAFT_CHANGE:f});t.default=v},5972:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=p(n(3)),i=p(n(1)),l=p(n(165)),s=p(n(75)),u=p(n(23)),d=p(n(14)),c=p(n(845)),f=n(0);function p(e){return e&&e.__esModule?e:{default:e}}function h(){return!0}var v=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(s.default,c.default,d.default),this.syncWith([s.default,u.default],h)},a.getExperimentId=function(){return f.Experiments.NEWS_FOLLOWING},a.getMetaData=function(){return{title:"News Following",description:["Control: Regular news channel","Treatment 1:Ability to follow a news channel"]}},a.getExperimentDescriptor=function(e){return s.default.getOverrideExperimentDescriptor(this.getExperimentId())||(null!=e?c.default.getExperimentAssignment(e,this.getExperimentId()):null)},a.inExperiment=function(e){var t=this.getExperimentDescriptor(e);return null!=t&&t.bucket!==f.ExperimentBuckets.NOT_ELIGIBLE&&(l.default.trigger(t),t.bucket===f.ExperimentBuckets.TREATMENT_1)},r}(o.default.Store))(i.default,{CONNECTION_OPEN:function(e){return!0},EXPERIMENTS_FETCH_SUCCESS:function(e){return!0},EXPERIMENT_OVERRIDE_BUCKET:function(e){return e.experimentId===f.Experiments.NEWS_FOLLOWING},EXPERIMENT_OVERRIDE_TYPE:function(e){return e.experimentId===f.Experiments.NEWS_FOLLOWING}});l.default.register(v,((a={})[f.ExperimentTypes.GUILD]=((r={})[f.ExperimentBuckets.CONTROL]=function(){return null},r[f.ExperimentBuckets.TREATMENT_1]=function(){return null},r),a));var m=v;t.default=m},5973:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.Controls=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=_(n(17)),i=_(n(6)),l=_(n(304)),s=n(448),u=_(n(305)),d=_(n(231)),c=_(n(302)),f=_(n(6169)),p=_(n(5949)),h=n(805),v=n(0),m=_(n(312)),y=_(n(5302));function _(e){return e&&e.__esModule?e:{default:e}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function T(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var S={friction:14,tension:200},O={VIDEO:"VIDEO",AUDIO:"AUDIO"},A={width:"100%",height:"100%",backgroundColor:"black"};function N(e){var t=0|e,n=t%60;return(t-n)/60+":"+String(n).padStart(2,"0")}var C=function(e){var t=e.current,n=e.duration,r=null!=t?N(t):"-:--",a=null!=n?N(n):"-:--";return r=r.padStart(a.length,"0"),T("div",{className:y.default.durationTimeWrapper},void 0,T("span",{className:y.default.durationTimeDisplay},void 0,r),T("span",{className:y.default.durationTimeSeparator},void 0,"/"),T("span",{className:y.default.durationTimeDisplay},void 0,a))};C.displayName="DurationTime";var R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={translateY:new l.default.Value(0),iconHover:!1,barHover:!1},t._isUnmounted=!1,t.setDurationRef=function(e){t.durationBar=e},t.setVolumeRef=function(e){t.volumeBar=e},t}I(t,e);var n=t.prototype;return n.componentDidMount=function(){this.state.translateY.setValue(this.props.autoPlay?1:0)},n.componentDidUpdate=function(e){var t=this.props,n=t.hide,r=t.playing;n&&!e.hide?this.animateControls(1,r):!n&&e.hide&&this.animateControls(0,r)},n.componentWillUnmount=function(){this._isUnmounted=!1},n.setStateIfMounted=function(e){this._isUnmounted||this.setState(e)},n.updateProgress=function(e,t){void 0===t&&(t=!0);var n=this.durationBar;null!=n&&n.setGrabber(e,t)},n.animateControls=function(e,t){var n=this.state.translateY;t?l.default.spring(n,E({toValue:e},S)).start():n.setValue(e)},n.getAnimatedStyle=function(){return{transform:[{translateY:this.state.translateY.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}]}},n.renderPlayIcon=function(){var e=this.props,t=e.playing,n=e.currentTime,r=e.duration,a=e.onPause,o=e.onPlay,i=e.disabled;return t?T(d.default,{onClick:a,tabIndex:i?-1:0},void 0,T(c.default,{name:c.default.Names.PAUSE,className:y.default.controlIcon},"pause")):T(d.default,{onClick:o,tabIndex:i?-1:0},void 0,null!=n&&n===r?T(c.default,{name:c.default.Names.REPLAY,className:y.default.controlIcon},"replay"):T(c.default,{name:c.default.Names.PLAY,className:y.default.controlIcon},"play"))},n.render=function(){var e=this,t=this.props,n=t.buffers,r=t.children,i=t.currentTime,s=t.duration,u=t.muted,p=t.onDrag,v=t.onDragEnd,_=t.onDragStart,g=t.onToggleMuted,E=t.width,I=t.volume,S=t.dragging,A=t.hide,N=t.type,R=t.disabled,P=this.state,M=P.barHover,b=P.iconHover,L=A||!M&&!b&&S!==f.default.Types.VOLUME,D="string"==typeof E||E>250,w=T(C,{current:i,duration:s});return T(h.BackgroundOpacityContext.Consumer,{},void 0,function(t){var i;return T(l.default.div,{className:(0,o.default)(N===O.VIDEO?y.default.videoControls:y.default.audioControls,y.default[t.backgroundOpacity+"BackgroundOpacity"]),onClick:function(e){return e.stopPropagation()},onDoubleClick:function(e){return e.stopPropagation()},style:e.getAnimatedStyle()},void 0,e.renderPlayIcon(),D?w:null,a.createElement(f.default,{buffers:n,value:s||0,onDrag:p,onDragEnd:v,onDragStart:_,type:f.default.Types.DURATION,ref:e.setDurationRef}),T("div",{className:m.default.flex,onMouseEnter:function(){clearTimeout(e._timeout),e.setState({barHover:!1,iconHover:!0})},onMouseLeave:function(){clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.setStateIfMounted({iconHover:!1})},500)}},void 0,T(d.default,{onClick:g,tabIndex:R?-1:0},void 0,T(c.default,{name:u?c.default.Names.SPEAKER_OFF:c.default.Names.SPEAKER,className:(0,o.default)(y.default.controlIcon,L?void 0:y.default.opaque)}))),T("div",{className:(0,o.default)(N===O.VIDEO?y.default.videoVolumeWrapper:y.default.audioVolumeWrapper,(i={},i[y.default.hidden]=L,i)),onMouseEnter:function(){clearTimeout(e._timeout),e.setState({barHover:!0,iconHover:!1})},onMouseLeave:function(){clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.setStateIfMounted({barHover:!1})},500)}},void 0,a.createElement(f.default,{value:I,onDrag:p,onDragEnd:v,onDragStart:_,type:f.default.Types.VOLUME,ref:e.setVolumeRef})),r)})},t}(a.Component);t.Controls=R,R.displayName="Controls",R.defaultProps={disabled:!1};var P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={translateY:new l.default.Value(0)},t}I(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props.hide;t&&!e.hide?this.animateControls(1):!t&&e.hide&&this.animateControls(0)},n.animateControls=function(e){l.default.spring(this.state.translateY,E({toValue:e},S)).start()},n.getAnimatedStyle=function(){return{transform:[{translateY:this.state.translateY.interpolate({inputRange:[0,1],outputRange:["0%","-100%"]})}]}},n.renderVideoMetadata=function(){var e=this.props,t=e.fileName,n=e.fileSize,r=e.src,a=e.disabled;return T(l.default.div,{className:y.default.metadata,style:this.getAnimatedStyle()},void 0,T("div",{className:y.default.metadataContent},void 0,T("div",{className:y.default.metadataName},void 0,t),T("div",{className:y.default.metadataSize},void 0,n)),!a&&T(u.default,{href:r,target:"_blank",rel:"noreferrer noopener",className:y.default.metadataDownload},void 0,T(c.default,{name:c.default.Names.DOWNLOAD,className:y.default.metadataIcon})))},n.renderAudioMetadata=function(){var e=this.props,t=e.fileName,n=e.fileSize,r=e.src,a=e.disabled;return T(h.BackgroundOpacityContext.Consumer,{},void 0,function(e){return T("div",{className:(0,o.default)(y.default.audioMetadata,y.default[e.backgroundOpacity+"BackgroundOpacity"])},void 0,T("div",{className:y.default.metadataContent},void 0,a?t:T(u.default,{className:y.default.metadataName,href:r},void 0,t),T("div",{className:y.default.metadataSize},void 0,n)),a?t:T(u.default,{href:r,className:y.default.metadataDownload},void 0,T(c.default,{name:c.default.Names.DOWNLOAD,className:y.default.metadataIcon})))})},n.render=function(){return this.props.type===O.AUDIO?this.renderAudioMetadata():this.renderVideoMetadata()},t}(a.Component);P.displayName="Metadata";var M=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={play:!1,scale:new l.default.Value(0),opacity:new l.default.Value(0)},t.popAnimation=function(){var e=t.state,n=e.opacity,r=e.scale;r.setValue(0),n.setValue(0),l.default.parallel([l.default.sequence([l.default.timing(n,{toValue:1,duration:200}),l.default.timing(n,{toValue:0,duration:200})]),l.default.spring(r,E({toValue:1.5},S,{friction:80}))]).start()},t}I(t,e);var n=t.prototype;return n.pop=function(e){void 0===e&&(e=!1),this.setState({play:e},this.popAnimation)},n.getAnimatedStyle=function(){var e=this.state,t=e.opacity,n=e.scale;return l.default.accelerate({opacity:t.interpolate({inputRange:[0,1],outputRange:[0,.8]}),transform:[{scale:n.interpolate({inputRange:[0,1],outputRange:[1,2]})}]})},n.render=function(){var e=this.state.play;return T(l.default.div,{className:y.default.playPausePop,style:this.getAnimatedStyle()},void 0,T(c.default,{name:e?c.default.Names.PLAY:c.default.Names.PAUSE,className:y.default.playPausePopIcon}))},t}(a.Component);M.displayName="PlayPausePop";var b=function(e){function t(n){var r;(r=e.call(this,n)||this)._unmounted=!1,r._lastMove=0,r.handleFullScreenExit=function(){var e=(0,s.getFullScreenNode)(r.elementRef&&r.elementRef.parentNode,r.elementRef);null!=e&&(0,s.isFullScreen)(e)||r.setState({fullscreen:!1})},r.toggleFullscreen=function(){var e=!r.state.fullscreen;r.setState({fullscreen:e})},r.setMuted=function(e){r.setState({muted:e})},r.toggleMuted=function(){r.setMuted(!r.state.muted)},r.setTime=function(e,t){void 0===t&&(t=!0);var n=g(r).elementRef;null!=n&&isFinite(n.duration)&&isFinite(n.currentTime)&&(n.currentTime=e,r.updateValue(e/n.duration,t),r.updateTime(e,n.duration))},r.handleUIUpdate=function(){if(r.state.playing&&!r._unmounted){var e=g(r).elementRef;null!=e&&(e.duration>0&&r.updateValue(e.currentTime/e.duration),r.updateTime(e.currentTime,e.duration),r.updateControlsVisibility(),requestAnimationFrame(r.handleUIUpdate))}},r.handleDrag=function(e,t){var n=g(r).elementRef;t===f.default.Types.DURATION?null!=n&&isFinite(n.duration)&&r.setTime(n.duration*e,!1):t===f.default.Types.VOLUME&&(0===e?r.setState({muted:!0,volume:e}):r.state.muted&&e>0?r.setState({muted:!1,volume:e}):r.setState({volume:e}))},r.handleLoaded=function(){var e=g(r).elementRef;null!=e&&(r.updateTime(e.currentTime,e.duration),r.setState({hasLoadedMetadata:!0,currentTime:e.currentTime,duration:e.duration}))},r.handleDurationChange=function(){var e=g(r).elementRef;null!=e&&(r.updateTime(e.currentTime,e.duration),r.setState({duration:e.duration}))},r.handleBuffer=i.default.debounce(function(){var e=g(r).elementRef,t=[];if(e)for(var n=e.duration,a=0;a<e.buffered.length;a++){var o=e.buffered.start(a),i=e.buffered.end(a);if(!(i-o<1)){var l=(i-o)/n,s=o/n;t.push([s,l])}}r.setState({buffers:t})},400),r.handleEnded=function(){var e=r.props.onEnd;r.setState({playing:!1,hideControls:!1}),null!=e&&e()},r.handleMouseMove=function(){r._lastMove=Date.now()},r.handleMouseLeave=function(){r._lastMove=0},r.handlePreload=function(){r.setState({preload:"metadata"})},r.setControlRef=function(e){r.controlsRef=e},r.setPlayPausePopRef=function(e){r.playPausePopRef=e},r.handleVideoClick=function(){var e=g(r),t=e.state,n=t.hasClickedPlay,a=t.playing,o=e.props,i=o.autoPlay,l=o.autoMute;i&&!n&&a&&l?r.setState({muted:!1,hasClickedPlay:!0}):r.setPlay(!r.state.playing)},r.setPlay=function(e){var t=g(r),n=t.props.autoMute,a=t.state,o=a.hasClickedPlay,i=a.muted;e!==r.state.playing&&(e?r.setState({playing:e,hasClickedPlay:!0,muted:!(!o&&n)&&i}):r.setState({playing:!1,hideControls:!1}))},r.handleDragStart=function(e){r.setState({dragging:e})},r.handleDragEnd=function(){r.setState({dragging:null}),r._lastMove=Date.now()},r.handleKeyDown=function(e){var t=g(r).elementRef;if(e.which===v.KeyboardKeys.SPACE)e.preventDefault(),r.setPlay(!r.state.playing);else if(e.which>=v.KeyboardKeys.DIGIT_0&&e.which<=v.KeyboardKeys.DIGIT_9&&null!=t){e.preventDefault();var n=(e.which-v.KeyboardKeys.DIGIT_0)/10;t.currentTime=t.duration*n,r.setPlay(!0)}};var a=r.props,o=a.autoPlay,l=a.autoMute,u=a.volume,d=a.playable;return r.state={buffers:[],currentTime:null,dragging:null,duration:null,fullscreen:!1,hasClickedPlay:!1,hasLoadedMetadata:!1,hideControls:!d,muted:l,volume:u,playing:o,preload:"none",width:t.minWidth},r}I(t,e),t.getDerivedStateFromProps=function(e,t){return!e.playable&&t.playing?{playing:!1,hideControls:!1}:null};var n=t.prototype;return n.componentDidMount=function(){var e=this.elementRef,t=this.controlsRef,n=this.state,r=n.playing,a=n.muted,o=n.volume;null!=e&&(a&&(e.muted=a),r&&(this.play(!0),this.handleUIUpdate()),e.volume=o,a||null==t||null==t.volumeBar||t.volumeBar.setGrabber(o))},n.componentDidUpdate=function(e,t){var n=this.props,r=n.onPause,a=n.onVolumeChange,o=n.onMute,i=this.state,l=i.playing,u=i.fullscreen,d=i.muted,c=i.dragging,p=i.volume,h=this.elementRef,v=this.controlsRef,m=this.playPausePopRef;if(null!=h){l&&!t.playing?(this.play(),this.handleMouseMove(),this.handleUIUpdate(),t.hasClickedPlay&&m&&m.pop(l)):!l&&t.playing&&(h.pause(),m&&m.pop(l),r&&r());var y=(0,s.getFullScreenNode)(h.parentNode,h);u&&!t.fullscreen&&null!=y?((0,s.requestFullScreen)(y),y.addEventListener(s.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenExit)):!u&&t.fullscreen&&null!=y&&(y.removeEventListener(s.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenExit),(0,s.exitFullScreen)(y)),c===f.default.Types.DURATION&&t.dragging!==f.default.Types.DURATION&&l?h.pause():c!==f.default.Types.DURATION&&t.dragging===f.default.Types.DURATION&&l&&h.play(),d!==t.muted&&(h.muted=d,null!=v&&null!=v.volumeBar&&(d?v.volumeBar.setGrabber(0):v.volumeBar.setGrabber(p)),o&&o(d)),p!==t.volume&&(null!=v&&null!=v.volumeBar&&(h.volume=p,v.volumeBar.setGrabber(p)),a&&a(p)),null!=v&&null!=v.volumeBar&&!d&&p>0&&v.volumeBar.setGrabber(p)}},n.componentWillUnmount=function(){this._unmounted=!0},n.play=function(e){void 0===e&&(e=!1);var t=this.props.onPlay;null!=this.elementRef&&(this.elementRef.play(),t&&t(e))},n.getWidth=function(){var e=this.props.width;return"100%"===e?e:Math.max(e,t.minWidth)},n.updateValue=function(e,t){void 0===t&&(t=!0);var n=this.controlsRef;null!=n&&n.updateProgress(e,t)},n.updateTime=function(e,t){var n=0|e,r=0|t;this.state.currentTime===n&&this.state.duration===r||this.setState({currentTime:n,duration:r})},n.updateControlsVisibility=function(){var e=this.state,t=e.dragging,n=e.fullscreen?1e3:3e3,r=Math.max(0,Date.now()-this._lastMove)>n;r!==this.state.hideControls&&null==t&&this.setState({hideControls:r})},n.renderVideo=function(){var e=this,t=this.props,n=t.height,r=t.src,o=t.poster,i=t.forceExternal,l=t.onError,s=this.state.playing,u=this.getWidth();return i?T("video",{className:y.default.video,controls:!1,height:n,poster:o,width:u,playsInline:!0,autoPlay:s}):a.createElement("video",{className:y.default.video,controls:!1,playsInline:!0,autoPlay:s,height:n,onClick:this.handleVideoClick,onEnded:this.handleEnded,onError:l,onLoadedMetadata:this.handleLoaded,onProgress:this.handleBuffer,poster:o,preload:this.state.preload,ref:function(t){return e.elementRef=t},width:u},T("source",{src:r}))},n.renderAudio=function(){var e=this;return a.createElement("audio",{className:y.default.audio,controls:!1,onClick:this.handleVideoClick,onEnded:this.handleEnded,onLoadedMetadata:this.handleLoaded,onProgress:this.handleBuffer,preload:this.state.preload,ref:function(t){return e.elementRef=t}},T("source",{src:this.props.src}))},n.renderControls=function(){var e=this,t=this.props,n=t.type,r=t.autoPlay,o=t.playable,i=void 0===o||o,l=this.state,s=l.buffers,u=l.currentTime,f=l.duration,v=l.hasClickedPlay,m=l.hideControls,_=l.muted,g=l.playing,E=l.fullscreen,I=l.volume,S=l.dragging,A=this.getWidth();return v||r||n===O.AUDIO?a.createElement(R,{buffers:s,currentTime:u,duration:f,volume:I,hide:n===O.VIDEO&&m,muted:_,autoPlay:r,onDrag:this.handleDrag,onDragEnd:this.handleDragEnd,onDragStart:this.handleDragStart,onDurationChange:this.handleDurationChange,onPause:function(){return e.setPlay(!1)},onPlay:function(){return e.setPlay(!0)},onToggleMuted:this.toggleMuted,playing:g,dragging:S,type:n,ref:this.setControlRef,width:E?window.screen.width:A,disabled:!i},n===O.VIDEO?T(d.default,{onClick:this.toggleFullscreen},void 0,T(c.default,{className:y.default.controlIcon,name:c.default.Names.FULL_SCREEN,style:{marginLeft:0}})):null):T("div",{className:y.default.playCenter},void 0,T(h.BackgroundOpacityContext.Consumer,{},void 0,function(t){return T(p.default,{className:y.default.playButton,onPlay:e.handleVideoClick,backgroundOpacity:t.backgroundOpacity})}))},n.renderMetadata=function(){var e=this.props,t=e.fileName,n=e.fileSize,r=e.src,a=e.type,o=e.playable,i=this.state.hideControls;return null==t||null==n?null:T(P,{fileName:t,fileSize:n,src:r,hide:a===O.VIDEO&&i,type:a,disabled:!o})},n.renderPlayPausePop=function(){return a.createElement(M,{ref:this.setPlayPausePopRef})},n.render=function(){var e=this,t=this.props,n=t.height,r=t.type,a=t.src,i=t.forceExternal,l=t.className,s=t.playable,u=this.getWidth(),d=this.state,c=d.fullscreen,f=d.hideControls,v=d.playing,m=d.preload,_=y.default.wrapperPaused;return r===O.AUDIO?_=y.default.wrapperAudio:f?_=y.default.wrapperControlsHidden:v&&(_=y.default.wrapperPlaying),i&&r===O.VIDEO?T(h.BackgroundOpacityContext.Consumer,{},void 0,function(t){return T("div",{className:_,style:{width:u,height:n}},void 0,e.renderMetadata(),e.renderVideo(),T("div",{className:y.default.playCenter},void 0,T(p.default,{className:y.default.playButton,externalURL:a,backgroundOpacity:t.backgroundOpacity})))}):T("div",{className:(0,o.default)(_,l),"data-fullscreen":c,onMouseEnter:"none"===m?this.handlePreload:null,onMouseLeave:v?this.handleMouseLeave:null,onMouseMove:v?this.handleMouseMove:null,onKeyDown:this.handleKeyDown,tabIndex:s?0:-1,style:c?A:{width:u,height:r===O.AUDIO?"auto":n}},void 0,this.renderMetadata(),r===O.AUDIO?this.renderAudio():this.renderVideo(),this.renderControls(),r===O.VIDEO?this.renderPlayPausePop():null)},t}(a.PureComponent);b.displayName="MediaPlayer",b.Types=O,b.defaultProps={width:498,height:80,forceExternal:!1,playable:!0,autoPlay:!1,autoMute:!1,volume:1},b.minWidth=150;var L=b;t.default=L},5981:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.PRETTY_KEYS=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=l(n(17)),o=l(n(5886)),i=l(n(5242));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var u="up",d="right",c="down",f="left",p=s("g",{fill:"#4F545C"},void 0,s("polygon",{transform:"translate(5.025000, 5.000000) scale(1, -1) translate(-5.025000, -5.000000) ",points:"4.16666667 10 4.16666672 3.33333333 1.25 6.25 0.05 5 5.00000005 0 9.99999967 5 8.75 6.25 5.83333338 3.33333333 5.83333333 10"})),h=function(e){var t=e.direction,n=void 0===t?u:t;return s("svg",{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",className:(0,a.default)(i.default.bindArrow,i.default[n])},void 0,p)};h.displayName="ArrowSVG";var v={mod:function(){return o.default.modKey},alt:function(){return o.default.altKey},up:function(){return s(h,{direction:u})},down:function(){return s(h,{direction:c})},left:function(){return s(h,{direction:f})},right:function(){return s(h,{direction:d})},pageup:function(){return"page up"},pagedown:function(){return"page down"},"any-character":function(){return"any key"},return:function(){return o.default.returnKey}};t.PRETTY_KEYS=v;var m=function(e){var t=e.shortcut,n=e.className;return s("div",{className:(0,a.default)(i.default.keybindShortcut,n)},void 0,t.split("+").map(function(e){return v[e]?v[e]():e}).map(function(e,t){return s("span",{},t,e)}))};m.displayName="KeyboardShortcut";var y=m;t.default=y},5991:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(4)),a=s(n(3)),o=s(n(1)),i=s(n(5967)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u={},d={};var c=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.getInvite=function(e,t,n){return t!==l.InviteTargetUserTypes.STREAM?u[e]:null!=d[e]&&null!=n?d[e][n]:null},r}(a.default.Store))(o.default,{CONNECTION_OPEN:function(e){return u={},void(d={})},CHANNEL_DELETE:function(e){var t=e.channel;delete u[t.id],delete d[t.id]},INSTANT_INVITE_CREATE:function(e){},INSTANT_INVITE_CREATE_SUCCESS:function(e){var t=e.channelId,n=e.invite,a=null!=n.target_user_type?n.target_user_type:null,o=new i.default({code:n.code,temporary:n.temporary,revoked:n.revoked,maxUses:n.max_uses,maxAge:n.max_age,createdAt:(0,r.default)(n.created_at),channel:n.channel,guild:n.guild,targetUserType:a,targetUser:n.target_user});if(a===l.InviteTargetUserTypes.STREAM){var s=null!=n.target_user?n.target_user.id:null;null==d[t]&&(d[t]={}),d[t][s]=o}else u[t]=o}});t.default=c},5992:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=u(n(439)),i=n(59),l=u(n(8)),s=u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._flashTitleInterval=new i.Interval,t.state={titleIndex:null},t.handleFocus=function(){t._flashTitleInterval.stop(),t.setState({titleIndex:null}),document.removeEventListener("focusin",t.handleFocus)},t.rotateTitle=function(){var e=t.state.titleIndex;document.hasFocus()?(t._flashTitleInterval.stop(),t.setState({titleIndex:null})):t.setState({titleIndex:(e+1)%t.titles.length})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,u,f,p=r.prototype;return p.componentDidMount=function(){l.default.embedded||document.hasFocus()||(this.setState({titleIndex:0}),this._flashTitleInterval.start(1e3,this.rotateTitle),document.addEventListener("focusin",this.handleFocus))},p.componentWillUnmount=function(){this._flashTitleInterval.stop(),document.removeEventListener("focusin",this.handleFocus)},p.render=function(){return null!=this.title?d(o.default,{},void 0,d("title",{},void 0,this.title)):null},a=r,(u=[{key:"titles",get:function(){return[s.default.Messages.GO_LIVE_HEY,s.default.Messages.GO_LIVE_LOOK,s.default.Messages.GO_LIVE_LISTEN]}},{key:"title",get:function(){var e=this.state.titleIndex;return null!=e?this.titles[e]:null}}])&&c(a.prototype,u),f&&c(a,f),r}(a.PureComponent);t.default=f,f.displayName="TitleFocusFlasher"},5993:function(e,t,n){"use strict";t.__esModule=!0,t.getDefaultLayoutContent=function(){return[{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_NAVIGATE_SERVERS,binds:w(L.KeybindActions.SERVER_PREV,L.KeybindActions.SERVER_NEXT)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_NAVIGATE_CHANNELS,binds:w(L.KeybindActions.CHANNEL_PREV,L.KeybindActions.CHANNEL_NEXT)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_UNREAD_CHANNELS,binds:w(L.KeybindActions.UNREAD_PREV,L.KeybindActions.UNREAD_NEXT)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_UNREAD_MENTION_CHANNELS,binds:w(L.KeybindActions.MENTION_CHANNEL_PREV,L.KeybindActions.MENTION_CHANNEL_NEXT),groupEnd:!0},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_PREVIOUS_GUILD,binds:w(L.KeybindActions.TOGGLE_PREVIOUS_GUILD)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_MARK_SERVER_READ,binds:w(L.KeybindActions.MARK_SERVER_READ)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_MARK_CHANNEL_READ,binds:w(L.KeybindActions.MARK_CHANNEL_READ)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_CREATE_GUILD,binds:w(L.KeybindActions.CREATE_GUILD)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_QUICKSWITCHER,binds:w(L.KeybindActions.QUICKSWITCHER_SHOW)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_CREATE_DM_GROUP,binds:w(L.KeybindActions.CREATE_DM_GROUP),groupEnd:!0},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_PINS,binds:w(L.KeybindActions.TOGGLE_CHANNEL_PINS)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_MENTIONS,binds:w(L.KeybindActions.TOGGLE_MENTIONS)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_USERS,binds:w(L.KeybindActions.TOGGLE_USERS)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_SEARCH_EMOJIS,binds:w(L.KeybindActions.SEARCH_EMOJIS)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_SEARCH_GIFS,binds:w(L.KeybindActions.SEARCH_GIFS),groupEnd:!0},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_MUTE,binds:w(L.KeybindActions.TOGGLE_MUTE)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_DEAFEN,binds:w(L.KeybindActions.TOGGLE_DEAFEN)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_CALL_ACCEPT,binds:w(L.KeybindActions.CALL_ACCEPT)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_CALL_DECLINE,binds:w(L.KeybindActions.MARK_CHANNEL_READ)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_CALL_START,binds:w(L.KeybindActions.CALL_START),groupEnd:!0},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_SCROLL_CHAT,binds:w(L.KeybindActions.SCROLL_UP,L.KeybindActions.SCROLL_DOWN)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_JUMP_TO_FIRST_UNREAD,binds:w(L.KeybindActions.JUMP_TO_FIRST_UNREAD)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_FOCUS_TEXT_AREA,binds:w(L.KeybindActions.TEXTAREA_FOCUS)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_UPLOAD_FILE,binds:w(L.KeybindActions.UPLOAD_FILE)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_HELP,binds:w(L.KeybindActions.TOGGLE_HELP)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_SEARCH,binds:w(L.KeybindActions.FOCUS_SEARCH)},{description:D.default.Messages.KEYBIND_DESCRIPTION_MODAL_EASTER_EGG,binds:["h+h+right+n+k"]}]},t.default=t.DEFAULT_LAYOUT=void 0;var r,a,o=n(6080),i=n(6081),l=n(6346),s=n(6347),u=n(6348),d=n(5968),c=n(6082),f=n(6083),p=n(6084),h=n(6158),v=n(6086),m=n(6087),y=n(6088),_=n(6349),g=n(6089),E=n(6090),I=n(6091),T=n(6093),S=n(6094),O=n(6351),A=n(6352),N=n(6095),C=n(6353),R=n(6354),P=n(6097),M=n(6356),b=n(6161),L=n(0),D=(r=n(10))&&r.__esModule?r:{default:r};function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e){var t=k[e];if(null==t)throw new Error("getBindsFor(...): No bind for "+t);return t.binds[0]})}var k=((a={})[L.KeybindActions.SERVER_NEXT]=g.SERVER_NEXT,a[L.KeybindActions.SERVER_PREV]=g.SERVER_PREV,a[L.KeybindActions.CHANNEL_NEXT]=i.CHANNEL_NEXT,a[L.KeybindActions.CHANNEL_PREV]=i.CHANNEL_PREV,a[L.KeybindActions.UNREAD_NEXT]=P.UNREAD_NEXT,a[L.KeybindActions.UNREAD_PREV]=P.UNREAD_PREV,a[L.KeybindActions.MENTION_CHANNEL_NEXT]=P.MENTION_NEXT,a[L.KeybindActions.MENTION_CHANNEL_PREV]=P.MENTION_PREV,a[L.KeybindActions.TOGGLE_PREVIOUS_GUILD]=i.TOGGLE_PREVIOUS_GUILD,a[L.KeybindActions.JUMP_TO_GUILD]=d.JUMP_TO_GUILD,a[L.KeybindActions.SUBMIT]=E.SUBMIT,a[L.KeybindActions.TEXTAREA_FOCUS]=I.TEXTAREA_FOCUS,a[L.KeybindActions.MARK_CHANNEL_READ]=c.MARK_CHANNEL_READ,a[L.KeybindActions.MARK_SERVER_READ]=f.MARK_SERVER_READ,a[L.KeybindActions.TOGGLE_CHANNEL_PINS]=O.TOGGLE_CHANNEL_PINS,a[L.KeybindActions.TOGGLE_MENTIONS]=C.TOGGLE_MENTIONS,a[L.KeybindActions.TOGGLE_USERS]=R.TOGGLE_USERS,a[L.KeybindActions.TOGGLE_HELP]=A.TOGGLE_HELP,a[L.KeybindActions.TOGGLE_MUTE]=T.TOGGLE_MUTE,a[L.KeybindActions.TOGGLE_DEAFEN]=T.TOGGLE_DEAFEN,a[L.KeybindActions.TOGGLE_CATEGORY_COLLAPSED]=S.TOGGLE_CATEGORY_COLLAPSED,a[L.KeybindActions.SCROLL_UP]=m.SCROLL_UP,a[L.KeybindActions.SCROLL_DOWN]=m.SCROLL_DOWN,a[L.KeybindActions.QUICKSWITCHER_SHOW]=h.QUICKSWITCHER_SHOW,a[L.KeybindActions.CREATE_DM_GROUP]=l.CREATE_DM_GROUP,a[L.KeybindActions.SEARCH_EMOJIS]=y.SEARCH_EMOJIS,a[L.KeybindActions.SEARCH_GIFS]=_.SEARCH_GIFS,a[L.KeybindActions.TOGGLE_HOTKEYS]=N.TOGGLE_HOTKEYS,a[L.KeybindActions.JUMP_TO_FIRST_UNREAD]=p.JUMP_TO_FIRST_UNREAD,a[L.KeybindActions.CREATE_GUILD]=s.CREATE_GUILD,a[L.KeybindActions.UPLOAD_FILE]=M.UPLOAD_FILE,a[L.KeybindActions.RETURN_TO_AUDIO_CHANNEL]=v.RETURN_TO_AUDIO_CHANNEL,a[L.KeybindActions.CALL_ACCEPT]=o.CALL_ACCEPT,a[L.KeybindActions.CALL_START]=o.CALL_START,a[L.KeybindActions.FOCUS_SEARCH]=u.FOCUS_SEARCH,a[L.KeybindActions.ZOOM_IN]=b.ZOOM_IN,a[L.KeybindActions.ZOOM_OUT]=b.ZOOM_OUT,a[L.KeybindActions.ZOOM_RESET]=b.ZOOM_RESET,a);t.DEFAULT_LAYOUT=k;var U=k;t.default=U},5994:function(e,t,n){"use strict";t.__esModule=!0,t.HeaderRecord=t.default=void 0;var r=T(n(29)),a=T(n(6)),o=n(6025),i=T(n(115)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(129)),s=T(n(310)),u=T(n(131)),d=T(n(5969)),c=T(n(6159)),f=T(n(99)),p=T(n(309)),h=T(n(87)),v=T(n(237)),m=T(n(5995)),y=T(n(324)),_=T(n(5889)),g=T(n(5931)),E=n(0),I=T(n(10));function T(e){return e&&e.__esModule?e:{default:e}}var S=100,O=5,A=1e3,N=function(){function e(e,t,a){var o=this;this.query="",this.results=[],this.userResults=[],this.groupDMResults=[],this.textChannelResults=[],this.voiceChannelResults=[],this.guildResults=[],this.applicationResults=[],this.mapUserResults=function(e){var t=e.user,a=e.id,i=e.score,l=e.comparator;null==t&&(t=n(14).default.getUser(a));(0,r.default)(null!=t,"Missing user");var s=P(E.AutocompleterResultTypes.USER);return o.createResult(E.AutocompleterResultTypes.USER,t,R(i,s[t.id]),l)},this.parseUserResults=function(e){var t=e.query,r=e.results;if(!o.queryMode||o.queryMode===E.AutocompleterResultTypes.USER){if(0===t.trim().length){var a=o.selectedChannelId,i=n(11).default.getId();o.userResults=_.default.getRecentlyTalked(a,o.queryMode?S:O).filter(function(e){return e.user.id!==i}).map(o.mapUserResults)}else o.userResults=r.map(o.mapUserResults);null==o.queryMode&&o.userResults.length>O&&(o.userResults.length=O),o.updateAllResults(),o.emitChange(o)}},this.emitChange=e,this.userSearchContext=m.default.getSearchContext(this.parseUserResults,S),this.resultTypes=new Set(t),this._generateEmptyResults=a}var t=e.prototype;return t._include=function(e){return 0===this.resultTypes.size||this.resultTypes.has(e)},t.search=function(e,t){if(void 0===t&&(t={}),this.selectedGuildId=t.selectedGuildId,this.selectedChannelId=t.selectedChannelId,this.lastSelectedChannelId=t.lastSelectedChannelId,0===e.trim().length)return this.query=e,this.generateEmptyResults();this.queryMode=function(e){switch(e.charAt(0)){case"@":return E.AutocompleterResultTypes.USER;case"#":return E.AutocompleterResultTypes.TEXT_CHANNEL;case"!":return E.AutocompleterResultTypes.VOICE_CHANNEL;case"*":return E.AutocompleterResultTypes.GUILD;case"$":return E.AutocompleterResultTypes.APPLICATION;default:return null}}(e);var n=this.queryMode?e.substr(1):e,r=this.queryMode?S:O;switch(this.queryMode){case E.AutocompleterResultTypes.USER:this.queryUsers(n,r,!0);break;case E.AutocompleterResultTypes.TEXT_CHANNEL:this.textChannelResults=this.queryTextChannels(n,r);break;case E.AutocompleterResultTypes.VOICE_CHANNEL:this.voiceChannelResults=this.queryVoiceChannels(n,r);break;case E.AutocompleterResultTypes.GUILD:this.guildResults=this.queryGuilds(n,r);break;case E.AutocompleterResultTypes.APPLICATION:this.applicationResults=this.queryApplications(n,r);break;default:this.queryUsers(n,r),this.groupDMResults=this.queryGroupDMs(n,r),this.textChannelResults=this.queryTextChannels(n,r),this.voiceChannelResults=this.queryVoiceChannels(n,r,!0),this.guildResults=this.queryGuilds(n,r)}var a=this.query!==e&&null!=this.queryMode?1:0;return this.query=e,this.queryMode&&this.queryMode!==E.AutocompleterResultTypes.USER&&this.updateAllResults(),a},t.clear=function(){this.results=[],this.userResults=[],this.groupDMResults=[],this.textChannelResults=[],this.voiceChannelResults=[],this.guildResults=[]},t.destroy=function(){null!=this.userSearchContext&&(this.userSearchContext.destroy(),this.userSearchContext=null)},t.createResult=function(e,t,n,r){switch(void 0===n&&(n=0),e){case E.AutocompleterResultTypes.GUILD:if(!(t instanceof s.default))throw new Error("Invalid");return{type:E.AutocompleterResultTypes.GUILD,record:t,queryMode:this.queryMode,score:n,comparator:r};case E.AutocompleterResultTypes.USER:if(!(t instanceof u.default))throw new Error("Invalid");return{type:E.AutocompleterResultTypes.USER,record:t,queryMode:this.queryMode,score:n,comparator:r};case E.AutocompleterResultTypes.HEADER:if(!(t instanceof C))throw new Error("Invalid");return{type:E.AutocompleterResultTypes.HEADER,record:t,queryMode:this.queryMode,score:n,comparator:r};case E.AutocompleterResultTypes.TEXT_CHANNEL:if(!(t instanceof l.default))throw new Error("Invalid");return{type:E.AutocompleterResultTypes.TEXT_CHANNEL,record:t,queryMode:this.queryMode,score:n,comparator:r};case E.AutocompleterResultTypes.VOICE_CHANNEL:if(!(t instanceof l.default))throw new Error("Invalid");return{type:E.AutocompleterResultTypes.VOICE_CHANNEL,record:t,queryMode:this.queryMode,score:n,comparator:r};case E.AutocompleterResultTypes.GROUP_DM:if(!(t instanceof l.default))throw new Error("Invalid");return{type:E.AutocompleterResultTypes.GROUP_DM,record:t,queryMode:this.queryMode,score:n,comparator:r};case E.AutocompleterResultTypes.APPLICATION:if(!(t instanceof i.default))throw new Error("Invalid");return{type:E.AutocompleterResultTypes.APPLICATION,record:t,queryMode:this.queryMode,score:n,comparator:r}}throw new Error("Invalid type")},t.queryTextChannels=function(e,t){var n=this;if(!this._include(E.AutocompleterResultTypes.TEXT_CHANNEL))return[];var r=this.selectedChannelId,i=P(E.AutocompleterResultTypes.TEXT_CHANNEL);return(0,a.default)(_.default.queryChannels(e,null,1/0,!0,function(e){return e.id!==r})).map(function(e){var t=e.channel,r=e.score,a=e.comparator;return n.createResult(E.AutocompleterResultTypes.TEXT_CHANNEL,t,R(r,i[t.id]),a)}).sort(o.sortByMatchScore).take(t).value()},t.queryVoiceChannels=function(e,t,n){var r=this;if(void 0===n&&(n=!1),!this._include(E.AutocompleterResultTypes.VOICE_CHANNEL))return[];var i=null;if(n&&(i=this.selectedGuildId),n&&null==i)return[];var l=P(E.AutocompleterResultTypes.VOICE_CHANNEL);return(0,a.default)(_.default.queryChannels(e,i,1/0,!0,function(){return!0},E.ChannelTypes.GUILD_VOICE)).map(function(e){var t=e.channel,n=e.score,a=e.comparator;return r.createResult(E.AutocompleterResultTypes.VOICE_CHANNEL,t,R(n,l[t.id]),a)}).sort(o.sortByMatchScore).take(t).value()},t.queryGuilds=function(e,t){var n=this;if(!this._include(E.AutocompleterResultTypes.GUILD))return[];var r=this.selectedGuildId,i=P(E.AutocompleterResultTypes.GUILD);return(0,a.default)(_.default.queryGuilds(e,1/0,!0,function(e){return e.id!==r})).map(function(e){var t=e.guild,r=e.score,a=e.comparator;return n.createResult(E.AutocompleterResultTypes.GUILD,t,R(r,i[t.id]),a)}).sort(o.sortByMatchScore).take(t).value()},t.queryUsers=function(e,t,r){if(void 0===r&&(r=!1),this.userSearchContext&&this._include(E.AutocompleterResultTypes.USER)){var a=[n(11).default.getId()],o=this.selectedGuildId,i={friends:!0};o&&i&&(i.guild=o),r&&(i=null,this.queryMode?g.default.requestMembers(null,e,20):g.default.requestMembers(o,e,20));var l=n(20).default.getDMUserIds();this.userSearchContext.setQuery(e,i,a,l,P(E.AutocompleterResultTypes.USER))}},t.queryGroupDMs=function(e,t){var n=this;if(!this._include(E.AutocompleterResultTypes.GROUP_DM))return[];var r=this.selectedChannelId,a=P(E.AutocompleterResultTypes.GROUP_DM);return _.default.queryGroupDMs(e,t,!0,function(e){return e.id!==r}).map(function(e){var t=e.channel,r=e.score,o=e.comparator;return n.createResult(E.AutocompleterResultTypes.GROUP_DM,t,R(r,a[t.id]),o)})},t.queryApplications=function(e,t){var n=this;return this._include(E.AutocompleterResultTypes.APPLICATION)?_.default.queryApplications(e,t,!0).map(function(e){var t=e.application,r=e.score,a=e.comparator;return n.createResult(E.AutocompleterResultTypes.APPLICATION,t,R(r,y.default.getQuickSwitcherScoreForApplication(t.id)),a)}):[]},t.generateSectionHeader=function(e){return this.createResult(E.AutocompleterResultTypes.HEADER,new C(e),0)},t.generateResultFromId=function(e){var t,r=n(20).default.getChannel(e);if(null==r)return null;switch(r.type){case E.ChannelTypes.DM:if(!this._include(E.AutocompleterResultTypes.USER))return null;if(t=E.AutocompleterResultTypes.USER,null==(r=n(14).default.getUser(r.getRecipientId())))return null;break;case E.ChannelTypes.GROUP_DM:if(!this._include(E.AutocompleterResultTypes.GROUP_DM))return null;t=E.AutocompleterResultTypes.GROUP_DM;break;default:if(!this._include(E.AutocompleterResultTypes.TEXT_CHANNEL))return null;t=E.AutocompleterResultTypes.TEXT_CHANNEL}return this.createResult(t,r,0,r.toString())},t.getDrafts=function(e){var t=this,n=[];return d.default.getRecentlyEditedDrafts().forEach(function(r){var a=r.channelId;if(!e(a)){var o=t.generateResultFromId(a);null!=o&&n.push(o)}}),n},t.generateEmptyResults=function(){var e=this;if(null!=this.userSearchContext&&this.userSearchContext.clearQuery(),null!=this._generateEmptyResults)return this.results=this._generateEmptyResults(this),this.results.length>0?1:0;var t=[],r=this.selectedGuildId,o=this.selectedChannelId,i=this.lastSelectedChannelId;if(i){var l=this.generateResultFromId(i);l&&t.push(this.generateSectionHeader(I.default.Messages.QUICKSWITCHER_LAST_CHANNEL),l)}var s,u=this.getDrafts(function(e){return e===o||e===i});u.length>0&&(s=t).push.apply(s,[this.generateSectionHeader(I.default.Messages.QUICKSWITCHER_DRAFTS)].concat(u));var d=n(20).default,c=(0,a.default)(d.getChannels()).values().filter(function(e){var t=e.id;return t!==o&&t!==i&&p.default.getMentionCount(t)>0}).map(function(t){return e.generateResultFromId(t.id)}).filter(function(e){return!!e}).value();if(c.length&&(t.push(this.generateSectionHeader(I.default.Messages.QUICKSWITCHER_MENTIONS)),t=t.concat(c)),r){var h=f.default.getSelectableChannelIds(r).filter(function(e){var t=d.getChannel(e);return null!=t&&e!==o&&e!==i&&!v.default.isChannelMuted(t.guild_id,e)&&p.default.hasUnread(e)}).map(function(t){return e.generateResultFromId(t)}).filter(function(e){return e});h.length&&(t.push(this.generateSectionHeader(I.default.Messages.QUICKSWITCHER_UNREAD_CHANNELS)),t=t.concat(h))}return this.clear(),this.results=(0,a.default)(t).uniqBy(function(e){return e.record.id}).value(),this.results.length>0?1:0},t.updateAllResults=function(){var e;switch(this.queryMode){case E.AutocompleterResultTypes.USER:e=this.generateSectionHeader(I.default.Messages.QUICKSWITCHER_QUERYMODE_USERS),this.results=[].concat(this.userResults);break;case E.AutocompleterResultTypes.TEXT_CHANNEL:e=this.generateSectionHeader(I.default.Messages.QUICKSWITCHER_QUERYMODE_TEXT_CHANNELS),this.results=[].concat(this.textChannelResults);break;case E.AutocompleterResultTypes.VOICE_CHANNEL:e=this.generateSectionHeader(I.default.Messages.QUICKSWITCHER_QUERYMODE_VOICE_CHANNELS),this.results=[].concat(this.voiceChannelResults);break;case E.AutocompleterResultTypes.GUILD:e=this.generateSectionHeader(I.default.Messages.QUICKSWITCHER_QUERYMODE_GUILDS),this.results=[].concat(this.guildResults);break;case E.AutocompleterResultTypes.APPLICATION:e=this.generateSectionHeader(I.default.Messages.QUICKSWITCHER_QUERYMODE_APPLICATIONS),this.results=[].concat(this.applicationResults);break;default:this.results=[].concat(this.userResults,this.groupDMResults,this.textChannelResults,this.voiceChannelResults,this.guildResults)}this.results=(0,a.default)(this.results).uniqBy(function(e){return e.type+"-"+e.record.id}).sort(o.sortByMatchScore).value(),this._include(E.AutocompleterResultTypes.HEADER)&&this.results.length>0&&null!=e&&this.results.unshift(e)},e}();t.default=N;var C=function(e){this.id=e,this.text=e};function R(e,t){return void 0===e&&(e=0),A*e*(t||1)}function P(e){var t=c.default.getFrequently(),r=t.reduce(function(e,t){var n=t.id,r=c.default.getScore(n);return r>e?r:e},0),a=[];switch(e){case E.AutocompleterResultTypes.GUILD:a=t.filter(function(e){return e instanceof s.default});break;case E.AutocompleterResultTypes.USER:a=t.filter(function(e){return e instanceof l.default&&e.type===E.ChannelTypes.DM});break;case E.AutocompleterResultTypes.GROUP_DM:a=t.filter(function(e){return e instanceof l.default&&e.type===E.ChannelTypes.GROUP_DM});break;case E.AutocompleterResultTypes.TEXT_CHANNEL:a=t.filter(function(e){return e instanceof l.default&&(0,l.isGuildSelectableChannelType)(e.type)});break;case E.AutocompleterResultTypes.VOICE_CHANNEL:a=t.filter(function(e){return e instanceof l.default&&e.type===E.ChannelTypes.GUILD_VOICE})}var o={};return a.forEach(function(t){var a=t.id,i=c.default.getScore(a);if(e===E.AutocompleterResultTypes.USER){a=t.getRecipientId();var l=h.default.isFriend(a)?.2:0,s=n(20).default.getDMFromUserId(a)?.1:0;o[a]=1+i/r+l+s}else o[a]=1+i/r}),o}t.HeaderRecord=C},5995:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SearchContext=void 0;var r=d(n(135)),a=d(n(3)),o=d(n(1)),i=d(n(20)),l=d(n(87)),s=d(n(14)),u=n(0);function d(e){return e&&e.__esModule?e:{default:e}}var c=null,f=10;function p(e){null!=c&&(e=e.filter(function(e){return null!=e}),c.postMessage({type:u.UserSearchWorkerMessageTypes.UPDATE_USERS,payload:e}))}function h(e){if(null==e||l.default.isBlocked(e.id))return null;var t={id:e.id,username:e.username+"#"+e.discriminator};return e.bot&&(t.isBot=!0),l.default.isFriend(e.id)&&(t.isFriend=!0),t}function v(e,t,n){null!=e&&(e[t]=n||null)}function m(e,t){var n=[];return e.forEach(function(e){var r=h(e.user);v(r,t,e.nick),n.push(r)}),n}function y(e){var t=e.guildId,n=e.user,r=e.nick,a=h(n);return null!=a&&(v(a,t,r),p([a])),!1}function _(e){var t=e.channel.id,n=g(i.default.getChannel(t));if(0===n.length)return!1;var r=h(s.default.getCurrentUser());return v(r,t),n.push(r),p(n),!1}function g(e){var t=[];if(null==e||e.type!==u.ChannelTypes.DM&&e.type!==u.ChannelTypes.GROUP_DM)return t;var n=e.recipients;return(void 0===n?[]:n).forEach(function(n){var r=h(s.default.getUser(n));null!=e&&v(r,e.id),t.push(r)}),t}var E=function(){function e(e,t){var n=this;void 0===t&&(t=f),this.handleMessages=function(e){var t=e.data;t&&t.type===u.UserSearchWorkerMessageTypes.USER_RESULTS&&t.uuid===n._uuid&&(!1!==n._currentQuery&&n._callback(t.payload),null!=n._currentQuery&&(n._currentQuery=null),n._setNextQuery())},this._uuid=r.default.v4(),this._callback=e,this._limit=t,this._currentQuery=null,this._nextQuery=null,this._subscribed=!1,this._subscribe()}var t=e.prototype;return t._subscribe=function(){null==c||this._subscribed||(c.addEventListener("message",this.handleMessages,!1),this._subscribed=!0,this._setNextQuery())},t._unsubscribe=function(){null!=c&&this._subscribed&&(c.removeEventListener("message",this.handleMessages,!1),this._subscribed=!1)},t.destroy=function(){this._unsubscribe(),this.clearQuery()},t.clearQuery=function(){this._currentQuery=!1,this._nextQuery=null,null!=c&&this._subscribed&&c.postMessage({uuid:this._uuid,type:u.UserSearchWorkerMessageTypes.QUERY_CLEAR})},t.setQuery=function(e,t,n,r,a){null!=e&&(this._nextQuery={query:e,filters:t,blacklist:n,whitelist:r,boosters:a||{},limit:this._limit},this._setNextQuery())},t._setNextQuery=function(){!this._currentQuery&&this._nextQuery&&(null!=c&&this._subscribed?(this._currentQuery=this._nextQuery,this._nextQuery=null,c.postMessage({uuid:this._uuid,type:u.UserSearchWorkerMessageTypes.QUERY_SET,payload:this._currentQuery})):this._subscribed||this._subscribe())},e}();t.SearchContext=E;var I=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(l.default,i.default,s.default)},a.getSearchContext=function(e,t){return void 0===t&&(t=f),new E(e,t)},r}(a.default.Store))(o.default,{LOGOUT:function(e){null!=c&&(c.terminate(),c=null)},CONNECTION_OPEN:function(e){var t=e.user,r=e.guilds,a=e.channels,o=e.relationships;null!=c&&c.terminate(),c=new(n(6028));var l=h(t),s=[l];return r.forEach(function(e){s=s.concat(m(e.members,e.id))}),a.forEach(function(e){var t=e.id,n=i.default.getChannel(t);null==n||n.type!==u.ChannelTypes.DM&&n.type!==u.ChannelTypes.GROUP_DM||(v(l,n.id),s=s.concat(g(n)))}),o.forEach(function(e){var t=e.user;s.push(h(t))}),p(s),!1},OVERLAY_INITIALIZE:function(e){var t=e.users,r=e.guildMembers;null!=c&&c.terminate(),c=new(n(6028));var a=new Map,o=t,i=Array.isArray(o),l=0;for(o=i?o:o[Symbol.iterator]();;){var s;if(i){if(l>=o.length)break;s=o[l++]}else{if((l=o.next()).done)break;s=l.value}var u=s;a.set(u.id,h(u))}for(var d=0,f=Object.keys(r);d<f.length;d++){var m=f[d],y=r[m];if(null!=y)for(var _=0,g=Object.keys(y);_<g.length;_++){var E=g[_],I=a.get(E),T=y[E];null!=I&&null!=T&&null!=T.nick&&(v(I,m,T.nick),a.set(E,I))}}return p(Array.from(a.values())),a.clear(),!1},CURRENT_USER_UPDATE:function(e){var t=h(e.user);return t&&p([t]),!1},GUILD_CREATE:function(e){var t=e.guild;return p(m(t.members,t.id)),!1},GUILD_MEMBERS_CHUNK:function(e){return p(m(e.members,e.guildId)),!1},GUILD_MEMBER_ADD:y,GUILD_MEMBER_UPDATE:y,RELATIONSHIP_ADD:function(e){return p([h(e.relationship.user)]),!1},CHANNEL_CREATE:_,CHANNEL_UPDATE:_,CHANNEL_RECIPIENT_ADD:function(e){var t=e.channelId,n=h(e.user);v(n,t),p([n])}});t.default=I},5998:function(e,t,n){"use strict";t.__esModule=!0,t.open=function(e,t){var n=t.getGuildId();if(null==n)throw new Error("no guild id for news editor");a.default.dispatch({type:o.ActionTypes.NEWS_EDITOR_MODAL_OPEN,guildId:n,message:e})},t.createNews=function(e){var t=e.applicationId,n=e.channelId,a=e.messageId,i=e.url,l=e.thumbnail,s=e.thumbnailOverride,u=e.title,d=e.description,c={application_id:t,channel_id:n,message_id:a,url:i,title:u,description:d};null!=s?c.thumbnail_override=s:c.thumbnail=l;return r.default.post({url:o.Endpoints.APPLICATION_NEWS,body:c}).then(function(e){return e.body})},t.updateNews=function(e){var t=e.channelId,n=e.messageId,a=e.newsId,i=e.thumbnail,l=e.title,s=e.description,u={channel_id:t,message_id:n,title:l,description:s};null!=i&&(u.thumbnail=i);return r.default.patch({url:o.Endpoints.APPLICATION_NEWS_BY_ID(a),body:u})},t.deleteNews=function(e,t,n){return r.default.delete({url:o.Endpoints.APPLICATION_NEWS_BY_ID(e),body:{channel_id:t,message_id:n}})},t.close=function(){a.default.dispatch({type:o.ActionTypes.NEWS_EDITOR_MODAL_CLOSE})};var r=i(n(9)),a=i(n(1)),o=(i(n(129)),i(n(317)),n(0));function i(e){return e&&e.__esModule?e:{default:e}}},5999:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return function(t){var n,i;return i=n=function(n){var i,l;function s(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))||this)._subscriptions=null,e.handleSetRef=function(t){e._ref=t},e}l=n,(i=s).prototype=Object.create(l.prototype),i.prototype.constructor=i,i.__proto__=l;var u=s.prototype;return u.componentDidMount=function(){for(var t in this._subscriptions=e(this.props,this._ref),this._subscriptions)null!=this._subscriptions&&this._subscriptions.hasOwnProperty(t)&&a.ComponentDispatch.subscribe(t,this._subscriptions[t])},u.componentWillUnmount=function(){for(var e in this._subscriptions)null!=this._subscriptions&&this._subscriptions.hasOwnProperty(e)&&a.ComponentDispatch.unsubscribe(e,this._subscriptions[e])},u.render=function(){return r.createElement(t,o({ref:this.handleSetRef},this.props))},s}(r.Component),n.displayName="componentDispatchSubscriber("+(t.displayName||t.name||"Component")+")",i}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),a=n(113);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},6000:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(1))&&r.__esModule?r:{default:r},o=n(0);var i={popFirstFile:function(){a.default.dispatch({type:o.ActionTypes.UPLOAD_MODAL_POP_FILE})},pushFiles:function(e){var t=e.files,n=e.channelId;a.default.dispatch({type:o.ActionTypes.UPLOAD_MODAL_PUSH_FILES,files:t,channelId:n})},clearAll:function(){a.default.dispatch({type:o.ActionTypes.UPLOAD_MODAL_CLEAR_ALL_FILES})}};t.default=i},6001:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(1));n(0);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l={matureAgree:!1,muted:!0};var s=new(function(e){var t,n,r,a,o;function s(){return e.apply(this,arguments)||this}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r=s,(a=[{key:"didMatureAgree",get:function(){return l.matureAgree}},{key:"isDirectoryMuted",get:function(){return l.muted}}])&&i(r.prototype,a),o&&i(r,o),s}(r.default.Store))(a.default,{APPLICATION_STORE_MATURE_AGREE:function(e){l.matureAgree=!0},APPLICATION_STORE_DIRECTORY_MUTE:function(e){l.muted=!0},APPLICATION_STORE_DIRECTORY_UNMUTE:function(e){l.muted=!1}});t.default=s},6002:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){void 0===n&&(n=null);null!=t&&o.default.register(e,t);var c=e.getExperimentId(),p=function(e){var r,a;function i(){for(var r,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(r=e.call.apply(e,[this].concat(i))||this).getRenderFunction=function(){var e=r.props.experimentDescriptor;if(null==t)return null;if(null==e)return t[d.ExperimentTypes.NONE]||f;var n=e.type,a=e.bucket,o=t[n];return null==o?t[d.ExperimentTypes.NONE]||f:null!=o[a]?o[a]:t[d.ExperimentTypes.NONE]||f},r.handleExperimentTriggered=function(){var e=r.props.experimentDescriptor;if(null!=e&&!e.override){if(null!=n&&!1===n(e,r.props))return;o.default.trigger(e)}},r}a=e,(r=i).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a;var l=i.prototype;return l.componentDidMount=function(){this.handleExperimentTriggered()},l.componentDidUpdate=function(e){var t=this.props.experimentDescriptor;u.default.experimentDescriptorEquals(t,e.experimentDescriptor)||this.handleExperimentTriggered()},l.render=function(){var e=this.getRenderFunction();if(null==e)return null;var t=this.props,n=t.experimentDescriptor,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["experimentDescriptor"]);return e(r,n)},i}(r.Component);return p.displayName="ExperimentContainer",a.default.connectStores([s.default,l.default,i.default,e],function(t){var n=t.guildId,r=t.channelId,a=null!=n?n:s.default.getGuildId(),o=null!=r?r:l.default.getChannelId(a);return{experimentDescriptor:i.default.getOverrideExperimentDescriptor(c)||e.getExperimentDescriptor(a,o)}},{forwardRef:!0})(p)};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),a=c(n(3)),o=c(n(165)),i=c(n(75)),l=c(n(50)),s=c(n(160)),u=c(n(5944)),d=n(0);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){return null}},6004:function(e,t,n){"use strict";t.__esModule=!0,t.search=d,t.searchByMode=function(e,t){var n=i.default.getQuery(e);return d(e,u({},n,{offset:0,sort_by:t}))},t.searchNextPage=function(e,t){void 0===t&&(t=l.SEARCH_PAGE_SIZE);return c(e,t)},t.searchPreviousPage=function(e,t){void 0===t&&(t=l.SEARCH_PAGE_SIZE);return c(e,-t)},t.clearHistory=function(e){r.default.dispatch({type:l.ActionTypes.SEARCH_CLEAR_HISTORY,searchId:e})},t.ensureSearchState=function(e){r.default.wait(function(){r.default.dispatch({type:l.ActionTypes.SEARCH_ENSURE_SEARCH_STATE,searchId:e})})},t.setSearchState=function(e,t){null!=e&&r.default.dirtyDispatch({type:l.ActionTypes.SEARCH_EDITOR_STATE_CHANGE,searchId:e,editorState:t})},t.clearSearchState=function(e){a.default.trackWithMetadata(l.AnalyticEvents.SEARCH_CLOSED,{search_id:i.default.getAnalyticsId(e)}),r.default.wait(function(){return r.default.dispatch({type:l.ActionTypes.SEARCH_EDITOR_STATE_CLEAR,searchId:e})})},t.updateAutocompleteQuery=function(e,t,n){null!=e&&r.default.dirtyDispatch({type:l.ActionTypes.SEARCH_AUTOCOMPLETE_QUERY_UPDATE,searchId:e,tokens:t,cursorScope:n})},t.setShowBlockedResults=function(e,t){r.default.dispatch({type:l.ActionTypes.SEARCH_SET_SHOW_BLOCKED_RESULTS,searchId:e,showBlocked:t})};var r=s(n(1)),a=s(n(191)),o=s(n(5958)),i=s(n(5890)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t,n){o.default.didAgree(e)&&(t.include_nsfw=!0);var s=Object.keys(t);a.default.trackWithMetadata(l.AnalyticEvents.SEARCH_STARTED,{search_type:i.default.getSearchType(),prev_search_id:i.default.getAnalyticsId(e),num_modifiers:s.length,modifiers:s.reduce(function(e,n){var r=t[n];return e[n]=Array.isArray(r)?r.length:1,e},{})}),r.default.dispatch({type:l.ActionTypes.SEARCH_START,query:t,searchId:e,queryString:n})}function c(e,t){var n=i.default.getOffset(e),r=i.default.getQuery(e),a=n+t,o=i.default.getTotalResults(e);if(!(a<0||a>o))return d(e,u({},r,{offset:a}))}},6025:function(e,t,n){"use strict";t.__esModule=!0,t.sortByMatchScore=function(e,t){if(e.score===t.score){var n=e.comparator.toLocaleLowerCase(),r=t.comparator.toLocaleLowerCase();if(n<r)return-1;if(n>r)return 1}return t.score-e.score}},6026:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=f(n(3)),a=f(n(1)),o=f(n(445)),i=f(n(245)),l=f(n(832)),s=f(n(5900)),u=f(n(5913)),d=f(n(14)),c=n(0);function f(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h,v,m=function(){return{name:"",icon:null,region:s.default.getOptimalRegionId()}},y=!1,_=c.FormStates.CLOSED,g={},E=m(),I=c.CreateGuildModalScreens.Choose,T=!1;function S(){E=m(),h=null,_=c.FormStates.CLOSED,I=c.CreateGuildModalScreens.Choose}var O=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(l.default,d.default,i.default,o.default,s.default,u.default)},a.isOpen=function(){return!u.default.hasAction()&&(y&&_!==c.FormStates.CLOSED)},a.getProps=function(){return{submitting:_===c.FormStates.SUBMITTING,errors:g,code:h,guild:E,screen:I,optimalRegionId:v,nuf:T}},r}(r.default.Store))(a.default,{DISPLAYED_INVITE_SHOW:function(e){S()},CREATE_GUILD_MODAL_OPEN:function(e){_=c.FormStates.OPEN,T=e.nuf||!1,I=e.screen||c.CreateGuildModalScreens.Choose,E=m(),g={}},CREATE_GUILD_MODAL_SET_SCREEN:function(e){I=e.screen},CREATE_GUILD_MODAL_UPDATE:function(e){null!=h&&(h=null),E=p({},E,e.guild)},CREATE_GUILD_MODAL_SUBMIT:function(e){_=c.FormStates.SUBMITTING},CREATE_GUILD_MODAL_SUBMIT_FAILURE:function(e){_=c.FormStates.OPEN,g=e.errors},CREATE_GUILD_MODAL_CLOSE:function(e){return S()},LOAD_REGIONS:function(e){if(null==E||null!=e.guildId)return!1;v=E.region||s.default.getOptimalRegionId(),E=p({},E,{region:v})},CONNECTION_OPEN:function(e){y=!0},LOGOUT:function(e){y=!1},USER_REQUIRED_ACTION_UPDATE:function(e){return!0}});t.default=O},6027:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=d(n(24)),a=d(n(1)),o=d(n(5994)),i=d(n(74)),l=d(n(42)),s=d(n(6029)),u=n(0);function d(e){return e&&e.__esModule?e:{default:e}}var c,f="seenQSTutorial",p=0,h=!1,v=!1;function m(){null!=c&&(c.destroy(),c=null)}var y=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(){this.waitFor(i.default),this.syncWith([l.default],function(){return!0}),h=r.default.get(f)||!1},o.isOpen=function(){return null!=c},o.getResultTotals=function(e){return null==c?0:null==e?c.results.reduce(function(e,t){return t.type!==u.AutocompleterResultTypes.HEADER?e+1:e},0):c.results.reduce(function(t,n){return n.type===e?t+1:t},0)},o.channelNoticePredicate=function(e,t,n){var r=Date.now()-n>=u.CHANNEL_NOTICE_SHOW_DELAY;return v&&e&&r},o.getFrequentGuilds=function(){return null!=c?c.queryGuilds("",50):null},o.getProps=function(){return{theme:l.default.theme,query:null!=c?c.query:"",queryMode:null!=c?c.queryMode:null,results:null!=c?c.results:[],selectedIndex:p,seenTutorial:h}},a}(s.default))(a.default,{CONNECTION_OPEN:function(e){var t=e.guilds,n=e.channels;v=t.length>=3||n.filter(function(e){var t=e.type;return t===u.ChannelTypes.DM||t===u.ChannelTypes.GROUP_DM}).length>=20},QUICKSWITCHER_SHOW:function(e){c=c||new o.default(function(){return y.emitChange()}),p=c.search(e.query,e.options)},QUICKSWITCHER_HIDE:function(e){return m()},OVERLAY_SET_INPUT_LOCKED:function(e){return m()},QUICKSWITCHER_SEARCH:function(e){var t=e.query,n=e.options;null!=c&&(p=c.search(t,n))},QUICKSWITCHER_SELECT:function(e){p=e.selectedIndex},QUICKSWITCHER_SWITCH_TO:function(e){return function(){if(h)return!1;h=!0,r.default.set(f,!0)}()}}),_=y;t.default=_},6028:function(e,t,n){e.exports=function(){return new Worker(n.p+"77251a74273d9138de82.worker.js")}},6029:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=void 0;var a=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.channelNoticePredicate=function(e,t,n){return!1},r}(((r=n(3))&&r.__esModule?r:{default:r}).default.Store);t.default=a},6031:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(1))&&r.__esModule?r:{default:r},o=n(0);var i={setEnabled:function(e){this.update({enabled:e})},update:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];a.default.dispatch({type:o.ActionTypes.STREAMER_MODE_UPDATE,key:r,value:e[r]})}}};t.default=i},6032:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=p(n(17)),i=n(810),l=n(805),s=p(n(426)),u=n(0),d=p(n(10)),c=p(n(5249)),f=p(n(5278));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=function(e){var t=e.timestamp;return h(s.default,{text:null!=t?(0,i.calendarFormat)(t):null},void 0,h("time",{dateTime:t.toISOString(),className:f.default.edited,role:"note"},void 0,"(",d.default.Messages.MESSAGE_EDITED,")"))};v.displayName="SuffixEdited";var m=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).onContextMenu=function(e){var n=t.props;(0,n.onContextMenu)(e,{message:n.message,channel:n.channel,target:e.target})},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e,t=this,n=this.props,r=n.className,a=n.message,i=n.channel,s=n.renderButtons,d=n.renderPrefix,p=n.children,m=n.disableButtons,y=n.disableMentionStyles,_=n.isCompact,g=a.isEdited(),E=a.state===u.MessageStates.SEND_FAILED,I=a.state===u.MessageStates.SENDING,T=a.type!==u.MessageTypes.DEFAULT,S=a.mentioned&&!T,O=(0,o.default)(r,((e={})[f.default.isMentionedCompact]=S&&!y&&_,e[f.default.isMentionedCozy]=S&&!y&&!_,e[f.default.isSending]=I,e[f.default.containerCompact]=_,e[f.default.containerCozy]=!_,e));return h(l.BackgroundOpacityContext.Consumer,{},void 0,function(e){var n;return h("div",{className:(0,o.default)(O,f.default[e.backgroundOpacity+"BackgroundOpacity"],c.default[e.backgroundOpacity+"BackgroundOpacity"]),onContextMenu:t.onContextMenu},void 0,!m&&s&&h("div",{className:f.default.buttonContainer},void 0,s({message:a,channel:i})),p||h("div",{className:(0,o.default)(f.default.markup,c.default.markup,(n={},n[f.default.isFailed]=E,n[f.default.isCompact]=_,n))},void 0,null!=d&&d({message:a,channel:i}),a.contentParsed,g&&null!=a.editedTimestamp&&h(v,{timestamp:a.editedTimestamp})))})},r}(a.PureComponent);t.default=m,m.displayName="MessageContent",m.defaultProps={disableButtons:!1,disableMentionStyles:!1,disablePromoteButton:!0}},6033:function(e,t,n){"use strict";t.__esModule=!0,t.openUserContextMenu=function(e,t,n){var r={user:t,channelId:n.id};n.isGroupDM()?r.type=l.ContextMenuTypes.USER_GROUP_DM:n.isDM()?(r.selected=!0,r.type=l.ContextMenuTypes.USER_PRIVATE_CHANNELS_MESSAGE):(r.type=l.ContextMenuTypes.USER_CHANNEL_MESSAGE,r.guildId=n.getGuildId());(0,o.openContextMenu)(e,function(e){return a.createElement(i.default,s({},e,r))})};var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(303),i=(r=n(5236))&&r.__esModule?r:{default:r},l=n(0);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},6034:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(3)),a=i(n(1)),o=n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l={},s={integration:"",query:""};var u=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getResults=function(e,t){if(null==e||null==t)return null;var n=l[e];return null!=n&&null!=n[t]?n[t]:null},a.getQuery=function(){return s},r}(r.default.Store))(a.default,{INTEGRATION_QUERY:function(e){var t=e.integration,n=e.query;l[t]=l[t]||{},l[t][n]={loading:!0,results:[]}},INTEGRATION_QUERY_SUCCESS:function(e){var t=e.integration,n=e.query,r=e.results;l[t][n].loading=!1,l[t][n].results=r.map(function(e){return{type:o.ChannelTextAreaIntegrations[t].type,meta:e}}),s={query:n,integration:t}},INTEGRATION_QUERY_FAILURE:function(e){var t=e.integration,n=e.query;delete l[t][n]}});t.default=u},6035:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=h(n(17)),i=n(192),l=h(n(5849)),s=h(n(231)),u=h(n(158)),d=h(n(302)),c=h(n(128)),f=h(n(10)),p=h(n(5283));function h(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var g=function(e){function t(t){var n;return(n=e.call(this,t)||this).selectable=!0,n.orientation="Vertical",y(n).handleMouseEnter=n.handleMouseEnter.bind(y(n)),y(n).handleClick=n.handleClick.bind(y(n)),n}_(t,e);var n=t.prototype;return n.getSelectedMode=function(){return this.selectable&&this.props.selected?"Selected":""},n.renderContent=function(){throw new Error("AutocompleteRow: renderContent must be extended")},n.render=function(){var e;return m(s.default,{className:(0,o.default)(this.props.className,(0,i.getClass)(p.default,"autocompleteRow",this.orientation)),onMouseEnter:this.selectable?this.handleMouseEnter:null,onClick:this.selectable?this.handleClick:null},void 0,m("div",{className:(0,o.default)((0,i.getClass)(p.default,"selector",this.getSelectedMode()),(e={},e[p.default.selectable]=this.selectable,e))},void 0,this.renderContent()))},n.handleMouseEnter=function(){var e=this.props,t=e.onHover,n=e.index;t&&t(n)},n.handleClick=function(){var e=this.props,t=e.onClick,n=e.index;t&&t(n)},t}(a.PureComponent);g.displayName="AutocompleteRow";var E=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.text,n=e.description;return m(u.default,{className:p.default.content},void 0,m(u.default.Child,{grow:1},void 0,t),m(u.default.Child,{grow:0},void 0,m(c.default,{className:p.default.description},void 0,n)))},t}(g),I=function(e){function t(t){var n;return(n=e.call(this,t)||this).selectable=!1,n}return _(t,e),t.prototype.renderContent=function(){var e=this.props.title;return m(c.default,{className:p.default.contentTitle,weight:c.default.Weights.SEMIBOLD,size:c.default.Sizes.SMALL},void 0,e)},t}(g),T=function(e){function t(t){var n;return(n=e.call(this,t)||this).selectable=!1,n}return _(t,e),t.prototype.renderContent=function(){return m("div",{className:p.default.divider})},t}(g),S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).statusStyle={width:10,height:10,right:"-4px",bottom:"-4px",borderWidth:2,borderStyle:"solid"},t}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.user,n=e.nick,r=e.status,a=e.hidePersonalInformation,o=e.colorblindMode;return m(u.default,{align:u.default.Align.CENTER,className:p.default.content},void 0,m(l.default,{size:l.default.Sizes.XSMALL,src:t.getAvatarURL(),status:r,statusClassName:p.default.avatarStatus,statusStyle:o?this.statusStyle:{}}),m(u.default.Child,{className:p.default.marginLeft8},void 0,n||t.username),m(u.default,{grow:0,align:u.default.Align.BASELINE,className:p.default.description},void 0,m(c.default,{className:p.default.descriptionUsername},void 0,t.username),a?null:m(c.default,{className:p.default.descriptionDiscriminator},void 0,"#",t.discriminator)))},t}(g),O=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props.role;return m(u.default,{align:u.default.Align.CENTER,className:p.default.content},void 0,m(u.default.Child,{grow:1},void 0,m(c.default,{style:{color:e.colorString}},void 0,"@",e.name)),m(c.default,{className:p.default.description},void 0,f.default.Messages.MENTION_USERS_WITH_ROLE))},t}(g),A=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.channel,n=e.category;return m(u.default,{align:u.default.Align.CENTER,className:p.default.content},void 0,m(d.default,{name:d.default.Names.CHANNEL_TEXT,className:p.default.icon,foreground:p.default.iconForeground}),m(u.default.Child,{className:p.default.marginLeft4},void 0,t.toString()),null!=n?m(c.default,{className:p.default.description},void 0,n.name):null)},t}(g),N=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.command,n=e.description;return m(u.default,{align:u.default.Align.CENTER,className:p.default.content},void 0,m(d.default,{name:d.default.Names.SLASH,className:p.default.icon,foreground:p.default.iconForeground}),m(u.default.Child,{grow:1,className:p.default.marginLeft4},void 0,t),m(c.default,{className:p.default.description},void 0,n))},t}(g),C=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.emoji,n=e.sentinel,r=t.url?m("img",{alt:"",className:p.default.icon,src:t.url}):m("span",{className:p.default.rawEmoji},void 0,t.surrogates);return m(u.default,{align:u.default.Align.CENTER,className:p.default.content},void 0,r,m("div",{className:p.default.marginLeft8},void 0,n,t.name,n))},t}(g),R=function(e){function t(t){var n;return(n=e.call(this,t)||this).orientation="Horizontal",n}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.width,n=e.height;return m("img",{alt:"",src:e.src,width:t,height:n})},t}(g),P=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=e.isCustom,i=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["children","className","isCustom"]);return 0===a.Children.count(t)?null:m("div",{className:(0,o.default)(p.default.autocomplete,n)},void 0,r?t:a.createElement("div",v({className:p.default.autocompleteInner},i),t))},t}(a.PureComponent);P.displayName="Autocomplete",P.Generic=E,P.Title=I,P.Divider=T,P.User=S,P.Role=O,P.Channel=A,P.Command=N,P.Emoji=C,P.GIFIntegration=R,P.defaultProps={isCustom:!1};var M=P;t.default=M},6036:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=C(n(17)),i=C(n(6)),l=C(n(473)),s=C(n(304)),u=C(n(3)),d=C(n(6102)),c=C(n(802)),f=C(n(800)),p=C(n(199)),h=C(n(241)),v=C(n(23)),m=C(n(441)),y=C(n(112)),_=C(n(231)),g=C(n(18)),E=C(n(169)),I=C(n(822)),T=C(n(6037)),S=C(n(5893)),O=n(0),A=C(n(10)),N=C(n(5288));function C(e){return e&&e.__esModule?e:{default:e}}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function M(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var b=32,L=l.default.convert.fromCodePoint("1f44c"),D=22,w=125,k=28;var U=function(e){var t=e.onLearnMore,r=e.onClose,a=e.isGuildChannel;return M("div",{className:N.default.premiumPromo},void 0,M(_.default,{className:N.default.premiumPromoClose,onClick:r},void 0,A.default.Messages.CLOSE),M("img",{alt:"",className:N.default.premiumPromoImage,src:n(6379),width:124,height:96}),M("div",{className:N.default.premiumPromoTitle},void 0,A.default.Messages.PREMIUM_PROMO_TITLE),M("div",{className:N.default.premiumPromoDescription},void 0,A.default.Messages.PREMIUM_PROMO_DESCRIPTION),M(y.default,{onClick:function(){!function(e){g.default.track(O.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_page:e?O.AnalyticsPages.GUILD_CHANNEL:O.AnalyticsPages.DM_CHANNEL,location_section:O.AnalyticsSections.EMOJI_PICKER_POPOUT})}(a),f.default.open(O.UserSettingsSections.PREMIUM),t()}},void 0,A.default.Messages.LEARN_MORE))};U.displayName="PremiumPromo";var G=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={opacity:new s.default.Value(t.props.fade?0:1)},t}P(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.fade,n=e.delay;t&&s.default.timing(this.state.opacity,{delay:n,toValue:1,duration:150}).start()},n.render=function(){var e=this.props,t=e.surrogate,n=e.onClick,r=E.default.getURL(L+t),a={opacity:this.state.opacity,backgroundImage:'url("'+r+'")'};return M(s.default.div,{onClick:function(){return n(t)},className:N.default.item,style:a})},t}(a.Component);G.displayName="DiversityIcon",G.defaultProps={delay:0,fade:!1};var F=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={isOpen:!1,height:new s.default.Value(k)},t.me=a.createRef(),t.handleDiversityColorChange=function(e){d.default.setDiversityColor(e),t.close()},t.handleOpen=function(){var e=t.props.onOpen;s.default.timing(t.state.height,{fromValue:k,toValue:180,duration:w}).start(),t.setState({isOpen:!0}),document.addEventListener("click",t.close,!0),e&&e(!0)},t.close=function(e){var n=t.props.onOpen,r=t.me.current;if(null!=e&&null!=r)for(var a=e.target;null!=a;){if(a===r)return;a=a.parentNode}t.setState({isOpen:!1}),t.state.height.setValue(k),n&&n(!1)},t}P(t,e);var n=t.prototype;return n.componentWillUnmount=function(){document.removeEventListener("click",this.close,!0)},n.render=function(){var e=this,t=this.props.selectedSurrogate,n=this.state,r=n.isOpen,o=n.height;if(r){var l=[""].concat(O.DIVERSITY_SURROGATES);i.default.remove(l,function(e){return e===t}),l.unshift(t);var u=l.map(function(t,n){return M(G,{fade:n>0,delay:20*n,surrogate:t,onClick:e.handleDiversityColorChange},n)});return a.createElement("div",{ref:this.me,className:N.default.diversitySelector},M(s.default.div,{className:N.default.popout,style:{height:o}},void 0,u))}var d=E.default.getURL(L+t);return M(_.default,{className:N.default.diversitySelector,onClick:this.handleOpen},void 0,M("div",{className:N.default.item,style:{backgroundImage:'url("'+d+'")'}}))},t}(a.PureComponent);F.displayName="DiversitySelector";var j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).categories=[],t.categoryOffsets={},t.cachedMetaDataNoSearch=null,t.spriteSheetSize=[D*O.EmojiSprites.NonDiversityPerRow+"px",D*Math.ceil(p.default.numNonDiversitySprites/O.EmojiSprites.NonDiversityPerRow)+"px"].join(" "),t.diversitySpriteSheetSize=[D*O.EmojiSprites.DiversityPerRow+"px",D*Math.ceil(p.default.numDiversitySprites/O.EmojiSprites.DiversityPerRow)+"px"].join(" "),t.searchRef=a.createRef(),t.scrollerRef=a.createRef(),t.state={premiumPromoOpen:!1,diversityPickerOpen:!1,metaData:t.computeMetaData(null),searchResults:null,currentSection:h.default.categories[0],selectedRow:-1,selectedColumn:-1,query:"",placeholder:A.default.Messages.SEARCH_FOR_EMOJI},t.handleClear=function(){t.clearNow()},t.handleSelect=function(e,n,r){null!=e&&null!=n?t.selectEmoji(t.state.metaData[e].items[n].emoji,!r.shiftKey):t.selectEmoji(null)},t.handleSelectionChange=function(e,n){if(!(e<0||n<0)){var r=t.state.metaData[e].items[n],a=r.emoji,o=r.offsetTop,i=t.scrollerRef.current;t.setState({selectedRow:e,selectedColumn:n,placeholder:a.allNamesString}),null!=i&&i.scrollIntoViewRect(o,o+b,!1)}},t.handleQueryChange=function(e){if(""!==e){var n=e;":"===n[0]&&(n=n.slice(1));var r=h.default.search(t.props.channel,n);t.setState({query:e,searchResults:r,metaData:t.computeMetaData(r),selectedRow:-1,selectedColumn:-1,currentSection:null})}else t.clearNow()},t.handleScroll=function(){var e=t.getCurrentSection();e!==t.state.currentSection&&t.setState({currentSection:e})},t.handleDiversityPickerToggled=function(e){t.setState({diversityPickerOpen:e})},t.renderStickyHeader=function(){var e=t.scrollerRef.current;if(""!==t.state.query)return null;if(null==e)return M("div",{className:N.default.stickyHeader},void 0,M("div",{className:N.default.category},void 0,t.categoryOffsets[h.default.categories[0]]));var n=e.getScrollerNode();if(null==n)return null;var r=n.scrollTop,a=r+b,o=-1,l=-1;i.default.forEach(t.categories,function(e,t){var n=e.offsetTop;n<=r&&o<n&&(o=n,l=t)});var s=l+1;if(s<t.categories.length&&t.categories[s].offsetTop<a){var u={marginTop:t.categories[s].offsetTop-a};return M("div",{className:N.default.stickyHeader,style:u},void 0,M("div",{className:N.default.category},void 0,t.categories[l].title),M("div",{className:N.default.category},void 0,t.categories[s].title))}return M("div",{className:N.default.stickyHeader},void 0,M("div",{className:N.default.category},void 0,t.categories[l].title))},t}P(t,e);var r=t.prototype;return r.selectEmoji=function(e,t){void 0===t&&(t=!0);var n=this.props,r=n.channel,a=n.onSelectEmoji,o=n.popoutKey;(null==e||e.available)&&(null!=e&&E.default.isEmojiDisabled(e,r)?this.setState({premiumPromoOpen:!0}):(a&&a(e),t?c.default.close(o):this.focusSearch()))},r.clearNow=function(e){var t={query:"",placeholder:A.default.Messages.SEARCH_FOR_EMOJI,searchResults:null,metaData:this.computeMetaData(null),selectedRow:-1,selectedColumn:-1};""!==this.state.query&&(t.currentSection=h.default.categories[0]),this.focusSearch(),this.setState(t,e)},r.focusSearch=function(){var e=this.searchRef.current;null!=e&&e.focus()},r.componentDidMount=function(){g.default.track(O.AnalyticEvents.OPEN_POPOUT,{type:"Emoji Picker"}),this.focusSearch();var e=this.props.onOpen;e&&e()},r.componentWillUnmount=function(){var e=this.props.onClose;e&&e()},r.onHoverEmoji=function(e,t,n){this.setState({selectedRow:t,selectedColumn:n,placeholder:e.allNamesString})},r.scrollNow=function(e){var t=this;this.clearNow(function(){var n=t.scrollerRef.current;null!=n&&n.scrollTo(t.categoryOffsets[e],!0)})},r.getCurrentSection=function(){var e=this.scrollerRef.current;if(""!==this.state.query||null==e)return null;var t=e.getScrollData();if(null==t)return null;var n=t.scrollTop+.25*t.offsetHeight;if(0===t.scrollTop)return h.default.categories[0];var r=-1,a=null;return i.default.forEach(this.categoryOffsets,function(e,t){e<=n&&e>=r&&(r=e,a=t)}),a},r.computeMetaData=function(e){var t=this,n=h.default.categories.length,r=this.props.channel,a=r.getGuildId(),o=[],l=0,s=0,u=function(e,t){void 0===t&&(t=null);var a=[],u=i.default.partition(e,function(e){return!E.default.isEmojiDisabled(e,r)}),d=u[0],c=u[1];i.default.forEach([].concat(d,c),function(e){E.default.isEmojiFiltered(e,r)||(a.push({emoji:e,offsetTop:l*b,row:s,column:a.length}),a.length===n&&(o.push({category:t,items:a}),a=[],s+=1,l+=1))}),a.length>0&&(o.push({category:t,items:a}),s+=1,l+=1)};if(e)u(e);else{if(this.cachedMetaDataNoSearch)return this.cachedMetaDataNoSearch;this.categoryOffsets={},this.categories=[];var d=function(e,n,r){t.categoryOffsets[e]=l*b,t.categories.push({category:e,offsetTop:l*b,title:n}),l+=1,u(r,e)},c=h.default.getDisambiguatedEmojiContext(a);i.default.forEach(h.default.categories,function(e){if(e===O.EMOJI_CATEGORY_CUSTOM){var t=0,n=c.getCustomEmoji(),r=i.default.groupBy(n,"guildId"),o=function(n){var a=r[n.id];null!=a&&0!==a.length&&d(0==t++?e:""+e+t,n.toString(),a)},l=v.default.getGuild(a);l&&o(l),i.default.each(m.default.getSortedGuilds(),function(e){var t=e.guild;t.id!==a&&o(t)})}else{var s=(e===O.EMOJI_CATEGORY_RECENT?c.getFrequentlyUsedEmojis():p.default.getByCategory(e))||[];d(e,A.default.Messages["EMOJI_CATEGORY_"+e.toUpperCase()],s)}}),this.cachedMetaDataNoSearch=o}return o},r.render=function(){var e,t=this,r=this.props,s=r.channel,u=r.diversitySurrogate,d=r.popoutKey,f=this.state,p=f.metaData,v=f.selectedRow,m=f.selectedColumn,y=f.currentSection,g=f.placeholder,C=f.query,P=f.premiumPromoOpen,L=f.diversityPickerOpen,w=[],k=null,G=null;if(0===p.length)G=M(T.default,{message:A.default.Messages.NO_EMOJI_SEARCH_RESULTS,className:N.default.noSearchResultsContainer,forceLightTheme:!0});else{var j=""!==u?l.default.convert.toCodePoint(u):"";i.default.forEach(p,function(e){var r=e.category,l=e.items;if(r&&r!==k){k=r;var u=i.default.find(t.categories,function(e){return e.category===r});null!=u&&w.push(M("div",{name:r,className:N.default.category},r,u.title))}var d=i.default.map(l,function(e){var r,i=e.emoji,l=e.row,u=e.column,d=null,c=l===v&&u===m,f=null!=i.index?i.index:0,p={key:i.name+"-"+l+"-"+u,className:(0,o.default)(N.default.emojiItem,(r={},r[N.default.selected]=c,r[N.default.disabled]=E.default.isEmojiDisabled(i,s),r)),onClick:function(e){return t.selectEmoji(i,!e.shiftKey)},onMouseOver:function(){return t.onHoverEmoji(i,l,u)}};if(!i.useSpriteSheet)return a.createElement("div",R({},p,{style:{backgroundImage:"url('"+i.url+"')"}}));if(i.hasDiversity){var h=-f%O.EmojiSprites.DiversityPerRow*D,y=-Math.floor(f/O.EmojiSprites.DiversityPerRow)*D;d={backgroundImage:"url('"+n(6380)("./spritesheet-"+j+".png")+"')",backgroundPosition:h+"px "+y+"px",backgroundSize:t.diversitySpriteSheetSize}}else{var _=-f%O.EmojiSprites.NonDiversityPerRow*D,g=-Math.floor(f/O.EmojiSprites.NonDiversityPerRow)*D;d={backgroundImage:"url('"+n(6038)+"')",backgroundPosition:_+"px "+g+"px",backgroundSize:t.spriteSheetSize}}return a.createElement("div",p,M("div",{className:N.default.spriteItem,style:d}))});w.push(M("div",{className:N.default.row},w.length,d))}),G=a.createElement(I.default,{ref:this.scrollerRef,outerClassName:N.default.scrollerWrap,className:N.default.scroller,onScroll:this.handleScroll,elementHeight:b,fade:!0,theme:I.default.Themes.LIGHT,renderStickyHeader:function(){return t.renderStickyHeader()}},w)}var H,x=i.default.map(h.default.categories,function(e){var n;return M(_.default,{"aria-label":e,className:(0,o.default)(N.default.item,N.default[e],(n={},n[N.default.selected]=null!=y&&0===y.indexOf(e),n)),onClick:function(){return t.scrollNow(e)}},e)});if(P){var B=null!=s.getGuildId();H=M(U,{onLearnMore:function(){return c.default.close(d)},onClose:function(){return t.setState({premiumPromoOpen:!1})},isGuildChannel:B})}return M("div",{className:N.default.emojiPicker},void 0,M("div",{className:(0,o.default)(N.default.dimmer,(e={},e[N.default.visible]=L,e))}),M("div",{className:N.default.header},void 0,a.createElement(S.default,{query:C,ref:this.searchRef,themeMode:S.default.ThemeModes.LIGHT,size:S.default.Sizes.MEDIUM,placeholder:g,gridResults:!0,selectedRow:v,selectedColumn:m,sections:p.map(function(e){return e.items.length}),onClear:this.handleClear,onSelect:this.handleSelect,onSelectionChange:this.handleSelectionChange,onQueryChange:this.handleQueryChange,className:N.default.searchBar}),M(F,{onOpen:this.handleDiversityPickerToggled,selectedSurrogate:u})),G,M("div",{className:N.default.categories},void 0,x),H)},t}(a.PureComponent);j.displayName="EmojiPicker";var H=u.default.connectStores([h.default],function(){return{diversitySurrogate:h.default.diversitySurrogate}})(j);t.default=H},6037:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=i(n(17)),o=i(n(5287));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var s=function(e){var t,n=e.message,r=e.className,i=e.forceLightTheme;return l("div",{className:(0,a.default)((t={},t[o.default.forceLightTheme]=i,t),r)},void 0,l("div",{className:o.default.wrapper},void 0,l("div",{className:o.default.sadImage}),l("div",{},void 0,n)))};s.displayName="NoSearchResults";var u=s;t.default=u},6038:function(e,t,n){e.exports=n.p+"f24711dae4f6d6b28335e866a93e9d9b.png"},6039:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=(r=n(163))&&r.__esModule?r:{default:r},i=n(0);var l=(0,o.default)({ARROW_UP:null,ARROW_DOWN:null,ARROW_LEFT:null,ARROW_RIGHT:null});var s=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={focusedColumn:null,focusedRow:null},t.handleKeyDown=function(e){var n=t.props.onSelect;switch(e.keyCode){case i.KeyboardKeys.ARROW_DOWN:case i.KeyboardKeys.ARROW_UP:case i.KeyboardKeys.ARROW_LEFT:case i.KeyboardKeys.ARROW_RIGHT:e.preventDefault(),e.stopPropagation(),t.focusNext(function(e){switch(e){case i.KeyboardKeys.ARROW_DOWN:return l.ARROW_DOWN;case i.KeyboardKeys.ARROW_UP:return l.ARROW_UP;case i.KeyboardKeys.ARROW_LEFT:return l.ARROW_LEFT;case i.KeyboardKeys.ARROW_RIGHT:return l.ARROW_RIGHT;default:return null}}(e.keyCode));break;case i.KeyboardKeys.ENTER:e.preventDefault(),e.stopPropagation();var r=t.calculateFocusedItem();null!=r&&null!=n&&n(r)}},t.wrapPosition=function(e,n,r,a){var o=e.length,i=r*o+n,l=Math.max(i+a,0)%o,s=0;return a<0&&l>n&&(s=-1),a>0&&l<n&&(s=1),{column:l,row:(t.calculateClosest(e[n][r],e[l])||r)+s}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){document.addEventListener("keydown",this.handleKeyDown,!0)},a.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleKeyDown,!0)},a.focusNext=function(e){var t=this,n=this.props,r=n.getItemGrid,a=n.onFocus,o=this.state,i=o.focusedColumn,l=o.focusedRow;if(null!=e){var s=r();if(null!=s){var u=this.getNext(s,i,l,e);this.setState({focusedColumn:u.column,focusedRow:u.row},function(){var e=t.calculateFocusedItem();null!=e&&null!=a&&a(e)})}}},a.getNext=function(e,t,n,r){var a,o,i,s;if(null==t||null==n)o=0,i=0,a={column:0,row:0};else switch(o=t,i=n,r){case l.ARROW_UP:a={column:o,row:Math.max(i-1,0)};break;case l.ARROW_DOWN:a={column:o,row:Math.min(i+1,e[o].length-1)};break;case l.ARROW_LEFT:a=this.wrapPosition(e,o,i,-1);break;case l.ARROW_RIGHT:a=this.wrapPosition(e,o,i,1)}return null!=a&&(s=e[a.column][a.row]),null!=s&&null!=a||(s=e[(a={column:o,row:i}).column][a.row]),{column:a.column,row:a.row,id:s.id}},a.calculateClosest=function(e,t){for(var n,r=Number.MAX_SAFE_INTEGER,a=0;a<t.length;a++){var o=t[a],i=Math.abs(o.coords.top-e.coords.top);if(!(i<r))break;r=i,n=a}return n},a.calculateFocusedItem=function(){var e=this.props.getItemGrid,t=this.state,n=t.focusedRow,r=t.focusedColumn,a=e();return null==a||null==r||null==n||null==a[r]||null==a[r][n]?null:a[r][n]},a.render=function(){return this.props.children},r}(a.Component);t.default=s,s.displayName="MasonryKeyboardNavigationWrapper"},6040:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=(r=n(307))&&r.__esModule?r:{default:r};function l(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var s=function(){function e(e){var t=e.columns,n=e.gutterSize,r=e.scrollBufferMultiplier,a=e.getItemId,o=e.getItemHeight,i=e.getFooterHeight;this._coordsMap={},this._columnHeights=[],this._columnWidth=0,this._totalHeight=0,this._itemGrid=[],this.columns=t,this.gutterSize=n,this.scrollBufferMultiplier=r,this.getItemId=a,this.getItemHeight=o,this.getFooterHeight=i}var t=e.prototype;return t.computeFullCoords=function(e,t,n,r){var a=this.columns,o=this.getItemId,i=this.getItemHeight,l=this.gutterSize,s=this.scrollBufferMultiplier,u=this.getFooterHeight,d={},c=new Array(a).fill(0),f=(r-l*(a+1))/a,p=[],h=t-s*n,v=t+n+s*n,m=[];e.forEach(function(e){var t=o(e);if(null!=t){var n,r=(n=c).reduce(function(e,t,n){return t<e[0]?[t,n]:e},[n[0],0]),a=r[0],s=r[1],u=i(e,f),y=a+l,_={position:"absolute",left:f*s+l*(s+1),width:f,top:y,height:u};y>h-u&&y<v&&p.push(e),d[t]=_,c[s]=y+u,null==m[s]&&(m[s]=[]),m[s].push({coords:_,id:t})}}),this._columnWidth=f,this._coordsMap=d,this._columnHeights=c.map(function(e){return e+l}),this._itemGrid=m;var y=u(a,f,l),_=this.getTotalColumnHeight();return y>0&&(d.__footer__={position:"absolute",left:l,width:r-2*l,top:_,height:y},_+=y+l),this._totalHeight=_,p},t.computeVisibleItems=function(e,t,n){var r=this.getItemId,a=this._coordsMap,o=this.scrollBufferMultiplier,i=[],l=t-o*n,s=t+n+o*n;return e.forEach(function(e){var t=r(e);if(null!=t&&null!=a[t]){var n=a[t],o=n.top,u=n.height;o>l-u&&o<s&&i.push(e)}}),i},t.getCoords=function(e){return this._coordsMap[e]},t.getItemGrid=function(){return this._itemGrid},t.getTotalColumnHeight=function(){return this._columnHeights.reduce(function(e,t){return Math.max(e,t)},0)},e}(),u=function(e){return l("div",{style:e.style},void 0,e.children)};u.displayName="ListItem";var d=function(e){return l("div",{style:{height:e.height,visibility:"hidden"}})};d.displayName="ScrollBuffer";var c=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this).scrollIntoView=function(e,t){var r=n.state.scrollerRef.current;null!=r&&r.scrollIntoViewRect(e,t,!0)},n.computeFullCoords=function(){var e=n.props,t=e.data,r=e.width,a=e.height,o=n.getScrollTop(),i=n.state.computer.computeFullCoords(t,o,a,r);n.setState({items:i})},n.handleScroll=function(){var e=n.props,t=e.data,r=e.height,a=e.onScroll,o=n.state.items,i=n.getScrollTop(),l=n.state.computer.computeVisibleItems(t,i,r);l.length===o.length&&null==l.find(function(e,t){return e!==o[t]})||n.setState({items:l});var s=n.state.scrollerRef.current;null!=a&&null!=s&&a(s)};var r=n.props,a=r.width,i=r.height,l=r.columns,u=r.gutterSize,d=r.getItemId,c=r.getItemHeight,f=r.scrollBufferMultiplier,p=r.getFooterHeight;return n.state={width:a,height:i,items:[],_data:[],computer:new s({columns:l,gutterSize:u,scrollBufferMultiplier:f,getItemId:d,getItemHeight:c,getFooterHeight:p}),_columns:l,scrollerRef:o.createRef()},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){var n=e.data,r=e.columns,a=e.width,o=e.height,i=t.computer,l=t.scrollerRef.current;if(null==l)return null;if(n!==t._data||r!==t._columns||a!==t.width){var s=l.getScrollData().scrollTop;return i.columns=r,{scrollTop:s,height:o,width:a,items:i.computeFullCoords(n,s,o,a),_data:n,_columns:r}}return null};var a=r.prototype;return a.getScrollTop=function(){var e=this.state.scrollerRef.current;return null!=e?e.getScrollData().scrollTop:0},a.scrollTo=function(e,t){void 0===t&&(t=!1);var n=this.state.scrollerRef.current;null!=n&&n.scrollTo(e,t)},a.componentDidMount=function(){this.computeFullCoords()},a.getItemGrid=function(){return this.state.computer.getItemGrid()},a.render=function(){var e=this.props,t=e.className,n=e.renderItem,r=e.getItemId,a=e.theme,s=e.track,c=e.renderFooter,f=this.state,p=f.items,h=f.computer,v=f.scrollerRef,m=h.getCoords("__footer__");return o.createElement(i.default,{className:t,ref:v,onScroll:this.handleScroll,theme:a,track:s},l(d,{height:h._totalHeight}),p.map(function(e,t){var a=r(e),o=h.getCoords(a);return null!=o?l(u,{style:o},a,n(e,o,t)):null}),null!=m?l(u,{style:m},void 0,c(h.getTotalColumnHeight(),h)):null)},r}(o.Component);c.displayName="MasonryList",c.defaultProps={columns:2,gutterSize:10,scrollBufferMultiplier:0,track:!1,theme:i.default.Themes.GHOST_HAIRLINE,getFooterHeight:function(){return 0},renderFooter:function(){return null}};var f=c;t.default=f},6041:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2));function l(e,t,n){var r=Math.max(Math.floor(e/t),1);return Math.min(r,n)}var s=(0,((r=n(5882))&&r.__esModule?r:{default:r}).default)((o=a=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={columns:l(t.props.width,t.props.desiredItemWidth,t.props.maxColumns)},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){var n=l(e.width,e.desiredItemWidth,e.maxColumns);return n!==t.columns?{columns:n}:null},r.prototype.render=function(){var e=this.props,t=e.width,n=e.height;return(0,e.children)(this.state.columns,t,n)},r}(i.PureComponent),a.defaultProps={desiredItemWidth:200},o));t.default=s},6042:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.GIFPickerSearchItem=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=S(n(17)),i=S(n(6)),l=S(n(6721)),s=S(n(3)),u=n(5916),d=S(n(5896)),c=S(n(112)),f=S(n(231)),p=S(n(302)),h=S(n(307)),v=S(n(6043)),m=S(n(6039)),y=S(n(6040)),_=S(n(6037)),g=S(n(6041)),E=n(0),I=S(n(10)),T=S(n(5291));function S(e){return e&&e.__esModule?e:{default:e}}function O(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var N=[E.Colors.PREMIUM_TIER_1_PURPLE,E.Colors.PREMIUM_TIER_1_BLUE,"#929AFA"],C=1220;function R(e){return e.id||e.src}function P(e){return e.height}function M(e){return e.id}function b(e){return e===E.GIFResultFormat.VIDEO}var L=function(e){var t=e.className,n=e.isFavorite,r=e.item;return A(v.default,{className:t,isFavorite:n,onClick:function(e){var t=r.width,n=r.height,a=r.src,o=r.url,i=r.format;e?(0,u.removeFavoriteGIF)(o):(0,u.addFavoriteGIF)({width:t,height:n,src:a,url:o,format:i})}})};L.displayName="ConnectedGIFFavButtonInner";var D=s.default.connectStores([d.default],function(e){var t=e.item.url;return{isFavorite:d.default.getIsFavorite(t)}})(L),w=new l.default(function(){var e=document.createElement("video");return e.className=T.default.gif,e.autoplay=!0,e.loop=!0,e.muted=!0,e.preload="auto",e.controls=!1,e},function(e){e.src="",e.oncanplay=null;var t=e.parentNode;null!=t&&t.removeChild(e)}),k=new l.default(function(){return document.createElement("img")},function(e){e.onload=null,e.src=""}),U=Array.from({length:16}).map(function(e,t){return{id:""+t,height:Math.floor(100*Math.random())+120}}),G=function(e){function t(t){var n;(n=e.call(this,t)||this).ref=null,n._video=null,n._image=null,n._mounted=!0,n.handleCanPlay=function(){n._mounted&&n.setState({loaded:!0})},n.handleClick=function(){var e=n.props,t=e.onClick,r=e.item,a=e.index;null!=t&&t(r,a)};var r=n.props,a=r.format,o=r.color;return n.state={color:null==o?i.default.sample(N):o,loaded:!1},b(a)||(n._image=k.getElement(),n._image.onload=function(){return n.setState({loaded:!0})},n._image.src=t.src),n}O(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.format,n=e.src,r=e.itemWidth,a=e.itemHeight,o=this.ref;if(t===E.GIFResultFormat.VIDEO&&null!=o){var i=w.getElement();i.oncanplay=this.handleCanPlay,i.src=n,i.width=r,i.height=a,o.appendChild(i),this._video=i}},n.componentWillUnmount=function(){this._mounted=!1;var e=this._image,t=this._video;null!=e&&(this._image=null,k.poolElement(e)),null!=t&&(this._video=null,w.poolElement(t))},n.renderGIF=function(){var e=this.props,t=e.src,n=e.itemWidth,r=e.itemHeight;return this.state.loaded?A("img",{src:t,width:n,height:r,className:T.default.gif,alt:""}):null},n.render=function(){var e,t=this,n=this.props,r=n.item,a=n.renderExtras,i=n.format,l=n.itemWidth,s=n.itemHeight,u=n.focused,d=this.state,c=d.color,p=d.loaded;return A(f.default,{innerRef:function(e){t.ref=e},className:(0,o.default)(T.default.result,(e={},e[T.default.focused]=u,e)),onClick:this.handleClick,style:{backgroundColor:p?null:c,width:l,height:s}},void 0,b(i)?null:this.renderGIF(),null!=a?a(r):null)},t}(a.PureComponent);t.GIFPickerSearchItem=G,G.displayName="GIFPickerSearchItem";var F=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._masonryRef=a.createRef(),t.prevResultQuery=null,t.state={focusedId:null},t.handleFocus=function(e){var n=t._masonryRef.current;null!=n&&n.scrollIntoView(e.coords.top-10,e.coords.top+e.coords.height+10),t.setState({focusedId:e.id})},t.handleSelect=function(e){var n,r=t.props.data,a=r.findIndex(function(t){return R(t)===e.id});-1!==a&&(n=r[a]),null!=n&&t.selectItem(n,a)},t.handleClickItem=function(e,n){t.selectItem(e,n)},t.handleScroll=function(e){var n=t.props.resultQuery,r=e.scrollerState,a=r.scrollTop;r.scrollHeight-a<=C&&(n!==t.prevResultQuery&&(0,u.fetchSuggestions)(n),t.prevResultQuery=n)},t.renderItem=function(e,n,r){var a=t.state.focusedId;return A(G,{item:e,index:r,format:e.format,src:e.src,itemWidth:n.width,itemHeight:n.height,onClick:t.handleClickItem,renderExtras:function(){return A(D,{className:T.default.favButton,item:e})},focused:R(e)===a})},t.renderLoadingItem=function(e,t,n){return A("div",{className:T.default.placeholder,style:{animationDelay:75*n+"ms"}})},t.renderFooter=function(){var e=t.props,n=e.onSelectSuggestion,r=e.suggestions;return A("div",{className:T.default.endContainer},void 0,r.length>0?A(a.Fragment,{},void 0,A("div",{className:T.default.endText},void 0,I.default.Messages.GIF_PICKER_RELATED_SEARCH),A("div",{className:T.default.searchSuggestions},void 0,r.map(function(e){return A(c.default,{look:c.default.Looks.OUTLINED,color:c.default.Colors.PRIMARY,size:c.default.Sizes.SMALL,className:T.default.searchSuggestion,onClick:function(){n(e)}},e,e)}))):null)},t}O(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.resultType,n=e.data;t===E.GIFPickerResultTypes.FAVORITES&&((0,u.trackSearchStart)(E.GIFPickerResultTypes.FAVORITES),(0,u.trackSearchResultViewed)(n,E.GIFPickerResultTypes.FAVORITES,{limit:null}))},n.componentWillUnmount=function(){w.clearPool(),k.clearPool()},n.selectItem=function(e,t){var n=this.props,r=n.onSelectGIF,a=n.resultType,o=n.data,i=n.resultQuery;null!=r&&r(e),(0,u.trackSelectGIF)({type:a,index:t,offset:this.props.searchOffset,limit:this.props.searchLimit,results:o,totalResults:this.props.searchTotalResults,query:i,gifId:e.id})},n.getItemHeight=function(e,t){var n=e.width;return t*(e.height/n)},n.renderEmptyFavorite=function(e,t){return void 0===t&&(t=!1),A("div",{className:T.default.emptyHint},void 0,null!=e?A("div",{className:T.default.emptyHintCard},void 0,t?A(p.default,{className:T.default.emptyHintFavorite,name:p.default.Names.FAVORITE_FILLED}):null,A("div",{className:T.default.emptyHintText},void 0,e)):A("div",{className:T.default.emptyHintSpacer}))},n.renderEmptyFavorites=function(){var e=this;return A(h.default,{theme:h.default.Themes.GHOST_HAIRLINE},void 0,A("div",{className:T.default.emptyHints},void 0,this.renderEmptyFavorite(I.default.Messages.NO_GIF_FAVORITES_HOW_TO_FAVORITE,!0),this.renderEmptyFavorite(I.default.Messages.NO_GIF_FAVORITES_WHERE_TO_FAVORITE),this.renderEmptyFavorite(I.default.Messages.NO_GIF_FAVORITES_GO_FAVORITE),Array.from({length:15}).map(function(t,n){return A(a.Fragment,{},n,e.renderEmptyFavorite())}),this.renderEmptyFavorite(I.default.Messages.NO_GIF_FAVORITES_FLAVOR_FAVORITE_PLEASE),Array.from({length:16}).map(function(t,n){return A(a.Fragment,{},n,e.renderEmptyFavorite())}),this.renderEmptyFavorite(I.default.Messages.NO_GIF_FAVORITES_FLAVOR_STILL_HERE)))},n.render=function(){var e=this,t=this.props,n=t.data,r=t.resultQuery,o=t.query,i=t.resultType;return 0===n.length&&r===o&&i!==E.GIFPickerResultTypes.TRENDING_GIFS?i===E.GIFPickerResultTypes.FAVORITES?this.renderEmptyFavorites():A(_.default,{message:I.default.Messages.NO_GIF_SEARCH_RESULTS,className:T.default.noResults}):A(m.default,{getItemGrid:function(){var t=e._masonryRef.current;return null!=t?t.getItemGrid():null},onFocus:this.handleFocus,onSelect:this.handleSelect},r,A(g.default,{desiredItemWidth:200,maxColumns:8},void 0,function(t,l,s){return 0!==n.length||r===o&&i!==E.GIFPickerResultTypes.TRENDING_GIFS?a.createElement(y.default,{key:r+"-"+(i||""),ref:e._masonryRef,width:l,height:s,gutterSize:12,className:T.default.results,columns:t,data:n,getItemId:R,getItemHeight:e.getItemHeight,renderItem:e.renderItem,scrollBufferMultiplier:.5,getFooterHeight:function(){return 220},renderFooter:e.renderFooter,onScroll:e.handleScroll}):A(y.default,{width:l,height:s,data:U,columns:t,gutterSize:12,getItemId:M,getItemHeight:P,renderItem:e.renderLoadingItem,scrollBufferMultiplier:.5},r)}))},t}(a.PureComponent);F.displayName="GIFPickerSearchResults";var j=F;t.default=j},6043:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=c(n(17)),i=c(n(231)),l=c(n(302)),s=c(n(426)),u=c(n(10)),d=c(n(5290));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={showPulse:!1},t.showPulse=function(){t.setState({showPulse:!0}),t._timeout=setTimeout(function(){t.setState({showPulse:!1})},500)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentWillUnmount=function(){clearTimeout(this._timeout)},a.render=function(){var e,t=this,n=this.props,r=n.className,a=n.size,c=n.isFavorite,p=n.onClick,h=this.state.showPulse,v=c?u.default.Messages.GIF_TOOLTIP_REMOVE_FROM_FAVORITES:u.default.Messages.GIF_TOOLTIP_ADD_TO_FAVORITES;return f(s.default,{text:v},void 0,f(i.default,{className:(0,o.default)(r,a,d.default.gifFavoriteButton,(e={},e[d.default.selected]=c,e[d.default.showPulse]=h,e)),onMouseDown:function(e){return e.preventDefault()},onClick:function(e){e.preventDefault(),e.stopPropagation(),t.showPulse(),p(c)},onDoubleClick:function(e){return e.preventDefault()}},void 0,f(l.default,{className:d.default.icon,name:c?l.default.Names.FAVORITE_FILLED:l.default.Names.FAVORITE})))},r}(a.PureComponent);p.displayName="GIFFavButton",p.defaultProps={size:d.default.size};var h=p;t.default=h},6044:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=k(n(2)),o=w(n(3)),i=w(n(134)),l=w(n(73)),s=n(467),u=k(n(468)),d=w(n(131)),c=w(n(321)),f=w(n(167)),p=w(n(5246)),h=w(n(35)),v=w(n(74)),m=w(n(88)),y=w(n(203)),_=w(n(247)),g=w(n(14)),E=w(n(5245)),I=w(n(6393)),T=n(805),S=n(234),O=w(n(18)),A=w(n(81)),N=n(322),C=w(n(8)),R=w(n(440)),P=w(n(6394)),M=w(n(6021)),b=w(n(5237)),L=w(n(5855)),D=n(0);function w(e){return e&&e.__esModule?e:{default:e}}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function U(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var j={spotify:"Spotify"};function H(e,t,n,r){var a=null!=r.application_id?m.default.getActiveLibraryApplication(r.application_id):null;O.default.track(D.AnalyticEvents.APPLICATION_OPENED,{type:e,source:D.AnalyticsLocations.MESSAGE_EMBED,application_id:r.application_id,party_id:null!=r.party?r.party.id:void 0,other_user_id:t,message_id:n,distributor:null!=a?a.getDistributor():null})}var x=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).renderCustomButton=function(e){var t=n.props.application;return a.createElement(M.default,G({},e,{source:D.AnalyticsLocations.MESSAGE_EMBED,application:t}))},n.renderEmbed=function(e){var t,r=n.props,a=r.activity,o=r.partyId,i=r.myPartyId,l=r.application,s=r.partyMembers,u=r.isPreview,d=r.isLaunching,c=r.activityActionType,f=r.className,p=r.channelId,h=r.message,v=r.hideParty,m=r.isSyncable,y=r.isLaunchable;if(null!=l)t=l.name;else if(null!=o){var _=o.split(":")[0];t=j[_]}return U(I.default,{activity:a,partyId:o,myPartyId:i,applicationId:null!=l?l.id:null,name:t,partyMembers:s,className:f,coverImage:n.getCoverImage(),isPreview:u,isGameLaunchable:y,isLaunching:d,activityActionType:c,isInBrowser:!C.default.embedded,isSyncable:m,channelId:p,message:h,hideParty:v,onJoin:n.handleJoin,onSpectate:n.handleSpectate,onSync:n.handleSync,onDownloadApp:n.handleDownloadApp,onOpenSpotifyTrack:n.handleOpenSpotifyTrack,onOpenSpotifyArtist:n.handleOpenSpotifyArtist,onOpenSpotifyAlbum:n.handleOpenSpotifyAlbum,renderUserPopout:n.renderUserPopout,renderSpotifyJoinButton:n.renderSpotifyJoinButton,backgroundOpacity:e.backgroundOpacity,renderCustomButton:n.shouldRenderCustomButton()?n.renderCustomButton:null})},F(n).handleJoin=n.handleJoin.bind(F(n)),F(n).handleSpectate=n.handleSpectate.bind(F(n)),F(n).handleSync=n.handleSync.bind(F(n)),F(n).handleDownloadApp=n.handleDownloadApp.bind(F(n)),F(n).renderUserPopout=n.renderUserPopout.bind(F(n)),F(n).renderSpotifyJoinButton=n.renderSpotifyJoinButton.bind(F(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getCoverImage=function(){var e=this.props,t=e.activity,n=e.connectedApplication,r=e.application,a=e.isPreview,o=e.message;if(null!=r&&(a||null!=o&&(0,S.isInviteActive)(t,o,r.id))){var i=(0,S.getCoverImageFromActivity)(t,r.id);if(null!=i)return i}return null!=r?A.default.getApplicationIconURL({id:r.id,icon:null!=n?n.coverImage:r.coverImage,size:D.ACTIVITY_INVITE_COVER_IMAGE_SIZE}):null},o.handleJoin=function(){var e=this.props,t=e.activity,n=e.userId,r=e.message,a=e.channelId;null!=t&&null!=n&&null!=r&&null!=t.session_id&&null!=t.application_id&&(i.default.join(n,t.session_id,t.application_id,a,r.id),H(D.AnalyticsGameOpenTypes.JOIN,n,r.id,t))},o.handleSpectate=function(){var e=this.props,t=e.activity,n=e.userId,r=e.message,a=e.channelId;null!=t&&null!=n&&null!=r&&null!=t.session_id&&null!=t.application_id&&(i.default.spectate(n,t.session_id,t.application_id,a,r.id),H(D.AnalyticsGameOpenTypes.SPECTATE,n,r.id,t))},o.handleSync=function(){var e=this.props,t=e.activity,n=e.userId;null!=t&&null!=n&&u.sync(t,n)},o.handleDownloadApp=function(){l.default.push(R.default,{source:"Game Invite"})},o.handleOpenSpotifyTrack=function(e){(0,s.openTrack)(e)},o.handleOpenSpotifyArtist=function(e,t,n){(0,s.openArtist)(e,t,n)},o.handleOpenSpotifyAlbum=function(e,t){(0,s.openAlbum)(e,t)},o.renderUserPopout=function(e,t){var n=this.props,r=n.channelId,o=n.guildId;return null==r?null:a.createElement(b.default,G({},t,{userId:e.id,guildId:o,channelId:r}))},o.renderSpotifyJoinButton=function(e){var t=this.props,n=t.channelId,r=t.guildId;return a.createElement(P.default,G({guildId:r,channelId:n,source:"Invite Embed"},e))},o.shouldRenderCustomButton=function(){var e=this.props,t=e.isLaunchable,n=e.application;return null!=n&&null!=n.primarySkuId&&!t&&C.default.embedded},o.render=function(){return U(L.default,{section:L.default.Sections.APPLICATION_EMBED},void 0,U(T.BackgroundOpacityContext.Consumer,{},void 0,this.renderEmbed))},r}(a.PureComponent);x.displayName="ActivityInviteEmbedContainer",x.defaultProps={isPreview:!1};var B=o.default.connectStores([E.default,c.default,y.default,p.default,g.default,v.default,_.default,h.default,f.default,m.default],function(e){var t=e.activity,n=e.application,r=e.partyId,a=e.userId,o=e.guildId,i=(n||{}).id,l=null!=t&&null!=t.party&&t.party.id===r?p.default.getParty(t.party.id):null,s=i?y.default.getApplicationActivity(i):y.default.findActivity(function(e){return e.type===D.ActivityTypes.LISTENING}),u=!1,I=!1;null!=i&&(u=E.default.getState(i,D.ActivityActionTypes.JOIN)===D.ActivityActionStates.LOADING,I=E.default.getState(i,D.ActivityActionTypes.SPECTATE)===D.ActivityActionStates.LOADING);var T=Array.from(l||[]).map(function(e){var t=o?v.default.getMember(o,e):null,n=null!=t?t.nick:null,r=g.default.getUser(e),a=null==r;return null==r&&(r=new d.default({discriminator:"0005"})),{user:r,unknownUser:a,nick:n}}),S=null!=t&&_.default.canPlay(t),O=_.default.getSyncingWith(),A=null!=O&&null!=a&&O.userId===a,C=S&&!A;return{partyMembers:T,connectedApplication:null!=i?c.default.getApplication(i):null,myPartyId:null!=s&&null!=s.party?s.party.id:null,isLaunching:u||I,isSyncable:C,isLaunchable:null!=i&&(0,N.isLaunchable)(m.default,h.default,f.default,c.default,i)}})(x);t.default=B},6045:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ImageReadyStates=void 0;var r,a=f(n(2)),o=c(n(17)),i=c(n(163)),l=n(5881),s=c(n(305)),u=f(n(427)),d=c(n(5298));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=(0,i.default)({LOADING:null,ERROR:null,READY:null});t.ImageReadyStates=v;var m=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e,t=this.props,n=t.className,r=t.imageClassName,i=t.readyState,c=t.src,f=t.alt,m=t.width,y=t.height,_=t.maxWidth,g=void 0===_?m:_,E=t.maxHeight,I=void 0===E?y:E,T=t.minWidth,S=t.minHeight,O=t.accessory,A=t.zoomable,N=t.original,C=t.children,R=t.renderItem,P=t.renderAccessory,M=t.backgroundOpacity,b=t.tabIndex,L=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["className","imageClassName","readyState","src","alt","width","height","maxWidth","maxHeight","minWidth","minHeight","accessory","zoomable","original","children","renderItem","renderAccessory","backgroundOpacity","tabIndex"]);if(1===m&&1===y)return null;var D,w=(0,l.fit)(m,y,g,I,T,S),k={},U="div";null!=N&&(U=s.default,k.href=N,k.tabIndex=b),D=null!=c&&i===v.READY&&"function"==typeof C?null!=R?R():C({src:c,size:w,alt:f,className:r}):i===v.LOADING?h("div",{className:d.default.imageWrapperInner},void 0,c?h("img",{alt:f,className:d.default.imagePlaceholder,src:c,style:w}):null,c?h("div",{className:d.default.imagePlaceholderOverlay}):null,h(u.default,{type:u.SpinnerTypes.WANDERING_CUBES})):h("div",{className:d.default.imageWrapperInner},void 0,h("div",{className:d.default.imageError}));var G=null!=P?P():null;return G=G||O,a.createElement(U,p({className:(0,o.default)(d.default.imageWrapper,(e={},e[d.default.imageZoom]=A,e[d.default.imageWrapperBackground]=i!==v.READY,e[d.default.clickable]=null!=L.onClick,e),d.default[(M||"")+"BackgroundOpacity"],n),style:null!=R?null:w},k,L),G?h("div",{className:d.default.imageAccessory},void 0,G):null,D)},r}(a.PureComponent);t.default=m,m.displayName="Image",m.defaultProps={readyState:v.READY,zoomable:!0,alt:"",children:function(e){var t=e.src,n=e.size,r=e.alt;return h("img",{className:e.className,alt:r,src:t,style:n})},minWidth:0,minHeight:0}},6046:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ButtonAddReaction=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=O(n(17)),i=O(n(29)),l=O(n(304)),s=n(59),u=O(n(803)),d=n(446),c=O(n(861)),f=O(n(161)),p=O(n(6104)),h=O(n(231)),v=n(806),m=n(805),y=O(n(795)),_=n(463),g=O(n(476)),E=O(n(6036)),I=n(0),T=O(n(10)),S=O(n(5308));function O(e){return e&&e.__esModule?e:{default:e}}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).onAddReaction=function(e){if(null!=e){var n=t.props,r=n.channel,a=n.message;(0,d.addReaction)(r.id,a.id,(0,_.toReactionEmoji)(e))}},t.renderReactionPopout=function(e){var n=t.props.channel;return a.createElement(E.default,N({},e,{channel:n,onSelectEmoji:t.onAddReaction}))},t}return C(t,e),t.prototype.render=function(){var e=this.props,t=e.message,n=e.left,r=e.className;return t.state===I.MessageStates.SENDING||t.author.isLocalBot()?null:A(y.default,{closeOnScroll:!1,render:this.renderReactionPopout,position:n?y.default.Positions.LEFT:y.default.Positions.RIGHT,offsetX:n?-10:0,subscribeTo:n?I.ComponentActions.TOGGLE_REACTION_POPOUT(t.id):null},void 0,A(h.default,{className:(0,o.default)(S.default.reactionBtn,r),"aria-label":T.default.Messages.ADD_REACTION}))},t}(a.Component);t.ButtonAddReaction=R,R.displayName="ButtonAddReaction",R.defaultProps={left:!0};var P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).scale=new l.default.Value(1),t.opacity=new l.default.Value(1),t.timeout=new s.Timeout,t.state={tooltipText:null},t.handleClick=function(){var e=t.props,n=e.message,r=e.emoji,a=e.me,o=e.readOnly,i=n.getChannelId();a?(0,d.removeReaction)(i,n.id,r):o||(0,d.addReaction)(i,n.id,r)},t.handleMouseEnter=function(){t.timeout.start(500,t.showTooltip,!1)},t.showTooltip=function(){t.handleStoreChange(),c.default.addChangeListener(t.handleStoreChange)},t.handleMouseLeave=function(){t.hideTooltip(),t.setState({tooltipText:null})},t.hideTooltip=function(){t.timeout.stop(),c.default.removeChangeListener(t.handleStoreChange)},t.handleStoreChange=function(){var e=t.props,n=e.message,r=e.emoji;t.setState({tooltipText:(0,_.getReactionTooltip)(n,r)})},t.setClickableRef=function(e){t.clickableElement=e},t}C(t,e);var n=t.prototype;return n.componentWillAppear=function(e){this.animateIn(e)},n.componentWillEnter=function(e){this.animateIn(e)},n.componentWillUnmount=function(){this.hideTooltip()},n.animateIn=function(e){f.default.isFocused()?(this.scale.setValue(0),this.opacity.setValue(0),l.default.parallel([l.default.timing(this.scale,{toValue:1,duration:300,easing:l.default.Easing.inOut(l.default.Easing.back())}),l.default.timing(this.opacity,{toValue:1,duration:300})]).start(e)):(this.scale.setValue(1),this.opacity.setValue(1),e())},n.render=function(){var e,t=this.props,n=t.count,r=t.emoji,i=t.me,s=t.readOnly,u=t.backgroundOpacity,d={transform:[{scale:this.scale}],opacity:this.opacity};return A(a.Fragment,{},void 0,A(l.default.div,{className:(0,o.default)(S.default.reaction,S.default[u+"BackgroundOpacity"],(e={},e[S.default.reactionMe]=i,e[S.default.reactionReadOnly]=s,e)),style:d},void 0,A(h.default,{className:S.default.reactionInner,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onFocus:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onBlur:this.handleMouseLeave,innerRef:this.setClickableRef},void 0,A(g.default,{emojiId:r.id,emojiName:r.name,animated:r.animated}),A(p.default,{className:(0,o.default)(S.default.reactionCount,S.default[u+"BackgroundOpacity"]),value:n,digitWidth:9}))),this.renderTooltip())},n.renderTooltip=function(){var e=this.state.tooltipText;return null==e||""===e?null:((0,i.default)(null!=this.clickableElement,"Unexpected missing element"),A(v.TooltipLayer,{targetElement:this.clickableElement,position:v.TooltipPositions.TOP,color:v.TooltipColors.BLACK},void 0,e))},t}(a.PureComponent);P.displayName="Reaction";var M=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={disableTransitionAppear:!0,reactionsCount:t.props.message.reactions.length},t}return C(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.message.reactions.length;return 0===t.reactionsCount&&n>0?{disableTransitionAppear:!1,reactionsCount:n}:t.reactionsCount!==n?{reactionsCount:n}:null},t.prototype.render=function(){var e=this.props,t=e.message,n=e.disableReactionCreates,r=e.disableReactionUpdates,o=e.channel,i=this.state.disableTransitionAppear;if(!t.reactions.length)return null;var l=A(R,{message:t,channel:o,left:!1});return A(m.BackgroundOpacityContext.Consumer,{},void 0,function(e){return A(u.default,{className:S.default.reactions,transitionAppear:!i,transitionLeave:!1},void 0,t.reactions.map(function(n){return a.createElement(P,N({key:(n.emoji.id||0)+":"+n.emoji.name,message:t,readOnly:r,backgroundOpacity:e.backgroundOpacity},n))}),!n&&l)})},t}(a.PureComponent);t.default=M,M.displayName="Reactions"},6047:function(e,t,n){"use strict";t.__esModule=!0,t.toggleGamePopout=function(e,t,n){i.default.isOpen(p)?(e.stopPropagation(),a.default.close(p)):h(e,t,n)},t.default=h;c(n(2));var r,a=d(n(802)),o=d(n(5851)),i=d(n(812)),l=n(795),s=c(n(6073)),u=d(n(6155));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var f=(0,o.default)(u.default),p="activity_feed_game_popout";function h(e,t,n){null!=t&&(e.stopPropagation(),s.trackGamePopoutOpened(t,"",n),(0,l.openPopout)(e.currentTarget,{position:l.Positions.TOP_LEFT,preventClickPropagation:!0,closeOnScroll:!1,render:function(e){var n=e.popoutKey;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(f,{popoutKey:n,game:t})}},p,e))}},6048:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=i(n(17)),o=i(n(5314));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var s=function(e){var t,n,r=e.renderTitle,i=e.renderTagline,s=e.renderActions,u=e.renderMedia,d=e.className,c=e.isHorizontal,f=void 0!==c&&c;return l("div",{className:(0,a.default)(o.default.tile,(t={},t[o.default.tileHorizontal]=f,t),d)},void 0,l("div",{className:(0,a.default)(o.default.media,(n={},n[o.default.mediaHorizontal]=f,n))},void 0,u&&u()),l("div",{className:o.default.description},void 0,l("h2",{className:o.default.title},void 0,r&&r()),l("div",{className:o.default.tagline},void 0,i&&i()),l("div",{className:o.default.actions},void 0,s&&s())))};s.displayName="ResponsiveTile";var u=s;t.default=u},6049:function(e,t,n){"use strict";t.__esModule=!0,t.StoreEmbedWithoutDimensions=t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(232),i=N(n(3)),l=n(818),s=N(n(5851)),u=N(n(5882)),d=(N(n(814)),N(n(829)),N(n(35))),c=N(n(88)),f=N(n(6001)),p=N(n(189)),h=N(n(807)),v=N(n(112)),m=n(113),y=n(130),_=N(n(5855)),g=N(n(6021)),E=N(n(5902)),I=N(n(6425)),T=n(5954),S=n(0),O=N(n(10)),A=N(n(5321));function N(e){return e&&e.__esModule?e:{default:e}}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={playing:!1,muted:!0},t.handleToggleMute=function(){t.setState({muted:!t.state.muted})},t.handleMouseEnter=function(){t.setState({playing:!0})},t.handleMouseLeave=function(){t.setState({playing:!1})},t.getStoreListingLocation=function(){var e=t.props.sku;if(null==e)throw new Error("Should not be link to ApplicationDirectoryTile without SKU");return(0,y.getStoreListingLocation)(e.id,{slug:e.slug,analyticsSource:t.analyticsLocation})},t.handleActionButtonClick=function(e){return e.preventDefault()},t.handleBuyButtonClick=function(e){return e.preventDefault()},t.handleLinkClick=function(e){var n=t.props.onEmbedClick;null!=n&&n(e)},t.renderActions=function(e){var n=t.props,r=n.inLibrary,a=n.application,o=n.skuId,i=n.libraryApplication,l=n.renderCustomActions;if(null==a)return null;if(null!=l)return R("div",{className:A.default.tileActions},void 0,l());var s=null!=a&&a.primarySkuId===o,u=null!=i&&i.hasFlag(S.LibraryApplicationFlags.HIDDEN);return R("div",{className:A.default.tileActions},void 0,!s||u?t.renderViewInStoreButton():R(g.default,{application:a,customDisabledColor:v.default.Colors.GREY,size:v.default.Sizes.SMALL,className:A.default.actionButton,source:S.AnalyticsLocations.MESSAGE_EMBED,onClick:t.handleActionButtonClick}),r&&!u||e.premium?null:R(E.default,{type:E.default.Types.EMBED,sku:e,inLibrary:!1}))},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,i,s,u=r.prototype;return u.componentDidMount=function(){var e=this.props,t=e.sku,n=e.skuId,r=e.storeListing;null!=t&&null!=r||(0,l.fetchStoreListingForSku)(n),m.ComponentDispatch.dispatch(S.ComponentActions.CHAT_RESIZE)},u.renderViewInStoreButton=function(){return R(v.default.Link,{to:this.getStoreListingLocation(),className:A.default.actionButton,color:v.default.Colors.GREEN,size:v.default.Sizes.SMALL},void 0,O.default.Messages.GAME_ACTION_BUTTON_VIEW_IN_STORE)},u.render=function(){var e=this,t=this.props,n=t.sku,r=t.storeListing,a=t.inLibrary,i=t.width,l=t.fetchFailed,s=t.renderFallback,u=t.renderCustomTitle,d=t.renderCustomTagline,c=this.state,f=c.playing,p=c.muted,h=i>T.HORIZONTAL_EMBED_BREAKPOINT;return null==n||null==r?l?s():R(T.ResponsiveLoadingEmbedTile,{isHorizontal:h}):R(_.default,{section:S.AnalyticsSections.APPLICATION_EMBED},void 0,R(o.Link,{onClick:this.handleLinkClick,to:this.getStoreListingLocation(),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,R(I.default,{sku:n,storeListing:r,playing:f,muted:p,inLibrary:a,onToggleMute:this.handleToggleMute,renderCustomActions:function(){return e.renderActions(n)},renderCustomTitle:u,renderCustomTagline:d,isHorizontal:h,isEmbed:!0})))},a=r,(i=[{key:"analyticsLocation",get:function(){var e=this.props,t=e.analyticsContext.location,n=e.analyticsSection;return C({},t,{section:null!=n?n:S.AnalyticsSections.APPLICATION_EMBED,object:S.AnalyticsObjects.CARD})}}])&&P(a.prototype,i),s&&P(a,s),r}(a.Component);M.displayName="StoreEmbed",M.defaultProps={renderFallback:S.NOOP};var b=[p.default,f.default,c.default,h.default,d.default],L=function(e){var t=e.skuId,n=p.default.get(t);return{sku:n,application:null!=n?d.default.getGame(n.applicationId):null,fetchFailed:p.default.didFetchingSkuFail(t),inLibrary:null!=n&&c.default.hasApplication(n.applicationId,n.applicationId,!0),storeListing:null!=n?h.default.getForSKU(n.id):null,libraryApplication:null!=n?c.default.getLibraryApplication(n.applicationId,n.applicationId,!0):null}},D=i.default.connectStores(b,L)((0,u.default)((0,s.default)(M)));t.default=D;var w=(0,s.default)(i.default.connectStores(b,L)(M));t.StoreEmbedWithoutDimensions=w},6050:function(e,t,n){e.exports=n.p+"0c9615349350c4185381d58c69b88cbc.svg"},6051:function(e,t,n){e.exports=n.p+"b8029fe196b8f1382e90bbe81dab50dc.svg"},6052:function(e,t,n){"use strict";t.__esModule=!0,t.search=function(e,t){if(null==t||""===t)return e;var n=t.toLowerCase();return e.filter(function(e){return e.searchTerms.some(function(e){return(0,r.default)(n,e)})})},t.startLurking=function(e,t){var n=o.default.getGuild(e),r={state:{analyticsSource:t}};null!=n&&null!=n.joinedAt?l.default.transitionTo(s.Routes.CHANNEL(e,i.default.getChannelId(e)),r):a.default.joinGuild(e,!0).then(function(){a.default.transitionToGuildSync(e,r)})},t.AnalyticsContexts=void 0;var r=u(n(5887)),a=u(n(801)),o=u(n(23)),i=u(n(50)),l=u(n(45)),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var d=Object.freeze({SEARCH:"Search",RECOMMENDED:"Recommended",POPULAR:"Popular"});t.AnalyticsContexts=d},6058:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=d(n(3)),a=d(n(1)),o=(d(n(6117)),d(n(35))),i=d(n(42)),l=d(n(189)),s=d(n(807)),u=n(0);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f,p,h,v,m={},y={},_={},g=!1,E={};function I(e){var t=e.directoryLayout,n=t.id;m[n]=t,_[n]=!1,y[n]=Date.now()}function T(){m={},y={},_={}}var S=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,u,d,I=r.prototype;return I.initialize=function(){this.waitFor(l.default,s.default,o.default,i.default),v=i.default.locale},I.getDirectoryLayout=function(e){return m[e]},I.isFetching=function(e){return _[e]},I.shouldFetch=function(e){return!_[e]&&(null==y[e]||Date.now()-y[e]>18e5)},a=r,(u=[{key:"lastHomeDirectoryView",get:function(){return p}},{key:"lastBrowseDirectoryView",get:function(){return h}},{key:"isLibraryApplicationsHidden",get:function(){return g}},{key:"searchTerm",get:function(){return f}},{key:"previousFilters",get:function(){return E}}])&&c(a.prototype,u),d&&c(a,d),r}(r.default.Store))(a.default,{APPLICATION_STORE_DIRECTORY_LAYOUT_FETCH_START:function(e){var t=e.layoutId;_[t]=!0},APPLICATION_STORE_DIRECTORY_LAYOUT_FETCH_SUCCESS:I,APPLICATION_STORE_DIRECTORY_FETCH_SUCCESS:I,APPLICATION_STORE_DIRECTORY_FETCH_FAILURE:function(e){var t=e.layoutId;_[t]=!1},APPLICATION_STORE_DIRECTORY_UNMOUNT:function(e){var t=e.scrollTop;switch(e.directoryLocation){case u.DirectoryLocations.HOME:p={scrollTop:t};break;case u.DirectoryLocations.BROWSE:h={scrollTop:t}}},APPLICATION_STORE_SET_HIDE_LIBRARY:function(e){var t=e.hidden;g=t},APPLICATION_STORE_SET_SEARCH_QUERY:function(e){var t=e.query;f=t},APPLICATION_STORE_SAVE_FILTERS:function(e){var t=e.filters;E=t},USER_SETTINGS_UPDATE:function(e){var t=e.locale?e.locale:i.default.locale;if(v===t)return!1;v=t,T()},APPLICATION_STORE_CLEAR_DATA:function(e){return T()},APPLICATION_STORE_RESET_NAVIGATION:function(e){return p=null,void(h=null)}});t.default=S},6060:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(3)),a=s(n(24)),o=s(n(1)),i=s(n(5890)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u="ChannelSectionStore",d=null,c=null;function f(){var e;if(i.default.isActive()&&(e=l.ChannelSections.SEARCH),c===e)return!1;c=e}var p=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initialize=function(){d=a.default.get(u)||l.ChannelSections.MEMBERS},o.getSection=function(){return c||d},r}(r.default.Store))(o.default,{CHANNEL_TOGGLE_SECTION:function(e){var t=e.section;d===t?null==c&&(d=l.ChannelSections.NONE):d=t,c=null,a.default.set(u,d)},SEARCH_START:function(e){return f()},SEARCH_INDEXING:function(e){return f()},SEARCH_FINISH:function(e){return f()},SEARCH_EDITOR_STATE_CLEAR:function(e){return f()},SEARCH_EDITOR_STATE_CHANGE:function(e){return f()},CHANNEL_SELECT:function(e){return f()}});t.default=p},6064:function(e,t,n){"use strict";t.__esModule=!0,t.createEntity=v,t.getCollapsedSelection=function(e,t,n){var r=t.getCurrentContent().getFirstBlock();n=(n=(n=n||t.getSelection()).set("focusKey",r.getKey())).set("anchorKey",r.getKey());var a=Math.min(n.getStartOffset(),n.getEndOffset())+e.length;return n=(n=n.set("anchorOffset",a)).set("focusOffset",a)},t.updateContent=m,t.deleteContent=function(e,t){switch(e){case"delete":return(0,f.default)(t);case"delete-word":return(0,s.default)(t);case"backspace":return(0,c.default)(t);case"backspace-word":return(0,l.default)(t);case"backspace-to-start-of-line":return(0,i.default)(t);default:return t}},t.miscCommand=function(e,t){switch(e){case"transpose-characters":return(0,p.default)(t);case"move-selection-to-start-of-block":return(0,d.default)(t);case"move-selection-to-end-of-block":return(0,u.default)(t);default:return t}},t.adaptSelection=function(e,t){var n=(e=(e=e.set("focusKey",t.getKey())).set("anchorKey",t.getKey())).getEndOffset();return e=(e=e.set("anchorOffset",n)).set("focusOffset",n)},t.getFirstTextBlock=y,t.applyTokensAsEntities=function(e,t,n){void 0===n&&(n={});var r=t.getCurrentContent(),a=r.getFirstBlock(),o=a.getText(),i=[];return a.findEntityRanges(function(e){return null!==e.getEntity()},function(e,t){var n=r.getEntity(a.getEntityAt(e)).getType(),l=o.substring(e,t);i.push({processed:!1,type:n,start:e,end:t,text:l})}),e.forEach(function(e){var r=!1;if(i.forEach(function(n){var a=e.type,o=e.start,i=e.end,l=e.getFullMatch();n.processed||(n.type===a&&n.start===o&&n.text===l?(n.processed=!0,r=!0):(o>=n.start&&o<n.end||i>n.start&&i<=n.end)&&(n.processed=!0,t=v(null,n.start,n.end,t)))}),!r){var a=n[e.type];t=v([e.type,a&&a.mutable?"MUTABLE":"IMMUTABLE",{token:e}],e.start,e.end,t)}}),i.forEach(function(e){e.processed||(t=v(null,e.start,e.end,t))}),t},t.getSelectionScope=function(e,t){var n,r,a=t.getSelection(),o=a.focusOffset,i=a.anchorOffset,l=e.find(function(t,a){return o>=t.start&&o<=t.end&&i>=t.start&&i<=t.end?(e[a+1]&&(r=e[a+1]),!0):(n=t,!1)});if(!l)return null;return{previousToken:n,currentToken:l,nextToken:r}},t.createEmptyEditorState=function(e){return r.EditorState.createEmpty(new r.CompositeDecorator(e))},t.clearContent=function(e){return r.EditorState.push(e,r.ContentState.createFromText(""))},t.replaceAllContent=function(e,t){var n=y(t);return m(e,t,0,n.length)},t.appendSpace=function(e){var t=y(e);return m(" ",e,t.length)},t.setCollapsedSelection=_,t.setCollapsedEndSelection=function(e){return _(e.getCurrentContent().getFirstBlock().getText().length,e)},t.setCollapsedStartSelection=function(e){return _(0,e)},t.setToStartSelection=function(e){var t=e.getSelection();return t=(t=t.set("focusOffset",0)).set("isBackward",!0),r.EditorState.forceSelection(e,t)},t.setToEndSelection=function(e){var t=y(e),n=e.getSelection();return n=(n=n.set("focusOffset",t.length)).set("isBackward",!1),r.EditorState.forceSelection(e,n)},t.truncateContent=function(e,t){void 0===t&&(t=512);var n=y(e);if(n.length>t){var a=e.getSelection();e=m("",e,t,n.length),a.getAnchorOffset()>t&&(a=a.set("anchorOffset",t)),a.getFocusOffset()>t&&(a=a.set("focusOffset",t)),e=r.EditorState.forceSelection(e,a)}return e},t.scrollCursorIntoView=function(e){var t=window.getSelection();if(!t||"Caret"!==t.type||!e)return;var n=t.getRangeAt(0);if(!function(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}(n.commonAncestorContainer,e))return;var r=n.getClientRects()[0],a=e.getClientRects()[0];if(!r||!a)return;var o=r.left-a.left+e.scrollLeft;o<e.scrollLeft?e.scrollLeft=o-10:o>e.scrollLeft+e.offsetWidth&&(e.scrollLeft=o-e.offsetWidth+3)},t.isEmpty=function(e){return 0===y(e).length};var r=n(6186),a=h(n(6482));t.getDefaultKeyBinding=a.default;var o=h(n(6189)),i=h(n(6618)),l=h(n(6619)),s=h(n(6620)),u=h(n(6621)),d=h(n(6622)),c=h(n(6623)),f=h(n(6624)),p=h(n(6625));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){var o,i=a.getCurrentContent(),l=null;null!=e&&(l=(i=(o=i).createEntity.apply(o,e)).getLastCreatedEntityKey());var s=i.getFirstBlock(),u=new r.SelectionState({anchorKey:s.getKey(),anchorOffset:t,focusKey:s.getKey(),focusOffset:n});return i=r.Modifier.applyEntity(i,u,l),r.EditorState.set(a,{currentContent:i})}function m(e,t,n,a){var i,l=t.getCurrentContent(),s=l.getFirstBlock(),u=s.getText();"number"==typeof n?(n>u.length&&(n=u.length),a>u.length&&(a=u.length),i=new r.SelectionState({anchorKey:s.getKey(),anchorOffset:n,focusKey:s.getKey(),focusOffset:a||n})):i=t.getSelection();var d,c=t.getCurrentInlineStyle(),f=(0,o.default)(l,i);return i.isCollapsed()?(l=r.Modifier.insertText(l,i,e,c,f),d="insert-characters"):(l=r.Modifier.replaceText(l,i,e,c,f),d="replace-characters"),r.EditorState.push(t,l,d)}function y(e){return e.getCurrentContent().getFirstBlock().getText()}function _(e,t){var n=t.getSelection();return n=(n=n.set("focusOffset",e)).set("anchorOffset",e),r.EditorState.forceSelection(t,n)}},6065:function(e,t,n){"use strict";t.__esModule=!0,t.deepLinkRouteIfLandedAndNotAuthed=t.deepLinkRouteIfLanded=void 0;var r=s(n(332)),a=s(n(11)),o=s(n(8)),i=s(n(865)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=o.default.embedded?l.NOOP:function(e,t){o.default.isDesktop&&!i.default.hasNavigated&&r.default.requestOnce(l.RPCCommands.DEEP_LINK,{type:e,params:t})};t.deepLinkRouteIfLanded=d;var c=o.default.embedded?l.NOOP:function(e,t){if(!a.default.isAuthenticated()&&!a.default.isGuest())return d(e,u({},t||{},{fingerprint:a.default.getFingerprint()}))};t.deepLinkRouteIfLandedAndNotAuthed=c},6080:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.CALL_START=t.CALL_ACCEPT=void 0;var r=n(113),a=n(0),o={binds:["mod+return"],global:!0,action:function(){if(r.ComponentDispatch.hasSubscribers(a.ComponentActions.CALL_ACCEPT))return r.ComponentDispatch.dispatch(a.ComponentActions.CALL_ACCEPT),!1}};t.CALL_ACCEPT=o;var i={binds:["ctrl+'","ctrl+shift+'"],global:!0,action:function(e){if(r.ComponentDispatch.hasSubscribers(a.ComponentActions.CALL_START))return r.ComponentDispatch.dispatch(a.ComponentActions.CALL_START,e),!1}};t.CALL_START=i;var l={CALL_ACCEPT:o,CALL_START:i};t.default=l},6081:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_PREVIOUS_GUILD=t.CHANNEL_PREV=t.CHANNEL_NEXT=void 0;var r=d(n(5864)),a=d(n(50)),o=d(n(160)),i=d(n(45)),l=d(n(6345)),s=n(5888),u=n(0);function d(e){return e&&e.__esModule?e:{default:e}}var c={binds:["alt+down"],global:!0,action:function(){return(0,l.default)(),!1},keyup:function(){return r.default.flushSelection(),!1}};t.CHANNEL_NEXT=c;var f={binds:["alt+up"],global:!0,action:function(){return(0,l.default)(-1),!1},keyup:function(){return r.default.flushSelection(),!1}};t.CHANNEL_PREV=f;var p={binds:["mod+alt+right"],global:!0,action:function(){var e;if(o.default.getGuildId())e=u.ME;else{var t=o.default.getLastSelectedGuildId();t&&(e=t,(0,s.transitionToChannel)(t,a.default.getChannelId(t)))}return null!=e&&i.default.transitionTo(u.Routes.CHANNEL(e,a.default.getChannelId(e))),!1}};t.TOGGLE_PREVIOUS_GUILD=p;var h={CHANNEL_PREV:f,CHANNEL_NEXT:c,TOGGLE_PREVIOUS_GUILD:p};t.default=h},6082:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.MARK_CHANNEL_READ=void 0;var r=f(n(162)),a=n(5932),o=f(n(850)),i=f(n(236)),l=f(n(309)),s=f(n(50)),u=f(n(160)),d=n(113),c=n(0);function f(e){return e&&e.__esModule?e:{default:e}}var p={binds:["esc","shift+pagedown"],global:!0,action:function(){var e=document.activeElement;if(d.ComponentDispatch.hasSubscribers(c.ComponentActions.CALL_DECLINE))return d.ComponentDispatch.dispatch(c.ComponentActions.CALL_DECLINE),!1;if(o.default.isOpen())return d.ComponentDispatch.dispatch(c.ComponentActions.CONTEXT_MENU_CLOSE),!1;if(d.ComponentDispatch.hasSubscribers(c.ComponentActions.POPOUT_CLOSE))return d.ComponentDispatch.dispatch(c.ComponentActions.POPOUT_CLOSE),!1;if(d.ComponentDispatch.hasSubscribers(c.ComponentActions.CLOSE_GIF_PICKER))return d.ComponentDispatch.dispatch(c.ComponentActions.CLOSE_GIF_PICKER),!1;if(d.ComponentDispatch.hasSubscribers(c.ComponentActions.MODAL_CLOSE)&&!function(e){if(null==e)return!1;if(e instanceof HTMLInputElement)switch(e.type){case"text":case"password":case"email":case"number":case"tel":case"url":return!0;default:return!1}return e instanceof HTMLTextAreaElement}(e))return d.ComponentDispatch.dispatch(c.ComponentActions.MODAL_CLOSE),!1;var t=u.default.getGuildId(),n=s.default.getChannelId(t);n&&(i.default.getMessages(n).hasMoreAfter&&r.default.jumpToPresent(n,c.MAX_MESSAGES_PER_CHANNEL),l.default.hasUnread(n)&&(0,a.ack)(n),(0,a.localAck)(n));return d.ComponentDispatch.dispatch(c.ComponentActions.SCROLLTO_PRESENT),!1}};t.MARK_CHANNEL_READ=p;var h={MARK_CHANNEL_READ:p};t.default=h},6083:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.MARK_SERVER_READ=void 0;var r=c(n(801)),a=c(n(162)),o=c(n(5901)),i=c(n(236)),l=c(n(50)),s=c(n(160)),u=n(113),d=n(0);function c(e){return e&&e.__esModule?e:{default:e}}var f={},p={binds:["shift+esc"],global:!0,action:function(){var e=s.default.getGuildId();if(e&&o.default.getUnreadGuildsIgnoreMuted(e)){if(!f[e]){var t=function(){return delete f[e]};r.default.markGuildAsRead(e).then(t,t)}var n=l.default.getChannelId(e);if(n)i.default.getMessages(n).hasMoreAfter?a.default.jumpToPresent(n,d.MAX_MESSAGES_PER_CHANNEL):u.ComponentDispatch.dispatch(d.ComponentActions.SCROLLTO_PRESENT)}}};t.MARK_SERVER_READ=p;var h={MARK_SERVER_READ:p};t.default=h},6084:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.JUMP_TO_FIRST_UNREAD=void 0;var r=i(n(162)),a=i(n(309)),o=i(n(50));function i(e){return e&&e.__esModule?e:{default:e}}var l={binds:["shift+pageup"],global:!0,action:function(){var e=o.default.getChannelId();if(e){var t=a.default.ackMessageId(e);t&&a.default.getOldestUnreadTimestamp(e)>0&&r.default.jumpToMessage(e,t,!1,"Keyboard Shortcut")}return!1}};t.JUMP_TO_FIRST_UNREAD=l;var s={JUMP_TO_FIRST_UNREAD:l};t.default=s},6085:function(e,t,n){"use strict";t.__esModule=!0,t.findNextSelected=function e(t,n,a,o){var i=a.length;if(0===i)return 0;if(null==o)o=n;else if(o===n)return n;n+="up"===t?-1:1;if(n<0||n>=i)return e(t,n<0?i:-1,a,o);var l=a[n];if(l.type===r.AutocompleterResultTypes.HEADER)return e(t,n,a,o);return n};var r=n(0)},6086:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.RETURN_TO_AUDIO_CHANNEL=void 0;var r=u(n(5864)),a=u(n(5876)),o=u(n(193)),i=u(n(50)),l=n(5888),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var d={binds:["mod+alt+left"],global:!0,action:function(){if(!o.default.isConnected())return!1;var e=o.default.getGuildId()||s.ME,t=i.default.getChannelId(e);return(0,l.transitionToChannel)(e,t),r.default.flushSelection(!0),a.default.channelListScrollTo(e,o.default.getChannelId()),!1}};t.RETURN_TO_AUDIO_CHANNEL=d;var c={RETURN_TO_AUDIO_CHANNEL:d};t.default=c},6087:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SCROLL_DOWN=t.SCROLL_UP=void 0;var r=n(113),a=n(0),o={binds:["pageup"],global:!0,action:function(){return r.ComponentDispatch.dispatchToLastSubscribed(a.ComponentActions.SCROLL_PAGE_UP),!1}};t.SCROLL_UP=o;var i={binds:["pagedown"],global:!0,action:function(){return r.ComponentDispatch.dispatchToLastSubscribed(a.ComponentActions.SCROLL_PAGE_DOWN),!1}};t.SCROLL_DOWN=i;var l={SCROLL_UP:o,SCROLL_DOWN:i};t.default=l},6088:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SEARCH_EMOJIS=void 0;var r=n(113),a=n(0),o={binds:["mod+e"],global:!0,action:function(){return r.ComponentDispatch.dispatch(a.ComponentActions.TOGGLE_EMOJI_POPOUT),!1}};t.SEARCH_EMOJIS=o;var i={SEARCH_EMOJIS:o};t.default=i},6089:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SERVER_PREV=t.SERVER_NEXT=void 0;var r=o(n(5864)),a=o(n(6350));function o(e){return e&&e.__esModule?e:{default:e}}var i={binds:["mod+alt+down","mod+shift+]","ctrl+tab"],global:!0,action:function(e){return e.preventDefault(),e.stopPropagation(),(0,a.default)(),!1},keyup:function(){return r.default.flushSelection(),!1}};t.SERVER_NEXT=i;var l={binds:["mod+alt+up","mod+shift+[","ctrl+shift+tab"],global:!0,action:function(e){return e.preventDefault(),e.stopPropagation(),(0,a.default)(-1),!1},keyup:function(){return r.default.flushSelection(),!1}};t.SERVER_PREV=l;var s={SERVER_NEXT:i,SERVER_PREV:l};t.default=s},6090:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SUBMIT=void 0;var r=n(113),a=n(0),o={binds:["return"],global:!1,action:function(){if(r.ComponentDispatch.hasSubscribers(a.ComponentActions.MODAL_SUBMIT))return r.ComponentDispatch.dispatch(a.ComponentActions.MODAL_SUBMIT),!1}};t.SUBMIT=o;var i={SUBMIT:o};t.default=i},6091:function(e,t,n){"use strict";t.__esModule=!0,t.TEXTAREA_FOCUS=void 0;var r=u(n(821)),a=u(n(43)),o=u(n(193)),i=n(113),l=n(6092),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var d=new Set(["PageDown","PageUp","Home","End"]),c=new Set(["Meta","Alt","Control","Shift"]),f={binds:["any-character"],global:!1,keydown:function(e,t){if((0,l.isInputLikeElement)(document.activeElement))return!1;if(c.has(t))return!1;var n=null!=document.activeElement&&"BODY"===document.activeElement.tagName;return!(s.EnableAccessibility&&!n&&!/^[a-zA-Z0-9]$/.test(t))&&(!i.ComponentDispatch.hasSubscribers(s.ComponentActions.MODAL_CLOSE)&&(!r.default.hasLayers()&&("Tab"===t?(e.preventDefault(),i.ComponentDispatch.dispatch(s.ComponentActions.TEXTAREA_FOCUS),!1):!(o.default.isConnected()&&a.default.getMode()===s.InputModes.PUSH_TO_TALK&&!a.default.isSelfMute())&&void(e.metaKey||e.ctrlKey||d.has(t)||i.ComponentDispatch.dispatchToLastSubscribed(s.ComponentActions.TEXTAREA_FOCUS)))))}};t.TEXTAREA_FOCUS=f},6092:function(e,t,n){"use strict";t.__esModule=!0,t.isInputLikeElement=function(e){if(null==e)return!1;if("true"===e.getAttribute("contenteditable"))return!0;if(a.test(e.tagName))return!0;if(r.test(e.tagName)){var t=e.getAttribute("type")||"text";if("text"===t||"password"===t)return!0}return!1},t.removeNode=function(e){null!=e.parentNode&&e.parentNode.removeChild(e)},t.clickedOnVisibleImage=function(e,t,n,r){var a=n.width,o=n.height,i=r.top,l=r.left,s=r.width,u=r.height,d=Math.min(s/a,u/o,1),c=a*d,f=o*d,p=(u-f)/2+l,h=(s-c)/2+i;if(t>=p&&t<=p+f&&e>=h&&e<=h+c)return!0;return!1};var r=/input/i,a=/textarea/i},6093:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_DEAFEN=t.TOGGLE_MUTE=void 0;var r,a=(r=n(235))&&r.__esModule?r:{default:r};var o={binds:["mod+shift+m"],global:!0,action:function(){return a.default.toggleSelfMute(),!1}};t.TOGGLE_MUTE=o;var i={binds:["mod+shift+d"],global:!0,action:function(){return a.default.toggleSelfDeaf(),!1}};t.TOGGLE_DEAFEN=i;var l={TOGGLE_MUTE:o,TOGGLE_DEAFEN:i};t.default=l},6094:function(e,t,n){"use strict";t.__esModule=!0,t.TOGGLE_CATEGORY_COLLAPSED=void 0;var r=n(6016),a=s(n(825)),o=s(n(99)),i=s(n(160)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u={binds:["mod+shift+a"],global:!0,action:function(){var e=i.default.getGuildId();return null!=e&&(o.default.getChannels(e)[l.ChannelTypes.GUILD_CATEGORY].some(function(e){var t=e.channel;return"null"!==t.id&&!a.default.isCollapsed(t.id)})?(0,r.categoryCollapseAll)(e):(0,r.categoryExpandAll)(e),!1)}};t.TOGGLE_CATEGORY_COLLAPSED=u},6095:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_HOTKEYS=void 0;var r=o(n(5950)),a=o(n(6096));function o(e){return e&&e.__esModule?e:{default:e}}var i={binds:["mod+/","mod+shift+/"],global:!0,action:function(){return a.default.isOpen()?r.default.hide():r.default.show(),!1}};t.TOGGLE_HOTKEYS=i;var l={TOGGLE_HOTKEYS:i};t.default=l},6096:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(1));n(0);function o(e){return e&&e.__esModule?e:{default:e}}var i=!1,l=!1;var s=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.isOpen=function(){return i},a.getState=function(){return{ragingDemon:l}},r}(r.default.Store))(a.default,{SHOW_KEYBOARD_SHORTCUTS:function(e){i=!0},HIDE_KEYBOARD_SHORTCUTS:function(e){i=!1},ACTIVATE_RAGING_DEMON:function(e){l=!0},DEACTIVATE_RAGING_DEMON:function(e){l=!1}});t.default=s},6097:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.MENTION_PREV=t.MENTION_NEXT=t.UNREAD_PREV=t.UNREAD_NEXT=void 0;var r=u(n(5864)),a=u(n(816)),o=u(n(309)),i=u(n(237)),l=u(n(6355)),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t){return(!i.default.isChannelMuted(e,t)||o.default.getMentionCount(t)>0)&&o.default.hasUnread(t)},c={binds:["alt+shift+down"],global:!0,action:function(){var e=a.default.getGuildId()||s.ME;return(0,l.default)(1,d,function(t){return t===e||!i.default.isMuted(t)}),!1},keyup:function(){return r.default.flushSelection(),!1}};t.UNREAD_NEXT=c;var f={binds:["alt+shift+up"],global:!0,action:function(){var e=a.default.getGuildId()||s.ME;return(0,l.default)(-1,d,function(t){return t===e||!i.default.isMuted(t)}),!1},keyup:function(){return r.default.flushSelection(),!1}};t.UNREAD_PREV=f;var p=function(e,t){return o.default.getMentionCount(t)>0},h={binds:["mod+shift+alt+down"],global:!0,action:function(){return(0,l.default)(1,p),!1},keyup:function(){return r.default.flushSelection(),!1}};t.MENTION_NEXT=h;var v={binds:["mod+shift+alt+up"],global:!0,action:function(){return(0,l.default)(-1,p),!1},keyup:function(){return r.default.flushSelection(),!1}};t.MENTION_PREV=v;var m={UNREAD_NEXT:c,UNREAD_PREV:f,MENTION_NEXT:h,MENTION_PREV:v};t.default=m},6100:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=f(n(2)),a=c(n(6710)),o=c(n(73)),i=c(n(89)),l=f(n(5871)),s=c(n(8)),u=c(n(5935)),d=c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t=["openFile"];e.multiple&&t.push("multiSelections");var n=e.filters;i.default.fileManager.openFiles({properties:t,filters:n},e.maxSize,l.makeFile).then(function(t){null!=t&&e.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:t}})},function(t){if("ETOOLARGE"!==t.code)throw t;o.default.push(u.default,{title:d.default.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:d.default.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:l.sizeString(e.maxSize)})})})}var m=function(e){var t,n;function o(t){var n;return h(n=e.call(this,t)||this).setRef=n.setRef.bind(h(n)),n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=o.prototype;return i.activateUploadDialogue=function(){if(this._ref)return this._ref.activateUploadDialogue()},i.setRef=function(e){this._ref=e},i.render=function(){return r.createElement(a.default,p({ref:this.setRef,handleNativeClick:v,embedded:s.default.isDesktop()},this.props))},o}(r.Component);m.displayName="FileInput";var y=m;t.default=y},6102:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(9)),a=i(n(1)),o=n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l={setDiversityColor:function(e){a.default.dispatch({type:o.ActionTypes.EMOJI_DIVERSITY_COLOR_CHANGE,color:e})},fetchEmoji:function(e){a.default.maybeDispatch({type:o.ActionTypes.EMOJI_FETCH,guildId:e}),r.default.get({url:o.Endpoints.GUILD_EMOJIS(e)}).then(function(t){return a.default.dispatch({type:o.ActionTypes.EMOJI_FETCH_SUCCESS,guildId:e,emojis:t.body})},function(){return a.default.dispatch({type:o.ActionTypes.EMOJI_FETCH_FAILURE,guildId:e})})},uploadEmoji:function(e,t,n){return a.default.dispatch({type:o.ActionTypes.EMOJI_UPLOAD_START,guildId:e}),r.default.post({url:o.Endpoints.GUILD_EMOJIS(e),body:{image:t,name:n}}).then(function(){return a.default.dispatch({type:o.ActionTypes.EMOJI_UPLOAD_STOP,guildId:e})},function(t){return a.default.dispatch({type:o.ActionTypes.EMOJI_UPLOAD_STOP,guildId:e}),Promise.reject(t)})},deleteEmoji:function(e,t){a.default.dispatch({type:o.ActionTypes.EMOJI_DELETE,guildId:e,emojiId:t}),r.default.delete({url:o.Endpoints.GUILD_EMOJI(e,t)})},updateEmoji:function(e,t,n){r.default.patch({url:o.Endpoints.GUILD_EMOJI(e,t),body:{name:n}})}};t.default=l},6103:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.AttachmentUpload=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=p(n(17)),o=p(n(6101)),i=n(5871),l=p(n(305)),s=p(n(231)),u=p(n(302)),d=p(n(6023)),c=p(n(10)),f=p(n(5303));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=function(e){var t=e.filename,r=(0,i.classifyFileName)(t),a=n(6400)("./icon-file-small-"+r+".svg");return h("img",{className:f.default.icon,src:a,alt:c.default.Messages.IMG_ALT_ATTACHMENT_FILE_TYPE.format({fileType:r}),title:r})};v.displayName="AttachmentIcon";var m=function(e){var t=e.className,n=e.filename,r=e.size,i=e.progress,l=e.onCancelUpload,p=e.onClick,m=e.onContextMenu,y=100===i,_=!y&&r>0;return h("div",{className:(0,a.default)(f.default.attachment,t)},void 0,h(v,{filename:n}),h("div",{className:f.default.attachmentInner},void 0,h("div",{className:f.default.filenameWrapper},void 0,h(s.default,{className:f.default.filename,onClick:p,onContextMenu:m},void 0,n),_?h("div",{className:f.default.size},void 0,"â€” "+o.default.filesize(r)):null),h("div",{className:f.default.progressContainer},void 0,y?c.default.Messages.ATTACHMENT_PROCESSING:h(d.default,{className:f.default.progress,percent:i}))),y?null:h(s.default,{onClick:l},void 0,h(u.default,{name:u.default.Names.CLOSE,className:f.default.cancelButton,width:24,height:24})))};t.AttachmentUpload=m,m.displayName="AttachmentUpload";var y=function(e){var t=e.className,n=e.url,r=e.filename,i=e.size,s=e.onClick,d=e.onContextMenu;return h("div",{className:(0,a.default)(f.default.attachment,t)},void 0,h(v,{filename:r}),h("div",{className:f.default.attachmentInner},void 0,h("div",{className:f.default.filenameLinkWrapper},void 0,h(l.default,{className:f.default.fileNameLink,href:n,onClick:s,onContextMenu:d},void 0,r)),h("div",{className:f.default.metadata},void 0,o.default.filesize(i))),h(l.default,{href:n,target:"_blank",rel:"noreferrer noopener"},void 0,h(u.default,{name:u.default.Names.DOWNLOAD,className:f.default.downloadButton,width:24,height:24})))};y.displayName="Attachment";var _=y;t.default=_},6104:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=s(n(6)),i=s(n(304)),l=s(n(161));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=Object.freeze({ABOVE:0,VISIBLE:1,BELOW:2});function f(e){return{toValue:e,duration:300,easing:i.default.Easing.inOut(i.default.Easing.back())}}var p=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={prevValue:null,currValue:t.value,nextValue:null},n.prevAnimate=new i.default.Value(c.ABOVE),n.currAnimate=new i.default.Value(c.VISIBLE),o.default.bindAll(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),["animateNext"]),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=r.prototype;return s.UNSAFE_componentWillReceiveProps=function(e){var t=this.state,n=t.prevValue,r=t.currValue,a=t.nextValue;null==n&&r!==e.value?this.setState({prevValue:l.default.isFocused()?r:null,currValue:e.value}):null!=a&&a!==e.value&&this.setState({nextValue:e.value})},s.componentDidUpdate=function(e,t){var n=this.state,r=n.prevValue,a=n.currValue;r!==t.prevValue&&null!=r&&this.animateBetween(r,a)},s.animateBetween=function(e,t){var n,r=this.props.forcePosition;this.prevAnimate.setValue(c.VISIBLE),null!=r?r===c.ABOVE?(this.currAnimate.setValue(c.ABOVE),n=c.BELOW):r===c.BELOW&&(this.currAnimate.setValue(c.BELOW),n=c.ABOVE):e>t?(this.currAnimate.setValue(c.ABOVE),n=c.BELOW):(this.currAnimate.setValue(c.BELOW),n=c.ABOVE),i.default.parallel([i.default.timing(this.prevAnimate,f(n)),i.default.timing(this.currAnimate,f(c.VISIBLE))]).start(this.animateNext)},s.animateNext=function(){var e=this.state,t=e.currValue,n=e.nextValue;null!=n?this.setState({prevValue:l.default.isFocused()?t:null,currValue:n,nextValue:null}):this.setState({prevValue:null})},s.getAnimatedStyle=function(e){return{transform:[{translateY:e.interpolate({inputRange:[0,1,2],outputRange:["-100%","0%","100%"]})}],position:"absolute",top:0,left:0,right:0,bottom:0}},s.getMinWidth=function(e){var t=this.props,n=t.digitWidth,r=t.padStartLength;if(null!=n){var a=Math.ceil(Math.log10(e+1));return r?Math.min(a,r)*n:a*n}},s.padValue=function(e){var t=this.props.padStartLength;return null!=t?String(e).padStart(t,"0"):e},s.render=function(){var e=this.state,t=e.prevValue,n=e.currValue,r=o.default.omit(this.props,["value","digitWidth","padStartLength","forcePosition"]);if(null==t)return a.createElement("div",d({},r,{style:{minWidth:this.getMinWidth(n)}}),this.padValue(n));var l=Math.max(t,n);return a.createElement("div",d({},r,{style:{position:"relative",overflow:"hidden"}}),u("div",{style:{visibility:"hidden",minWidth:this.getMinWidth(l)}},void 0,this.padValue(l)),u(i.default.div,{style:this.getAnimatedStyle(this.prevAnimate)},void 0,this.padValue(t)),u(i.default.div,{style:this.getAnimatedStyle(this.currAnimate)},void 0,this.padValue(n)))},r}(a.PureComponent);t.default=p,p.displayName="AnimatedCounter",p.Positions=c},6105:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=y(n(17)),i=y(n(4)),l=n(114),s=y(n(112)),u=n(5924),d=y(n(5883)),c=y(n(809)),f=y(n(6170)),p=y(n(6420)),h=y(n(5940)),v=y(n(10)),m=y(n(5311));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var g=/steamstore-/i,E="steamcommunity.com";function I(e){var t=(0,l.parse)(e).hostname;return null==t?e:g.test(t)?E:t}var T=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={timestamp:"",formattedTimestamp:""},t.handleClick=function(e){var n=t.props,r=n.onClick,a=n.news,o=n.application;r&&r(e,a,o)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){var n=e.news.timestamp;return t.timestamp!==n?{timestamp:n,formattedTimestamp:(0,i.default)(n).fromNow()}:null};var a=r.prototype;return a.componentDidMount=function(){var e=this.props.onMount;null!=e&&e()},a.renderFooter=function(){var e=this.props,t=e.news,n=t.url,r=t.footer,a=e.application,o=e.onApplicationClick,i=e.onApplicationContextMenu,l=this.state.formattedTimestamp,s=null,u=null;return null!=a?(s=a.getIconURL(128),u=a.name):null!=r&&(s=r.proxy_icon_url||r.icon_url,u=r.text),_(p.default,{hostname:null!=n?I(n):n,timestamp:l,icon:s,title:u,onIconClick:null!=o?function(e){return o(e,a)}:null,onIconContextMenu:null!=i?i:null})},a.renderContent=function(){var e=this.props.titleClassName,t=this.props.news,n=t.title,r=t.description,a=t.url;if(null==n&&null==r&&null==a)return null;var i=null!=r?r.replace(/\n/g," ").trim():r;return _("div",{className:m.default.content},void 0,null!=n?_(d.default,{size:d.default.Sizes.SIZE_16,className:(0,o.default)(m.default.title,e)},void 0,n):null,null!=i&&""!==i?_(c.default,{size:c.default.Sizes.SIZE_14,className:m.default.description},void 0,i):null)},a.render=function(){var e,t=this.props,n=t.className,r=t.hiddenSpoiler,a=t.disableCardInteractive,i=t.onClick,l=t.renderAsset;return _(h.default,{padded:!1,className:(0,o.default)(n,(e={},e[m.default.interactive]=null==a&&null!=i,e[m.default.hiddenSpoiler]=r,e),m.default.card),onClick:null!=i?this.handleClick:null},void 0,l(this.props),this.renderContent(),this.renderFooter())},r}(a.Component);T.displayName="NewsCard",T.defaultProps={renderAsset:function(e){var t=e.news,n=e.application,r=e.onShare,a=e.autoPlay,o=e.shouldAnimate,i=t.thumbnail,l=t.video,d=null!=i?{url:i.url,proxyURL:i.proxy_url,width:i.width,height:i.height}:null,c=null!=l?{url:l.url,width:l.width,height:l.height}:null;return null!=d?_(f.default,{url:d.proxyURL||d.url,width:d.width,height:d.height,hideImage:null!=c,autoPlay:a,shouldAnimate:o},void 0,null!=c?_(u.EmbedVideo,{href:null,className:m.default.video,thumbnail:d,video:c,maxWidth:464,maxHeight:464*c.height/c.width,allowFullScreen:!1,playable:!0}):null,null!=r?_(s.default,{wrapperClassName:m.default.shareButton,size:s.default.Sizes.SMALL,color:m.default.buttonColor,onClick:function(e){r(e,t,n),e.stopPropagation()}},void 0,v.default.Messages.SHARE):null):null}};var S=T;t.default=S},6106:function(e,t,n){e.exports=n.p+"b09888a1a6c74c8bb9af76ee61eb70e7.svg"},6107:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=l(n(17)),o=l(n(10)),i=l(n(5316));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var u=function(e){var t=e.className;return s("div",{className:(0,a.default)(i.default.tag,t)},void 0,s("span",{className:i.default.text},void 0,o.default.Messages.APPLICATION_STORE_FIRST_ON_DISCORD))};u.displayName="FirstOnDiscordTag";var d=u;t.default=d},6108:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=l(n(17)),o=l(n(10)),i=l(n(5317));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var u=function(e){var t=e.className;return s("div",{className:(0,a.default)(i.default.tag,t)},void 0,s("span",{className:i.default.text},void 0,o.default.Messages.APPLICATION_STORE_THE_GAME_AWARDS_WINNER))};u.displayName="TheGameAwardsTag";var d=u;t.default=d},6109:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),a=n(59);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=function(e){var t,n;function i(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).timer=new a.Interval,t.state={hovered:!1},t.handlePause=function(){t.state.hovered||t.setState({hovered:!0})},t.handleResume=function(){t.setState({hovered:!1})},t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.getDerivedStateFromProps=function(e){return e.disable?{hovered:!1}:null};var l=i.prototype;return l.componentDidMount=function(){var e=this.props,t=e.pauseOnHover,n=e.disable,r=this.state.hovered&&t;n||r||this.startTimer()},l.componentWillUnmount=function(){this.stopTimer()},l.componentDidUpdate=function(e,t){var n=this.props,r=function(e,t){return!(e.disable||t.hovered&&e.pauseOnHover)},a=r(n,this.state),o=r(e,t);a&&!o||e.interval!==n.interval?this.startTimer():!a&&o&&this.stopTimer()},l.startTimer=function(){var e=this.props,t=e.interval,n=e.onInterval;e.disable||this.timer.start(t,function(){n()})},l.stopTimer=function(){this.timer.stop()},l.render=function(){var e=this.props,t=e.children,n=e.className,a=e.disable?null:{onMouseEnter:this.handlePause,onFocus:this.handlePause,onMouseLeave:this.handleResume,onBlur:this.handleResume};return r.createElement("div",o({},a,{className:n}),t)},i}(r.Component);i.displayName="IntervalWrapper",i.defaultProps={disable:!1,pauseOnHover:!1};var l=i;t.default=l},6110:function(e,t,n){"use strict";t.__esModule=!0,t.default=h,t.OperatingSystemSection=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a,o=c(n(17)),i=c(n(302)),l=c(n(426)),s=n(0),u=c(n(10)),d=c(n(5319));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=((r={})[s.OperatingSystems.WINDOWS]={iconName:i.default.Names.OS_WINDOWS,label:u.default.Messages.WINDOWS},r[s.OperatingSystems.MACOS]={iconName:i.default.Names.OS_MAC,label:u.default.Messages.MACOS},r[s.OperatingSystems.LINUX]={iconName:i.default.Names.OS_LINUX,label:u.default.Messages.LINUX},r);function h(e){var t=e.operatingSystem,n=e.className,r=p[t];if(null==r)throw new Error("Unexpected operating system: "+t);return f(l.default,{text:r.label,className:n},void 0,f(i.default,{name:r.iconName}))}h.displayName="OperatingSystemIcon";var v=function(e){var t=e.systems,n=e.className,r=e.iconClassName;return f("div",{className:(0,o.default)(d.default.OSSection,n)},void 0,t.map(function(e){return f(h,{operatingSystem:e,className:(0,o.default)(d.default.purchaseUnitOperatingSystem,r)},e)}))};t.OperatingSystemSection=v,v.displayName="OperatingSystemSection"},6111:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=p(n(11)),a=p(n(20)),o=p(n(23)),i=p(n(14)),l=n(475),s=p(n(443)),u=n(5897),d=p(n(116)),c=n(0),f=p(n(10));function p(e){return e&&e.__esModule?e:{default:e}}function h(){}var v=function(){return[f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_01,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_02,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_03,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_04,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_05,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_06,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_07,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_08,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_09,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_10,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_11,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_12,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_13,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_14,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_15,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_16,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_17,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_18,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_19,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_20,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_21,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_22,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_23,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_24,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_25,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_26,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_27,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_28,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_29,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_30,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_31,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_32,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_33,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_34,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_35,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_36,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_37,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_38]};function m(e){var t=v();return t[d.default.extractTimestamp(e)%t.length]}function y(e){return(0,l.astToString)(f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED.format({username:e,usernameOnClick:h},!1))}function _(e,t,n){var r=a.default.getChannel(t);if(null==r)return y(e);var i=o.default.getGuild(r.getGuildId());return null==i?y(e):(0,l.astToString)(f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED.format({username:e,usernameOnClick:h,guildName:i.name,newTierName:(0,u.getTierName)(n)},!1))}var g={stringify:function(e){var t=e.mentions[0]&&i.default.getUser(e.mentions[0].id),n=e.channel_id,a=s.default.getName(null,n,e.author);switch(e.type){case c.MessageTypes.RECIPIENT_ADD:if(!t)return;return(0,l.astToString)(f.default.Messages.SYSTEM_MESSAGE_RECIPIENT_ADD.format({username:a,usernameOnClick:h,otherUsername:s.default.getName(null,n,t),otherUsernameOnClick:h},!1));case c.MessageTypes.RECIPIENT_REMOVE:if(!t)return;return e.author.id===t.id?(0,l.astToString)(f.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE_SELF.format({username:a,usernameOnClick:h},!1)):(0,l.astToString)(f.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE.format({username:a,usernameOnClick:h,otherUsername:s.default.getName(null,n,t),otherUsernameOnClick:h},!1));case c.MessageTypes.CALL:var o=e.call;return o&&-1===o.participants.indexOf(r.default.getId())?(0,l.astToString)(f.default.Messages.SYSTEM_MESSAGE_CALL_STARTED.format({username:a,usernameOnClick:h},!1)):void 0;case c.MessageTypes.CHANNEL_NAME_CHANGE:return(0,l.astToString)(f.default.Messages.SYSTEM_MESSAGE_CHANNEL_NAME_CHANGE.format({username:a,usernameOnClick:h,channelName:e.content},!1));case c.MessageTypes.CHANNEL_ICON_CHANGE:return(0,l.astToString)(f.default.Messages.SYSTEM_MESSAGE_CHANNEL_ICON_CHANGE.format({username:a,usernameOnClick:h},!1));case c.MessageTypes.CHANNEL_PINNED_MESSAGE:return(0,l.astToString)(f.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE_NO_CTA.format({username:a,usernameOnClick:h},!1));case c.MessageTypes.USER_JOIN:var u=m(e.id);return(0,l.astToString)(u.format({username:a,usernameOnClick:h},!1));case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION:return y(a);case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_1:return _(a,n,c.PremiumGuildTiers.TIER_1);case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_2:return _(a,n,c.PremiumGuildTiers.TIER_2);case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_3:return _(a,n,c.PremiumGuildTiers.TIER_3);default:return e.content}},getSystemMessageUserJoin:m};t.default=g},6117:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(52))&&r.__esModule?r:{default:r},o=n(130);var i=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.createFromServer=function(e){return new r({id:e.id,heroItems:e.hero_items.map(function(e){return{skuId:e.sku_id,url:e.url,title:e.title,header:e.header,description:e.description,buttonLabel:e.button_label,thumbnail:null!=e.thumbnail?(0,o.transformStoreAssetFromServer)(e.thumbnail):null,previewVideo:null!=e.preview_video?(0,o.transformStoreAssetFromServer)(e.preview_video):null,fullVideo:null!=e.full_video?(0,o.transformStoreAssetFromServer)(e.full_video):null,paginationImage:null!=e.pagination_image?(0,o.transformStoreAssetFromServer)(e.pagination_image):null,background:null!=e.background?(0,o.transformStoreAssetFromServer)(e.background):null}}).filter(Boolean),premiumSkuIds:e.featured_premium_skus,recommendedSkuIds:null!=e.recommended_skus&&e.recommended_skus.length>0?e.recommended_skus:null,categories:null!=e.categories&&e.categories.length>0?e.categories.map(function(e){return{name:e.name,skuIds:e.skus}}):null,allSkuIds:e.all_skus})},r.prototype.initialize=function(e){this.id=e.id,this.heroItems=e.heroItems,this.premiumSkuIds=e.premiumSkuIds,this.recommendedSkuIds=e.recommendedSkuIds,this.categories=e.categories,this.allSkuIds=e.allSkuIds},r}(a.default);t.default=i},6121:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(9)),a=i(n(1)),o=n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l=o.STATUS_PAGE_ENDPOINT+"/api/v2/scheduled-maintenances",s=o.STATUS_PAGE_ENDPOINT+"/api/v2/incidents/unresolved.json",u={checkIncidents:function(){Promise.all([r.default.get(l+"/active.json"),r.default.get(s)]).then(function(e){var t=e[0],n=e[1],r=t.body.scheduled_maintenances[0],i=n.body.incidents[0];a.default.dispatch({type:o.ActionTypes.STATUS_PAGE_INCIDENT,incident:i||r})})},checkScheduledMaintenances:function(){r.default.get(l+"/upcoming.json").then(function(e){var t=e.body.scheduled_maintenances[0];a.default.dispatch({type:o.ActionTypes.STATUS_PAGE_SCHEDULED_MAINTENANCE,maintenance:t})})},ackScheduledMaintenance:function(){a.default.dispatch({type:o.ActionTypes.STATUS_PAGE_SCHEDULED_MAINTENANCE_ACK})}};t.default=u},6124:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=c(n(17)),i=c(n(231)),l=c(n(5981)),s=c(n(10)),u=c(n(5242)),d=c(n(5343));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e){e.stopPropagation(),e.preventDefault()}var h=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderQuery=function(e){var t,n=this.props,r=n.query,a=n.focusedIndex,c=n.onSelectQuery,p=n.onHighlightQuery,h=n.hideQuery;return e||h?null:f(i.default,{className:(0,o.default)(d.default.queryContainer,(t={},t[d.default.focused]=-1===a,t)),onMouseEnter:p,onClick:c},void 0,f("div",{className:d.default.queryText},void 0,s.default.Messages.SEARCH_FOR_VALUE.format({value:r})),f("div",{className:d.default.queryShortcut},void 0,f(l.default,{shortcut:"return",className:(0,o.default)(u.default.dim,u.default.keybindShortcutSearchPopout)})))},a.renderResults=function(e){var t=this.props,n=t.numResults,r=t.renderNoResults,a=t.renderInitialState,o=t.renderResult,i=t.renderCustomResults;if(e)return a();if(0===n)return r();if(null!=o)return Array.from({length:n}).map(function(e,t){return o(t)});if(null!=i)return i();throw new Error("SearchResultsPopout.renderResults: Flow should never allow this...")},a.render=function(){var e=this.props,t=e.query,n=e.width,r=""===t.trim();return f("div",{className:d.default.container,style:{width:n},onMouseDown:p},void 0,this.renderQuery(r),this.renderResults(r))},r}(a.PureComponent);h.displayName="SearchResultsPopout",h.defaultProps={renderInitialState:function(){return null},hideQuery:!1,width:320};var v=h;t.default=v},6125:function(e,t,n){"use strict";t.__esModule=!0,t.updateLocation=function(e){a.default.wait(function(){return a.default.dispatch({type:o.ActionTypes.APPLICATION_STORE_LOCATION_CHANGE,location:e})})},t.handleDirectoryUnmount=function(e,t){a.default.dispatch({type:o.ActionTypes.APPLICATION_STORE_DIRECTORY_UNMOUNT,scrollTop:e,directoryLocation:t})};var r,a=(r=n(1))&&r.__esModule?r:{default:r},o=n(0)},6126:function(e,t,n){"use strict";t.__esModule=!0,t.loadLayout=function(e){return f.apply(this,arguments)},t.loadDirectory=function(e){return p.apply(this,arguments)},t.setHideLibraryGames=function(e){a.default.dispatch({type:s.ActionTypes.APPLICATION_STORE_SET_HIDE_LIBRARY,hidden:e})},t.updateSearchTerm=function(e){a.default.wait(function(){return a.default.dispatch({type:s.ActionTypes.APPLICATION_STORE_SET_SEARCH_QUERY,query:e})})},t.saveFilters=function(e){a.default.wait(function(){return a.default.dispatch({type:s.ActionTypes.APPLICATION_STORE_SAVE_FILTERS,filters:e})})},t.clearStoreData=function(){a.default.dispatch({type:s.ActionTypes.APPLICATION_STORE_CLEAR_DATA})};var r=u(n(9)),a=u(n(1)),o=u(n(170)),i=u(n(6117)),l=n(130),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){d(o,r,a,i,l,"next",e)}function l(e){d(o,r,a,i,l,"throw",e)}i(void 0)})}}function f(){return(f=c(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dispatch({type:s.ActionTypes.APPLICATION_STORE_DIRECTORY_LAYOUT_FETCH_START,layoutId:t}),e.next=3,r.default.get(s.Endpoints.STORE_DIRECTORY_LAYOUT(t));case 3:return n=e.sent,o=i.default.createFromServer(n.body),a.default.dispatch({type:s.ActionTypes.APPLICATION_STORE_DIRECTORY_LAYOUT_FETCH_SUCCESS,directoryLayout:o}),e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function p(){return(p=c(regeneratorRuntime.mark(function e(t){var n,r,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.httpGetWithCountryCodeQuery)(s.Endpoints.STORE_DIRECTORY(t));case 3:n=e.sent,r=n.body,u=n.body.store_listings,a.default.dispatch({type:s.ActionTypes.APPLICATION_STORE_DIRECTORY_FETCH_SUCCESS,directoryLayout:i.default.createFromServer(r),storeListings:u}),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),a.default.dispatch({type:s.ActionTypes.APPLICATION_STORE_DIRECTORY_FETCH_FAILURE,layoutId:t}),new o.default(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}},6127:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=I(n(2)),o=E(n(17)),i=E(n(3)),l=I(n(303)),s=E(n(88)),u=E(n(161)),d=E(n(189)),c=E(n(158)),f=E(n(45)),p=n(313),h=E(n(6022)),v=E(n(6128)),m=n(0),y=E(n(10)),_=E(n(5427)),g=E(n(5428));function E(e){return e&&e.__esModule?e:{default:e}}function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function T(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var O=(0,p.cssValueToNumber)(_.default.mediaQueryMobileHeader),A=function(e){var t=d.default.get(e);if(null==t)throw new Error("Should not be rendering/comparing without SKU");return t},N=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).analyticsPropsForTile=function(e){var n=t.props,r=n.analyticsSort,a=n.viewConfig;return{listIndex:e+n.analyticsIndexOffset,listSort:null!=r?r:null,listSearched:null!=a&&Boolean(a.titleQuery)}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getFilteredSkuIds=function(e,t){if(null==e)return t;var n=e.titleQuery,r=e.hideApplicationsInUserLibrary,a=e.genre,o=e.premiumOnly,i=t;return null!=a&&a!==m.StoreApplicationGenresFilter.ALL&&(i=i.filter(function(e){var t=A(e);return null!=t.genres&&t.genres.has(a)})),null!=n&&(i=i.filter(function(e){var t=A(e);return null!=t&&t.name.toLowerCase().includes(n.toLowerCase())})),r&&(i=i.filter(function(e){var t=A(e);return!s.default.hasApplication(t.applicationId,t.applicationId,!0)})),o&&(i=i.filter(function(e){return A(e).premium})),i},i.handleTileContextMenu=function(e,t){l.openContextMenu(e,function(e){return a.createElement(h.default,S({},e,{type:m.ContextMenuTypes.APPLICATION_STORE_DIRECTORY,applicationId:t}))})},i.renderEmptyState=function(){return T("div",{className:this.props.className},void 0,T("div",{className:g.default.emptyWumpus}),T("h1",{className:g.default.noMatches},void 0,y.default.Messages.APPLICATION_STORE_BROWSE_EMPTY_HEADER),T("div",{className:g.default.noMatchesDescription},void 0,y.default.Messages.APPLICATION_STORE_SEARCH_EMPTY.format({goToGuildDiscovery:function(){return f.default.transitionTo(m.Routes.GUILD_DISCOVERY)}})))},i.render=function(){var e=this,t=this.props,n=t.skuIds,r=t.className,i=t.viewConfig,l=t.maxTiles,s=t.onSKUViewed,u=t.tileDisplayType,d=t.tileClassName,f=t.wrap,p=this.getFilteredSkuIds(i,n);if(0===p.length||0===l)return this.renderEmptyState();var h=null!=l?p.slice(0,l):p;return T("div",{className:r},void 0,T(c.default,{wrap:f?c.default.Wrap.WRAP:c.default.Wrap.NO_WRAP},void 0,h.map(function(t,n){var r=e.analyticsPropsForTile(n);return a.createElement(v.default,S({key:t,skuId:t},r,{type:u,className:(0,o.default)(g.default.tile,d),onSKUViewed:s,onContextMenu:e.handleTileContextMenu}))})))},r}(a.Component);N.displayName="ApplicationDirectoryTileLayout",N.defaultProps={analyticsIndexOffset:0,tileDisplayType:m.StoreDirectoryTileTypes.BOX_ART,wrap:!0};var C=i.default.connectStores([u.default],function(){return{isSmallResolution:u.default.windowSize().width<O}})(N);t.default=C},6128:function(e,t,n){"use strict";t.__esModule=!0,t.analyticsListProperties=L,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=A(n(29)),l=n(232),s=A(n(3)),u=n(59),d=n(5938),c=n(5948),f=A(n(5851)),p=(A(n(814)),A(n(829)),A(n(35))),h=A(n(88)),v=A(n(6001)),m=A(n(189)),y=A(n(807)),_=A(n(18)),g=n(113),E=n(130),I=A(n(6814)),T=A(n(6815)),S=A(n(6816)),O=n(0);function A(e){return e&&e.__esModule?e:{default:e}}function N(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=200,M=1e3,b=Object.freeze(((r={})[O.StoreApplicationSort.REVERSE_ALPHABETICAL]="z-a",r[O.StoreApplicationSort.ALPHABETICAL]="a-z",r[O.StoreApplicationSort.NEW_RELEASES]="Newest",r[O.StoreApplicationSort.ID]="id",r));function L(e){var t=e.listIndex,n=e.listSort,r=e.listSearched;return{list_index:t,list_sort:null!=n?b[n]:null,list_searched:r}}var D=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).mouseoverTimeout=new u.Timeout,t.mouseoverAnalyticsTimeout=new u.Timeout,t.isUnmounted=!1,t.state={playing:!1,hasSeen:!1,isMouseOver:!1},t.getAnalyticsLocationForTile=function(e){return C({},e,{object:O.AnalyticsObjects.CARD,objectType:t.isPerk?O.AnalyticsObjectTypes.PERK:O.AnalyticsObjectTypes.BOX_ART})},t.handleSetTilePlaying=function(e){var n=e.skuId,r=t.props.sku;t.setState({playing:null!=r&&r.id===n})},t.handleMouseEnter=function(){var e=t.props,n=e.sku,r=e.analyticsContext,a=r.loadId,o=r.location,i=t.state,l=i.isMouseOver,s=i.playing;l||t.setState({isMouseOver:!0}),s||((null!=n||t.isPerk)&&t.mouseoverAnalyticsTimeout.start(M,function(){_.default.track(O.AnalyticEvents.STORE_DIRECTORY_CARD_INTERACTED,C({},null!=n?n.getAnalyticsData():{},L(t.props),{watch_trailer:!0,load_id:a,location:t.getAnalyticsLocationForTile(o)}))}),t.mouseoverTimeout.start(P,function(){if(!t.isUnmounted){var e=t.props.muted,r=null!=n?n.id:null;g.ComponentDispatch.dispatch(O.ComponentActions.STORE_VIDEO_PLAY,{skuId:r,muted:e}),t.setState({playing:!0})}}))},t.handleMouseLeave=function(){var e=t.state,n=e.isMouseOver,r=e.playing;if(t.mouseoverTimeout.stop(),t.mouseoverAnalyticsTimeout.stop(),!t.isUnmounted){var a=null;n&&(a={isMouseOver:!1}),r&&(a=C({},a,{playing:!1})),null!=a&&t.setState(a)}},t.handleToggleMute=function(){var e=t.props,n=e.sku,r=e.analyticsContext,a=r.loadId,o=r.location;null!=n&&_.default.track(O.AnalyticEvents.STORE_DIRECTORY_CARD_INTERACTED,C({},n.getAnalyticsData(),L(t.props),{audio_enabled:t.props.muted,load_id:a,location:t.getAnalyticsLocationForTile(o)})),t.props.muted?(null!=n&&g.ComponentDispatch.dispatch(O.ComponentActions.STORE_VIDEO_PLAY,{skuId:n.id,muted:!1}),(0,c.unmuteStoreDirectory)()):(0,c.muteStoreDirectory)()},t.handleVisibilityChange=function(e){if(!t.state.hasSeen&&e){t.setState({hasSeen:e});var n=t.props,r=n.onSKUViewed,a=n.sku;null!=r&&null!=a&&r(a)}},t.handleContextMenu=function(e){var n=t.props,r=n.onContextMenu,a=n.sku;null!=a&&null!=r&&r(e,a.applicationId)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,s,f,p=r.prototype;return p.componentWillUnmount=function(){this.isUnmounted=!0,this.mouseoverTimeout.stop(),this.mouseoverAnalyticsTimeout.stop(),g.ComponentDispatch.unsubscribe(O.ComponentActions.STORE_VIDEO_PLAY,this.handleSetTilePlaying)},p.componentDidUpdate=function(e,t){var n=this.state.playing;!t.playing&&n&&g.ComponentDispatch.subscribe(O.ComponentActions.STORE_VIDEO_PLAY,this.handleSetTilePlaying),!n&&t.playing&&g.ComponentDispatch.unsubscribe(O.ComponentActions.STORE_VIDEO_PLAY,this.handleSetTilePlaying)},p.getStoreListingLocation=function(){var e=this.props,t=e.sku,n=e.analyticsContext.location;if(null==t)throw new Error("Should not be link to ApplicationDirectoryTile without SKU");return(0,E.getStoreListingLocation)(t.id,{slug:t.slug,analyticsSource:this.getAnalyticsLocationForTile(n),analyticsProperties:L(this.props)})},p.renderTile=function(){var e=this.props,t=e.type,n=e.sku,r=e.skuId,a=e.storeListing,s=e.muted,u=e.inLibrary,d=e.showBuyInline,c=e.listIndex,f=e.tileData,p=e.className,h=e.analyticsContext,v=e.renderActions,m=this.state,y=m.hasSeen,_=m.playing,g=m.isMouseOver,E={onToggleMute:this.handleToggleMute,playing:_,muted:s,showMediaPlaceholder:!y,isMouseOver:g};if(t===O.StoreDirectoryTileTypes.PERK)return(0,i.default)(null!=f,"Unexpected missing tileData"),N("div",{className:p,onContextMenu:this.handleContextMenu},void 0,o.createElement(T.default,C({tileData:f,index:c,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,analyticsContext:h,renderActions:v},E)));if(t===O.StoreDirectoryTileTypes.PERK_FULL_MEDIA)return(0,i.default)(null!=f,"Unexpected missing tileData"),N("div",{className:p,onContextMenu:this.handleContextMenu},void 0,o.createElement(S.default,C({tileData:f,index:c,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,analyticsContext:h,renderActions:v},E)));if(null==n)throw new Error("Should not be rendering ApplicationDirectoryTile without SKU: "+(r||""));if(null==a)throw new Error("Should not be rendering ApplicationDirectoryTile without StoreListing");return N("div",{className:p,onContextMenu:this.handleContextMenu},void 0,N(l.Link,{to:this.getStoreListingLocation(),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,o.createElement(I.default,C({},E,{sku:n,storeListing:a,inLibrary:u,showBuyInline:d}))))},p.render=function(){return N(d.VisibilitySensor,{onChange:this.handleVisibilityChange,active:!this.state.hasSeen},void 0,this.renderTile())},a=r,(s=[{key:"isPerk",get:function(){var e=this.props.type;return[O.StoreDirectoryTileTypes.PERK,O.StoreDirectoryTileTypes.PERK_FULL_MEDIA].includes(e)}}])&&R(a.prototype,s),f&&R(a,f),r}(o.PureComponent);D.displayName="ApplicationDirectoryTile",D.defaultProps={showBuyInline:!1};var w=(0,f.default)(s.default.connectStores([m.default,v.default,h.default,p.default,y.default],function(e){var t=e.skuId,n=null!=t?m.default.get(t):null;return{sku:n,inLibrary:null!=n&&h.default.hasApplication(n.applicationId,n.applicationId,!0),storeListing:null!=n?y.default.getForSKU(n.id):null,muted:v.default.isDirectoryMuted}})(D));t.default=w},6129:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=f(n(17)),i=n(100),l=f(n(304)),s=f(n(5882)),u=f(n(6336)),d=f(n(231)),c=f(n(5433));function f(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v={tension:7,friction:5,overshootClamping:!0},m=function(e){var t=e.onClick,n=e.className;return h(d.default,{className:(0,o.default)(c.default.scrollerButton,n),onClick:t},void 0,h(u.default,{className:c.default.scrollerButtonArrow,direction:u.default.Directions.RIGHT}))};m.displayName="ScrollerButton";var y=Object.freeze({LEFT:0,RIGHT:1}),_=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={tileIndex:0,prevWidth:t.props.width,lastArrowDirection:y.LEFT,scrollerWidth:0,mouseOver:!1},t.scrollerRef=a.createRef(),t.animatedValue=new l.default.Value(0),t.handleMouseEnter=function(){t.setState({mouseOver:!0})},t.handleMouseLeave=function(){t.setState({mouseOver:!1})},t.prev=function(){t.setState({tileIndex:t.state.lastArrowDirection===y.LEFT?Math.max(t.state.tileIndex-1,0):t.state.tileIndex,lastArrowDirection:y.LEFT})},t.next=function(){t.setState({tileIndex:t.state.lastArrowDirection===y.RIGHT?Math.min(t.state.tileIndex+1,t.getMaxIndex()):t.state.tileIndex,lastArrowDirection:y.RIGHT})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){return t.prevWidth!==e.width?{tileIndex:0,prevWidth:e.width,lastArrowDirection:y.LEFT}:null};var s=r.prototype;return s.getMaxOffset=function(){var e=this.props.width,t=this.state.scrollerWidth;return Math.max(t-e,0)},s.getSideOffset=function(){var e=this.props,t=e.tileWidth,n=e.tileMargin,r=this.getMaxOffset(),a=t+n;return r-Math.floor(r/a)*a},s.getMaxIndex=function(){var e=this.props,t=e.tileWidth,n=e.tileMargin;return Math.floor(this.getMaxOffset()/(t+n))},s.getOffset=function(e,t){var n=this.props,r=n.tileWidth,a=n.tileMargin;return Math.min(e*(r+a)+(t===y.RIGHT?this.getSideOffset():0),this.getMaxOffset())},s.componentDidMount=function(){var e=(0,i.findDOMNode)(this.scrollerRef.current);e instanceof HTMLElement&&this.setState({scrollerWidth:e.offsetWidth})},s.componentDidUpdate=function(e,t){t.tileIndex===this.state.tileIndex&&t.lastArrowDirection===this.state.lastArrowDirection||l.default.spring(this.animatedValue,p({},v,{toValue:this.getOffset(this.state.tileIndex,this.state.lastArrowDirection)})).start()},s.render=function(){var e,t,n=this.state,r=n.tileIndex,i=n.mouseOver,s=n.lastArrowDirection,u=this.getMaxOffset(),d=u>0;return h("div",{className:c.default.container,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,h(l.default.div,{className:c.default.scroller,style:{transform:[{translateX:this.animatedValue.interpolate({inputRange:[0,1],outputRange:["0px","-1px"]})}]}},void 0,a.createElement("div",{className:c.default.scroller,ref:this.scrollerRef},this.props.children)),d?h(a.Fragment,{},void 0,h(l.default.div,{className:c.default.gradientOverlayLeft,style:{opacity:this.animatedValue.interpolate({inputRange:[0,50],outputRange:[0,1],extrapolate:"clamp"})}}),h(l.default.div,{className:c.default.gradientOverlayRight,style:{opacity:this.animatedValue.interpolate({inputRange:[u-50,u],outputRange:[1,0],extrapolate:"clamp"})}})):null,d?h(a.Fragment,{},void 0,h(m,{onClick:this.prev,className:(0,o.default)(c.default.arrowLeft,(e={},e[c.default.arrowDisabled]=0===r&&s===y.LEFT,e[c.default.arrowHidden]=!i,e))}),h(m,{onClick:this.next,className:(0,o.default)(c.default.arrowRight,(t={},t[c.default.arrowDisabled]=r===this.getMaxIndex()&&s===y.RIGHT,t[c.default.arrowHidden]=!i,t))})):null)},r}(a.Component);_.displayName="ApplicationStoreTileScroller";var g=(0,s.default)(_);t.default=g},6130:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.CarouselNext=t.CarouselPrevious=void 0;var r,a=c(n(2)),o=d(n(17)),i=d(n(6336)),l=d(n(112)),s=c(n(307)),u=d(n(5434));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var h={CENTER:u.default.alignCenter,LEFT:u.default.alignLeft},v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._paginationItemRefs=[],t.handleSetScrollerRef=function(e){t._scrollerRef=e},t.handleSelectedIndexChange=function(e){var n=t._scrollerRef;if(null!=n){var r=t._paginationItemRefs[e];null!=r&&n.scrollIntoView(r,!0,t.props.scrollToPadding)}},t.handlePageClick=function(e){(0,t.props.onSetItem)(e)},t}p(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props.selectedIndex;e.selectedIndex!==t&&this.handleSelectedIndexChange(t)},n.render=function(){var e=this,t=this.props,n=t.renderItem,r=t.items,i=t.vertical,l=t.paginationContainerClass,d=t.align,c=t.gutterStyle,f=i?s.default:s.HorizontalScroller,p=i?u.default.verticalPaginationItemContainer:u.default.horizontalPaginationItemContainer;return a.createElement(f,{track:!0,gutterStyle:c,className:(0,o.default)(p,l,d),ref:this.handleSetScrollerRef},r.map(function(t,r){return a.cloneElement(n(t,r),{onClick:function(){return e.handlePageClick(r)},key:r,ref:function(t){e._paginationItemRefs[r]=t}})}))},t}(a.PureComponent);v.displayName="CarouselPaginationStrip",v.Align=h,v.Gutter=s.default.GutterStyles,v.defaultProps={scrollToPadding:{top:0,left:0,bottom:0,right:0},align:h.CENTER};var m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handlePrevClick=function(e){e.stopPropagation(),e.preventDefault();var n=t.props.onClick;n&&n(e)},t}return p(t,e),t.prototype.render=function(){var e=this.props.className;return f(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:(0,o.default)(u.default.prevButtonContainer,e),onClick:this.handlePrevClick},void 0,f(i.default,{className:u.default.arrow,direction:i.default.Directions.LEFT}))},t}(a.PureComponent);t.CarouselPrevious=m,m.displayName="CarouselPrevious";var y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleNextClick=function(e){e.stopPropagation(),e.preventDefault();var n=t.props.onClick;n&&n(e)},t}return p(t,e),t.prototype.render=function(){var e=this.props.className;return f(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:(0,o.default)(u.default.nextButtonContainer,e),onClick:this.handleNextClick},void 0,f(i.default,{className:u.default.arrow,direction:i.default.Directions.RIGHT}))},t}(a.PureComponent);t.CarouselNext=y,y.displayName="CarouselNext";var _=v;t.default=_},6157:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(1));n(0);function o(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=null;var s=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getCurrentPath=function(){return null!=l?l.pathname:null},a.getCurrentRoute=function(){return t=null!=(e=l)&&null!=e.search?e.search:"",null!=e?""+e.pathname+t:null;var e,t},a.reset=function(){throw new Error("Should not reset the store this way outside of a test environment")},r}(r.default.Store))(a.default,{APPLICATION_STORE_LOCATION_CHANGE:function(e){var t=e.location;l=i({},t)},APPLICATION_STORE_RESET_NAVIGATION:function(e){l=null}});t.default=s},6158:function(e,t,n){"use strict";t.__esModule=!0,t.QUICKSWITCHER_SHOW=void 0;var r=n(5933),a=i(n(11)),o=i(n(821));function i(e){return e&&e.__esModule?e:{default:e}}var l={binds:["mod+k","mod+t"],global:!0,action:function(){return!a.default.isGuest()&&(o.default.hasLayers()||(0,r.show)(),!1)}};t.QUICKSWITCHER_SHOW=l},6159:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(3)),a=c(n(24)),o=c(n(1)),i=c(n(900)),l=c(n(20)),s=c(n(23)),u=c(n(50)),d=c(n(160));n(0);function c(e){return e&&e.__esModule?e:{default:e}}var f=new i.default(function(){return 100},function(e){var t=0;return 0===e?t=100:e>=1&&e<2?t=70:e>=2&&e<4?t=50:e>=4&&e<7?t=30:e>=7&&(t=10),t},function(e){return s.default.getGuild(e)||l.default.getChannel(e)||l.default.getChannel(l.default.getDMFromUserId(e))},function(e){__OVERLAY__||a.default.set("selectedChannelGuildFrecency",e)},100,10),p=null,h=null;function v(e){var t=e.guildId,n=e.channelId;return n!==p&&(p=n,f.track(n)),null!=t&&t!==h&&(h=t,f.track(t)),!1}var m=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initialize=function(){this.waitFor(d.default,u.default);var e=a.default.get("selectedChannelGuildFrecency");e&&f.overwriteHistory(e)},o.getFrequently=function(){return f.frequently},o.getScore=function(e){return f.getFrecency(e)||0},o.getScoreForDM=function(e){return this.getScore(l.default.getDMFromUserId(e))},o.getMaxScore=function(){return 1e3},o.getBonusScore=function(){return 100},r}(r.default.Store))(o.default,{CONNECTION_OPEN:function(e){return f.markDirty(),!1},VOICE_CHANNEL_SELECT:v,CHANNEL_SELECT:v});t.default=m},6160:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(1))&&r.__esModule?r:{default:r},o=n(0);var i={toggleSection:function(e){a.default.dispatch({type:o.ActionTypes.CHANNEL_TOGGLE_SECTION,section:e})}};t.default=i},6161:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ZOOM_RESET=t.ZOOM_OUT=t.ZOOM_IN=void 0;var r,a=n(871),o=(r=n(831))&&r.__esModule?r:{default:r},i=n(0);function l(e){return i.Accessibility.ZOOM_SCALES[Math.max(0,Math.min(i.Accessibility.ZOOM_SCALES.indexOf(o.default.zoom)+e,i.Accessibility.ZOOM_SCALES.length-1))]}var s={binds:["mod+plus"],global:!0,action:function(){return(0,a.zoomTo)(l(1)),!1}};t.ZOOM_IN=s;var u={binds:["mod+minus"],global:!0,action:function(){return(0,a.zoomTo)(l(-1)),!1}};t.ZOOM_OUT=u;var d={binds:["mod+0"],global:!0,action:function(){return(0,a.zoomTo)(i.Accessibility.ZOOM_DEFAULT),!1}};t.ZOOM_RESET=d;var c={ZOOM_IN:s,ZOOM_OUT:u,ZOOM_RESET:d};t.default=c},6166:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=h(n(6)),a=h(n(3)),o=h(n(1)),i=h(n(317)),l=h(n(20)),s=h(n(74)),u=h(n(23)),d=h(n(236)),c=h(n(87)),f=h(n(42)),p=h(n(14));n(0);function h(e){return e&&e.__esModule?e:{default:e}}var v={};function m(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=l.default.getChannel(e),o=null!=a?a.getGuildId():null;return{id:e,messages:t.map(function(e){return i.default.create(e)}),guildId:o,loaded:n,loading:r}}function y(){r.default.forEach(v,function(e){r.default.forEach(e.messages,function(e){e.timestamp.locale(f.default.locale)})})}function _(){r.default.forEach(v,function(e){e.messages=e.messages.map(function(e){return e.set("blocked",c.default.isBlocked(e.author.id))})})}var g=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(l.default,u.default,s.default,d.default,p.default,f.default)},a.getPinnedMessages=function(e){return v[e]&&v[e]||null},a.loaded=function(e){return null!=v[e]&&v[e].loaded},r}(a.default.Store))(o.default,{CONNECTION_OPEN:function(e){v={}},GUILD_DELETE:function(e){var t=e.guild;v=(0,r.default)(v).filter(function(e){return e.guildId!==t.id}).keyBy("id").value()},MESSAGE_UPDATE:function(e){var t=e.message.id,n=e.message.channel_id,a=v[n];if(null!=e.message.author)if(e.message.pinned){if(!a)return a=m(n,[e.message],!1),void(v[n]=a);a.messages=a.messages.slice();var o=r.default.findIndex(a.messages,function(e){return e.id===t});-1===o?a.messages.unshift(i.default.create(e.message)):a.messages[o]=a.messages[o].updateMessage(e.message),v[n]=a}else{if(!a)return;var l=r.default.findIndex(a.messages,function(e){return e.id===t});if(-1===l)return;a.messages=a.messages.slice(),a.messages.splice(l,1),v[n]=a}else if(a){var s=r.default.findIndex(a.messages,function(e){return e.id===t});if(s>=0){var u=a.messages[s],d=u.updateMessage(e.message);if(d!==u){var c=a.messages.slice();c[s]=d,v[n].messages=c}}}},MESSAGE_DELETE:function(e){var t=e.id,n=e.channelId,a=v[n];a&&0!==r.default.remove(a.messages,function(e){return e.id===t}).length&&(a.messages=a.messages.slice(),v[n]=a)},MESSAGE_DELETE_BULK:function(e){var t=e.ids,n=e.channelId,r=v[n];r&&(r.messages=r.messages.filter(function(e){return-1===t.indexOf(e.id)}))},LOAD_PINNED_MESSAGES:function(e){var t=e.channelId;v[t]=m(t,[],!1,!0)},LOAD_PINNED_MESSAGES_SUCCESS:function(e){var t=e.channelId,n=e.messages;v[t]=m(t,n,!0)},LOAD_PINNED_MESSAGES_FAILURE:function(e){var t=e.channelId;delete v[t]},USER_SETTINGS_UPDATE:function(e){return y()},I18N_LOAD_SUCCESS:function(e){return y()},CHANNEL_DELETE:function(e){var t=e.channel;delete v[t.id]},RELATIONSHIP_ADD:function(e){return _()},RELATIONSHIP_REMOVE:function(e){return _()}});t.default=g},6167:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(3)),a=l(n(1)),o=l(n(314)),i=l(n(236));n(0);function l(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u,d=Object.freeze({editingChannelId:null,editingMessageId:null,editingContent:null});function c(){if(null==u)return!1;u=null}var f=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getState=function(){return u||d},a.isEditing=function(e,t){var n=this.getState();return e===n.editingChannelId&&t===n.editingMessageId},a.getEditingContent=function(){return this.getState().editingContent},a.getEditingMessageId=function(){return this.getState().editingMessageId},a.getEditingMessage=function(){var e=this.getState();return null!=e.editingChannelId&&null!=e.editingMessageId?i.default.getMessage(e.editingChannelId,e.editingMessageId):null},r}(r.default.Store))(a.default,{MESSAGE_START_EDIT:function(e){var t=e.channelId,n=e.messageId,r=e.content;u={editingChannelId:t,editingMessageId:n,editingContent:o.default.unparse(r,t)}},MESSAGE_UPDATE_EDIT:function(e){var t=e.content;if(null==u)return!1;u=s({},u,{editingContent:t})},MESSAGE_END_EDIT:function(e){return c()},CHANNEL_SELECT:function(e){return c()}});t.default=f},6168:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=M(n(2)),o=P(n(17)),i=P(n(3)),l=P(n(5990)),s=P(n(73)),u=P(n(802)),d=P(n(5952)),c=P(n(6e3)),f=P(n(20)),p=P(n(5969)),h=P(n(812)),v=P(n(5989)),m=M(n(6378)),y=P(n(112)),_=P(n(5863)),g=P(n(128)),E=P(n(426)),I=n(5930),T=n(113),S=P(n(314)),O=P(n(5923)),A=n(0),N=P(n(10)),C=P(n(5235)),R=P(n(5248));function P(e){return e&&e.__esModule?e:{default:e}}function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function b(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function L(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,l,"next",e)}function l(e){b(o,r,a,i,l,"throw",e)}i(void 0)})}}function D(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function w(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var k="popout-channel-text-area-shouting",U=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={imageDataURI:null,imageLoaded:!1},t.tryAbort=function(){null!=t.reader&&1===t.reader.readyState&&t.reader.abort()},t.loadImagePreview=function(e){t.tryAbort(),t.reader=new FileReader,t.reader.onload=function(e){return t.setState({imageDataURI:e.target.result,imageLoaded:!0})},t.reader.readAsDataURL(e)},t}w(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.file;null!=e&&this.loadImagePreview(e)},n.componentDidUpdate=function(){var e=this.props.file;null!=e&&this.loadImagePreview(e)},n.componentWillUnmount=function(){this.tryAbort()},n.render=function(){var e,t=this.state,n=t.imageLoaded,r=t.imageDataURI;if(null!=n&&null!=r){var a={backgroundImage:"url('"+r+"')"};return D("div",{className:(0,o.default)(R.default.icon,R.default.image),style:a})}return D("div",{className:(0,o.default)(R.default.icon,(e={},e[R.default.image]=!0,e))})},t}(a.PureComponent);U.displayName="ImageFilePreview";var G=function(e){function t(){return e.apply(this,arguments)||this}return w(t,e),t.prototype.render=function(){return this.props.upload.isImage?D(U,{file:this.props.upload.file}):D("div",{className:(0,o.default)(R.default.icon,(e={},e[R.default[this.props.upload.classification]]=!0,e))});var e},t}(a.Component);G.displayName="UploadIcon";var F=function(e){function t(t){var n;(n=e.call(this,t)||this)._transitionTimeout=null,n._channelTextAreaRef=a.createRef(),n.cancelAll=function(){c.default.clearAll(),n.props.onClose()},n.cancel=function(){n.showNextFile()},n.confirm=L(regeneratorRuntime.mark(function e(){var t,r,a,o,i,l,s,d,c,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.cooldown,a=t.upload,o=t.channel,i=n.state,l=i.transitioning,s=i.textValue,d=i.hasSpoiler,!l&&null!=a){e.next=4;break}return e.abrupt("return",{shouldClear:!1,shouldRefocus:!1});case 4:if(!(r>0)){e.next=6;break}return e.abrupt("return",{shouldClear:!1,shouldRefocus:!0});case 6:if(!h.default.isOpen(k)){e.next=10;break}return u.default.close(k),n.submitUpload(!0,s,a,o,d),e.abrupt("return",{shouldClear:!0,shouldRefocus:!0});case 10:return c=null!=n._channelTextAreaRef.current?n._channelTextAreaRef.current:null,e.next=13,(0,I.applyChatRestrictions)(c,s,o);case 13:return f=e.sent,p=f.valid,n.submitUpload(p,s,a,o,d),e.abrupt("return",{shouldClear:!1,shouldRefocus:!1});case 17:case"end":return e.stop()}},e)})),n.handleTextChange=function(e,t){n.setState({textValue:t})},n.handleSubmit=function(){return n.confirm()};var r=null!=t.upload?t.upload.channelId:null;return n.state={transitioning:!1,textValue:null!=r?p.default.getDraft(r):"",textFocused:!0,hasSpoiler:!1},n}w(t,e);var n=t.prototype;return n.componentDidMount=function(){T.ComponentDispatch.subscribe(A.ComponentActions.MODAL_SUBMIT,this.confirm),T.ComponentDispatch.subscribe(A.ComponentActions.MODAL_CLOSE,this.cancel)},n.componentWillUnmount=function(){T.ComponentDispatch.unsubscribe(A.ComponentActions.MODAL_SUBMIT,this.confirm),T.ComponentDispatch.unsubscribe(A.ComponentActions.MODAL_CLOSE,this.cancel),clearTimeout(this._transitionTimeout)},n.shouldComponentUpdate=function(e){return null!=e.upload},n.submitUpload=function(e,t,n,r,a){if(e&&null!=r){var o=S.default.parse(r,t);l.default.saveDraft(r.id,""),this.setState({textFocused:!0,textValue:""}),setTimeout(function(){return d.default.upload(r.id,n.file,o,a)},125),this.showNextFile()}},n.showNextFile=function(){var e=this;this.state.transitioning||(this.props.hasAdditionalUploads?(this.setState({transitioning:!0}),setTimeout(function(){return c.default.popFirstFile()},100),this._transitionTimeout=setTimeout(function(){return e.setState({transitioning:!1})},200)):(c.default.popFirstFile(),this.props.onClose()))},n.renderFooter=function(){var e=this,t=this.props,n=t.cooldown,r=t.hasAdditionalUploads,i=this.state.hasSpoiler,l=n>0,s=null,u=l?N.default.Messages.CHANNEL_SLOWMODE_COOLDOWN.format({seconds:Math.round((n+1e3)/1e3)}):null;r&&(s=D(y.default,{type:"button",look:y.default.Looks.LINK,color:y.default.Colors.WHITE,onClick:this.cancelAll,className:R.default.cancelAllButton},void 0,D("span",{},void 0,N.default.Messages.UPLOAD_AREA_CANCEL_ALL)));var d=D(a.Fragment,{},void 0,D(_.default,{value:i,onChange:function(t,n){return e.setState({hasSpoiler:n})},checkboxColor:A.Colors.WHITE},void 0,D(g.default,{color:g.default.Colors.WHITE},void 0,N.default.Messages.SPOILER_MARK_SELECTED)),D("div",{className:R.default.hasSpoilers},void 0,s,D(y.default,{type:"button",look:y.default.Looks.LINK,color:y.default.Colors.WHITE,onClick:this.cancel},void 0,D("span",{},void 0,N.default.Messages.CANCEL)),D(E.default,{text:u},void 0,D("div",{},void 0,D(y.default,{disabled:l,color:y.default.Colors.BRAND,look:y.default.Looks.INVERTED,type:"submit",onClick:this.confirm},void 0,D("span",{},void 0,N.default.Messages.UPLOAD))))));return D("div",{className:(0,o.default)(R.default.footer,R.default.hasSpoilers)},void 0,d)},n.render=function(){var e,t=this.props,n=t.upload,r=t.channel,i=this.state,l=i.transitioning,s=i.textValue,u=i.textFocused;return null==n||null==r?null:D("div",{className:(0,o.default)(R.default.uploadModal,"theme-brand",(e={},e[R.default.transitioning]=l,e))},void 0,D("div",{className:R.default.inner},void 0,D("div",{className:R.default.file},void 0,D(G,{upload:n}),D("div",{className:R.default.description},void 0,D("div",{className:R.default.filename},void 0,n.filename))),D("div",{className:R.default.comment},void 0,D("div",{className:R.default.label},void 0,D("span",{},void 0,N.default.Messages.UPLOAD_AREA_LEAVE_A_COMMENT),D("span",{className:R.default.optional},void 0,"(",N.default.Messages.UPLOAD_AREA_OPTIONAL,")")),a.createElement(O.default,{ref:this._channelTextAreaRef,className:(0,o.default)(R.default.channelTextAreaUpload,C.default.marginTop8),value:s,focused:u,channel:r,onChange:this.handleTextChange,onSubmit:this.handleSubmit,type:A.TextareaTypes.FORM}))),this.renderFooter())},t}(a.Component);F.displayName="Upload";var j=i.default.connectStores([m.default,f.default,v.default],function(){var e=m.default.getFirstUpload(),t=null!=e?e.channelId:null,n=null!=t?v.default.getSlowmodeCooldownGuess(t):0;return{upload:e,file:null!=e?e.file:null,hasAdditionalUploads:m.default.hasAdditionalUploads(),channel:null!=t?f.default.getChannel(t):null,cooldown:n}})(F),H=function(e){function t(){return e.apply(this,arguments)||this}w(t,e);var n=t.prototype;return n.close=function(){s.default.pop()},n.render=function(){return D(j,{onClose:this.close})},t}(a.Component);t.default=H,H.displayName="UploadModal",H.modalConfig={closable:!1}},6169:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=s(n(17)),i=s(n(304)),l=s(n(5301));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f={friction:14,tension:200},p={DURATION:"DURATION",VOLUME:"VOLUME"};function h(e){var t=0|e,n=t%60;return(t-n)/60+":"+String(n).padStart(2,"0")}var v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={animatedProgress:new i.default.Value(0),dragging:!1,offsetLeft:0,offsetWidth:0,previewWidth:new i.default.Value(0)},t.handlePreviewChange=function(){var e=c(t),n=e.bubble,r=e.state,a=r.dragging,o=r.previewWidth,i=e.props.value;a||null==n||(n.innerHTML=h(o._value*i))},t.handleAnimatedChange=function(){var e=c(t),n=e.bubble,r=e.state,a=r.dragging,o=r.animatedProgress,i=e.props.value;a&&null!=n&&(n.innerHTML=h(o._value*i))},t.handleMouseMove=function(e){var n=t.state,r=n.dragging,a=n.previewWidth;if(!r){var o=e.clientX,i=e.clientY;a.setValue(t.calculatePercentage(o,i))}},t.handleDragMove=function(e){var n=t.props,r=n.onDrag,a=n.type,o=e.clientX,i=e.clientY;r(t.calculatePercentage(o,i),a)},t.handleDragStart=function(e){var n=t.props,r=n.onDragStart,a=n.onDrag,o=n.type,i=n.currentWindow,l=e.clientX,s=e.clientY;if(e.preventDefault(),null!=t.wrapper){var u=t.wrapper.getBoundingClientRect(),d=u.left,c=u.width;t.setState({dragging:!0,offsetLeft:d,offsetWidth:c},function(){r(o),a(t.calculatePercentage(l,s),o),i.addEventListener("mouseup",t.handleDragEnd,!1),i.addEventListener("mousemove",t.handleDragMove,!1)})}},t.handleDragEnd=function(){var e=t.props,n=e.onDragEnd,r=e.currentWindow;n(),r.removeEventListener("mouseup",t.handleDragEnd,!1),r.removeEventListener("mousemove",t.handleDragMove,!1),t.setState({dragging:!1})},t.setBubbleRef=function(e){null==e?t.bubble=null:null!=e.componentRef?t.bubble=e.componentRef:null!=e.refs&&(t.bubble=e.refs.node)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=r.prototype;return s.componentDidMount=function(){var e=this.state,t=e.previewWidth,n=e.animatedProgress;t.addListener(this.handlePreviewChange),n.addListener(this.handleAnimatedChange)},s.componentWillUnmount=function(){var e=this.state,t=e.previewWidth,n=e.animatedProgress;t.removeListener(this.handlePreviewChange),n.removeListener(this.handleAnimatedChange),window.removeEventListener("mouseup",this.handleDragEnd,!1),window.removeEventListener("mousemove",this.handleDragMove,!1)},s.componentDidUpdate=function(e,t){var n=this.state,r=n.dragging,a=n.previewWidth,o=n.animatedProgress;!r&&t.dragging&&a.setValue(o._value)},s.setGrabber=function(e,t){void 0===t&&(t=!0);var n=this.state.animatedProgress;t?i.default.spring(n,d({toValue:e},f)).start():n.setValue(e)},s.calculatePercentage=function(e,t){var n=this.wrapper,r=this.props.type;if(null==n)return 0;var a=n.getBoundingClientRect(),o=a.left,i=a.width,l=a.bottom,s=a.height,u=r===p.VOLUME?(l-t)/s:(e-o)/i;return Math.min(1,Math.max(0,u))},s.render=function(){var e=this,t=this.props,n=t.buffers,r=t.type,s=t.className,d=t.sliderClassName,c=this.state,f=c.dragging,h=c.previewWidth,v=c.animatedProgress,m=f?v:h;return u("div",{className:(0,o.default)(s,r===p.VOLUME?l.default.vertical:l.default.horizontal)},void 0,a.createElement("div",{className:(0,o.default)(d,f?l.default.mediaBarInteractionDragging:l.default.mediaBarInteraction,r===p.VOLUME?l.default.mediaBarInteractionVolume:null),onMouseDown:this.handleDragStart,onMouseMove:this.handleMouseMove,ref:function(t){return e.wrapper=t}},u("div",{className:(0,o.default)(l.default.mediaBarWrapper,r===p.VOLUME?l.default.mediaBarWrapperVolume:null)},void 0,null!=n?n.map(function(e,t){var n=e[0],r=e[1];return u("div",{className:l.default.buffer,style:{width:100*r+"%",left:100*n+"%"}},t)}):null,r===p.DURATION?u(i.default.div,{className:l.default.mediaBarPreview,style:{width:h.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}}):null,u(i.default.div,{className:l.default.mediaBarProgress,style:{width:v.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}},void 0,u("span",{className:l.default.mediaBarGrabber})),r===p.DURATION?a.createElement(i.default.div,{ref:this.setBubbleRef,className:l.default.bubble,style:{left:m.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}}):null)))},r}(a.Component);v.displayName="MediaBar",v.Types=p,v.defaultProps={currentWindow:window};var m=v;t.default=m},6170:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=s(n(17)),i=s(n(5865)),l=s(n(5260));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).videoRef=a.createRef(),t.state={videoLoaded:!1},t.handleVideoLoaded=function(){t.setState({videoLoaded:!0})},t.handleVideoError=function(){t.setState({videoLoaded:!1})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=r.prototype;return s.componentDidMount=function(){this.setPlayState(this.props.play)},s.componentDidUpdate=function(e){var t=this.props.play;t!==e.play&&this.setPlayState(t)},s.setPlayState=function(e){var t=this.videoRef.current;null!=t&&(e?t.play():t.pause())},s.render=function(){var e,t=this.props,n=t.url,r=t.width,s=t.height,d=t.children,c=t.className,f=t.videoUrl,p=t.play,h=t.hideImage,v=t.autoPlay,m=t.shouldAnimate,y=this.state.videoLoaded;return u("div",{className:(0,o.default)(l.default.wrapper,c),style:{paddingBottom:s/r*100+"%"}},void 0,u(i.default,{src:n,width:r,height:s,maxWidth:464,maxHeight:464*s/r,className:(0,o.default)(l.default.image,h?l.default.hideImage:""),imageClassName:(0,o.default)(l.default.image,h?l.default.hideImage:""),alt:"",autoPlay:v,shouldAnimate:m}),null!=f?a.createElement("video",{muted:!0,preload:"none",loop:!0,src:f,ref:this.videoRef,className:(0,o.default)((e={},e[l.default.video]=!0,e[l.default.showVideo]=y&&p,e)),onLoadedMetadata:this.handleVideoLoaded,onError:this.handleVideoError}):null,null!=d?u("div",{className:l.default.content},void 0,d):null)},r}(a.Component);d.displayName="CardMedia",d.defaultProps={play:!1,hideImage:!1};var c=d;t.default=c},6177:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=p(n(3)),a=n(37),o=p(n(1)),i=p(n(823)),l=p(n(43)),s=p(n(50)),u=p(n(160)),d=p(n(42)),c=p(n(132)),f=n(0);function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=f.ThemeTypes.DARK,m=null;function y(){v=d.default.theme}function _(){m=s.default.getChannelId(u.default.getGuildId())}function g(e){return e.channelId===m}var E=new(function(e){var t,n,r,o,p;function g(){return e.apply(this,arguments)||this}return n=e,(t=g).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,g.prototype.initialize=function(){this.waitFor(d.default,i.default,u.default,s.default,c.default),this.syncWith([d.default],y),this.syncWith([u.default,s.default,i.default],_)},r=g,(o=[{key:"theme",get:function(){if(null!=m){var e=u.default.getGuildId(),t=c.default.isInChannel(e,m)&&(null!=e||c.default.hasVideo(e,m))&&l.default.supports(a.Features.VIDEO)?i.default.getLayout(m):null;return t===f.ChannelLayouts.NORMAL||t===f.ChannelLayouts.NO_CHAT?f.ThemeTypes.DARK:v}return v}}])&&h(r.prototype,o),p&&h(r,p),g}(r.default.Store))(o.default,{VOICE_STATE_UPDATE:g,CHANNEL_RTC_UPDATE_LAYOUT:g});t.default=E},6182:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EmptyStateBottom=t.EmptyStateCenter=t.Header=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=k(n(17)),i=k(n(29)),l=k(n(6)),s=k(n(3)),u=k(n(164)),d=k(n(311)),c=k(n(162)),f=(k(n(129)),k(n(317)),k(n(20))),p=k(n(5958)),h=k(n(23)),v=k(n(236)),m=k(n(6183)),y=k(n(159)),_=k(n(50)),g=k(n(42)),E=k(n(161)),I=k(n(112)),T=k(n(231)),S=k(n(5988)),O=k(n(307)),A=k(n(427)),N=k(n(795)),C=k(n(18)),R=n(113),P=k(n(45)),M=k(n(5936)),b=n(0),L=k(n(10)),D=k(n(5253)),w=k(n(5339));function k(e){return e&&e.__esModule?e:{default:e}}function U(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function G(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var F=function(e){var t=e.title,n=e.children,r=e.className;return G("div",{className:(0,o.default)(w.default.header,D.default.header,r)},void 0,G("div",{className:(0,o.default)(w.default.title,D.default.title)},void 0,t),n)};t.Header=F,F.displayName="Header";var j=function(e){var t=e.msg,n=e.image;return G("div",{className:w.default.emptyPlaceholder},void 0,G("div",{className:w.default.image,style:{backgroundImage:"url("+n+")"}}),G("div",{className:w.default.body},void 0,t))};t.EmptyStateCenter=j,j.displayName="EmptyStateCenter";var H=function(e){var t=e.msg,n=e.image;return G("div",{className:(0,o.default)(w.default.emptyPlaceholder,w.default.bottom)},void 0,G("div",{className:w.default.body},void 0,t),G("div",{className:w.default.image,style:{backgroundImage:"url("+n+")"}}))};t.EmptyStateBottom=H,H.displayName="EmptyStateBottom";var x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClickJump=function(e){var n=t.props;(0,n.jumpTo)(n.message,e)},t.handleClickClose=function(e){var n=t.props,r=n.onCloseMessage,a=n.message;null!=r&&r(a,e)},t}U(t,e);var n=t.prototype;return n.renderJumpButton=function(){var e,t=this.props.jumping;return G(T.default,{className:w.default.jumpButton,onClick:this.handleClickJump},void 0,G("div",{className:(0,o.default)(w.default.text,{hidden:t})},void 0,L.default.Messages.JUMP),G(A.default,{type:A.default.Type.PULSING_ELLIPSIS,className:(0,o.default)(w.default.loading,(e={},e[w.default.visible]=t,e))}))},n.renderCloseButton=function(){var e=this.props,t=e.onCloseMessage,n=e.canCloseAllMessages,r=e.canManageMessages,a=e.channel;return null==t?null:n||a.isPrivate()||r?G(I.default,{look:I.default.Looks.BLANK,size:I.default.Sizes.NONE,onClick:this.handleClickClose},void 0,G("div",{className:w.default.closeButton})):null},n.render=function(){return G("div",{className:w.default.actionButtons},void 0,this.renderJumpButton(),this.renderCloseButton())},t}(a.PureComponent);x.displayName="ControlButtons";var B=s.default.connectStores([y.default],function(e){var t=e.channel;return{canManageMessages:y.default.can(b.Permissions.MANAGE_MESSAGES,t)}})(x),V=G(A.default,{}),K=G(A.default,{}),W=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).scroller=null,t.getScroller=function(){return(0,i.default)(null!=t.scroller,"Scroller called before being mounted."),t.scroller},t.scrollPageUp=function(){t.getScroller().scrollPageUp(!0)},t.scrollPageDown=function(){t.getScroller().scrollPageDown(!0)},t.jumpTo=function(e,n){var r=e.id,a=e.blocked,o=e.author,i=e.channel_id,l=t.props,s=l.jumping,d=l.onJump,p=l.analyticsName;if(a)u.default.show({title:L.default.Messages.UNBLOCK_TO_JUMP_TITLE,body:L.default.Messages.UNBLOCK_TO_JUMP_BODY.format({name:o.username}),confirmText:L.default.Messages.OKAY});else if(!s){var h=f.default.getChannel(i);h&&(c.default.trackJump(i,r,p),P.default.transitionTo(b.Routes.CHANNEL(h.getGuildId(),i,r))),null!=d&&d(n)}},t.handleScroll=function(){var e=t.getScroller().getScrollData();e.scrollHeight===e.scrollTop+e.offsetHeight&&t.props.hasMore&&!t.props.loading&&t.props.loadMore()},t.selectChannel=function(e,n){var r=t.props.onJump;e!==_.default.getChannelId()&&d.default.transitionToInviteChannelSync(e),null!=r&&r(n)},t.setScrollerRef=function(e){t.scroller=e},t.renderControlButtons=function(e){var n=e.channel,r=e.messages[0],a=t.props,o=a.canCloseAllMessages,i=a.onCloseMessage,l=a.jumping;return G(B,{channel:n,message:r,jumping:l,canCloseAllMessages:o,jumpTo:t.jumpTo,onCloseMessage:i})},t.renderMessage=function(e,n){var r=t.props,a=r.renderEmbeds,o=r.inlineEmbedMedia,i=r.inlineAttachmentMedia,l=r.developerMode,s=[],u=n;if(t.props.showChannels&&(null==u||u.id!==e.channel_id)){if(null==(u=f.default.getChannel(e.channel_id)))return null;var d=h.default.getGuild(u.getGuildId());s.push(G("div",{className:w.default.channelSeparator},""+e.id+u.id,G(T.default,{tag:"span",className:w.default.channelName,onClick:t.selectChannel.bind(null,u.id)},void 0,u?u.toString(!0):"???"),t.props.showGuildNames&&G("span",{className:w.default.guildName},void 0,d?d.toString():"")))}if(null==u)return null;var c=u.isNSFW()?p.default.didAgree(u.getGuildId()):null;return null==e?null:(s.push(G("div",{className:w.default.messageGroupWrapper},e.id,G("div",{className:w.default.messageGroupWrapperOffsetCorrection},void 0,G(M.default,{cozyClassName:w.default.messageGroupCozy,messages:[e],channel:u,inlineAttachmentMedia:i&&null!=c?c:i,inlineEmbedMedia:o&&null!=c?c:o,renderEmbeds:a&&null!=c?c:a,renderEmbedsSmall:!0,compact:!1,developerMode:l,hasDivider:!1,popoutPosition:N.default.Positions.LEFT,groupOption:t.renderControlButtons,onClickAnywhere:function(n){return t.jumpTo(e,n)},messageOption:!1,canEdit:!1,renderMentioned:t.props.renderMentioned,disableInteractionLabel:L.default.Messages.JUMP,accessoriesClassName:w.default.accessories})))),s)},t}U(t,e);var n=t.prototype;return n.componentDidMount=function(){C.default.track(b.AnalyticEvents.OPEN_POPOUT,{type:this.props.analyticsName}),this.props.onFetch(this.props.channel),R.ComponentDispatch.subscribe(b.ComponentActions.SCROLL_PAGE_DOWN,this.scrollPageDown),R.ComponentDispatch.subscribe(b.ComponentActions.SCROLL_PAGE_UP,this.scrollPageUp)},n.componentWillUnmount=function(){R.ComponentDispatch.unsubscribe(b.ComponentActions.SCROLL_PAGE_DOWN,this.scrollPageDown),R.ComponentDispatch.unsubscribe(b.ComponentActions.SCROLL_PAGE_UP,this.scrollPageUp)},n.render=function(){var e=this,t=[],n=!0,r=this.props,i=r.messages,s=r.size,u=r.loading,d=r.channel,c=r.className,f=r.isNoticeOpen;if(null==i)t=[G("div",{className:(0,o.default)(w.default.emptyPlaceholder,w.default.loadingPlaceholder)},void 0,V)];else if(0===i.length)t.push(this.props.renderEmptyState(g.default.theme));else{n=!1,t=[];var p=this.props.showChannels?null:d;l.default.each(i,function(n){t.push(e.renderMessage(n,p))})}var h=null;i&&i.length>0&&this.props.loadMore&&(h=u?G("div",{className:w.default.loadingMore},"loading-more-after",K):this.props.hasMore?G("div",{className:w.default.hasMore},"has-more-after",G("button",{type:"button",onClick:this.props.loadMore,className:w.default.hasMoreButton},void 0,L.default.Messages.LOAD_MORE_MESSAGES)):G("div",{className:w.default.scrollingFooterWrap},void 0,this.props.renderEmptyState(g.default.theme)));var v=this.props.getProTip&&this.props.getProTip(),m=n&&v?G("div",{className:(0,o.default)(D.default.footer,w.default.footer)},void 0,G(S.default,{style:{width:"100%",paddingTop:10}},void 0,v)):null,y={maxHeight:s.height-43-25};f&&(y.maxHeight-=40);var _=this.props.loadMore&&this.props.hasMore;return G("div",{className:(0,o.default)(w.default.messagesPopoutWrap,D.default.themedPopout,c),style:y},void 0,this.props.renderHeader(),a.createElement(O.default,{className:w.default.messagesPopout,ref:this.setScrollerRef,onScroll:_?this.handleScroll:void 0,backgroundColor:g.default.theme===b.ThemeTypes.LIGHT?b.Colors.WHITE:b.Colors.PRIMARY_DARK_630},t,h),m)},t}(a.PureComponent);W.displayName="MessagesPopout",W.defaultProps={showChannels:!1,showGuildNames:!1,renderMentioned:!0,canCloseAllMessages:!1};var Y=s.default.connectStores([m.default,g.default,v.default,E.default],function(e){var t=e.channel,n=m.default.hasNotice(),r=g.default.inlineAttachmentMedia,a=g.default.inlineEmbedMedia,o=g.default.renderEmbeds,i=g.default.developerMode,l=g.default.messageDisplayCompact,s=null!=t?v.default.getMessages(t.id):null,u=!1;return null!=s&&null!=s.jumpTargetId&&(u=s.loadingMore&&!s.get(s.jumpTargetId)),{inlineAttachmentMedia:r,inlineEmbedMedia:a,renderEmbeds:o,developerMode:i,messageDisplayCompact:l,isNoticeOpen:n,size:E.default.windowSize(),jumping:u}})(W);t.default=Y},6183:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o,i=z(n(3)),l=n(37),s=z(n(898)),u=z(n(24)),d=z(n(1)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(238)),f=z(n(165)),p=n(469),h=z(n(166)),v=z(n(160)),m=z(n(5944)),y=z(n(8)),_=z(n(190)),g=z(n(863)),E=z(n(11)),I=z(n(459)),T=z(n(445)),S=z(n(6474)),O=z(n(6078)),A=z(n(6184)),N=z(n(897)),C=z(n(837)),R=z(n(75)),P=z(n(35)),M=z(n(74)),b=z(n(23)),L=z(n(43)),D=z(n(6475)),w=z(n(193)),k=z(n(60)),U=z(n(247)),G=z(n(6185)),F=z(n(306)),j=z(n(6476)),H=z(n(5913)),x=z(n(14)),B=z(n(132)),V=z(n(319)),K=z(n(828)),W=z(n(200)),Y=n(0);function z(e){return e&&e.__esModule?e:{default:e}}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}f.default.register((0,K.default)(Y.Experiments.OFF_PLATFORM_PREMIUM_PERK_UPSELL,"Off Platform Premium Perk Upsell",["Promote premium perk to off platform users.","Control: No upsell","Treatment 1: With upsell"]),((a={})[Y.ExperimentTypes.NONE]=function(){return null},a[Y.ExperimentTypes.USER]=((r={})[Y.ExperimentBuckets.CONTROL]=function(){return null},r[Y.ExperimentBuckets.TREATMENT_1]=function(){return null},r),a));var q=((o={})[Y.NoticeTypes.DOWNLOAD_NAG]="hideNag",o[Y.NoticeTypes.CONNECT_SPOTIFY]="hideConnectSpotify",o[Y.NoticeTypes.PREMIUM_PROMO]="hidePremiumPromo",o[Y.NoticeTypes.MFA_SMS_BACKUP]="hideMFASMSNotice",o[Y.NoticeTypes.PREMIUM_APPLICATIONS_GRANDFATHERED_STARTED]="hidePremiumGrandfatheredStarted",o[Y.NoticeTypes.PREMIUM_APPLICATIONS_GRANDFATHERED_ENDING]="hidePremiumGrandfatheredEnding",o[Y.NoticeTypes.PREMIUM_APPLICATIONS_GRANDFATHERED_ENDED]="hidePremiumGrandfatheredEnded",o[Y.NoticeTypes.DETECTED_OFF_PLATFORM_PREMIUM_PERK_UPSELL]="hideDetectedOffPlatformPremiumPerkUpsell",o),X=new Set([Y.NoticeTypes.NO_INPUT_DETECTED,Y.NoticeTypes.STREAMER_MODE,Y.NoticeTypes.VIDEO_UNSUPPORTED_BROWSER,Y.NoticeTypes.SPOTIFY_AUTO_PAUSED,Y.NoticeTypes.DISPATCH_ERROR,Y.NoticeTypes.DISPATCH_ERROR,Y.NoticeTypes.DISPATCH_INSTALL_SCRIPT_PROGRESS]),Q={},J=Object.freeze({id:null,message:null,buttonText:null,callback:null,metadata:null}),Z=null;function ee(e){if(null!=e){var t=q[e];null!=t&&u.default.set(t,!0),X.has(e)&&(Q[e]=!0),e===Y.NoticeTypes.PREMIUM_PROMO&&(0,p.setFlag)(Y.UserFlags.PREMIUM_PROMO_DISMISSED,!0)}}function te(e){if(null==e)return!1;var t=q[e];return t?u.default.get(t):!!X.has(e)&&Q[e]}function ne(){if(!T.default.isConnected())return!1;Z=null;var e,t,n=x.default.getCurrentUser(),r=V.default.getPremiumSubscription(),a=null!=r?r.plan:null,o=B.default.getCurrentVoiceChannelId(null,E.default.getId()),i=null!=o&&B.default.hasVideo(null,o),u=S.default.getDetectedOffPlatformPremiumPerks(),d=A.default.getLastError(),c=N.default.getLastProgress(),f=j.default.getCurrentSurvey();if(null!=g.default.getRequest())Z=$({},J,{type:Y.NoticeTypes.ACTIVITY_JOIN_REQUEST});else if(w.default.isDisabled())Z=$({},J,{type:Y.NoticeTypes.VOICE_DISABLED});else if(!1===L.default.getInputDetected())Z=$({},J,{type:Y.NoticeTypes.NO_INPUT_DETECTED});else if(w.default.isConnected()&&L.default.isHardwareMute()){var p=L.default.getInputDeviceId(),v=I.default.getVendor(p),R=I.default.getModel(p);null!=v&&null!=R&&(Z=$({},J,{type:Y.NoticeTypes.HARDWARE_MUTE,metadata:{vendor:v,model:R}}))}else if(null!=d)Z=$({},J,{type:Y.NoticeTypes.DISPATCH_ERROR,metadata:{error:d}});else if(null!=c)Z=$({},J,{type:Y.NoticeTypes.DISPATCH_INSTALL_SCRIPT_PROGRESS,metadata:c});else if(U.default.wasAutoPaused())Z=$({},J,{type:Y.NoticeTypes.SPOTIFY_AUTO_PAUSED});else if(!te(Y.NoticeTypes.PREMIUM_APPLICATIONS_GRANDFATHERED_STARTED)&&null!=a&&_.default.isGrandfathered(a)&&_.default.isNearGrandfatheredStartPeriod())Z=$({},J,{type:Y.NoticeTypes.PREMIUM_APPLICATIONS_GRANDFATHERED_STARTED,metadata:{plan:a}});else if(!te(Y.NoticeTypes.PREMIUM_APPLICATIONS_GRANDFATHERED_ENDED)&&null!=a&&_.default.isGrandfathered(a)&&_.default.getDaysToGrandfatheredEnd(a)>=-14&&_.default.getDaysToGrandfatheredEnd(a)<=0)Z=$({},J,{type:Y.NoticeTypes.PREMIUM_APPLICATIONS_GRANDFATHERED_ENDED});else if(!te(Y.NoticeTypes.PREMIUM_APPLICATIONS_GRANDFATHERED_ENDING)&&null!=a&&_.default.isGrandfathered(a)&&_.default.getDaysToGrandfatheredEnd(a)>0&&_.default.getDaysToGrandfatheredEnd(a)<=_.default.GRANDFATHERED_DAYS_APPROACHING)Z=$({},J,{type:Y.NoticeTypes.PREMIUM_APPLICATIONS_GRANDFATHERED_ENDING,metadata:{plan:a}});else if(null!=n&&null==n.email)Z=$({},J,{type:Y.NoticeTypes.UNCLAIMED_ACCOUNT});else if(!y.default.embedded||s.default.supported()&&!C.default.isCorruptInstallation())if(!i||L.default.supports(l.Features.VIDEO)||te(Y.NoticeTypes.VIDEO_UNSUPPORTED_BROWSER))if(u.length>0&&_.default.canRedeemPremiumPerks(n)){var M=u[0];Z=$({},J,{type:Y.NoticeTypes.DETECTED_OFF_PLATFORM_PREMIUM_PERK,metadata:M})}else if(!te(Y.NoticeTypes.DETECTED_OFF_PLATFORM_PREMIUM_PERK_UPSELL)&&u.length>0&&(null!=(t=m.default.triggerFirstEligibleUserExperiment([Y.Experiments.OFF_PLATFORM_PREMIUM_PERK_UPSELL]))&&t.bucket===Y.ExperimentBuckets.TREATMENT_1)){var b=u[0];Z=$({},J,{type:Y.NoticeTypes.DETECTED_OFF_PLATFORM_PREMIUM_PERK_UPSELL,metadata:b})}else if(O.default.getDisplayType()===Y.DetectedPlatformAccountsDisplayTypes.NOTICE)Z=$({},J,{type:Y.NoticeTypes.DETECTED_PLATFORM_ACCOUNTS,metadata:O.default.getDetectedAccounts()});else if(F.default.enabled)Z=$({},J,{type:Y.NoticeTypes.STREAMER_MODE});else if(y.default.embedded||te(Y.NoticeTypes.DOWNLOAD_NAG))if(e=G.default.getScheduledMaintenance())Z=$({},J,{type:Y.NoticeTypes.SCHEDULED_MAINTENANCE,metadata:{id:e.id,start:new Date(e.scheduled_for),end:new Date(e.scheduled_until)}});else if(null!=f)Z=$({},J,{type:Y.NoticeTypes.SURVEY,metadata:f});else if(null==n||n.verified)if(U.default.hasConnectedAccount()||!k.default.isObservedAppRunning(h.default.get(Y.PlatformTypes.SPOTIFY).name)||te(Y.NoticeTypes.CONNECT_SPOTIFY))if(null==n||_.default.isPremium(n)||n.hasFlag(Y.UserFlags.PREMIUM_PROMO_DISMISSED)||!D.default.isEligible()||te(Y.NoticeTypes.PREMIUM_PROMO))if(null==n||!n.mfaEnabled||n.hasFlag(Y.UserFlags.MFA_SMS)||n.hasFlag(Y.UserFlags.STAFF)||n.hasFlag(Y.UserFlags.PARTNER)||te(Y.NoticeTypes.MFA_SMS_BACKUP)){if(null!=W.default.testModeApplicationId){var H=W.default.testModeApplicationId,K=P.default.getGame(H),z=null!=K?K.name:H;Z=$({},J,{type:Y.NoticeTypes.APPLICATION_TEST_MODE,metadata:{applicationName:z,applicationId:H}})}}else Z=$({},J,{type:Y.NoticeTypes.MFA_SMS_BACKUP});else Z=$({},J,{type:Y.NoticeTypes.PREMIUM_PROMO});else Z=$({},J,{type:Y.NoticeTypes.CONNECT_SPOTIFY});else Z=$({},J,{type:Y.NoticeTypes.UNVERIFIED_ACCOUNT});else Z=$({},J,{type:Y.NoticeTypes.DOWNLOAD_NAG});else Z=$({},J,{type:Y.NoticeTypes.VIDEO_UNSUPPORTED_BROWSER});else Z=$({},J,{type:Y.NoticeTypes.CORRUPT_INSTALLATION});null!=Z&&te(Z.type)&&(Z=null)}function re(){return F.default.enabled||delete Q[Y.NoticeTypes.STREAMER_MODE],ne()}var ae=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.syncWith([j.default,g.default,D.default,S.default],ne),this.waitFor(x.default,G.default,b.default,M.default,w.default,L.default,F.default,R.default,v.default,H.default,g.default,O.default,U.default,k.default,D.default,A.default,N.default,W.default,V.default,C.default,S.default)},a.hasNotice=function(){return null!=Z&&null!=Z.type},a.getNotice=function(){return null==H.default.getAction()?Z:null},r}(i.default.Store))(d.default,{CONNECTION_OPEN:function(e){return function(){if(!T.default.isConnected())return!1;var e=x.default.getCurrentUser();_.default.isPremium(e)&&_.default.shouldCheckGrandfatheredPlan()&&d.default.wait(function(){return c.fetchSubscriptions()}),ne()}()},CURRENT_USER_UPDATE:function(e){return ne()},AUDIO_ENABLE:function(e){return ne()},VOICE_CHANNEL_CLEAR:function(e){return ne()},STATUS_PAGE_SCHEDULED_MAINTENANCE:function(e){return ne()},STATUS_PAGE_SCHEDULED_MAINTENANCE_ACK:function(e){return ne()},GUILD_CREATE:function(e){return ne()},GUILD_DELETE:function(e){return ne()},AUDIO_INPUT_DETECTED:function(e){return ne()},AUDIO_SET_DISPLAY_SILENCE_WARNING:function(e){return ne()},CERTIFIED_DEVICES_SET:function(e){return ne()},AUDIO_SET_INPUT_DEVICE:function(e){return ne()},AUDIO_SET_OUTPUT_DEVICE:function(e){return ne()},MEDIA_ENGINE_DEVICES:function(e){return ne()},RTC_CONNECTION_STATE:function(e){return ne()},RPC_APP_AUTHENTICATED:function(e){return ne()},RPC_APP_DISCONNECTED:function(e){return ne()},PLATFORM_ACCOUNTS_DETECTED:function(e){return ne()},PLATFORM_ACCOUNTS_IGNORE:function(e){return ne()},USER_CONNECTIONS_UPDATE:function(e){return ne()},DETECTED_PLATFORM_ACCOUNTS_DISPLAY_TYPE_CHANGE:function(e){return ne()},WINDOW_FOCUS:function(e){return ne()},INSTANT_INVITE_CREATE:function(e){return ne()},INSTANT_INVITE_REVOKE_SUCCESS:function(e){return ne()},SPOTIFY_PLAYER_PAUSE:function(e){return ne()},RUNNING_GAMES_CHANGE:function(e){return ne()},EXPERIMENTS_FETCH_SUCCESS:function(e){return ne()},PREMIUM_PAYMENT_SUBSCRIBE_SUCCESS:function(e){return ne()},DEVELOPER_TEST_MODE_AUTHORIZATION_SUCCESS:function(e){return ne()},DEVELOPER_TEST_MODE_AUTHORIZATION_FAIL:function(e){return ne()},DEVELOPER_TEST_MODE_RESET:function(e){return ne()},BILLING_SUBSCRIPTION_FETCH_SUCCESS:function(e){return ne()},DISPATCH_APPLICATION_INSTALL:function(e){return ne()},VOICE_STATE_UPDATE:function(e){return e.userId===E.default.getId()&&ne()},STREAMER_MODE_UPDATE:function(e){return re()},RUNNING_STREAMER_TOOLS_CHANGE:function(e){return re()},DISPATCH_APPLICATION_ERROR:function(e){return delete Q[Y.NoticeTypes.DISPATCH_ERROR],ne()},DISPATCH_APPLICATION_LAUNCH_SETUP_START:function(e){return delete Q[Y.NoticeTypes.DISPATCH_INSTALL_SCRIPT_PROGRESS],ne()},DISPATCH_APPLICATION_INSTALL_SCRIPTS_PROGRESS_UPDATE:function(e){return ne()},DISPATCH_APPLICATION_LAUNCH_SETUP_COMPLETE:function(e){return ne()},NOTICE_SHOW:function(e){Z=e.notice},NOTICE_DISMISS:function(e){return null!=Z&&(null==e.id||e.id===Z.id)&&(ee(Z.type),ne())},NOTICE_DISABLE:function(e){return ee(e.noticeType),ne()},LOGOUT:function(e){return Q={},void(Z=null)}});t.default=ae},6184:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(3)),a=i(n(1)),o=n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l=null,s=[o.DispatchErrorCodes.REDISTRIBUTABLE_INSTALL_FAILED,o.DispatchErrorCodes.POST_INSTALL_FAILED,o.DispatchErrorCodes.POST_INSTALL_CANCELLED],u=[o.DispatchErrorCodes.APPLICATION_NOT_FOUND,o.DispatchErrorCodes.APPLICATION_LOAD_FAILED,o.DispatchErrorCodes.INTERRUPTED,o.DispatchErrorCodes.DESERIALIZATION_FAILED];var d=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.getLastError=function(){return l},r}(r.default.Store))(a.default,{DISPATCH_APPLICATION_LAUNCH_SETUP_START:function(e){null!=l&&s.includes(l.code)&&(l=null)},DISPATCH_APPLICATION_ERROR:function(e){var t=e.error;l=u.includes(t.code)?null:t}});t.default=d},6185:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(3)),a=l(n(24)),o=l(n(1)),i=l(n(6121));n(0);function l(e){return e&&e.__esModule?e:{default:e}}var s="MaintenanceStore",u=null,d=null,c=null;var f=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initialize=function(){c=a.default.get(s)},o.getIncident=function(){return u},o.getScheduledMaintenance=function(){return null!=d&&d.id!==c?d:null},r}(r.default.Store))(o.default,{CONNECTION_OPEN:function(e){return u=null,void i.default.checkScheduledMaintenances()},STATUS_PAGE_INCIDENT:function(e){u=e.incident},STATUS_PAGE_SCHEDULED_MAINTENANCE:function(e){d=e.maintenance},STATUS_PAGE_SCHEDULED_MAINTENANCE_ACK:function(e){return function(){if(null==d)return!1;c=d.id,a.default.set(s,c)}()}});t.default=f},6318:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=p(n(2)),o=f(n(17)),i=p(n(112)),l=f(n(158)),s=n(805),u=n(0),d=f(n(5235)),c=f(n(5349));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.title,n=e.description,r=e.agreement,a=e.disagreement,u=e.onAgree,f=e.onDisagree;return h(s.BackgroundOpacityContext.Consumer,{},void 0,function(e){var s=e.backgroundOpacity;return h(l.default,{className:(0,o.default)(c.default.gatedContent,c.default[s+"BackgroundOpacity"]),justify:l.default.Justify.CENTER,align:l.default.Align.CENTER,direction:l.default.Direction.VERTICAL},void 0,h("div",{className:(0,o.default)(c.default.image,d.default.marginBottom20)}),h("div",{className:(0,o.default)(c.default.title,d.default.marginBottom8)},void 0,t),h("div",{className:(0,o.default)(c.default.description,d.default.marginBottom20)},void 0,n),h("div",{className:(0,o.default)(c.default.separator,d.default.marginBottom40)}),h(l.default,{justify:l.default.Justify.CENTER,align:l.default.Align.CENTER,grow:0},void 0,h(i.default,{className:c.default.action,size:i.ButtonSizes.LARGE,look:i.ButtonLooks.OUTLINED,color:i.ButtonColors.PRIMARY,onClick:f},void 0,a),h(i.default,{className:c.default.action,color:c.default.actionRed,size:i.ButtonSizes.LARGE,onClick:u},void 0,r)))})},r}(a.PureComponent);v.displayName="GatedContent",v.defaultProps={onAgree:u.NOOP,onDisagree:u.NOOP};var m=v;t.default=m},6340:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(1)),a=u(n(311)),o=u(n(6341)),i=u(n(18)),l=n(0),s=u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}var d={open:function(e,t,n,a){void 0===a&&(a=!1),r.default.dispatch({type:l.ActionTypes.CREATE_INVITE_MODAL_OPEN,guildId:e,channelId:t,forceChannel:a}),this.createInvite("IOS InstantInvite Mount",!0),i.default.track(l.AnalyticEvents.OPEN_MODAL,{Type:"Instant Invite",Source:n})},openForStream:function(e){r.default.dispatch({type:l.ActionTypes.CREATE_INVITE_MODAL_OPEN,guildId:e.guildId,channelId:e.channelId,forceChannel:!0,targetUserType:l.InviteTargetUserTypes.STREAM,targetUserId:e.ownerId}),this.createInvite("IOS InstantInvite Mount",!0)},updateSettings:function(e){r.default.dispatch({type:l.ActionTypes.CREATE_INVITE_MODAL_UPDATE_SETTINGS,settings:e})},resetSettings:function(){r.default.dispatch({type:l.ActionTypes.CREATE_INVITE_MODAL_RESET_SETTINGS})},createInvite:function(e,t){var n=o.default.getPendingSettings();if(null!=n){r.default.dispatch({type:l.ActionTypes.CREATE_INVITE_MODAL_GENERATE_INVITE});var i=n.channelId,u=n.maxAge,d=n.maxUses,c=n.temporary,f=n.targetUserType,p=n.targetUserId,h=o.default.getInvite(),v=t&&null!=h?h.code:null;a.default.createInvite(i,{validate:v,max_age:parseInt(u,10),max_uses:parseInt(d,10),temporary:c,target_user_type:f,target_user_id:p},e).then(function(){r.default.dispatch({type:l.ActionTypes.CREATE_INVITE_MODAL_GENERATE_INVITE_SUCCESS,channelId:i})},function(e){var t=s.default.Messages.INSTANT_INVITE_FAILED_TO_GENERATE;null!=e.body&&null!=e.body.message&&(t=e.body.message),r.default.dispatch({type:l.ActionTypes.CREATE_INVITE_MODAL_GENERATE_INVITE_FAILURE,message:t})})}},close:function(){r.default.dispatch({type:l.ActionTypes.CREATE_INVITE_MODAL_CLOSE})}};t.default=d},6341:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(29)),a=u(n(3)),o=u(n(1)),i=u(n(196)),l=u(n(5991)),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c,f,p,h,v,m=i.default.INVITE_OPTIONS_1_DAY.value,y=i.default.INVITE_OPTIONS_UNLIMITED.value,_=s.FormStates.CLOSED,g=!1;function E(e,t,n){p=null;var r=l.default.getInvite(e);if(null!=r){var a=null!=r.targetUser?r.targetUser.id:null;r.targetUserType===t&&a===n&&(p=r)}h={channelId:e,maxAge:null!=p?p.maxAge:m,maxUses:null!=p?p.maxUses:y,temporary:null!=p&&p.temporary,targetUserType:t,targetUserId:n},v=h}var I=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.isOpen=function(){return _!==s.FormStates.CLOSED},a.isSubmitting=function(){return _===s.FormStates.SUBMITTING},a.isChannelForced=function(){return g},a.getGuildId=function(){return c},a.getError=function(){return f},a.getInvite=function(){return p},a.getInviteSettings=function(){return h},a.getPendingSettings=function(){return v},r}(a.default.Store))(o.default,{CREATE_INVITE_MODAL_OPEN:function(e){_=s.FormStates.OPEN,g=e.forceChannel,c=e.guildId,f=null;var t=e.targetUserType||null,n=e.targetUserId||null;E(e.channelId,t,n)},CREATE_INVITE_MODAL_UPDATE_SETTINGS:function(e){var t=e.settings;v=d({},v,t)},CREATE_INVITE_MODAL_RESET_SETTINGS:function(e){v=h},CREATE_INVITE_MODAL_GENERATE_INVITE:function(e){return _=s.FormStates.SUBMITTING,void(h=v)},CREATE_INVITE_MODAL_GENERATE_INVITE_SUCCESS:function(e){var t=e.channelId;_=s.FormStates.OPEN,f=null,(0,r.default)(null!=h,"No invite settings for generated invite"),E(t,h.targetUserType,h.targetUserId)},CREATE_INVITE_MODAL_GENERATE_INVITE_FAILURE:function(e){_=s.FormStates.OPEN,p=null,f=e.message},CREATE_INVITE_MODAL_CLOSE:function(e){_=s.FormStates.CLOSED}});t.default=I},6342:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(430)),a=u(n(162)),o=u(n(11)),i=u(n(20)),l=u(n(899)),s=u(n(67));function u(e){return e&&e.__esModule?e:{default:e}}var d=1010,c=new(function(e){var t,n;function l(){return e.call(this,{defaultRetryAfter:d,logger:s.default.create("InviteQueue")})||this}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u=l.prototype;return u._sendInvite=function(e,t,n,r){a.default.sendInvite(e.id,t,r).then(function(){return n(null,!0)},function(){return n(null,!1)})},u.drain=function(e,t){var n=this,a=e.code,l=e.channel,s=e.user,u=e.location;null!=l?this._sendInvite(l,a,t,u):null!=s?r.default.ensurePrivateChannel(o.default.getId(),s.id).then(function(e){null!=(l=i.default.getChannel(e))&&n._sendInvite(l,a,t,u)},function(){return t(null,!1)}):t(null,!1)},l}(l.default));t.default=c},6343:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(6020)),a=o(n(10));function o(e){return e&&e.__esModule?e:{default:e}}var i={MENTION_EVERYONE:function(){return{test:"everyone",text:"@everyone",description:a.default.Messages.MENTION_EVERYONE_AUTOCOMPLETE_DESCRIPTION}},MENTION_HERE:function(){return{test:"here",text:"@here",description:a.default.Messages.MENTION_HERE_AUTOCOMPLETE_DESCRIPTION}},LAUNCHABLE_APPLICATIONS:function(){return r.default.launchableApplicationViewItems}};t.default=i},6345:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=h(n(6)),o=n(129),i=h(n(816)),l=h(n(820)),s=h(n(6157)),u=h(n(5912)),d=h(n(436)),c=n(437),f=n(5888),p=n(0);function h(e){return e&&e.__esModule?e:{default:e}}var v=[p.Routes.ACTIVITY,p.Routes.APPLICATION_LIBRARY,p.Routes.APPLICATION_STORE,p.Routes.FRIENDS],m=((r={})[p.Routes.ACTIVITY]=0,r[p.Routes.APPLICATION_LIBRARY]=1,r[p.Routes.APPLICATION_STORE]=2,r[p.Routes.FRIENDS]=3,r);function y(e,t){(0,f.transitionToChannel)(e,t)}function _(e){var t=i.default.getChannelId(p.ME),n=d.default.getPrivateChannelIds(),r=__OVERLAY__?n:[].concat(v,n),a=(null==t?function(e){for(var t in m)if(e.startsWith(t))return m[t];return-1}(u.default.getHomeLink()):r.indexOf(t))+e;a>=r.length?a=0:a<0&&(a=r.length-1);var o,l,c=r[a];v.includes(c)?(o=c,l=s.default.getCurrentRoute(),o===p.Routes.APPLICATION_STORE&&null!=l?(0,f.transitionToPage)(l):(0,f.transitionToPage)(o)):y(p.ME,c)}var g=a.default.throttle(function(e){void 0===e&&(e=1);var t=i.default.getGuildId();null==t?_(e):function(e,t){var n,r,a=l.default.getCategories(t),s=(0,c.getFlattenedChannelList)(a._categories,a,function(e){var t=e.channel;return(0,o.isGuildSelectableChannelType)(t.type)&&!(0,c.isChannelCollapsed)(t)}).map(function(e){return e.channel.id}),u=i.default.getChannelId(t),d=(n=s.indexOf(u)+e,r=s.length,n<0?r-1:n>=r?0:n);y(t,s[d])}(e,t)},p.NAVIGATION_THROTTLE);t.default=g},6346:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.CREATE_DM_GROUP=void 0;var r=s(n(5864)),a=s(n(160)),o=n(113),i=n(5888),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u={binds:["mod+shift+t"],global:!0,action:function(){return a.default.getGuildId()&&((0,i.transitionToChannel)(l.ME),r.default.flushSelection(!0)),o.ComponentDispatch.safeDispatch(l.ComponentActions.TOGGLE_DM_CREATE),!1}};t.CREATE_DM_GROUP=u;var d={CREATE_DM_GROUP:u};t.default=d},6347:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.CREATE_GUILD=void 0;var r=l(n(5922)),a=l(n(6026)),o=n(113),i=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var s={binds:["mod+shift+n"],global:!0,action:function(){a.default.isOpen()?(r.default.setScreen(i.CreateGuildModalScreens.JoinGuild),o.ComponentDispatch.dispatch(i.ComponentActions.TRANSITION_JOIN_GUILD)):r.default.open(null,"Keyboard Shortcut")}};t.CREATE_GUILD=s;var u={CREATE_GUILD:s};t.default=u},6348:function(e,t,n){"use strict";t.__esModule=!0,t.FOCUS_SEARCH=void 0;var r=n(113),a=n(0),o={binds:["mod+f"],global:!0,action:function(e){e.preventDefault(),e.stopPropagation(),r.ComponentDispatch.dispatch(a.ComponentActions.FOCUS_SEARCH,{prefillCurrentChannel:!0})}};t.FOCUS_SEARCH=o},6349:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SEARCH_GIFS=void 0;var r=n(113),a=n(0),o={binds:["mod+g"],global:!0,action:function(){return r.ComponentDispatch.dispatchToLastSubscribed(a.ComponentActions.TOGGLE_GIF_PICKER),!1}};t.SEARCH_GIFS=o;var i={SEARCH_GIFS:o};t.default=i},6350:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=d(n(6)),a=d(n(816)),o=d(n(50)),i=d(n(441)),l=d(n(5912)),s=n(5888),u=n(0);function d(e){return e&&e.__esModule?e:{default:e}}var c=r.default.throttle(function(e){void 0===e&&(e=1);var t,n=i.default.guildPositions,r=a.default.getGuildId(),u=-1;if(r&&(u=n.indexOf(r)),-2===(u+=e)&&(u=n.length-1),u>=n.length||u<0)(0,s.transitionToPage)(l.default.getHomeLink());else{t=n[u];var d=o.default.getChannelId(t);(0,s.transitionToChannel)(t,d===t?null:d)}},u.NAVIGATION_THROTTLE);t.default=c},6351:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_CHANNEL_PINS=void 0;var r=n(113),a=n(0),o={binds:["mod+p"],global:!0,action:function(){return r.ComponentDispatch.dispatch(a.ComponentActions.TOGGLE_CHANNEL_PINS),!1}};t.TOGGLE_CHANNEL_PINS=o;var i={TOGGLE_CHANNEL_PINS:o};t.default=i},6352:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_HELP=void 0;var r=n(308),a={binds:["mod+shift+h","f1"],global:!0,action:function(){return window.open(r.SUPPORT_LOCATION),!1}};t.TOGGLE_HELP=a;var o={TOGGLE_HELP:a};t.default=o},6353:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_MENTIONS=void 0;var r=n(113),a=n(0),o={binds:["mod+i"],global:!0,action:function(){return r.ComponentDispatch.dispatch(a.ComponentActions.TOGGLE_MENTIONS),!1}};t.TOGGLE_MENTIONS=o;var i={TOGGLE_MENTIONS:o};t.default=i},6354:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_USERS=void 0;var r,a=(r=n(6160))&&r.__esModule?r:{default:r},o=n(0);var i={binds:["mod+u"],global:!0,action:function(){return a.default.toggleSection(o.ChannelSections.MEMBERS),!1}};t.TOGGLE_USERS=i;var l={TOGGLE_USERS:i};t.default=l},6355:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=p(n(6)),a=n(129),o=p(n(816)),i=p(n(820)),l=p(n(441)),s=p(n(436)),u=n(437),d=n(113),c=n(5888),f=n(0);function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e===f.ME)return s.default.getPrivateChannelIds();var t=i.default.getCategories(e);return(0,u.getFlattenedChannelList)(t._categories,t,function(e){var t=e.channel;return(0,a.isGuildSelectableChannelType)(t.type)&&!(0,u.isChannelCollapsed)(t)}).map(function(e){return e.channel.id})}var v=r.default.throttle(function(e,t,n){void 0===e&&(e=1),void 0===t&&(t=function(e,t){return!0}),void 0===n&&(n=function(e){return!0});for(var r,a=o.default.getGuildId()||f.ME,i=function(e,t){var n=[f.ME].concat(l.default.guildPositions),r=n.indexOf(e);return t>0?n.slice(r).concat(n.slice(0,r),e):(n.splice(r,0,e),n.slice(r+1).concat(n.slice(0,r+1)))}(a,e),s=e>0?0:i.length-1,u=h(a),p=u.indexOf(o.default.getChannelId(a))+e;a;){if(r=u[p],n(a))for(;r;){if(t(a,r))return(0,c.transitionToChannel)(a,r);r=u[p+=e]}if(!(a=i[s+=e]))break;u=h(a),p=e<0?u.length-1:0}d.ComponentDispatch.dispatch(f.ComponentActions.SHAKE_APP,{duration:200,intensity:2})},f.NAVIGATION_THROTTLE);t.default=v},6356:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.UPLOAD_FILE=void 0;var r=l(n(20)),a=l(n(50)),o=n(113),i=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var s={binds:["mod+shift+u"],global:!0,action:function(){var e=r.default.getChannel(a.default.getChannelId());return null==e||e.isManaged()||o.ComponentDispatch.dispatch(i.ComponentActions.UPLOAD_FILE),!1}};t.UPLOAD_FILE=s;var u={UPLOAD_FILE:s};t.default=u},6359:function(e,t,n){e.exports=n.p+"c83861b2303b7ee40c419e9590d57f11.svg"},6363:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=d(n(17)),i=d(n(231)),l=d(n(302)),s=d(n(799)),u=d(n(5379));function d(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._textInputRef=a.createRef(),t.handleClear=function(){var e=t.props,n=e.onClear,r=e.forwardedRef,a=(null!=r?r:t._textInputRef).current;null!=a&&a.focus(),null!=n&&n()},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.autoFocus,n=e.label,r=e.placeholder,a=e.searchTerm,d=e.inputClassName,c=e.className,p=e.onChange,h=e.autoComplete,v=e.forwardedRef,m=e.iconClassName,y=null!=a&&a.length>0;return f("div",{className:(0,o.default)(u.default.searchBox,c)},void 0,f(s.default,{inputRef:null!=v?v:this._textInputRef,name:"search",maxLength:100,className:u.default.searchBoxInputWrapper,inputClassName:(0,o.default)(u.default.searchBoxInput,d),onChange:p,value:y?a:"",placeholder:r,autoFocus:t,"aria-label":n,autoComplete:h?"on":"off"}),y?f(i.default,{onClick:this.handleClear,className:u.default.clear},void 0,f(l.default,{name:l.default.Names.CLEAR,className:(0,o.default)(u.default.clearIcon,m)})):f(l.default,{className:(0,o.default)(u.default.searchIcon,m),name:l.default.Names.SEARCH}))},r}(a.Component);p.displayName="SearchBox",p.defaultProps={autoComplete:!1};var h=a.forwardRef(function(e,t){return a.createElement(p,c({forwardedRef:t},e))});t.default=h},6364:function(e,t,n){"use strict";t.__esModule=!0,t.MessageTimestamp=N,t.default=t.Message=t.MessageAvatar=t.ClickOverlay=t.LocalBotMessage=t.MessageUsername=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=g(n(17)),i=g(n(197)),l=n(81),s=n(810),u=g(n(5849)),d=g(n(6365)),c=g(n(6154)),f=g(n(231)),p=g(n(795)),h=g(n(6032)),v=g(n(6366)),m=n(0),y=g(n(10)),_=g(n(5280));function g(e){return e&&e.__esModule?e:{default:e}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function T(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var S={LATIN12:_.default.latin12CompactTimeStamp,LATIN24:_.default.latin24CompactTimeStamp,ASIAN:_.default.asianCompactTimeStamp},O=5,A=/(AM|PM)$/;function N(e){var t,n=e.isCompact,r=void 0!==n&&n,a=e.timestamp,i=e.isVisibleOnlyOnHover,l=void 0!==i&&i,u=e.isMentioned,d=e.backgroundOpacity,c=r?(0,s.dateFormat)(a,"LT"):(0,s.calendarFormat)(a),f=r?function(e){return e.match(A)?S.LATIN24:e.length<=O?S.LATIN12:S.ASIAN}(c):null;return T("time",{className:(0,o.default)(f,_.default[d+"BackgroundOpacity"],(t={},t[_.default.timestampVisibleOnHover]=l,t[_.default.timestampCozy]=!r,t[_.default.timestampCompact]=r&&!u,t[_.default.timestampCompactIsMentioned]=r&&u,t)),dateTime:a},void 0,r&&T("i",{className:_.default.separatorLeft},void 0,"["),c,r&&T("i",{className:_.default.separatorRight},void 0,"] "))}N.displayName="MessageTimestamp";var C=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).onClick=function(e){var n=t.props,r=n.message;(0,n.onClick)(e,r)},t}I(t,e);var n=t.prototype;return n.onMouseDown=function(e){e.shiftKey&&(e.preventDefault(),e.stopPropagation())},n.render=function(){var e=this.props,t=e.message,n=e.isCompact,r=e.renderPopout,a=e.popoutPosition,i=e.onContextMenu,l=e.backgroundOpacity,s=t.colorString?{color:t.colorString}:null,u=t.author.bot?T(c.default,{className:n?_.default.botTagCompact:_.default.botTagCozy}):null;return T(p.default,{closeOnScroll:!1,render:r,position:a,shadow:!n},void 0,T("span",{onContextMenu:i,className:_.default.usernameWrapper},void 0,n?u:null,T(f.default,{tag:"span",className:(0,o.default)(_.default.username,_.default[l+"BackgroundOpacity"]),style:s,onMouseDown:this.onMouseDown,onClick:this.onClick},void 0,t.nick||t.author.toString()),n&&T("i",{className:_.default.separatorRight},void 0,": "),n?null:u))},t}(a.Component);t.MessageUsername=C,C.displayName="MessageUsername",C.defaultProps={isCompact:!1};var R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).onDeleteMessages=function(){var e=t.props,n=e.messages,r=e.channelId,a=e.onDeleteMessage;n.forEach(function(e){return a(r,e.id,!0)})},t}return I(t,e),t.prototype.render=function(){var e=this.props.messages.length;return T("div",{className:_.default.localBotMessage},void 0,y.default.Messages.ONLY_YOU_CAN_SEE_AND_DELETE_THESE.format({count:e,handleDelete:this.onDeleteMessages}))},t}(a.Component);t.LocalBotMessage=R,R.displayName="LocalBotMessage";var P=function(e){var t=e.onClick,n=e.label;return t&&n?T(f.default,{className:_.default.clickOverride,onClick:t,"aria-label":n}):T("div",{className:_.default.disableInteraction})};t.ClickOverlay=P;var M=function(e){var t=e.user,n=e.isAnimated,r=e.onContextMenu,a=e.renderPopout,o=(0,l.hasAnimatedAvatar)(t),i=n&&o?t.getAvatarURL("gif"):t.getAvatarURL("jpg");return T(p.default,{closeOnScroll:!1,render:a,position:p.default.Positions.RIGHT,shadow:!1},void 0,T(u.default,{"aria-hidden":!0,src:i,size:u.default.Sizes.LARGE,className:_.default.avatar,onContextMenu:r,tabIndex:-1}))};t.MessageAvatar=M,M.displayName="MessageAvatar";var b=function(e){function t(t){var n;return(n=e.call(this,t)||this).setRenderPopout=function(){var e=n.props.message.messageReference,t=null!=e&&null!=e.guild_id;n.renderPopout=t?n.renderPopoutGuild:n.renderPopoutUser},n.setRef=function(e){var t=n.props,r=t.registerMessageDOMNode,a=t.message;n.ref=e,null!=e&&null!=r&&r(a.id,e)},n.onClick=function(e){var t=n.props,r=t.onManualAck,a=t.channel,o=t.message;e.altKey&&(e.preventDefault(),r(a.id,o.id))},n.onContextMenuMessage=function(e,t){(0,n.props.onContextMenuMessage)(e,E({target:e.target},t))},n.onContextMenuUser=function(e){var t=n.props,r=t.channel,a=t.message.author;(0,t.onContextMenuUser)(e,{user:a,channel:r})},n.onClickUsername=function(e,t){var r=n.props,a=r.onClickUsername,o=r.channel;a(e,{user:t.author,channel:o})},n.onResize=function(e){var t=n.props;(0,t.onResize)({target:e,isEditing:t.isEditing})},n.renderPopoutUser=function(e){var t=n.props,r=t.renderPopoutUser,a=t.channel,o=t.message.author,i=a.getGuildId();return r(E({channelId:a.id,guildId:i,userId:o.id},e))},n.renderPopoutGuild=function(e){var t=n.props,r=t.renderPopoutGuild,a=t.message.messageReference;return null==a?null:r(E({messageReference:a},e))},n.renderCompactHeader=function(){var e=n.props,t=e.message,r=e.isHeader,o=e.isEditing,i=e.popoutPosition,l=e.backgroundOpacity,s=o||r,u=t.mentioned,d={message:t,isCompact:!0,renderPopout:n.renderPopout,popoutPosition:i,onContextMenu:n.onContextMenuUser,onClick:n.onClickUsername,backgroundOpacity:l};return T("h2",{className:_.default.headerCompact},void 0,T(N,{isVisibleOnlyOnHover:!s,isCompact:!0,timestamp:t.timestamp,isMentioned:u,backgroundOpacity:l}),a.createElement(C,d))},n.setRenderPopout(),n}I(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props,n=t.isEditing,r=t.message,a=t.onResize,o=t.registerMessageDOMNode,i=e.message.embeds!==r.embeds||e.message.attachments!==r.attachments||e.message.reactions.length!==r.reactions.length;this.ref&&i&&a({isEditing:n,target:this.ref});var l=e.isEditing!==n;this.ref&&l&&a({isEditing:!0,target:this.ref}),e.registerMessageDOMNode!==o&&o&&this.ref&&o(r.id,this.ref),e.message.messageReference!==r.messageReference&&this.setRenderPopout()},n.renderCompact=function(){var e=this.props,t=e.message,n=e.channel,r=e.renderAccessories,o=e.renderEditor,i=e.renderButtons,l=e.editingContent,s=e.isEditing,u=e.onCancelEditing,d=e.onChange,c=e.onConfirmDelete,f=e.saveMessage,p=e.validateEdit,m=e.disableButtons,y=e.disableMentionStyles,g=e.disablePromoteButton,E=e.isDisabled;return a.createElement("div",{ref:this.setRef,className:_.default.messageCompact,"aria-disabled":E,onClick:this.onClick},s&&this.renderCompactHeader(),s&&null!=l?T(v.default,{className:_.default.messageEditorCompact,channel:n,message:t,value:l,children:o,onCancel:u,onChange:d,onConfirmDelete:c,onResize:this.onResize,saveMessage:f,validateEdit:p}):T(h.default,{className:_.default.contentCompact,channel:n,message:t,isCompact:!0,onContextMenu:this.onContextMenuMessage,renderButtons:i,renderPrefix:this.renderCompactHeader,disableButtons:m,disableMentionStyles:y,disablePromoteButton:g}),r({message:t}))},n.renderCozy=function(){var e=this.props,t=e.message,n=e.channel,r=e.renderAccessories,i=e.renderEditor,l=e.renderButtons,s=e.isFocusedWindow,u=e.disableAvatarAnimation,d=e.editingContent,c=e.isEditing,f=e.isHeader,p=e.onCancelEditing,m=e.onChange,y=e.onConfirmDelete,g=e.saveMessage,E=e.validateEdit,I=e.popoutPosition,S=e.disableButtons,O=e.disableMentionStyles,A=e.disablePromoteButton,R=e.isDisabled,P=e.cozyClassName,b=e.backgroundOpacity,L={message:t,isCompact:!1,renderPopout:this.renderPopout,popoutPosition:I,onContextMenu:this.onContextMenuUser,onClick:this.onClickUsername,backgroundOpacity:b};return a.createElement("div",{ref:this.setRef,className:(0,o.default)(P,_.default.messageCozy),"aria-disabled":R,onClick:this.onClick},f?T("div",{className:_.default.headerCozy},void 0,T(M,{user:t.author,onContextMenu:this.onContextMenuUser,renderPopout:this.renderPopout,isAnimated:!u&&s}),T("h2",{className:_.default.headerCozyMeta},void 0,a.createElement(C,L),T(N,{timestamp:t.timestamp,backgroundOpacity:b}))):null,T("div",{className:_.default.contentCozy},void 0,c&&null!=d?T(v.default,{channel:n,message:t,value:d,children:i,onCancel:p,onChange:m,onConfirmDelete:y,onResize:this.onResize,saveMessage:g,validateEdit:E}):T(h.default,{channel:n,message:t,isCompact:!1,onContextMenu:this.onContextMenuMessage,renderButtons:l,renderPrefix:null,disableButtons:S,disableMentionStyles:O,disablePromoteButton:A}),r({message:t})))},n.render=function(){var e=this.props,t=e.isCompact,n=e.disableJumpFlash,r=e.jumpSequenceId,a=t?this.renderCompact():this.renderCozy();return r&&!n?T(d.default,{sequenceId:r},void 0,a):a},t}(a.Component);t.Message=b,b.displayName="Message",b.defaultProps={disableAvatarAnimation:!0,disablePromoteButton:!0,isFocusedWindow:!0};var L=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={disableAvatarAnimation:!0,isAnimatableAvatar:(0,l.hasAnimatedAvatar)(t.props.messages[0]&&t.props.messages[0].author)},t.onMouseEnter=function(){return t.setState({disableAvatarAnimation:!1})},t.onMouseLeave=function(){return t.setState({disableAvatarAnimation:!0})},t.renderButtonsMessage=function(e){var n=e.message,r=e.channel,a=t.props.renderButtonsMessage;return null==a?null:T("div",{className:_.default.buttonContainer},void 0,a({message:n,channel:r}))},t}I(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){var n=this.props.messages;if(n.length!==e.messages.length)return!0;if(!(0,i.default)(this.props,e,["messages"])||!(0,i.default)(this.state,t))return!0;for(var r=!1,a=!1,o=!1,l=0,s=n.length;l<s;l++){var u=e.messages[l];if(!r&&u.reactions.length&&(r=!0),!a&&u.embeds.length&&(a=!0),!o&&u.attachments.length&&(o=!0),n[l]!==u)return!0}var d=this.props,c=d.disableReactionReads,f=d.disableReactionCreates,p=d.disableReactionUpdates,h=d.disableAutoPlayGif,v=d.disableEmbeds,m=d.disableManageMessages,y=d.disableDeveloperMode,_=d.disablePromoteButton;return!(!r||p===e.disableReactionUpdates&&c===e.disableReactionReads)||(!(!a||h===e.disableAutoPlayGif&&v===e.disableEmbeds)||(!(!o||h===e.disableAutoPlayGif)||(f!==e.disableReactionCreates||m!==e.disableManageMessages||y!==e.disableDeveloperMode||_!==e.disablePromoteButton)))},t.getDerivedStateFromProps=function(e,t){var n=e.messages[0],r=n&&(0,l.hasAnimatedAvatar)(n.author);return r!==t.isAnimatableAvatar?{isAnimatableAvatar:r}:null},n.render=function(){var e,t=this,n=this.props,r=n.messages,i=n.channel,l=n.editingMessage,s=n.renderButtonsGroup,u=n.renderSystemMessage,d=n.onClick,c=n.onDeleteMessage,f=n.disableInteraction,p=n.disableInteractionLabel,h=n.disableDivider,v=n.disablePromoteButton,y=n.editingContent,g=n.isCompact,I=n.jumpMessageId,S=n.jumpSequenceId,O=n.className,A=n.backgroundOpacity,N=(n.renderButtonsMessage,n.disableReactionReads,n.disableReactionCreates,n.disableReactionUpdates,n.disableAutoPlayGif,n.disableEmbeds,n.disableManageMessages,n.disableDeveloperMode,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,["messages","channel","editingMessage","renderButtonsGroup","renderSystemMessage","onClick","onDeleteMessage","disableInteraction","disableInteractionLabel","disableDivider","disablePromoteButton","editingContent","isCompact","jumpMessageId","jumpSequenceId","className","backgroundOpacity","renderButtonsMessage","disableReactionReads","disableReactionCreates","disableReactionUpdates","disableAutoPlayGif","disableEmbeds","disableManageMessages","disableDeveloperMode"])),C=this.state,M=C.isAnimatableAvatar,L=C.disableAvatarAnimation,D=r[0]&&r[0].author,w=D&&D.isLocalBot(),k=null!=d||f,U=null!=l?l.id:null;return T("div",{className:(0,o.default)(O,(e={},e[_.default.isLocalBot]=w,e[_.default.containerCompactBounded]=g&&null==U,e[_.default.containerCozyBounded]=!g&&null==U,e[_.default.containerCompact]=g&&null!=U,e[_.default.containerCozy]=!g&&null!=U,e)),onMouseEnter:M?this.onMouseEnter:null,onMouseLeave:M?this.onMouseLeave:null},void 0,r.map(function(e,n){if(!e)return null;if(e.type!==m.MessageTypes.DEFAULT)return T("div",{className:_.default.content},e.id,u({message:e,channel:i,renderButtons:t.renderButtonsMessage}));var r=U===e.id,o=e.id===I,l=E({},N,{isCompact:g,isEditing:r,isDisabled:k,channel:i,message:e,editingContent:y,disableAvatarAnimation:L,disablePromoteButton:v,backgroundOpacity:A,jumpSequenceId:o?S:null,disableButtons:k||null!=s,isHeader:0===n,renderButtons:t.renderButtonsMessage});return a.createElement(b,E({},l,{key:e.id}))}),w&&T(R,{channelId:i.id,messages:r,onDeleteMessage:c}),k&&T(P,{onClick:d,label:p}),s&&s({messages:r,channel:i}),!w&&T("hr",{"aria-hidden":!0,className:(0,o.default)(h?_.default.divider:_.default.dividerEnabled,_.default[A+"BackgroundOpacity"])}))},t}(a.Component);t.default=L,L.displayName="MessageGroup",L.defaultProps={popoutPosition:p.default.Positions.RIGHT,disableDivider:!0,disableInteraction:!1,disableReactionReads:!1,disableReactionCreates:!0,disableReactionUpdates:!0,disableAutoPlayGif:!1,disableEmbeds:!1,disableManageMessages:!0,disableDeveloperMode:!0,disablePromoteButton:!0,disableInteractionLabel:void 0}},6365:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=(r=n(304))&&r.__esModule?r:{default:r},l=n(244),s=n(5986);var u=.2,d={toValue:0,duration:1e3,delay:1e3},c=(0,s.hexWithOpacity)(l.Colors.BRAND,0),f=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={backgroundColor:new i.default.Value},t.flashNow=function(){var e=t.props.onFlashComplete;t.state.backgroundColor.setValue(u),i.default.timing(t.state.backgroundColor,d).start(e)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.flashNow()},o.componentDidUpdate=function(e){e.sequenceId!==this.props.sequenceId&&this.flashNow()},o.render=function(){var e={backgroundColor:this.state.backgroundColor.interpolate({inputRange:[0,1],outputRange:[c,l.Colors.BRAND]}),borderRadius:2};return function(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(i.default.div,{style:e},void 0,this.props.children)},r}(o.Component);t.default=f,f.displayName="BackgroundFlash"},6366:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=u(n(314)),i=n(0),l=u(n(10)),s=u(n(5279));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t,n;function u(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=e.call.apply(e,[this].concat(r))||this).node=a.createRef(),t.onClickSave=function(){var e=t.props.value;t.onSubmit(e)},t.onSubmit=function(e){var n=t.props,r=n.message,a=n.channel,i=n.onConfirmDelete,l=n.onCancel,s=n.saveMessage,u=n.validateEdit;return 0===e.length?(i(a,r),l(),Promise.resolve({shouldClear:!1,shouldRefocus:!1})):u({value:e,channel:a}).then(function(n){if(!n.valid)return Promise.resolve({shouldClear:!1,shouldRefocus:!1});var r=o.default.parse(t.props.channel,e,!0);return r.content!==t.props.message.content&&s(t.props.channel.id,t.props.message.id,r),l(),Promise.resolve({shouldClear:!0,shouldRefocus:!0})})},t.onChange=function(e,n){(0,t.props.onChange)(n)},t.onKeyDown=function(e){if(e.keyCode===i.KeyboardKeys.ESCAPE&&!e.shiftKey){var n=t.props.onCancel;e.preventDefault(),n()}},t.onResize=function(){var e=t.props.onResize,n=t.node.current;e&&n instanceof HTMLElement&&e(n)},t}return n=e,(t=u).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,u.prototype.render=function(){var e=this.props,t=e.className,n=e.value,o=e.message,i=e.channel,u=e.onCancel,d=e.children;return a.createElement("div",{className:t,ref:this.node},d({value:n,message:o,channel:i,onChange:this.onChange,onSubmit:this.onSubmit,onKeyDown:this.onKeyDown,onResize:this.onResize}),function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("div",{className:s.default.operations},void 0,l.default.Messages.EDIT_TEXTAREA_HELP.format({onCancel:u,onSave:this.onClickSave})))},u}(a.PureComponent);t.default=d,d.displayName="MessageEditor"},6367:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.MessageOptionPopout=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=p(n(17)),i=n(5869),l=p(n(112)),s=p(n(231)),u=p(n(795)),d=n(0),c=p(n(10)),f=p(n(5281));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function v(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleCopyID=function(e){var n=t.props,r=n.message,a=n.onClose;(0,i.copy)(e.shiftKey?r.channel_id+"-"+r.id:r.id),a()},t.handleCopyLink=function(){var e=t.props,n=e.channel,r=e.message,a=e.onClose;(0,i.copy)(location.protocol+"//"+location.host+d.Routes.CHANNEL(n.guild_id,n.id,r.id)),a()},t.handleEdit=function(){var e=t.props,n=e.channel,r=e.message,a=e.onClose;(0,e.onStartEditMessage)(n.id,r.id,r.content),a()},t.handleRetry=function(){var e=t.props,n=e.channel,r=e.message,a=e.onClose;(0,e.onRetrySendMessage)(n,r.id,r.content,r.tts),a()},t.handleDelete=function(){var e=t.props,n=e.onDeleteMessage,r=e.onClose,a=e.onConfirmDelete;t.props.message.state===d.MessageStates.SEND_FAILED?n(t.props.channel.id,t.props.message.id,!0):a(t.props.channel,t.props.message),r()},t.handleReactions=function(){var e=t.props,n=e.onClose,r=e.message;(0,e.onShowReactionsModal)({message:r}),n()},t.handlePin=function(){var e=t.props,n=e.onConfirmPin,r=e.channel,a=e.message,o=e.onClose;n(r,a),o()},t.handleJoinNotifConfiguration=function(){var e=t.props,n=e.channel,r=e.onClose,a=e.onOpenGuildSettings,o=n.getGuildId();null!=o&&a(o,d.GuildSettingsSections.OVERVIEW),r()},t.handleUnpin=function(e){var n=t.props,r=n.onUnpinMessage,a=n.onConfirmUnpin,o=n.channel,i=n.onClose,l=n.message;e.shiftKey?r(o,l.id):a(o,l),i()},t.renderJoinNotificationOption=function(){var e=t.props,n=e.message,r=e.channel,a=e.onCanManageGuild,o=r.getGuildId();return null==o?null:n.type===d.MessageTypes.USER_JOIN&&a({guildId:o})?h(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:f.default.item,onClick:t.handleJoinNotifConfiguration},void 0,c.default.Messages.CONFIGURE):null},t}return v(t,e),t.prototype.render=function(){var e,t,n,r,o,s,u=this.props,p=u.message,v=u.currentUserId;return p.state===d.MessageStates.SEND_FAILED?e=h(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:f.default.item,onClick:this.handleRetry,role:"menuitem"},void 0,c.default.Messages.RETRY):(this.props.canEdit&&p.author.id===v&&(t=h(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:f.default.item,onClick:this.handleEdit,role:"menuitem"},void 0,c.default.Messages.EDIT)),this.props.canPin&&(n=!1===p.pinned?h(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:f.default.item,onClick:this.handlePin,role:"menuitem"},void 0,c.default.Messages.PIN):h(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:f.default.item,onClick:this.handleUnpin,role:"menuitem"},void 0,c.default.Messages.UNPIN))),i.SUPPORTS_COPY&&this.props.developerMode&&(r=h(a.Fragment,{},void 0,h(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:f.default.item,onClick:this.handleCopyID,role:"menuitem"},void 0,c.default.Messages.COPY_ID),h(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:f.default.item,onClick:this.handleCopyLink,role:"menuitem"},void 0,c.default.Messages.COPY_LINK))),this.props.canDelete&&(o=h(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:f.default.item,onClick:this.handleDelete,role:"menuitem"},void 0,c.default.Messages.DELETE)),p.reactions.length&&(s=h(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,className:f.default.item,onClick:this.handleReactions,role:"menuitem"},void 0,c.default.Messages.REACTIONS)),h("div",{className:f.default.container,role:"menu"},void 0,n,t,e,r,o,s,this.renderJoinNotificationOption())},t}(a.PureComponent);t.MessageOptionPopout=m,m.displayName="MessageOptionPopout";var y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderOptionPopout=function(e){var n=e.onClose,r=t.props,a=r.channel,o=r.message,i=r.canDelete,l=r.canEdit,s=r.canPin,u=r.developerMode,d=r.currentUserId,c=r.onStartEditMessage,f=r.onRetrySendMessage,p=r.onDeleteMessage,v=r.onConfirmPin,y=r.onOpenGuildSettings,_=r.onUnpinMessage,g=r.onConfirmUnpin,E=r.onCanManageGuild,I=r.onConfirmDelete,T=r.onShowReactionsModal;return h(m,{channel:a,message:o,developerMode:u,canEdit:l,canPin:s,canDelete:i,onClose:n,onStartEditMessage:c,onRetrySendMessage:f,onDeleteMessage:p,onConfirmDelete:I,onConfirmPin:v,onOpenGuildSettings:y,onUnpinMessage:_,onConfirmUnpin:g,onCanManageGuild:E,onShowReactionsModal:T,currentUserId:d})},t}return v(t,e),t.prototype.render=function(){var e=this.props,t=e.message,n=e.currentUserId,r=e.canDelete,a=e.canPin,l=e.developerMode,d=e.className;return t.author.isLocalBot()?null:t.author.id===n||r||a||i.SUPPORTS_COPY&&l?h(u.default,{closeOnScroll:!1,render:this.renderOptionPopout,position:u.default.Positions.BOTTOM,offsetY:-6},void 0,h(s.default,{className:(0,o.default)(f.default.button,d),"aria-label":c.default.Messages.MESSAGE_OPTIONS})):null},t}(a.PureComponent);t.default=y,y.displayName="MessageOptionButton"},6368:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=l(n(2)),o=l(n(112)),i=(r=n(5282))&&r.__esModule?r:{default:r};function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e){var t=e.title,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["title"]);return a.createElement(o.default,s({className:i.default.button},n,{size:o.ButtonSizes.MIN}),t)};u.displayName="MessagePromoteButton",u.Colors=o.default.Colors,u.Looks=o.default.Looks;var d=u;t.default=d},6369:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(9)),a=l(n(1)),o=l(n(6034)),i=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var s={search:function(e,t){null==o.default.getResults(e,t)&&(a.default.dirtyDispatch({type:i.ActionTypes.INTEGRATION_QUERY,integration:e,query:t}),r.default.get({url:i.Endpoints.INTEGRATION_SEARCH(i.ChannelTextAreaIntegrations[e].command),query:{q:t}}).then(function(n){a.default.dispatch({type:i.ActionTypes.INTEGRATION_QUERY_SUCCESS,integration:e,query:t,results:n.body})},function(){return a.default.dispatch({type:i.ActionTypes.INTEGRATION_QUERY_FAILURE,integration:e,query:t})}))}};t.default=s},6370:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=L(n(17)),i=L(n(6)),l=L(n(6720)),s=L(n(114)),u=L(n(304)),d=n(303),c=L(n(802)),f=L(n(6100)),p=L(n(6556)),h=n(234),v=n(5258),m=n(5871),y=L(n(8)),_=n(192),g=n(6371),E=L(n(6035)),I=L(n(112)),T=L(n(6372)),S=L(n(6373)),O=L(n(158)),A=L(n(302)),N=L(n(6329)),C=L(n(795)),R=L(n(426)),P=n(0),M=L(n(10)),b=L(n(5286));function L(e){return e&&e.__esModule?e:{default:e}}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function U(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var G=/(\t|\s)/,F="UPLOAD_A_FILE",j="INVITE_TO_GAME",H="INVITE_TO_SPECTATE_GAME",x="INVITE_TO_LISTEN",B="INVITE_TO_WATCH",V=function(e,t,n,r){var a=[];return e&&a.push({type:F,icon:A.default.Names.UPLOAD,display:M.default.Messages.CHAT_ATTACH_UPLOAD_A_FILE}),t&&r.forEach(function(e){e.type===P.ActivityTypes.PLAYING&&(0,h.hasFlag)(e,P.ActivityFlags.JOIN)&&a.push({type:j,icon:A.default.Names.GAMEPAD,display:M.default.Messages.CHAT_ATTACH_INVITE_TO_PLAY_GAME.format({channel:n.toString(!0),game:null!=e?e.name:""}),activity:e}),e.type===P.ActivityTypes.PLAYING&&(0,h.hasFlag)(e,P.ActivityFlags.SPECTATE)&&a.push({type:H,icon:A.default.Names.EYE,display:M.default.Messages.CHAT_ATTACH_INVITE_TO_SPECTATE_GAME.format({channel:n.toString(!0),game:null!=e?e.name:""}),activity:e}),e.type===P.ActivityTypes.LISTENING&&(0,h.hasFlag)(e,P.ActivityFlags.SYNC)&&a.push({type:x,icon:A.default.Names.PERSON_PLAY,display:M.default.Messages.CHAT_ATTACH_INVITE_TO_LISTEN.format({channel:n.toString(!0),name:null!=e?e.name:""}),activity:e}),e.type===P.ActivityTypes.WATCHING&&(0,h.hasFlag)(e,P.ActivityFlags.SYNC)&&a.push({type:B,icon:A.default.Names.EYE,display:M.default.Messages.CHAT_ATTACH_INVITE_TO_WATCH.format({channel:n.toString(!0),name:null!=e?e.name:""}),activity:e})}),a},K=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleFileUpload=function(){var e=n.props.onFileUpload;n.close(),e&&e()},n.handleInviteToPlay=function(e){var t=n.props.onInviteToPlay;n.close(),t&&t(e)},n.handleInviteToSpectate=function(e){var t=n.props.onInviteToSpectate;n.close(),t&&t(e)},n.handleInviteToListen=function(e){var t=n.props.onInviteToListen;n.close(),t&&t(e)},n.handleInviteToWatch=function(e){var t=n.props.onInviteToWatch;n.close(),t&&t(e)},n.state={animations:V(t.canAttachFiles,t.canSendInvites,t.channel,t.activities).map(function(){return new u.default.Value(0)})},n}U(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=[].concat(this.state.animations).reverse();u.default.stagger(50,e.map(function(e){return u.default.timing(e,{duration:200,toValue:1})})).start()},n.getOnClick=function(e){var t=this;switch(e.type){case F:return this.handleFileUpload;case j:var n=e.activity;return function(){return t.handleInviteToPlay(n)};case H:var r=e.activity;return function(){return t.handleInviteToSpectate(r)};case x:var a=e.activity;return function(){return t.handleInviteToListen(a)};case B:var o=e.activity;return function(){return t.handleInviteToListen(o)}}},n.close=function(){c.default.close("popout-channel-text-area-attachments")},n.render=function(){var e=this,t=this.props,n=t.canAttachFiles,r=t.canSendInvites,a=t.channel,o=t.activities,i=V(n,r,a,o).map(function(t,n){var r=e.state.animations[n];return k(u.default.div,{onClick:e.getOnClick(t),className:b.default.attachPopoutRow,style:{opacity:r}},n,k(O.default,{align:O.default.Align.CENTER},void 0,k(A.default,{name:t.icon,className:b.default.attachPopoutIcon,foreground:b.default.attachPopoutIconForeground}),k("div",{className:b.default.attachPopoutRowText},void 0,t.display)))});return k("div",{className:b.default.attachPopout},void 0,i)},t}(a.PureComponent);function W(e){return{prefix:null,focused:e,selectionStart:0,selectionEnd:0,selectedAutocomplete:0,autocompleteType:null,submitting:!1}}K.displayName="ChannelTextAreaAttachPopout";var Y=function(e){function t(t){var n;return(n=e.call(this,t)||this)._gifPickerButtonRef=a.createRef(),n._mounted=!1,n.handleContextMenu=function(e){var t=n.props.type;if(y.default.embedded){var r=(0,v.getSelectionText)();(0,d.openContextMenu)(e,function(e){return a.createElement(p.default,D({},e,{type:t===P.TextareaTypes.EDIT?P.ContextMenuTypes.CHANNEL_TEXT_AREA_EDIT:P.ContextMenuTypes.CHANNEL_TEXT_AREA,value:r}))})}},n.state=W(!1),w(n).saveCurrentTextThrottled=i.default.throttle(n.saveCurrentText.bind(w(n),!1),500),i.default.bindAll(w(n),["focus","saveCurrentText","renderAttachPopout","handleSetRef","handleSetFileInputRef","handleKeyPress","handleKeyDown","handleKeyUp","handleStartFileUpload","handleFileUpload","handleOuterClick","handleClick","handleContextMenu","handleAutocompleteClick","handleAutocompleteHover","handleOnChange","handleFocus","handleBlur","handlePaste","handleSelectGIF","handleSelectEmoji"]),n}U(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.value;this._ref&&this._ref.setSelection(e.length,e.length),this._mounted=!0,this.maybeShowAutocomplete(),window.addEventListener("beforeunload",this.saveCurrentText)},n.componentWillUnmount=function(){this._mounted=!1,this.saveCurrentText(),window.removeEventListener("beforeunload",this.saveCurrentText)},n.componentDidUpdate=function(e){var t=this;this.props.value!==e.value&&(this.maybeShowAutocomplete(function(){return t.fixSelectedAutocomplete()}),this.saveCurrentTextThrottled())},n.focus=function(){this._ref&&this._ref.focus()},n.blur=function(){this._ref&&this._ref.blur()},n.fixSelectedAutocomplete=function(){this.state.selectedAutocomplete>=this.getAutocompletes().length&&this.setState({selectedAutocomplete:0})},n.insertText=function(e,t,n){var r=this;void 0===t&&(t=!0),void 0===n&&(n=!0);var a=this._ref;if(null!=a){var o=this.state,i=o.selectionStart,l=o.selectionEnd,s=a.value.slice(0,t?a.selectionStart:i),u=a.value.slice(t?a.selectionEnd:l);n&&(e+=" ");var d=s+e+u,c=this.props.onChange;c&&c(null,d),this.setState({selectionStart:a.selectionStart,selectionEnd:a.selectionEnd},function(){var t=s.length+e.length;a.setSelection(t,t),r.maybeShowAutocomplete()}),this.saveCurrentText()}},n.clearValue=function(){this.setState(W(!0)),this.saveCurrentText()},n.saveCurrentText=function(e){void 0===e&&(e=!0);var t=this.props,n=t.type,r=t.onSaveCurrentText,a=t.channel;n===P.TextareaTypes.NORMAL&&(e&&this.saveCurrentTextThrottled.cancel(),r&&r(a.id))},n.maybeShowAutocomplete=function(e){var t=this._ref;if(null!=t){var n=this.props,r=n.value,a=n.autocompleteOptions,o=n.onAutocompleteQuery;if(0!==r.trim().length){var l,s=t.selectionStart,u=t.selectionEnd,d=!1,c=null;do{var f=G.test(r[s-1]);if(0===s||f)if("break"===function(){var e=(l=r.slice(s,u)).slice(1).toLowerCase();if(null!=(c=(0,i.default)(a).keys().find(function(t){return a[t].matches(l[0],e,s)}))){var t=a[c];return o&&o(t,e,c),d=!0,"break"}}())break}while(--s>=0);this.setState({prefix:d?l:null,selectionStart:s,selectionEnd:u,autocompleteType:c},e)}else this.getAutocompletes().length>0&&this.setState({prefix:null})}},n.getAutocompletes=function(){var e=this.props.autocompletes,t=[];if(null!=e)for(var n in e){e[n].forEach(function(e){return t.push(e)})}return t},n.moveSelection=function(e){var t=this.state,n=t.selectedAutocomplete,r=t.prefix,a=this.getAutocompletes().length;return 0!==a&&null!=r&&(n+e>=a?this.setState({selectedAutocomplete:0}):n+e<0?this.setState({selectedAutocomplete:a-1}):this.setState({selectedAutocomplete:n+e}),!0)},n.selectAutocompletion=function(e){var t=null,n=this.state,r=n.autocompleteType,a=n.prefix,o=this.props,i=o.autocompleteOptions,l=o.autocompletes;if(null!=r&&null!=i[r]&&null!=l){var s=i[r];t=s.getText(e,l);var u=s.onSelect;if(null!=u&&null!=a)u(a.slice(1),e,l)}null!=t&&("REACTIONS"===r?this.handleSubmit(t):this.insertText(t,!1))},n.getEnabledMode=function(){var e=this.props,t=e.disabled,n=e.canAttachFiles,r=e.canSendInvites,a=e.channel,o=e.activities,i=this.state.submitting;return t||i?"Disabled":0===V(n,r,a,o).length?"EnabledNoAttach":""},n.getAutocompleteMode=function(){var e=this.props.renderCustomAutocomplete,t=this.state,n=t.prefix,r=t.focused;return null!=n&&r||null!=e?"Autocomplete":"NoAutocomplete"},n.getTypeMode=function(){switch(this.props.type){case P.TextareaTypes.EDIT:return"Edit";case P.TextareaTypes.FORM:return"Form";default:return""}},n.hasOpenCodeBlock=function(){var e=this._ref;if(null==e)return!1;var t=this.props.value.slice(0,e.selectionStart).match(/```/g);return null!=t&&t.length>0&&t.length%2!=0},n.renderAttachPopout=function(e){var t=this.props,n=t.channel,r=t.canAttachFiles,o=t.canSendInvites,i=t.activities,l=t.onInviteToPlay,s=t.onInviteToSpectate,u=t.onInviteToListen,d=t.onInviteToWatch;return a.createElement(K,D({},e,{canAttachFiles:r,canSendInvites:o,channel:n,activities:i,onFileUpload:this.handleStartFileUpload,onInviteToPlay:l,onInviteToSpectate:s,onInviteToListen:u,onInviteToWatch:d}))},n.renderAttachButton=function(){var e=this.props,t=e.disabled,n=e.type,r=e.canAttachFiles,a=e.canSendInvites,o=e.channel,i=e.activities,l=e.onOpenAttachPopout;if(t||n!==P.TextareaTypes.NORMAL||0===V(r,a,o,i).length)return null;var s=i.some(function(e){return(0,h.hasFlag)(e,P.ActivityFlags.SYNC)}),u=i.some(function(e){return(0,h.canJoinOrSpectate)(e)})||s;return a&&u?k(O.default,{},void 0,k(C.default,{closeOnScroll:!1,render:this.renderAttachPopout,position:C.default.Positions.TOP_LEFT,shadow:!1,animationType:C.default.Animations.NONE,uniqueId:"popout-channel-text-area-attachments",onOpen:l},void 0,k(I.default,{look:I.default.Looks.BLANK,size:I.default.Sizes.NONE,tabIndex:(0,g.getTabIndex)(g.TabIndexKeys.CHANNEL_TEXT_AREA_UPLOAD),className:b.default.attachButton,innerClassName:b.default.attachButtonInner,"aria-label":M.default.Messages.CHAT_ATTACH_UPLOAD_OR_INVITE},void 0,k(A.default,{name:A.default.Names.PLUS_CIRCLE_PLAY,className:b.default.attachButtonIcon,foreground:b.default.attachButtonPlay,background:b.default.attachButtonPlus,width:24,height:24}))),k("div",{className:b.default.attachButtonDivider})):k(O.default,{className:b.default.attachWrapper},void 0,k(I.default,{look:I.default.Looks.BLANK,size:I.default.Sizes.NONE,onClick:this.handleStartFileUpload,tabIndex:(0,g.getTabIndex)(g.TabIndexKeys.CHANNEL_TEXT_AREA_UPLOAD),className:b.default.attachButton,innerClassName:b.default.attachButtonInner,"aria-label":M.default.Messages.CHAT_ATTACH_UPLOAD_A_FILE},void 0,k(A.default,{name:A.default.Names.PLUS_CIRCLE,className:b.default.attachButtonIcon,foreground:b.default.attachButtonPlus,width:24,height:24})),k("div",{className:b.default.attachButtonDivider}))},n.renderPremiumGiftButton=function(){var e=this.props,t=e.disabled,n=e.onPremiumGiftClick,r=e.shouldRenderPremiumGiftButton;return t||!r?null:k(R.default,{text:M.default.Messages.PREMIUM_GIFT_BUTTON_TOOLTIP},void 0,k(T.default,{className:b.default.button,tabIndex:(0,g.getTabIndex)(g.TabIndexKeys.CHANNEL_TEXT_AREA_PREMIUM_GIFT),iconName:A.default.Names.GIFT,onClick:n,isActive:!1,label:M.default.Messages.PREMIUM_GIFT_BUTTON_LABEL}))},n.getGIFPickerButton=function(){return this._gifPickerButtonRef.current},n.renderGIFPickerButton=function(){var e=this.props,t=e.disabled,n=e.isGIFPickerActive,r=e.onGIFPickerToggle,o=e.justFavorited,i=e.shouldShowTooltipOnFavorite;if(t||null==r)return null;var l=a.createElement("div",{ref:this._gifPickerButtonRef,className:b.default.buttonContainer},k(T.default,{className:b.default.button,tabIndex:(0,g.getTabIndex)(g.TabIndexKeys.CHANNEL_TEXT_AREA_GIF_PICKER),iconName:A.default.Names.INVERTED_GIF_LABEL,iconClassName:b.default.gifPickerIcon,onClick:r,isActive:n,pulse:o,label:M.default.Messages.PREMIUM_GIFT_BUTTON_LABEL}));return o&&i?k(R.default,{text:M.default.Messages.GIF_TOOLTIP_FAVORITED_PICKER_BUTTON,forceOpen:!0},void 0,l):l},n.renderEmojiButton=function(){var e=this.props,t=e.channel,n=e.renderEmojiPickerPopout;return e.disabled||null==n?null:k(S.default,{className:b.default.button,onSelectEmoji:this.handleSelectEmoji,channel:t,renderEmojiPickerPopout:n,tabIndex:(0,g.getTabIndex)(g.TabIndexKeys.CHANNEL_TEXT_AREA_EMOJI)})},n.renderAutocomplete=function(){var e=this.props,t=e.autocompleteOptions,n=e.autocompletes,r=e.renderCustomAutocomplete,a=this.state,o=a.focused,i=a.autocompleteType,l=a.selectedAutocomplete,s=a.prefix;if(null!=r)return k(E.default,{className:b.default.autocomplete,isCustom:!0,onMouseDown:this.handleAutocompleteMouseDown},void 0,r(s));if(!o||null==i||null==t[i]||null==s||null==n)return null;var u=s.slice(1).toLowerCase();return k(E.default,{className:b.default.autocomplete,onMouseDown:this.handleAutocompleteMouseDown},void 0,t[i].renderResults(u,l,this.handleAutocompleteHover,this.handleAutocompleteClick,n))},n.render=function(){var e=this.props,t=e.value,n=e.disabled,r=e.placeholder,i=e.onResize,l=e.className,s=e.backgroundOpacity,u=e.channel,d=this.state.submitting,c=n?M.default.Messages.NO_SEND_MESSAGES_PERMISSION_PLACEHOLDER:r,p=u.rateLimitPerUser<=0,h=this.getEnabledMode(),v=this.getAutocompleteMode(),y=this.getTypeMode();return k("div",{className:(0,o.default)((0,_.getClass)(b.default,"channelTextArea",h),l),onClick:this.handleOuterClick},void 0,k("div",{className:(0,o.default)((0,_.getClass)(b.default,"inner",h),(0,_.getClass)(b.default,"inner",v),b.default[s+"BackgroundOpacity"])},void 0,this.renderAttachButton(),k("div",{className:b.default.uploadInput},void 0,a.createElement(f.default,{ref:this.handleSetFileInputRef,onChange:this.handleFileUpload,multiple:p,tabIndex:-1,maxSize:(0,m.maxFileSize)(u.getGuildId())})),a.createElement(N.default,{ref:this.handleSetRef,className:(0,o.default)((0,_.getClass)(b.default,"textArea",h),(0,_.getClass)(b.default,"textArea",y)),rows:1,fontWidthEstimate:6,autoFocus:!0,placeholder:c,disabled:n||d,onChange:this.handleOnChange,onResize:i,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onFocus:this.handleFocus,onBlur:this.handleBlur,onPaste:this.handlePaste,onClick:this.handleClick,onContextMenu:this.handleContextMenu,value:n?"":t,tabIndex:(0,g.getTabIndex)(g.TabIndexKeys.CHANNEL_TEXT_AREA)}),k("div",{className:b.default.buttons},void 0,this.renderPremiumGiftButton(),this.renderGIFPickerButton(),this.renderEmojiButton()),this.renderAutocomplete()))},n.handleSetRef=function(e){this._ref=e},n.handleSetFileInputRef=function(e){this._fileInputRef=e},n.handleKeyPress=function(e){switch(e.which){case P.KeyboardKeys.ENTER:if(!e.shiftKey&&!e.ctrlKey&&!this.hasOpenCodeBlock())return e.preventDefault(),this.handleSubmit()}},n.handleKeyDown=function(e){switch(e.which){case P.KeyboardKeys.ARROW_DOWN:this.moveSelection(1)&&e.preventDefault();break;case P.KeyboardKeys.N:e.ctrlKey&&this.moveSelection(1)&&e.preventDefault();break;case P.KeyboardKeys.ARROW_UP:this.moveSelection(-1)&&e.preventDefault();break;case P.KeyboardKeys.P:e.ctrlKey&&this.moveSelection(-1)&&e.preventDefault();break;case P.KeyboardKeys.TAB:case P.KeyboardKeys.ENTER:this.handleTabOrEnterDown(e)}var t=this.props.onKeyDown;t&&t(e)},n.handleTabOrEnterDown=function(e){var t=this.state,n=t.selectedAutocomplete,r=t.prefix,a=this.getAutocompletes();null!=r&&0!==a.length?(e.preventDefault(),e.stopPropagation(),this.selectAutocompletion(n)):e.which===P.KeyboardKeys.TAB&&this.hasOpenCodeBlock()&&(e.preventDefault(),e.stopPropagation(),this.insertText("\t",!0,!1))},n.handleKeyUp=function(e){switch(e.which){case P.KeyboardKeys.ARROW_RIGHT:case P.KeyboardKeys.ARROW_LEFT:this.maybeShowAutocomplete()}var t=this.props.onKeyUp;t&&t(e)},n.handleStartFileUpload=function(){this._fileInputRef&&this._fileInputRef.activateUploadDialogue()},n.handleFileUpload=function(e){var t=this.props.onFileUpload;t&&t(e.currentTarget.files)},n.handleSubmit=function(e){var t=this,n=this.props,r=n.value,a=n.onSubmit,o=n.type,i=(e||r).trim();this.state.submitting||this.setState({submitting:!0},function(){a&&a(i).then(function(e){var n=e.shouldClear,r=e.shouldRefocus;t._mounted&&(n&&o===P.TextareaTypes.NORMAL&&t.clearValue(),t.setState({submitting:!1},r?t.focus:void 0))})})},n.handleFocus=function(e){var t=this.props.onFocus;t&&t(e),this.setState({focused:!0})},n.handleBlur=function(e){var t=this.props.onBlur;t&&t(e),this.setState({focused:!1})},n.handlePaste=function(e){var t=this,n=this.props,r=n.channel,a=n.onFileUpload,o=n.canPasteFiles;if(!(n.type!==P.TextareaTypes.NORMAL||null==e.clipboardData||null==e.clipboardData.items||0===e.clipboardData.items.length||!r.isPrivate()&&!o||r.isPrivate()&&r.isManaged()))for(var i=0;i<e.clipboardData.items.length;i++){var l=e.clipboardData.items[i];!function(){switch(l.type){case"image/png":e.preventDefault();var n=l.getAsFile();if(null==n)break;t.saveCurrentText(),2===e.clipboardData.items.length?e.clipboardData.items[0].getAsString(function(e){a&&a([(0,m.makeFile)(n,t.extractFileName(e))])}):a&&a([(0,m.makeFile)(n)])}}()}},n.extractFileName=function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector("img");if(t instanceof HTMLImageElement){var n;try{var r=s.default.parse(t.src).pathname;null!=r&&r.length>0&&(n=l.default.basename(r).split(".")[0])}catch(e){}if(null!=n&&n.length>0)return n+".png"}},n.handleOuterClick=function(){this.focus()},n.handleClick=function(){this.maybeShowAutocomplete()},n.handleAutocompleteClick=function(e){return this.selectAutocompletion(e)},n.handleAutocompleteHover=function(e){this.setState({selectedAutocomplete:e})},n.handleAutocompleteMouseDown=function(e){e.preventDefault()},n.handleSelectGIF=function(e){this.handleSubmit(e.url),this.focus()},n.handleSelectEmoji=function(e){null!=e&&this.insertText(":"+e.name+":"),this.focus()},n.handleOnChange=function(e){var t=this.props.onChange,n=e.currentTarget.value;t&&t(e,n)},t}(a.PureComponent);Y.displayName="ChannelTextArea",Y.defaultProps={type:P.TextareaTypes.NORMAL,disabled:!1,shouldRenderPremiumGiftButton:!1};var z=Y;t.default=z},6371:function(e,t,n){"use strict";var r;t.__esModule=!0,t.getTabIndex=function(e){return o.indexOf(e)+1},t.TabIndexKeys=void 0;var a=(0,((r=n(163))&&r.__esModule?r:{default:r}).default)({CHANNEL_TEXT_AREA:null,CHANNEL_TEXT_AREA_PREMIUM_GIFT:null,CHANNEL_TEXT_AREA_GIF_PICKER:null,CHANNEL_TEXT_AREA_EMOJI:null,CHANNEL_TEXT_AREA_UPLOAD:null});t.TabIndexKeys=a;var o=[a.CHANNEL_TEXT_AREA,a.CHANNEL_TEXT_AREA_PREMIUM_GIFT,a.CHANNEL_TEXT_AREA_GIF_PICKER,a.CHANNEL_TEXT_AREA_EMOJI,a.CHANNEL_TEXT_AREA_UPLOAD]},6372:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=u(n(17)),i=u(n(112)),l=u(n(302)),s=u(n(5284));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e,t,n,r=this.props,a=r.tabIndex,u=r.className,c=r.iconClassName,f=r.iconName,p=r.onClick,h=r.isActive,v=r.onMouseEnter,m=r.onMouseLeave,y=r.pulse,_=r.label;return d(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,"aria-label":_,tabIndex:a,className:(0,o.default)(s.default.buttonWrapper,(e={},e[s.default.active]=h,e)),innerClassName:(0,o.default)(s.default.button,u,(t={},t[s.default.pulseButton]=y,t)),onClick:p,onMouseEnter:v,onMouseLeave:m},void 0,d(l.default,{name:f,className:(0,o.default)(s.default.icon,c,(n={},n[s.default.pulseIcon]=y,n))}))},r}(a.PureComponent);c.displayName="ChannelTextAreaButton";var f=c;t.default=f},6373:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=f(n(17)),i=n(192),l=f(n(112)),s=f(n(795)),u=n(0),d=f(n(10)),c=f(n(5285));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={hovered:!1,emojiIndex:0,isPopoutOpen:!1},h(n).renderEmojiPickerPopout=n.renderEmojiPickerPopout.bind(h(n)),h(n).handleMouseOver=n.handleMouseOver.bind(h(n)),h(n).handleMouseEnter=n.handleMouseEnter.bind(h(n)),h(n).handleMouseLeave=n.handleMouseLeave.bind(h(n)),h(n).handlePopoutOpen=n.handlePopoutOpen.bind(h(n)),h(n).handlePopoutClose=n.handlePopoutClose.bind(h(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getSpriteStyle=function(){var e=this.state.emojiIndex;return{backgroundPosition:-e%u.EmojiSprites.PickerPerRow*22+"px "+22*-Math.floor(e/u.EmojiSprites.PickerPerRow)+"px",backgroundSize:22*u.EmojiSprites.PickerPerRow+"px "+22*Math.ceil(u.EmojiSprites.PickerCount/u.EmojiSprites.PickerPerRow)+"px"}},a.renderEmojiPickerPopout=function(e){var t=this.props,n=t.renderEmojiPickerPopout;return n(e,{onSelectEmoji:t.onSelectEmoji,channel:t.channel})},a.render=function(){var e=this.props.tabIndex,t=this.state,n=t.hovered,r=t.isPopoutOpen,a=n||r,f=(0,i.getClass)(c.default,"emojiButton",a?"Hovered":"Normal"),h=(0,i.getClass)(c.default,"sprite",a?"Hovered":"Normal");return p(s.default,{closeOnScroll:!1,render:this.renderEmojiPickerPopout,position:s.default.Positions.TOP_RIGHT,zIndexBoost:1e3,shadow:!1,animationType:s.default.Animations.NONE,subscribeTo:u.ComponentActions.TOGGLE_EMOJI_POPOUT,onOpen:this.handlePopoutOpen,onClose:this.handlePopoutClose},void 0,p(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.NONE,tabIndex:e,className:(0,o.default)(f,this.props.className),onMouseEnter:this.handleMouseEnter,onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave,"aria-label":d.default.Messages.SELECT_EMOJI},void 0,p("div",{className:h,style:this.getSpriteStyle()})))},a.handleMouseOver=function(){this.handleMouseEnter()},a.handleMouseEnter=function(){if(!this.state.hovered&&!this.state.isPopoutOpen){var e=Math.floor(Math.random()*u.EmojiSprites.PickerCount);this.setState({hovered:!0,emojiIndex:e})}},a.handleMouseLeave=function(){this.setState({hovered:!1})},a.handlePopoutOpen=function(){this.setState({isPopoutOpen:!0})},a.handlePopoutClose=function(){this.setState({isPopoutOpen:!1})},r}(a.PureComponent);v.displayName="EmojiButton";var m=v;t.default=m},6374:function(e,t,n){"use strict";t.__esModule=!0,t.promptToUpload=function(e,t,n,p){void 0===n&&(n=!1);void 0===p&&(p=!0);if(e.length<1)return;var h=t.getGuildId();if(d.anyFileTooLarge(e,h)){var v=u.default.getCurrentUser();r.default.push(l.default,{title:f.default.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:f.default.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:d.sizeString(d.maxFileSize(h))}),promo:!c.default.canUploadLargeFiles(v)})}else p?(o.default.pushFiles({files:e,channelId:t.id}),s.default.isModalOpen(i.default)||r.default.push(i.default,{backdropInstant:n})):a.default.instantBatchUpload(t.id,e)};var r=p(n(73)),a=p(n(5952)),o=p(n(6e3)),i=p(n(6168)),l=p(n(5935)),s=(p(n(129)),p(n(438))),u=p(n(14)),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(5871)),c=p(n(190)),f=p(n(10));function p(e){return e&&e.__esModule?e:{default:e}}},6375:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=d(n(1)),a=d(n(5935)),o=d(n(6376)),i=d(n(162)),l=d(n(73)),s=n(0),u=d(n(10));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,d){var f="",p=!1;null!=n&&(f=n.content,p=n.tts);var h=new o.default(s.Endpoints.MESSAGES(e));h.on("start",function(t){r.default.dispatch({type:s.ActionTypes.UPLOAD_START,channelId:e,file:t,uploader:h})}),h.on("progress",function(t){r.default.dispatch({type:s.ActionTypes.UPLOAD_PROGRESS,channelId:e,file:t})}),h.on("error",function(o,d){r.default.dispatch({type:s.ActionTypes.UPLOAD_FAIL,channelId:e,file:o}),d!==s.AbortCodes.EXPLICIT_CONTENT?l.default.push(a.default,{title:u.default.Messages.UPLOAD_AREA_UPLOAD_FAILED_TITLE,help:u.default.Messages.UPLOAD_AREA_UPLOAD_FAILED_HELP.format({onClick:function(){l.default.pop(),c(e,t,n)}})}):i.default.sendClydeError(e,d)}),h.on("complete",function(t){r.default.dispatch({type:s.ActionTypes.UPLOAD_COMPLETE,channelId:e,file:t})});var v={content:f,tts:p,hasSpoiler:d};h.upload(t,v)}var f={instantBatchUpload:function(e,t){Array.prototype.forEach.call(t,function(t){c(e,t)})},upload:c};t.default=f},6376:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(6)),a=l(n(340)),o=l(n(6377)),i=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._handleXHRProgress=function(e){t._handleProgress(e.loaded,e.total)},t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.prototype.upload=function(t,n){var o=this;e.prototype.upload.call(this,t,n);var l=a.default.post(this._url),s=null!=n&&n.hasSpoiler?i.SPOILER_ATTACHMENT_PREFIX:"";l.attach("file",t,""+s+t.name),l.on("error",function(){return o._handleError()}),null!=n&&r.default.each(n,function(e,t){l.field(t,e)});var u=l.end(function(e){e.ok?o._handleComplete():o._handleError(e.body&&e.body.code)}).xhr;u.upload?u.upload.onprogress=this._handleXHRProgress:u.addEventListener("progress",this._handleXHRProgress,!1),this._handleStart(function(){return l.abort()})},o}(o.default);t.default=s},6377:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(38)),a=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this)._lastUpdate=0,n._loaded=0,n._aborted=!1,n._handleStart=function(e){n._cancel=e,n.emit("start",n._file)},n._handleProgress=function(e,t){var r=Date.now(),a=Math.min(Math.floor(e/t*100),100),o=Math.floor((e-n._loaded)/((r-n._lastUpdate)/1e3));n._lastUpdate=r,n._loaded=e,n._file=i({},n._file,{size:t,progress:a,rate:o}),n.emit("progress",n._file)},n._handleError=function(e){n._aborted||(n.emit("error",n._file,e),n.removeAllListeners())},n._handleComplete=function(){n.emit("complete",n._file),n.removeAllListeners()},n._url=t,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.cancel=function(){null!=this._cancel&&(this._aborted=!0,this._cancel()),this._handleComplete()},o.upload=function(e,t){if(null!=this._cancel)throw new Error("Uploader.upload(...): An upload is already in progress.");this._lastUpdate=Date.now(),this._loaded=0,this._file={id:a.default.uniqueId("Uploader"),name:e.name,size:0,progress:0,rate:0}},r}(r.default);t.default=l},6378:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.Upload=void 0;var r=l(n(6)),a=l(n(3)),o=l(n(1)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(5871));n(0);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t){this.file=e,this.channelId=t,this.classification=i.classifyFile(e),this.isImage="image"===this.classification,this.sizeString=i.sizeString(e.size),this.filename=e.name};t.Upload=s;var u=[];var d=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getFirstUpload=function(){return u.length>0?u[0]:null},a.hasAdditionalUploads=function(){return u.length>1},r}(a.default.Store))(o.default,{UPLOAD_MODAL_POP_FILE:function(e){return u.shift(),void(u=[].concat(u))},UPLOAD_MODAL_PUSH_FILES:function(e){var t=e.files,n=e.channelId;u=[].concat(u),r.default.forEach(t,function(e){u.push(new s(e,n))})},UPLOAD_MODAL_CLEAR_ALL_FILES:function(e){u=[]}});t.default=d},6379:function(e,t,n){e.exports=n.p+"9cbfe5105fc5f29ef4e659059ee01a46.svg"},6380:function(e,t,n){var r={"./spritesheet-.png":6381,"./spritesheet-1f3fb.png":6382,"./spritesheet-1f3fc.png":6383,"./spritesheet-1f3fd.png":6384,"./spritesheet-1f3fe.png":6385,"./spritesheet-1f3ff.png":6386,"./spritesheet-emoji.png":6038,"./spritesheet-picker.png":6387};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=6380},6381:function(e,t,n){e.exports=n.p+"6a4c3d24e0e1bb9bd102815d01cb3d87.png"},6382:function(e,t,n){e.exports=n.p+"b8fa63048881311b205927b3d4111bf6.png"},6383:function(e,t,n){e.exports=n.p+"757c4d5d07c5691452fde54dca7fcde8.png"},6384:function(e,t,n){e.exports=n.p+"5c0d73f3d0c4e89f92bcedbe1752ae94.png"},6385:function(e,t,n){e.exports=n.p+"df82ca7d3be7d1271f5fb93719ea65fe.png"},6386:function(e,t,n){e.exports=n.p+"7c1fdd7a2f89b4bc6f7968c3fb3b6a14.png"},6387:function(e,t,n){e.exports=n.p+"4e51af83c4879cf313ad553bdc20dcf7.png"},6388:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=I(n(2)),o=E(n(3)),i=E(n(1)),l=I(n(5916)),s=E(n(5896)),u=E(n(5953)),d=E(n(231)),c=E(n(158)),f=E(n(302)),p=E(n(5905)),h=n(796),v=E(n(6390)),m=E(n(6042)),y=n(0),_=E(n(10)),g=E(n(5293));function E(e){return e&&e.__esModule?e:{default:e}}function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var O=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={resultType:null},t.searchBarRef=a.createRef(),t.backToFrontPage=function(e){var n=t.state.resultType;e.keyCode===y.KeyboardKeys.ESCAPE&&null!=n&&(e.stopPropagation(),e.preventDefault(),t.handleClearQuery())},t.handleChangeQuery=function(e){t.search(e,y.GIFPickerResultTypes.SEARCH)},t.handleSelectSuggestion=function(e){l.resetSearch(),t.search(e,y.GIFPickerResultTypes.SEARCH_SUGGESTION,!0)},t.handleClearQuery=function(){var e=t.searchBarRef.current;l.resetSearch(),t.setState({resultType:null}),null!=e&&e.focus()},t.handleSelectGIF=function(e){var n=t.props.onSelectGIF;null!=n&&n(e)},t.handleSelectItem=function(e,n){var r=t.searchBarRef.current;switch(e){case y.GIFPickerResultTypes.TRENDING_CATEGORY:l.search(n,y.GIFPickerResultTypes.TRENDING_CATEGORY,!0),null!=r&&r.focus();break;case y.GIFPickerResultTypes.TRENDING_GIFS:l.fetchTrendingGIFs()}t.setState({resultType:e})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){l.initializeSearch(),document.addEventListener("keydown",this.backToFrontPage)},o.componentWillUnmount=function(){i.default.wait(function(){return l.resetSearch()}),document.removeEventListener("keydown",this.backToFrontPage)},o.search=function(e,t,n){l.search(e,t,n),""===e?this.setState({resultType:null}):this.state.resultType!==y.GIFPickerResultTypes.SEARCH&&this.setState({resultType:y.GIFPickerResultTypes.SEARCH})},o.renderHeaderContent=function(){var e=this.props.query;switch(this.state.resultType){case y.GIFPickerResultTypes.FAVORITES:return S(h.FormTitle,{tag:"h5",className:g.default.searchHeader},void 0,_.default.Messages.GIF_PICKER_FAVORITES);case y.GIFPickerResultTypes.TRENDING_GIFS:return S(h.FormTitle,{tag:"h5",className:g.default.searchHeader},void 0,_.default.Messages.GIF_PICKER_RESULT_TYPE_TRENDING_GIFS);default:return a.createElement(p.default,{className:g.default.searchBar,size:p.default.Sizes.MEDIUM,query:e,onChange:this.handleChangeQuery,onClear:this.handleClearQuery,placeholder:_.default.Messages.SEARCH_TENOR,ref:this.searchBarRef,autoFocus:!0})}},o.renderHeader=function(){var e=null;return null!=this.state.resultType&&(e=S(d.default,{onClick:this.handleClearQuery,className:g.default.backButton},void 0,S(f.default,{name:f.default.Names.ARROW_LEFT,title:_.default.Messages.BACK}))),S(c.default,{align:c.default.Align.CENTER},void 0,e,this.renderHeaderContent())},o.renderContent=function(){var e=this.props,t=e.resultItems,n=e.resultQuery,r=e.query,a=e.favorites,o=e.searchOffset,i=e.searchLimit,l=e.searchTotalResults,s=e.suggestions,u=this.state.resultType;return null==u?S(v.default,{onSelectItem:this.handleSelectItem}):S(m.default,{data:u===y.GIFPickerResultTypes.FAVORITES?a:t,onSelectGIF:this.handleSelectGIF,resultType:u,resultQuery:n,query:r,searchOffset:o,searchLimit:i,searchTotalResults:l,suggestions:s,onSelectSuggestion:this.handleSelectSuggestion})},o.render=function(){var e=this.props.forwardedRef;return a.createElement("div",{className:g.default.container,onClick:function(e){return e.stopPropagation()},ref:e},S("div",{className:g.default.header},void 0,this.renderHeader()),S("div",{className:g.default.content},void 0,this.renderContent()))},r}(a.PureComponent);O.displayName="GIFPicker";var A=o.default.connectStores([u.default,s.default],function(){return{query:u.default.getQuery(),favorites:s.default.getFavorites(),resultQuery:u.default.getResultQuery(),resultItems:u.default.getResultItems(),suggestions:u.default.getSuggestions(),searchOffset:0,searchTotalResults:u.default.getResultItems().length,searchLimit:null}})(O),N=a.forwardRef(function(e,t){return a.createElement(A,T({},e,{forwardedRef:t}))});t.default=N},6389:function(e,t,n){"use strict";t.__esModule=!0,t.calculateAnalyticsMetadata=function(e,t,n){var a,o=n.offset,i=n.limit,l=n.results,s=n.totalResults,u=null!=t?((a={})[t]=1,a):{};return{search_type:r.SearchTypes.GIF,load_id:e,limit:i,offset:o,page:null!=i&&null!=o?Math.floor(o/i)+1:1,total_results:s,page_results:l?l.length:null,num_modifiers:Object.keys(u).length,modifiers:u}};var r=n(0)},6390:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=_(n(3)),i=n(5916),l=_(n(5896)),s=_(n(5953)),u=_(n(302)),d=_(n(6039)),c=_(n(6040)),f=_(n(6041)),p=n(6391),h=n(6042),v=n(0),m=_(n(10)),y=_(n(5292));function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var E=function(e,t){return g(p.CategoryColumn,{columns:e},t)};function I(e){return e.name}E.displayName="renderColumn";var T=function(e){var t,n;function r(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this)._masonryRef=a.createRef(),t.state={favoritesTile:(n=l.default.getRandomFavorite(),{type:v.GIFPickerResultTypes.FAVORITES,name:m.default.Messages.GIF_PICKER_FAVORITES,icon:u.default.Names.FAVORITE_FILLED,src:null!=n?n.src:"https://media.giphy.com/media/1TOSaJsWtnhe0/giphy.gif",format:null!=n?n.format:v.GIFResultFormat.IMAGE}),selectedIndex:{column:0,row:0},focusedId:null},t.handleFocus=function(e){var n=t._masonryRef.current;null!=n&&n.scrollIntoView(e.coords.top-10,e.coords.top+e.coords.height+10),t.setState({focusedId:e.id})},t.handleSelect=function(e){var n=t.props.onSelectItem,r=t.getData().find(function(t){return I(t)===e.id});null!=r&&null!=n&&n(r.type,r.name)},t.renderItem=function(e,n,r){var a=n.width,o=n.height,i=t.props.onSelectItem,l=t.state.focusedId;return g(h.GIFPickerSearchItem,{format:e.format,color:v.Colors.PRIMARY_DARK_800,src:e.src,item:e,index:r,itemWidth:a,itemHeight:o,onClick:function(){return i(e.type,e.name)},renderExtras:t.renderCategoryExtras,focused:I(e)===l})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){0===this.props.trendingCategories.length&&(0,i.fetchTrending)()},o.getData=function(){var e=this.props.trendingCategories;return[this.state.favoritesTile].concat(e)},o.renderCategoryExtras=function(e){var t=e.name,n=e.icon,r=e.type;return g(a.Fragment,{},void 0,g("div",{className:r===v.GIFPickerResultTypes.FAVORITES?y.default.categoryFadeBlurple:y.default.categoryFade}),g("div",{className:y.default.categoryText},void 0,null!=n?g(u.default,{name:n,className:y.default.categoryIcon}):null,g("span",{className:y.default.categoryName},void 0,t)))},o.renderContent=function(e,t,n){return 0===this.props.trendingCategories.length?g(p.ResultsLoader,{columns:e,width:t,renderColumn:E}):a.createElement(c.default,{ref:this._masonryRef,className:y.default.container,width:t,height:n,gutterSize:12,getItemId:I,columns:e,getItemHeight:function(){return 110},renderItem:this.renderItem,data:this.getData()})},o.render=function(){var e=this;return g(d.default,{getItemGrid:function(){var t=e._masonryRef.current;return null!=t?t.getItemGrid():null},onFocus:this.handleFocus,onSelect:this.handleSelect},void 0,g(f.default,{desiredItemWidth:200,maxColumns:6},void 0,function(t,n,r){return e.renderContent(t,n,r)}))},r}(a.PureComponent);T.displayName="GIFPickerFrontPage";var S=o.default.connectStores([s.default],function(){return{trendingCategories:s.default.getTrendingCategories()}})(T);t.default=S},6391:function(e,t,n){"use strict";t.__esModule=!0,t.ResultsLoader=t.CategoryColumn=t.AnimatedColumn=t.Block=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=u(n(6)),i=u(n(304)),l=n(0),s=u(n(5289));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var f=12,p=[l.Colors.PREMIUM_TIER_1_PURPLE,l.Colors.PREMIUM_TIER_1_BLUE,"#929AFA"],h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={backgroundColor:o.default.sample(p)},t}return c(t,e),t.prototype.render=function(){return d("div",{style:{height:this.props.height,backgroundColor:this.state.backgroundColor},className:s.default.gif})},t}(a.PureComponent);t.Block=h,h.displayName="Block";var v=function(e){function t(t){var n;(n=e.call(this,t)||this).animateSlide=function(){var e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t=e.props.direction,r=e.state,a=r.translateY,o=r.height,l=t>0?0:-o/2+f,s=t>0?-o/2+f:0;a.setValue(l),i.default.timing(a,{toValue:s,duration:800,easing:i.default.Easing.linear}).start(n.animateSlide)};var r=new Array(10).fill(null).map(function(){return o.default.random(40,150)});return n.state={blocks:r,height:2*r.reduce(function(e,t){return e+t+f},f),translateY:new i.default.Value(0)},n}c(t,e);var n=t.prototype;return n.componentDidMount=function(){this.animateSlide()},n.getAnimatedStyle=function(){return{width:100/this.props.columns+"%",transform:[{translateY:this.state.translateY.interpolate({inputRange:[0,1],outputRange:["0px","1px"]})}]}},n.render=function(){var e=this.state.blocks;return d(i.default.div,{className:s.default.column,style:this.getAnimatedStyle()},void 0,e.map(function(e,t){return d(h,{height:e},t)}),e.map(function(e,t){return d(h,{height:e},"alt"+t)}))},t}(a.Component);t.AnimatedColumn=v,v.displayName="AnimatedColumn",v.defaultProps={direction:-1};var m=function(e){var t=e.columns;return d("div",{className:s.default.column,style:{width:100/t+"%"}},void 0,new Array(4).fill(null).map(function(e,t){return d("div",{className:s.default.categoryLoader},t)}))};t.CategoryColumn=m,m.displayName="CategoryColumn";var y=function(e){function t(){return e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){var e=this.props,t=e.columns,n=e.renderColumn;return d("div",{className:s.default.container},void 0,new Array(t).fill(null).map(function(e,r){return n(t,r)}))},t}(a.PureComponent);t.ResultsLoader=y,y.displayName="ResultsLoader"},6392:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=N(n(3)),i=N(n(134)),l=N(n(162)),s=N(n(73)),u=N(n(802)),d=N(n(191)),c=n(839),f=N(n(35)),p=N(n(812)),h=N(n(5989)),v=N(n(112)),m=N(n(188)),y=N(n(426)),_=N(n(98)),g=n(5930),E=N(n(314)),I=N(n(5923)),T=N(n(6044)),S=n(0),O=N(n(10)),A=N(n(5296));function N(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).trackInvite=function(e){if(null!=e&&e.ok){var t=n.props,r=t.activity,a=t.channel,o="";switch(t.activityActionType){case S.ActivityActionTypes.JOIN:o="Invite to Join";break;case S.ActivityActionTypes.SPECTATE:o="Invite to Spectate";break;case S.ActivityActionTypes.LISTEN:o="Invite to Listen";break;case S.ActivityActionTypes.WATCH:o="Invite to Watch"}return d.default.trackWithMetadata(S.AnalyticEvents.INVITE_SENT,{location:"Channel Text Area - "+o,invite_type:r.type===S.ActivityTypes.LISTENING?S.InviteTypes.SPOTIFY:S.InviteTypes.APPLICATION,application_id:r.application_id,guild_id:a.getGuildId(),channel_id:a.id,message_id:null!=e?e.body.id:null}),Promise.resolve()}},n.state={textValue:"",textFocused:!0},R(n).handleTextChange=n.handleTextChange.bind(R(n)),R(n).handleShare=n.handleShare.bind(R(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.fetchApplication()},o.componentDidUpdate=function(e){this.props.activity.application_id!==e.activity.application_id&&this.fetchApplication()},o.fetchApplication=function(){var e=this.props,t=e.activity,n=e.application;null!=t.application_id&&null==n&&i.default.fetchApplication(t.application_id)},o.renderTitle=function(){switch(this.props.activity.type){case S.ActivityTypes.LISTENING:return O.default.Messages.INVITE_EMBED_LISTENING_INVITE;case S.ActivityTypes.PLAYING:case S.ActivityTypes.STREAMING:default:return O.default.Messages.INVITE_EMBED_GAME_INVITE}},o.render=function(){var e=this,t=this.state,n=t.textValue,r=t.textFocused,o=this.props,i=o.activity,l=o.channel,s=o.activityActionType,u=o.cooldown,d=o.application,c=u>0,f=c?O.default.Messages.CHANNEL_SLOWMODE_COOLDOWN.format({seconds:Math.round((u+1e3)/1e3)}):null;return C(m.default,{size:m.default.Sizes.SMALL},void 0,C(m.default.Header,{},void 0,C(_.default,{tag:_.default.Tags.H4},void 0,this.renderTitle())),C(m.default.Content,{},void 0,C("div",{className:A.default.subHeader},void 0,O.default.Messages.MESSAGE_PREVIEW),C(T.default,{activityActionType:s,activity:i,className:A.default.preview,application:d,partyId:null!=i.party?i.party.id:null,isPreview:!0}),C("div",{className:A.default.subHeader},void 0,O.default.Messages.ADD_A_COMMENT_OPTIONAL),a.createElement(I.default,{className:A.default.textArea,value:n,focused:r,channel:l,onChange:this.handleTextChange,onSubmit:this.handleShare,type:S.TextareaTypes.FORM,ref:function(t){e.channelTextAreaRef=t}})),C(m.default.Footer,{},void 0,C(y.default,{text:f},void 0,C("div",{},void 0,C(v.default,{disabled:c,onClick:this.handleShare},void 0,O.default.Messages.INVITE_EMBED_SEND_INVITE))),C(v.default,{look:v.default.Looks.LINK,onClick:this.handleCancel},void 0,O.default.Messages.CANCEL)))},o.handleCancel=function(){s.default.pop()},o.handleTextChange=function(e,t){this.setState({textValue:t})},o.handleShare=function(){var e=this,t=this.props,n=t.channel,r=t.activity,a=t.activityActionType,o=t.cooldown,i=this.state.textValue;if(o>0)return Promise.resolve({shouldClear:!1,shouldRefocus:!0});var d=E.default.parse(n,i),c={activity:r,type:a};return p.default.isOpen("popout-channel-text-area-shouting")?(u.default.close("popout-channel-text-area-shouting"),l.default.sendMessage(n.id,d,!0,c).then(function(t){return e.trackInvite(t)}),s.default.pop(),Promise.resolve({shouldClear:!0,shouldRefocus:!0})):(0,g.applyChatRestrictions)(this.channelTextAreaRef,i,n).then(function(t){return t.valid?(l.default.sendMessage(n.id,d,!0,c).then(function(t){return e.trackInvite(t)}),s.default.pop(),{shouldClear:!1,shouldRefocus:!1}):{shouldClear:!1,shouldRefocus:!1}})},r}(a.PureComponent);P.displayName="ActivityInvite";var M=o.default.connectStores([h.default,f.default],function(e){var t=e.channel,n=e.activity;return{cooldown:h.default.getSlowmodeCooldownGuess(t.id),application:null!=n.application_id?f.default.getGame(n.application_id):c.SpotifyApplication}})(P);t.default=M},6393:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=S(n(17)),i=S(n(131)),l=n(234),s=S(n(308)),u=n(326),d=n(192),c=S(n(305)),f=n(5849),p=S(n(112)),h=S(n(158)),v=S(n(302)),m=S(n(6549)),y=S(n(5917)),_=S(n(795)),g=S(n(426)),E=n(0),I=S(n(10)),T=S(n(5295));function S(e){return e&&e.__esModule?e:{default:e}}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var R=function(e){function t(t){var n;return N(n=e.call(this,t)||this).renderUserPopout=n.renderUserPopout.bind(N(n)),n}C(t,e);var n=t.prototype;return n.renderUserPopout=function(e){var t=this.props,n=t.renderUserPopout;return n(t.member.user,e)},n.render=function(){var e=this.props,t=e.member,n=e.className;return A(_.default,{closeOnScroll:!1,render:t.unknownUser?void 0:this.renderUserPopout,position:_.default.Positions.LEFT,shadow:!1},void 0,A(g.default,{text:t.unknownUser?"":t.nick||t.user.username},void 0,A("div",{className:t.unknownUser?T.default.partyMember:T.default.partyMemberKnown},void 0,A(f.AvatarImage,{src:t.user.getAvatarURL(),size:f.AvatarSizes.XSMALL,className:(0,o.default)(T.default.partyAvatar,n)}))))},t}(a.PureComponent);R.displayName="PartyMember";var P=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleOpenSpotifyTrack=function(){var e=n.props,t=e.activity,r=e.onOpenSpotifyTrack;null!=t&&r&&r(t)},n.handleOpenSpotifyArtist=function(e){var t=n.props,r=t.activity,a=t.onOpenSpotifyArtist,o=t.message;null!=r&&null!=o&&a&&a(r,o.author.id,e)},n.handleOpenSpotifyAlbum=function(){var e=n.props,t=e.activity,r=e.onOpenSpotifyAlbum,a=e.message;null!=t&&null!=a&&r&&r(t,a.author.id)},N(n).handleJoin=n.handleJoin.bind(N(n)),N(n).handleSpectate=n.handleSpectate.bind(N(n)),N(n).handleSync=n.handleSync.bind(N(n)),N(n).handleDownloadApp=n.handleDownloadApp.bind(N(n)),N(n).renderUser=n.renderUser.bind(N(n)),n}C(t,e);var n=t.prototype;return n.isDeadInvite=function(){var e=this.props,t=e.isPreview,n=e.message,r=e.activity,a=e.applicationId;return!t&&!(null!=n&&(0,l.isInviteActive)(r,n,a))},n.getPartySize=function(){var e=this.props.activity;return null==e||null==e.party||null==e.party.size||e.party.size.length<2?[-1,-1]:e.party.size},n.getActionableMode=function(){return[E.ActivityActionTypes.LISTEN,E.ActivityActionTypes].includes(this.props.activityActionType)?"Actionable":this.props.isPreview||this.canSpectate()||this.canJoin()?"Actionable":"NotActionable"},n.isInParty=function(){var e=this.props,t=e.activity,n=e.myPartyId;return!e.isPreview&&null!=t&&null!=t.party&&n===t.party.id},n.isPartyFull=function(){var e=this.getPartySize(),t=e[0],n=e[1];return t>-1&&t>=n},n.hasPartySize=function(){var e=this.getPartySize(),t=e[0],n=e[1];return t>-1&&n>-1},n.isActionType=function(e){return this.props.activityActionType===e},n.canSpectate=function(){var e=this.props,t=e.isGameLaunchable,n=e.activity,r=e.isInBrowser,a=e.isPreview,o=(0,l.hasFlag)(n,E.ActivityFlags.SPECTATE);return!(!a||!o)||!(this.isDeadInvite()||!this.isActionType(E.ActivityActionTypes.SPECTATE)||!(0,l.hasFlag)(n,E.ActivityFlags.SPECTATE))&&!(r||!t||this.isInParty())},n.canJoin=function(){var e=this.props,t=e.activity,n=e.isPreview,r=e.isGameLaunchable,a=e.isInBrowser;return!!n||!(this.isDeadInvite()||!this.isActionType(E.ActivityActionTypes.JOIN)||!(0,l.hasFlag)(t,E.ActivityFlags.JOIN))&&(!(!this.hasPartySize()||this.isPartyFull())&&!(a||!r||this.isInParty()))},n.canSync=function(){var e=this.props,t=e.activity,n=e.isPreview,r=e.isSyncable,a=e.isInBrowser;return!!n||!(!this.isActionType(E.ActivityActionTypes.LISTEN)&&!this.isActionType(E.ActivityActionTypes.WATCH))&&(!(this.isDeadInvite()||!(0,l.hasFlag)(t,E.ActivityFlags.SYNC))&&!(a||!r||this.isInParty()))},n.getHelpdeskArticleURL=function(){var e=this.props.partyId;return null!=e&&(0,u.isSpotifyParty)(e)?E.HelpdeskArticles.SPOTIFY_CONNECTION:E.HelpdeskArticles.RICH_PRESENCE_INTRODUCTION},n.handleJoin=function(){var e=this.props.onJoin;e&&e()},n.handleSpectate=function(){var e=this.props.onSpectate;e&&e()},n.handleSync=function(){var e=this.props.onSync;e&&e()},n.handleDownloadApp=function(){var e=this.props.onDownloadApp;e&&e()},n.renderHeaderText=function(){var e=this.props,t=e.activityActionType,n=e.name;switch(t){case E.ActivityActionTypes.LISTEN:return I.default.Messages.INVITE_EMBED_INVITE_TO_LISTEN.format({name:n});case E.ActivityActionTypes.WATCH:return I.default.Messages.INVITE_EMBED_INVITE_TO_WATCH.format({name:n});case E.ActivityActionTypes.SPECTATE:return I.default.Messages.INVITE_EMBED_INVITE_TO_SPECTATE;case E.ActivityActionTypes.JOIN:default:return I.default.Messages.INVITE_EMBED_INVITE_TO_JOIN_GROUP}},n.renderPartyStatus=function(){var e=this,t=this.props,n=t.activityActionType,r=t.isGameLaunchable,a=t.isSyncable,o=t.isPreview,i=t.isInBrowser,s=t.name,u=t.activity,d=this.getPartySize(),f=d[0],p=d[1];if(this.isDeadInvite())switch(n){case E.ActivityActionTypes.LISTEN:return I.default.Messages.INVITE_EMBED_LISTEN_HAS_ENDED;case E.ActivityActionTypes.WATCH:return I.default.Messages.INVITE_EMBED_WATCH_HAS_ENDED;case E.ActivityActionTypes.SPECTATE:case E.ActivityActionTypes.JOIN:default:return I.default.Messages.INVITE_EMBED_GAME_HAS_ENDED}if(i&&!o)switch(n){case E.ActivityActionTypes.SPECTATE:return I.default.Messages.INVITE_EMBED_SPECTATE_VIA_DESKTOP_APP;case E.ActivityActionTypes.JOIN:return I.default.Messages.INVITE_EMBED_JOIN_VIA_DESKTOP_APP}if(this.isActionType(E.ActivityActionTypes.LISTEN)||this.isActionType(E.ActivityActionTypes.WATCH)){if(null!=u&&null!=u.details&&null!=u.state&&(0,l.isListeningOnSpotify)(u)){return[A("div",{className:T.default.details},"details",A(c.default,{className:T.default.textLink,onClick:this.handleOpenSpotifyTrack},void 0,u.details)),A("div",{className:T.default.state},"state",I.default.Messages.USER_ACTIVITY_LISTENING_ARTISTS.format({artists:u.state,artistsHook:function(t,n){return null!=u.state?A(m.default,{artists:u.state,linkClassName:T.default.textLink,canOpen:null!=u.sync_id,onOpenSpotifyArtist:e.handleOpenSpotifyArtist},n):null}}))]}return this.isActionType(E.ActivityActionTypes.LISTEN)?I.default.Messages.USER_ACTIVITY_LISTEN_ALONG:I.default.Messages.USER_ACTIVITY_WATCH_ALONG}return this.isInParty()?I.default.Messages.INVITE_EMBED_IN_GROUP:r||a||o?this.isActionType(E.ActivityActionTypes.SPECTATE)?I.default.Messages.INVITE_EMBED_SPECTATE:this.isPartyFull()?this.canSpectate()?I.default.Messages.INVITE_EMBED_FULL_GROUP_SPECTATE:I.default.Messages.INVITE_EMBED_FULL_GROUP:this.hasPartySize()?I.default.Messages.INVITE_EMBED_NUM_OPEN_SLOTS.format({number:p-f}):I.default.Messages.JOIN:I.default.Messages.USER_ACTIVITY_NOT_DETECTED.format({name:s})},n.renderActionButton=function(){var e=this,t=this.props,n=t.isInBrowser,r=t.isPreview,o=t.isGameLaunchable,i=t.partyId,l=t.activity,s=t.message,d=t.renderSpotifyJoinButton,c=t.renderCustomButton,f={className:T.default.actionButton,size:p.default.Sizes.SMALL},h=null!=c?c(f):null;if(null!=h)return h;if(!this.isDeadInvite()&&this.isActionType(E.ActivityActionTypes.LISTEN)&&null!=i&&null!=s&&(0,u.isSpotifyParty)(i))return d(O({},f,{activity:l,user:s.author}));return a.createElement(p.default,O({},f,function(){if(!r&&n&&!e.isDeadInvite())return{children:I.default.Messages.USER_ACTIVITY_ACTION_DOWNLOAD_APP,onClick:e.handleDownloadApp};var t=e.canSpectate();return e.isActionType(E.ActivityActionTypes.SPECTATE)||e.isPartyFull()&&t?t?{children:I.default.Messages.USER_ACTIVITY_ACTION_SPECTATE,onClick:e.handleSpectate}:{children:I.default.Messages.USER_ACTIVITY_ACTION_SPECTATE,disabled:!0}:e.canJoin()?{children:I.default.Messages.JOIN,onClick:e.handleJoin}:e.canSync()?{children:I.default.Messages.JOIN,onClick:e.handleSync}:{children:I.default.Messages.JOIN,disabled:!0}}(),{color:!n&&!o||this.isDeadInvite()?p.default.Colors.GREY:p.default.Colors.GREEN,submitting:this.props.isLaunching}))},n.renderUser=function(e,t,n){var r=this.props.renderUserPopout;return null!=e?A(R,{member:e,renderUserPopout:r,className:t},n):A("div",{className:(0,o.default)(T.default.partyMemberEmpty,t)},n)},n.renderMoreUsers=function(e,t,n){return A("div",{className:T.default.moreUsers},n,e)},n.renderParty=function(){var e=this.props,t=e.partyId,n=e.partyMembers,r=e.hideParty,a=this.getPartySize(),o=a[0],l=a[1],s=this.hasPartySize()||this.isActionType(E.ActivityActionTypes.LISTEN)||this.isActionType(E.ActivityActionTypes.WATCH);if(this.isActionType(E.ActivityActionTypes.SPECTATE)||null==t||this.isDeadInvite()||!s||r)return null;for(var u=[].concat(n);u.length<o;)u.push({user:new i.default({discriminator:"0005"}),unknownUser:!0});for(var d=Math.min(l,106);u.length<d;)u.push(null);return A(y.default,{className:T.default.partyMembers,users:u,max:l>0?Math.min(l,6):6,renderUser:this.renderUser,renderMoreUsers:this.renderMoreUsers})},n.render=function(){var e,t=this.props,n=t.className,r=t.coverImage,a=t.name,i=t.activity,u=t.backgroundOpacity,f=this.isActionType(E.ActivityActionTypes.JOIN)||this.isActionType(E.ActivityActionTypes.SPECTATE),p=this.isDeadInvite();return null==r||null==i||f?!f&&p&&(e=A("div",{className:T.default.artworkSpotifySessionEnded})):e=A("img",{alt:"",src:r,className:(0,d.getClass)(T.default,"artwork",this.getActionableMode())}),null!=i&&null!=e&&null!=i.assets&&i.assets.large_text&&!p&&(0,l.isListeningOnSpotify)(i)&&(e=A(g.default,{text:i.assets.large_text},void 0,A(c.default,{onClick:this.handleOpenSpotifyAlbum},void 0,e))),A("div",{className:(0,o.default)(T.default.invite,n,T.default[u+"BackgroundOpacity"])},void 0,A("div",{className:T.default.coverImageWrapper},void 0,A("div",{className:(0,o.default)((0,d.getClass)(T.default,"coverImage",this.getActionableMode()),null!=e?T.default.blurred:null),style:{backgroundImage:null!=r?"url('"+r+"')":null}})),A(h.default,{className:T.default.fullHeight},void 0,A(h.default,{direction:h.default.Direction.VERTICAL},void 0,A("div",{className:T.default.header},void 0,this.renderHeaderText()),A(h.default.Child,{className:T.default.partyStatus},void 0,this.renderPartyStatus()),A(h.default,{align:h.default.Align.END},void 0,A(h.default,{align:h.default.Align.CENTER,className:T.default.actionAndParty,basis:0,style:{marginRight:0}},void 0,this.renderActionButton(),this.renderParty()),null==e&&f?A("div",{className:T.default.name},void 0,a):null)),e),A(c.default,{href:s.default.getArticleURL(this.getHelpdeskArticleURL()),className:T.default.helpIcon},void 0,A(v.default,{name:v.default.Names.QUESTION_MARK,color:E.Colors.PRIMARY_DARK_300,width:12,height:12})))},t}(a.PureComponent);P.displayName="ActivityInviteEmbed";var M=P;t.default=M},6394:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=u(n(2)),o=s(n(112)),i=s(n(426)),l=u(n(6077));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e){var t=e.activity,n=e.user,r=e.channelId,s=e.guildId,u=e.source,f=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["activity","user","channelId","guildId","source"]);return d(l.default,{activity:t,user:n,channelId:r,guildId:s,source:u,type:l.SpotifyActionTypes.EMBED_SYNC},void 0,function(e){var t=e.tooltip,n=e.disabled,r=e.loading,l=e.label,s=e.onClick;return d(i.default,{text:t},void 0,a.createElement(o.default,c({},f,{color:n?o.default.Colors.GREY:o.default.Colors.GREEN,onClick:s,disabled:!r&&n,submitting:r}),l))})};f.displayName="SpotifyJoinButton";var p=f;t.default=p},6395:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=R(n(17)),i=R(n(114)),l=R(n(3)),s=n(5916),u=R(n(5896)),d=R(n(5924)),c=R(n(6398)),f=n(5865),p=R(n(5939)),h=n(5918),v=R(n(6399)),m=n(113),y=R(n(6415)),_=R(n(6417)),g=R(n(6046)),E=R(n(6418)),I=R(n(6043)),T=R(n(6421)),S=R(n(902)),O=R(n(6424)),A=R(n(6049)),N=n(0),C=R(n(5323));function R(e){return e&&e.__esModule?e:{default:e}}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var b=function(e){var t=e.width,n=e.height,r=e.url,a=e.src,i=e.isFavorite,l=e.format,u=e.className;return M(I.default,{className:(0,o.default)(u),onClick:function(e){e?(0,s.removeFavoriteGIF)(r):((0,s.addFavoriteGIF)({url:r,src:a,width:t,height:n,format:l}),m.ComponentDispatch.dispatch(N.ComponentActions.FAVORITE_GIF))},isFavorite:i})};b.displayName="ConnectedGIFFavButtonInner";var L=l.default.connectStores([u.default],function(e){var t=e.url;return{isFavorite:u.default.getIsFavorite(t)}})(b),D=function(e,t,n){return function(){var r=t||n;if(null==r)return null;var a=r.url,o=r.proxyURL,i=r.width,l=r.height;return M(L,{width:i,height:l,src:o||a,url:e||o||a,format:null!=n?N.GIFResultFormat.VIDEO:N.GIFResultFormat.IMAGE,className:C.default.gifFavoriteButton})}},w=function(e){return function(){var t=e.proxy_url,n=e.width,r=e.height;return f.IMAGE_GIF_RE.test(e.filename)&&null!=n&&null!=r?M(L,{width:n,height:r,src:t,url:t,format:N.GIFResultFormat.IMAGE,className:C.default.gifFavoriteButton}):null}},k=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).getAcceptInviteContext=function(e){var n=t.props,r=n.channel,a=n.message;return{location:e,location_guild_id:r.getGuildId(),location_channel_id:r.id,location_channel_type:r.type,location_message_id:a.id}},t.renderEmbed=function(e,n){var r=t.props,o=r.disableAutoPlayGif,i=r.inlineEmbedMedia,l=r.backgroundOpacity,s=a.createElement(d.default,P({className:C.default.embedWrapper,embed:e,autoPlayGif:!o,hideMedia:!i},n,{backgroundOpacity:l}));return M(h.GIFAccessoryContext.Provider,{value:D(e.url,e.image,e.video)},e.id,s)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.renderInvites=function(e){var t=this;return e.invites.length?e.invites.map(function(n){return M(y.default,{code:n,author:e.author,getAcceptInviteContext:t.getAcceptInviteContext},n)}):null},l.renderGiftCodes=function(e){return e.giftCodes.map(function(t){return M("div",{className:C.default.giftCodeContainer},void 0,M(O.default,{code:t,author:e.author,channelId:e.channel_id},t))})},l.renderReactions=function(e){var t=this.props,n=t.disableReactionCreates,r=t.disableReactionReads,a=t.disableReactionUpdates,o=t.channel;return r?null:M(g.default,{message:e,channel:o,disableReactionCreates:n,disableReactionUpdates:a})},l.renderAttachments=function(e){var t=this.props,n=t.disableAutoPlayGif,r=t.inlineAttachmentMedia,a=t.onContextMenuMessage,o=t.channel;return e.attachments.length?e.attachments.map(function(t){return M(h.GIFAccessoryContext.Provider,{value:w(t)},t.id,M(v.default,{className:C.default.embedWrapper,attachment:t,inlineMedia:r,autoPlayGif:!n,onContextMenu:function(n){return a(n,{attachment:t,message:e,channel:o,target:n.target})},ImageComponent:T.default}))}):null},l.renderEmbeds=function(e){var t=this,n=this.props.disableEmbeds;return!e.embeds.length||n?null:e.embeds.map(function(e){if(e.type===N.EmbedTypes.APPLICATION_NEWS)return M(E.default,{embed:e},e.id);var n={};if(n.ImageComponent=T.default,n.VideoComponent=p.default,n.GIFVComponent=c.default,e.type===N.EmbedTypes.RICH&&(n.LinkComponent=S.default),e.type===N.EmbedTypes.ARTICLE&&null!=e.url&&e.url.includes("discordapp.com/store/skus")&&null!=e.provider&&"Discord"===e.provider.name){var r=i.default.parse(e.url);if(null!=r.pathname){var a=r.pathname.split("/")[3];if(null!=a)return M(A.default,{skuId:a,renderFallback:function(){return t.renderEmbed(e,n)}},e.id)}}return t.renderEmbed(e,n)})},l.renderActivityInvite=function(e){if(null==e.activity)return null;var t=this.props.channel;return M(_.default,{channel:t,message:e,hideParty:!1})},l.render=function(){var e=this.props,t=e.isCompact,n=e.className,r=e.message,a=this.renderInvites(r),i=this.renderGiftCodes(r),l=this.renderAttachments(r),s=this.renderEmbeds(r),u=this.renderActivityInvite(r),d=this.renderReactions(r);return null==a&&null==l&&null==s&&null==u&&null==d&&null==i?null:M("div",{className:(0,o.default)(n,t?C.default.containerCompact:C.default.containerCozy)},void 0,a,i,l,s,u,d)},r}(a.PureComponent);t.default=k,k.displayName="MessageAccessories",k.defaultProps={disableEmbeds:!0,isCompact:!1}},6396:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),a=i(n(17)),o=i(n(5299));function i(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.default=function(e){var t=e.className,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["className"]);return r.createElement("div",l({className:(0,a.default)(o.default.gifTag,t)},n))}},6397:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=n(59),l=n(5938),s=(r=n(8))&&r.__esModule?r:{default:r};function u(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=200,f=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).timeout=new i.Timeout,t.state={pointerEvents:!1},t.onMouseOver=function(){t.timeout.start(c,function(){return t.setState({pointerEvents:!0})})},t.onMouseOut=function(){t.timeout.start(c,function(){return t.setState({pointerEvents:!1})})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){r.visibilityObserver.observe(this)},a.componentWillUnmount=function(){r.visibilityObserver.unobserve(this),this.timeout.stop()},a.render=function(){var e,t=this.props,n=t.src,a=t.className,o=t.style,i={pointerEvents:this.state.pointerEvents?"auto":"none"};return r.visibilityObserver.isVisible(this)&&(e=s.default.embedded&&!window.DiscordNative?u("webview",{src:n,style:d({width:"100%",height:"100%"},i)}):u("iframe",{src:n,style:d({},o,i),frameBorder:0})),u("div",{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,className:a,style:o},void 0,e)},r}(o.PureComponent);t.default=f,f.displayName="UnloadingWebview",f.visibilityObserver=new l.VisibilityObserver({rootMargin:"-50px 0px 0px 0px",threshold:0})},6398:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=u(n(5865)),i=n(5918),l=n(0),s=u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var f=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).videoRef=a.createRef(),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidUpdate=function(e){if(e.play!==this.props.play){var t=this.videoRef.current;t instanceof HTMLVideoElement&&(this.props.play?t.play():t.pause())}},o.render=function(){var e=this.props,t=e.poster,n=e.src,r=e.width,o=e.height,i=e.naturalWidth,s=e.naturalHeight,u=e.play,d=e.className;return i<=l.MAX_VIDEO_WIDTH&&s<=l.MAX_VIDEO_HEIGHT||i<=l.MAX_VIDEO_HEIGHT&&s<=l.MAX_VIDEO_WIDTH?a.createElement("video",{ref:this.videoRef,className:d,poster:t,src:n,width:r,height:o,muted:!0,loop:!0,autoPlay:u,preload:"none"}):c("img",{alt:"",src:t,width:r,height:o})},r}(a.Component);f.displayName="Video",f.defaultProps={play:!1};var p=function(e){var t=e.src,n=e.poster,r=e.naturalWidth,l=e.naturalHeight,u=e.autoPlay,p=e.ImageComponent,h=e.className,v=e.playable,m=void 0===v||v,y=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["src","poster","naturalWidth","naturalHeight","autoPlay","ImageComponent","className","playable"]),_=p||o.default;return c(i.GIFAccessoryContext.Consumer,{},void 0,function(e){return a.createElement(_,d({alt:s.default.Messages.GIF,src:n,className:h,autoPlay:u,animated:m,renderAccessory:e,tabIndex:m?0:-1},y),function(e){var n=e.src,a=e.size,o=e.animating;return c(f,{className:h,poster:n,src:t,width:a.width,height:a.height,naturalWidth:r,naturalHeight:l,play:m&&o})})})};p.displayName="LazyGIFV";var h=p;t.default=h},6399:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=p(n(17)),i=p(n(6103)),l=p(n(6414)),s=p(n(5865)),u=p(n(5939)),d=p(n(833)),c=n(5918),f=p(n(5304));function p(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=/\.(png|jpe?g|webp|gif)$/i,y=/\.(mp4|webm|mov)$/i,_=/\.(mp3|ogg|wav|flac)$/i,g=function(e){var t=e.attachment,n=e.inlineMedia,r=e.autoPlayGif,a=e.onClick,o=e.onContextMenu,d=e.ImageComponent,f=e.className,p=e.focusable,h=t.filename,g=t.width,E=t.height;if(n&&null!=g&&g>0&&null!=E&&E>0){if(m.test(h)){var I=d||s.default;return v(c.GIFAccessoryContext.Consumer,{},void 0,function(e){return v(I,{src:t.proxy_url||t.url,original:t.url,width:g,height:E,autoPlay:r,onClick:a,onContextMenu:o,renderAccessory:e,className:f,shouldLink:p})})}if(y.test(h)&&null!=t.proxy_url)return v(u.default,{poster:t.proxy_url+"?format=jpeg",fileSize:t.size,fileName:t.filename,src:t.url,width:g,height:E,onClick:a,onContextMenu:o,naturalWidth:g,naturalHeight:E,className:f,playable:p})}else if(null!=n&&_.test(h)&&null!=t.url)return v(l.default,{fileSize:t.size,fileName:t.filename,src:t.url,className:f,playable:p});return v(i.default,{url:t.url,filename:t.filename,size:t.size,onClick:a,onContextMenu:o,className:f})};g.displayName="AttachmentContent";var E=function(e){var t=e.className,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["className"]),r=n.attachment,i=r.width,l=r.height,s=r.spoiler,u=null!=i&&i<200||null!=l&&l<50,c=function(e){var r;return a.createElement(g,h({},n,{className:(0,o.default)(t,(r={},r[f.default.spoiler]=s&&!u,r[f.default.hiddenSpoilers]=s&&e,r[f.default.inline]=s&&u,r)),focusable:!e}))};return s?v(d.default,{type:d.default.Types.ATTACHMENT,inline:u},void 0,function(e){return c(e)}):c()};t.default=E},6400:function(e,t,n){var r={"./icon-file-small-acrobat.svg":6401,"./icon-file-small-ae.svg":6402,"./icon-file-small-ai.svg":6403,"./icon-file-small-archive.svg":6404,"./icon-file-small-audio.svg":6405,"./icon-file-small-code.svg":6406,"./icon-file-small-document.svg":6407,"./icon-file-small-ps.svg":6408,"./icon-file-small-sketch.svg":6409,"./icon-file-small-spreadsheet.svg":6410,"./icon-file-small-unknown.svg":6411,"./icon-file-small-video.svg":6412,"./icon-file-small-webcode.svg":6413};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=6400},6401:function(e,t,n){e.exports=n.p+"f167b4196f02faf2dc2e7eb266a24275.svg"},6402:function(e,t,n){e.exports=n.p+"982bd8aedd89b0607f492d1175b3b3a5.svg"},6403:function(e,t,n){e.exports=n.p+"03ad68e1f4d47f2671d629cfeac048ef.svg"},6404:function(e,t,n){e.exports=n.p+"73d212e3701483c36a4660b28ac15b62.svg"},6405:function(e,t,n){e.exports=n.p+"5b0da31dc2b00717c1e35fb1f84f9b9b.svg"},6406:function(e,t,n){e.exports=n.p+"481aa700fab464f2332ca9b5f4eb6ba4.svg"},6407:function(e,t,n){e.exports=n.p+"9f358f466473586417baee7bacfba5ca.svg"},6408:function(e,t,n){e.exports=n.p+"a236ab3be009cf5fbbbae4d7a7437804.svg"},6409:function(e,t,n){e.exports=n.p+"f812168e543235a62b9f6deb2b094948.svg"},6410:function(e,t,n){e.exports=n.p+"85f7a4063578f6e0e2c73f60bca0fcce.svg"},6411:function(e,t,n){e.exports=n.p+"985ea67d2edab4424c62009886f12e44.svg"},6412:function(e,t,n){e.exports=n.p+"83a157e8720aa50957c4338e10d01c80.svg"},6413:function(e,t,n){e.exports=n.p+"a11e895b46cde503a094dd31641060a6.svg"},6414:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=n(5871),l=(r=n(5973))&&r.__esModule?r:{default:r};var s=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.src,n=e.fileSize,r=e.fileName,o=e.className,s=e.playable;return function(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(l.default,{src:t,fileName:r,fileSize:(0,i.sizeString)(n),type:l.default.Types.AUDIO,className:o,playable:s})},r}(o.PureComponent);t.default=s,s.displayName="LazyAudio"},6415:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=A(n(17)),i=A(n(29)),l=A(n(3)),s=A(n(311)),u=A(n(5987)),d=A(n(129)),c=A(n(310)),f=A(n(233)),p=A(n(20)),h=A(n(23)),v=A(n(832)),m=A(n(50)),y=A(n(306)),_=A(n(14)),g=A(n(6416)),E=n(805),I=n(113),T=n(0),S=A(n(10)),O=A(n(5251));function A(e){return e&&e.__esModule?e:{default:e}}function N(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var C=N(g.default.Body,{resolving:!0}),R=N(g.default.Icon,{expired:!0}),P=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleAcceptInstantInvite=function(e){var n=t.props,r=n.code,a=n.getAcceptInviteContext;s.default.acceptInvite(r,a("Invite Button Embed"),function(){t.handleTransitionToInviteChannel(e)})},t.handleTransitionToInviteChannel=function(e){var n=t.props.invite;null!=n.channel&&s.default.transitionToInviteSync(n)},t.handleMentionInviter=function(){var e=t.props,n=e.author,r=e.selectedChannelId,a=n.username,o=n.discriminator,i="@"+a;y.default.hidePersonalInformation||(i+="#"+o),I.ComponentDispatch.dispatchToLastSubscribed(T.ComponentActions.INSERT_TEXT,{content:i}),null!=r&&u.default.startTyping(r)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderResolving=function(){return N(g.default,{},void 0,N(g.default.Header,{text:S.default.Messages.INVITE_BUTTON_RESOLVING}),C)},a.renderInvalid=function(e){var t,n,r,a=this.props,o=a.currentUserId,i=a.author;return o===i.id?(t=S.default.Messages.INVITE_BUTTON_INVALID_OWNER,r=S.default.Messages.INVITE_BUTTON_TITLE_INVITER_INVALID):(r=S.default.Messages.INVITE_BUTTON_TITLE_INVITED_INVALID,e?t=S.default.Messages.INSTANT_INVITE_BANNED_INFO:i&&i.username?(t=S.default.Messages.INSTANT_INVITE_ASK_USER_FOR_NEW_INVITE.format({username:i.username}),n=N(g.default.Button,{onClick:this.handleMentionInviter},void 0,S.default.Messages.MENTION)):t=S.default.Messages.INSTANT_INVITE_ASK_FOR_NEW_INVITE),N(g.default,{},void 0,N(g.default.Header,{text:r}),N(g.default.Body,{},void 0,R,N(g.default.Info,{expired:!0,title:S.default.Messages.INVITE_BUTTON_INVALID},void 0,t),n))},a.renderExpired=function(){return this.renderInvalid(!1)},a.renderBanned=function(){return this.renderInvalid(!0)},a.renderStandard=function(){var e,t=this.props,n=t.invite,r=t.author,a=t.currentUserId===r.id,o=n.channel,i=n.approximate_member_count,l=n.approximate_presence_count,s=n.state===T.InviteStates.ACCEPTING,u=null!=o?new d.default(o):null,f=this.props.guild,p=null!=f;if(null==f){if(null==n.guild)return this.renderResolving();f=new c.default(n.guild)}null!=u&&u.type===T.ChannelTypes.GUILD_VOICE?e=N(g.default.Channel,{channel:u}):null!=i&&i>=5||null!=l&&l>0?e=N(g.default.Data,{members:i,membersOnline:l}):null!=u&&(e=N(g.default.Channel,{channel:u}));var h=p?this.handleTransitionToInviteChannel:this.handleAcceptInstantInvite,v=S.default.Messages.JOIN_SERVER,m=g.default.Button.Colors.GREEN;p&&(v=S.default.Messages.JOINED_SERVER,m=g.default.Button.Colors.PRIMARY);var y=S.default.Messages.INVITE_BUTTON_TITLE_INVITED;return a&&(y=S.default.Messages.INVITE_BUTTON_TITLE_INVITER),N(g.default,{},void 0,N(g.default.Header,{text:y}),N(g.default.Body,{},void 0,N(g.default.Icon,{guild:f,onClick:p?h:null}),N(g.default.Info,{title:f.name,onClick:p?h:null},void 0,e),N(g.default.Button,{onClick:h,submitting:s,checkmark:p,color:m},void 0,v)))},a.renderGroupDM=function(){var e,t=this.props,n=t.invite,r=t.author,a=t.currentUserId===r.id,o=n.state===T.InviteStates.ACCEPTING,i=this.props.channel,l=null!=i;if(null==i){if(null==n.channel)return this.renderResolving();i=new d.default(n.channel),e=null!=n.channel&&null!=n.channel.recipients?n.channel.recipients:[]}else e=i.recipients.reduce(function(e,t){var n=_.default.getUser(t);return null!=n&&e.push(n),e},[]),l&&e.push(_.default.getCurrentUser());var s=i.name;s||(s=e.length>0?e.filter(function(e){return null!=e}).map(function(e){return e.username}).join(", "):S.default.Messages.UNNAMED);var u=l?this.handleTransitionToInviteChannel:this.handleAcceptInstantInvite,c=S.default.Messages.JOIN_SERVER,f=g.default.Button.Colors.GREEN;l&&(c=S.default.Messages.JOINED_SERVER,f=g.default.Button.Colors.PRIMARY);var p=S.default.Messages.INVITE_BUTTON_TITLE_INVITED_GROUP_DM;return a&&(p=S.default.Messages.INVITE_BUTTON_TITLE_INVITER_GROUP_DM),N(g.default,{},void 0,N(g.default.Header,{text:p}),N(g.default.Body,{},void 0,N(g.default.Icon,{channel:i,onClick:l?u:null}),N(g.default.Info,{title:s,onClick:l?u:null},void 0,N(g.default.Data,{members:e.length})),N(g.default.Button,{onClick:u,submitting:o,checkmark:l,color:f},void 0,c)))},a.renderStreaming=function(){var e=this.props,t=e.invite,n=e.currentUserId,r=e.isWatching,a=t.target_user_type,o=t.target_user;(0,i.default)(a===T.InviteTargetUserTypes.STREAM&&null!=o,"invalid streaming invite");var l=n===o.id,s=t.state===T.InviteStates.ACCEPTING,u=this.props.guild,d=null!=u;if(null==u){if(null==t.guild)return this.renderResolving();u=new c.default(t.guild)}var f=r?this.handleTransitionToInviteChannel:this.handleAcceptInstantInvite,p=S.default.Messages.WATCH,h=g.default.Button.Colors.GREEN;r&&(h=g.default.Button.Colors.PRIMARY);var v=l?S.default.Messages.INVITE_BUTTON_STREAMER:S.default.Messages.INVITE_BUTTON_STREAMING.format({name:o.username});return N(g.default,{},void 0,N(g.default.Header,{text:S.default.Messages.INVITE_BUTTON_TITLE_STREAMING}),N(g.default.Body,{},void 0,N(g.default.Icon,{guild:u,onClick:d?f:null}),N(g.default.Info,{title:v,onClick:d?f:null},void 0,S.default.Messages.INVITE_BUTTON_STREAMING_SUBTEXT.format({guildName:u.name})),N(g.default.Button,{onClick:f,submitting:s,checkmark:r,color:h},void 0,p)))},a.renderBody=function(){var e=this.props.invite;if(null==e)throw new Error("[InviteButton] Received null invite object");switch(e.state){case T.InviteStates.RESOLVING:return this.renderResolving();case T.InviteStates.EXPIRED:return this.renderExpired();case T.InviteStates.BANNED:return this.renderBanned();default:return e.target_user_type===T.InviteTargetUserTypes.STREAM?this.renderStreaming():null!=e.channel&&e.channel.type===T.ChannelTypes.GROUP_DM?this.renderGroupDM():this.renderStandard()}},a.render=function(){var e=this;return N(E.BackgroundOpacityContext.Consumer,{},void 0,function(t){var n=t.backgroundOpacity;return n?N("div",{className:(0,o.default)(O.default[n+"BackgroundOpacity"])},void 0,e.renderBody()):e.renderBody()})},r}(a.PureComponent);P.displayName="InviteButton",P.defaultProps={invite:{state:T.InviteStates.RESOLVING,code:""}};var M=l.default.connectStores([v.default,h.default,f.default],function(e){var t=e.code,n=v.default.getInvite(t),r=f.default.getActiveStream(),a=null!=n&&n.target_user_type===T.InviteTargetUserTypes.STREAM&&null!=n.target_user&&null!=r&&r.ownerId===n.target_user.id;return{invite:n,guild:null!=n&&null!=n.guild?h.default.getGuild(n.guild.id):null,channel:null!=n&&null!=n.channel?p.default.getChannel(n.channel.id):null,selectedChannelId:m.default.getChannelId(),currentUserId:_.default.getCurrentUser().id,isWatching:a}})(P);t.default=M},6416:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(192),i=y(n(5849)),l=y(n(112)),s=y(n(158)),u=y(n(5866)),d=y(n(302)),c=y(n(128)),f=y(n(98)),p=n(5878),h=y(n(10)),v=y(n(5250)),m=y(n(5251));function y(e){return e&&e.__esModule?e:{default:e}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var E=function(e){var t=e.text;return g(f.default,{className:m.default.header},void 0,t)};E.displayName="InviteHeader";var I=function(e){var t=e.resolving,n=e.children;return g("div",{className:m.default.content},void 0,t?g("div",{className:m.default.resolving},void 0,g("div",{className:m.default.resolvingBackground})):n)};I.displayName="InviteBody";var T=function(e){var t=e.title,n=e.onClick,r=e.expired,a=e.children;return g(s.default,{className:m.default.guildInfo,direction:s.default.Direction.VERTICAL,justify:s.default.Justify.CENTER},void 0,g(c.default,{onClick:n,weight:c.default.Weights.SEMIBOLD,size:c.default.Sizes.MEDIUM,className:(0,o.getClass)(m.default,"guildName",r?"Expired":null!=n?"Joined":"")},void 0,t),g(c.default,{weight:c.default.Weights.SEMIBOLD,size:c.default.Sizes.SMALL,className:m.default.guildDetail},void 0,g(s.default,{grow:0,align:s.default.Align.CENTER},void 0,a)))};T.displayName="InviteInfo";var S=function(e){e.className,e.size;var t=e.checkmark,n=e.children,r=e.onClick,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["className","size","checkmark","children","onClick"]);return a.createElement(l.default,_({},o,{onClick:r,look:t?l.default.Looks.OUTLINED:l.default.Looks.FILLED,size:m.default.buttonSize,className:m.default.button,innerClassName:m.default.buttonInner}),g("div",{className:m.default.buttonContent},void 0,n),t?g(d.default,{name:d.default.Names.CHECKMARK,className:m.default.buttonIcon,width:18,height:18}):null)};S.displayName="InviteActionButton",S.Colors=l.default.Colors,S.Looks=l.default.Looks,S.defaultProps={checkmark:!1};var O=function(e){var t=e.children;return g("div",{className:m.default.wrapper},void 0,t)};O.displayName="InviteButton",O.Header=E,O.Body=I,O.Icon=function(e){var t=e.guild,n=e.channel,r=e.onClick,a=e.expired;if(void 0!==a&&a||null==t&&null==n)return g("div",{className:m.default.guildIconExpired});var l=null==t||null!=t.icon,s=(0,o.getClass)(m.default,"guildIcon",l?"Image":"",null!=r?"Joined":"");return null!=t?g(u.default,{onClick:r,active:!0,size:u.default.Sizes.LARGE,guild:t,className:s,animate:!0}):null!=n?g(i.default,{onClick:r,src:n.getIconURL(),className:s,imageClassName:v.default.iconSizeLarge}):null},O.Info=T,O.Data=function(e){var t=e.membersOnline,n=e.members,r=[];return null!=t&&t>0&&r.push(g(a.Fragment,{},"onlineCount",g("i",{className:m.default.statusOnline}),g("span",{className:m.default.onlineCount},void 0,h.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_ONLINE.format({membersOnline:t})))),null!=n&&r.push(g(a.Fragment,{},"memberCount",g("i",{className:m.default.statusOffline}),g("span",{},void 0,h.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_TOTAL.format({count:n})))),r},O.Channel=function(e){var t=e.channel,n=(0,p.getIconNameForChannel)(t);return null==t||null==n?null:[g(d.default,{name:n,width:16,height:16},"channel-icon"),g("span",{className:m.default.channelName},"channel-name",t.name)]},O.Button=S;var A=O;t.default=A},6417:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=c(n(3)),o=n(839),i=c(n(101)),l=n(326),s=c(n(6044)),u=n(0),d=c(n(5307));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return null!=e.application?e.application:null!=e.activity&&null!=e.activity.party_id&&(0,l.isSpotifyParty)(e.activity.party_id)?o.SpotifyApplication:void 0}var p=function(e){var t=e.channel,n=e.message,a=e.activity,o=e.hideParty;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(s.default,{className:d.default.container,activity:a,activityActionType:null!=n.activity?n.activity.type:null,partyId:null!=n.activity?n.activity.party_id:null,userId:n.author.id,application:f(n),message:n,channelId:t.id,guildId:t.getGuildId(),hideParty:o})};p.displayName="MessageActivityInvite";var h=a.default.connectStores([i.default],function(e){var t=e.message;return{activity:null!=t.application?i.default.getApplicationActivity(t.author.id,t.application.id):i.default.findActivity(t.author.id,function(e){return e.type===u.ActivityTypes.LISTENING})}})(p);t.default=h},6418:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=y(n(3)),i=y(n(6419)),l=y(n(830)),s=y(n(35)),u=y(n(42)),d=y(n(161)),c=y(n(833)),f=y(n(6105)),p=n(113),h=n(6047),v=n(0),m=y(n(5312));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var g=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.handleMount=function(){p.ComponentDispatch.dispatch(v.ComponentActions.CHAT_RESIZE)},a.render=function(){var e=this,t=this.props,n=t.news,r=t.application,a=t.spoiler,o=t.gifAutoPlay,i=t.isFocused;if(null==n)return null;var l=function(t){return void 0===t&&(t=!1),_(f.default,{className:m.default.newsCard,news:n,application:r,onApplicationClick:h.toggleGamePopout,onMount:e.handleMount,onClick:function(e,t,n){e.stopPropagation();var r=t.url;null!=r&&window.open(r)},hiddenSpoiler:t,autoPlay:o,shouldAnimate:i,disableCardInteractive:!0})};return a?_(c.default,{type:c.default.Types.ATTACHMENT},void 0,l):l()},r}(a.PureComponent);g.displayName="NewsEmbed";var E=o.default.connectStores([s.default,l.default,i.default,d.default,u.default],function(e){var t=e.embed;if(null!=t.referenceId){var n=l.default.getByApplicationNewsId(t.referenceId);return{news:n,application:null!=n?s.default.getGame(n.game_id):null,spoiler:t.spoiler,gifAutoPlay:u.default.gifAutoPlay,isFocused:d.default.isFocused()}}})(g);t.default=E},6419:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(3)),a=i(n(1)),o=i(n(134));n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l=new Set,s=[],u=[];function d(e,t){void 0===t&&(t=!1),null!=e.embeds&&(t&&!l.has(e.channel_id)||e.embeds.forEach(function(e){var t=e.reference_id;null!=t&&(!function(e){s.includes(e)||(s=[].concat(s,[e]))}(t),o.default.getApplicationNews(t))}))}function c(e){return d(e.message,!0)}function f(e){e.messages.forEach(function(e){return d(e)})}function p(e){var t=e.channelId,n=e.messages;l.add(t),n.forEach(function(e){return d(e,!0)})}function h(e){var t=e.applicationNewsId;s=s.filter(function(e){return e!==t}),u.includes(t)||(u=[].concat(u,[t]))}var v=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getIsResolved=function(e){return u.includes(e)},a.getIsResolving=function(e){return s.includes(e)},a.getResolvingEmbeds=function(){return s},a.getResolvedEmbeds=function(){return u},r}(r.default.Store))(a.default,{CONNECTION_OPEN:function(e){return l.clear(),!1},CHANNEL_SELECT:function(e){var t=e.channelId;return null!=t&&l.add(t),!1},GAME_NEWS_UPDATE:function(e){var t=e.applicationNewsIds;null!=t&&t.forEach(function(e){return h({applicationNewsId:e})})},APPLICATION_NEWS_ITEM_UPDATE:function(e){h({applicationNewsId:e.applicationNewsId})},MESSAGE_CREATE:c,MESSAGE_UPDATE:c,LOAD_MESSAGES_SUCCESS:p,LOAD_MESSAGES_AROUND_SUCCESS:p,LOAD_RECENT_MENTIONS_SUCCESS:f,LOAD_PINNED_MESSAGES_SUCCESS:f,SEARCH_FINISH:function(e){e.messages.forEach(function(e){return f({messages:e})})}});t.default=v},6420:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=s(n(17)),o=s(n(231)),i=s(n(809)),l=s(n(5309));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}t.default=function(e){var t,r=e.icon,s=e.timestamp,d=e.hostname,c=e.title,f=e.onIconClick,p=e.onIconContextMenu;return u("div",{className:l.default.wrapper},void 0,u(i.default,{color:i.default.Colors.MUTED,size:i.default.Sizes.SIZE_12,className:l.default.content},void 0,s," ",null!=d?u("span",{className:l.default.timestamp},void 0,d):null),u(o.default,{className:(0,a.default)(l.default.iconWrapper,(t={},t[l.default.interactive]=null!=f,t)),onClick:f,onContextMenu:p},void 0,u("img",null!=r?{src:r,className:l.default.icon,alt:c}:{src:n(6106),className:l.default.icon,alt:c})))}},6421:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),a=p(n(164)),o=n(903),i=p(n(73)),l=p(n(904)),s=p(n(161)),u=p(n(6422)),d=p(n(5865)),c=n(5881),f=p(n(10));function p(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=function(e){var t,n;function p(){for(var t,n=arguments.length,d=new Array(n),p=0;p<n;p++)d[p]=arguments[p];return(t=e.call.apply(e,[this].concat(d))||this)._isListeningToWindow=!1,t.state={isWindowFocused:s.default.isFocused()},t.addWindowListeners=function(){t._isListeningToWindow=!0,s.default.addChangeListener(t.onChangeWindowStore),t.onChangeWindowStore()},t.removeWindowListeners=function(){t._isListeningToWindow=!1,s.default.removeChangeListener(t.onChangeWindowStore)},t.onChangeWindowStore=function(){var e=s.default.isFocused();e!==t.state.isWindowFocused&&t.setState({isWindowFocused:e})},t.onMouseEnter=function(e,n){var r=n.preloadImage,a=t.props,o=a.width,i=a.height;r((0,c.zoomFit)(o,i))},t.onClickUntrusted=function(e){var n=e.openHref,r=t.props,i=r.original,l=r.src,s=i||l;a.default.show({title:f.default.Messages.HOLD_UP,body:f.default.Messages.MASKED_LINK_BODY.format({url:s}),cancelText:f.default.Messages.MASKED_LINK_CANCEL,confirmText:f.default.Messages.MASKED_LINK_CONFIRM,minorText:f.default.Messages.MASKED_LINK_TRUST_THIS_DOMAIN,onConfirm:n,onConfirmSecondary:function(){(0,o.trustDomain)(s),n()}})},t.onZoom=function(e,n){var a=n.placeholder;e.preventDefault();var o=t.props,s=o.src,d=o.original,c=d||s,f={src:s,original:d||s,width:o.width,height:o.height,animated:o.animated,children:o.children,placeholder:a,isTrusted:l.default.isTrusted(c),onClickUntrusted:t.onClickUntrusted};e.currentTarget instanceof HTMLElement&&e.currentTarget.blur(),i.default.push(function(e){return r.createElement(u.default,h({},f,e,{shouldAnimate:t.state.isWindowFocused}))})},t}n=e,(t=p).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var v=p.prototype;return v.componentDidMount=function(){d.default.isAnimated(this.props)&&!this._isListeningToWindow&&this.addWindowListeners()},v.componentDidUpdate=function(){var e=d.default.isAnimated(this.props);e&&!this._isListeningToWindow?this.addWindowListeners():!e&&this._isListeningToWindow&&this.removeWindowListeners()},v.componentWillUnmount=function(){this._isListeningToWindow&&this.removeWindowListeners()},v.render=function(){return r.createElement(d.default,h({},this.props,{onZoom:this.onZoom,onMouseEnter:this.onMouseEnter,shouldAnimate:this.state.isWindowFocused}))},p}(r.PureComponent);t.default=v,v.displayName="LazyImageZoomable",v.defaultProps={alt:"",shouldLink:!0,autoPlay:!1,animated:!1}},6422:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(5881),i=d(n(5865)),l=d(n(6423)),s=d(n(10)),u=d(n(5313));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var f=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.src,n=e.original,r=e.placeholder,d=e.width,f=e.height,p=e.animated,h=e.children,v=e.isTrusted,m=e.onClickUntrusted,y=(e.maxWidth,e.maxHeight,e.shouldAnimate,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["src","original","placeholder","width","height","animated","children","isTrusted","onClickUntrusted","maxWidth","maxHeight","shouldAnimate"])),_=(0,o.zoomFit)(d,f),g=_.width,E=_.height;return a.createElement("div",y,c(i.default,{src:t,placeholder:r,shouldLink:!1,width:d,height:f,maxWidth:g,maxHeight:E,children:h,animated:p,autoPlay:!0}),null!=n&&c(l.default,{href:n,className:u.default.downloadLink,isTrusted:v,onClickUntrusted:m},void 0,s.default.Messages.OPEN_ORIGINAL_IMAGE))},r}(a.PureComponent);t.default=f,f.displayName="ImageModal"},6423:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),a=l(n(202)),o=l(n(305)),i=l(n(8));function l(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e){var t,n;function l(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).openHref=function(){var e=t.props.href;if(i.default.embedded)window.open(e);else{var n=window.open();n.opener=null,n.location=e,n.target="_blank"}},t.onClick=function(e){var n=t.props,r=n.href,o=n.isTrusted,i=n.onClickUntrusted;null!=a.default.sanitizeUrl(r)?o||(e.preventDefault(),i({openHref:t.openHref})):e.preventDefault()},t}return n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,l.prototype.render=function(){var e=this.props,t=e.title,n=void 0===t?null:t,i=e.children,l=e.href,u=(e.onClickUntrusted,e.isTrusted,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["title","children","href","onClickUntrusted","isTrusted"])),d=a.default.sanitizeUrl(l);return r.createElement(o.default,s({},u,{title:n,target:"_blank",rel:"noreferrer noopener",href:d,onClick:this.onClick}),i||n)},l}(r.PureComponent);t.default=u,u.displayName="MaskedLink"},6424:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=D(n(2)),o=L(n(17)),i=L(n(4)),l=n(232),s=L(n(3)),u=D(n(836)),d=L(n(800)),c=L(n(5851)),f=L(n(5882)),p=L(n(11)),h=L(n(5974)),v=L(n(88)),m=L(n(14)),y=L(n(5941)),_=L(n(189)),g=L(n(807)),E=L(n(112)),I=L(n(231)),T=L(n(158)),S=L(n(302)),O=n(113),A=D(n(320)),N=L(n(45)),C=n(5954),R=n(6049),P=n(0),M=L(n(10)),b=L(n(5322));function L(e){return e&&e.__esModule?e:{default:e}}function D(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e}function G(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function F(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function j(e){var t=e.onClick,n=e.libraryApplication;return F(I.default,{className:b.default.libraryLink,onClick:t},void 0,F(S.default,{name:S.default.Names.LIBRARY,className:b.default.libraryIcon}),F("div",{},void 0,n.isHidden()?M.default.Messages.APPLICATION_STORE_PURCHASE_IN_LIBRARY_HIDDEN:M.default.Messages.APPLICATION_STORE_PURCHASE_IN_LIBRARY))}j.displayName="LibraryLink";var H=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderMedia=function(){var e;return F("div",{className:(0,o.default)(b.default.invalidPoop,(e={},e[b.default.invalidPoopHorizontal]=t.isHorizontal,e))})},t.renderTitle=function(){return t.props.isSelfGift?M.default.Messages.GIFT_EMBED_INVALID_TITLE_SELF:M.default.Messages.GIFT_EMBED_INVALID_TITLE_OTHER},t.renderActions=function(){return t.props.isSelfGift?F(l.Link,{to:P.Routes.APPLICATION_LIBRARY_INVENTORY},void 0,F(E.default,{size:E.default.Sizes.SMALL},void 0,M.default.Messages.GIFT_INVENTORY)):F(E.default,{disabled:!0,size:E.default.Sizes.SMALL},void 0,M.default.Messages.GIFT_EMBED_BUTTON_ACCEPT)},t.renderTagline=function(){return t.props.isSelfGift?M.default.Messages.GIFT_EMBED_INVALID_TAGLINE_SELF:M.default.Messages.GIFT_EMBED_INVALID_TAGLINE_OTHER},t}return G(t,e),t.prototype.render=function(){return F(C.ResponsiveEmbedTile,{isHorizontal:this.isHorizontal,renderTitle:this.renderTitle,renderTagline:this.renderTagline,renderMedia:this.renderMedia,renderActions:this.renderActions})},U(t,[{key:"isHorizontal",get:function(){return this.props.width>=C.HORIZONTAL_EMBED_BREAKPOINT}}]),t}(a.PureComponent);H.displayName="InvalidGift";var x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleViewLibrary=function(e){var n=t.props.libraryApplication;e.preventDefault(),null!=n&&n.isHidden()?d.default.open(P.UserSettingsSections.GAME_LIBRARY):N.default.transitionTo(P.Routes.APPLICATION_LIBRARY,{state:{applicationId:null!=n?n.id:null}})},t.handleVerificationClick=function(e){e.preventDefault(),d.default.open(P.UserSettingsSections.ACCOUNT)},t.handleAccept=function(e){var n=t.props.channelId;e.preventDefault(),e.stopPropagation(),u.openGiftCodeAcceptModal(t.props.code,w({},t.analyticsLocation,{object:P.AnalyticsObjects.BUTTON_CTA}),n)},t.handleEmbedClick=function(e){var n=t.props.giftCode;null!=n&&n.isSubscription&&(e.preventDefault(),d.default.open(P.UserSettingsSections.PREMIUM))},t}G(t,e);var n=t.prototype;return n.componentDidMount=function(){null==this.props.giftCode&&O.ComponentDispatch.dispatch(P.ComponentActions.CHAT_RESIZE)},n.renderActions=function(e){var t=this.props.libraryApplication;return F(T.default,{justify:T.default.Justify.BETWEEN},void 0,F(T.default,{},void 0,this.renderButton(e),null==t||e.isSubscription?null:F(j,{onClick:this.handleViewLibrary,libraryApplication:t})),F(T.default,{align:T.default.Align.END,justify:T.default.Justify.END,className:b.default.metadata,direction:T.default.Direction.VERTICAL},void 0,e.hasMultipleCopies?F("div",{},void 0,this.renderGiftCodeCopiesLeft(e)):null,e.redeemed||e.isClaimed||null!=t||null==e.expiresAt?null:F("div",{},void 0,M.default.Messages.GIFT_EMBED_EXPIRATION.format({hours:e.expiresAt.diff((0,i.default)(),"h")}))))},n.renderGiftCodeCopiesLeft=function(e){return(e.isSubscription?M.default.Messages.GIFT_EMBED_SUBSCRIPTIONS_LEFT:M.default.Messages.GIFT_EMBED_COPIES_LEFT).format({remaining:e.remainingUses,total:e.maxUses})},n.renderButton=function(e){var t=this.props,n=t.libraryApplication,r=t.currentUser,o={onClick:this.handleAccept,color:E.default.Colors.GREEN},i=e.isSubscription?A.doesUserSubscriptionMismatch(e,r):null!=n;return(e.redeemed||i||e.isClaimed||!r.verified)&&(o.color=E.default.Colors.PRIMARY,o.disabled=!0),a.createElement(E.default,w({},o,{size:E.default.Sizes.SMALL}),e.redeemed?M.default.Messages.GIFT_EMBED_BUTTON_CLAIMED:M.default.Messages.GIFT_EMBED_BUTTON_ACCEPT)},n.renderTitle=function(e){var t=this.props,n=t.isSelfGift;return null==t.sku?null:e.isSubscription?n?M.default.Messages.GIFT_EMBED_TITLE_SUBSCRIPTION_SELF:M.default.Messages.GIFT_EMBED_TITLE_SUBSCRIPTION:n?M.default.Messages.GIFT_EMBED_TITLE_SELF:M.default.Messages.GIFT_EMBED_TITLE},n.renderBody=function(e){var t=this.props,n=t.libraryApplication,r=t.isSelfGift,a=t.sku,o=t.gifter,i=t.subscriptionPlan,l=t.currentUser;if(null==a)return M.default.Messages.LOADING;var s=a.isPreorder()?M.default.Messages.PREORDER_SKU_NAME.format({name:a.name}):a.name;if(e.redeemed)return e.isSubscription?M.default.Messages.GIFT_EMBED_BODY_CLAIMED_SELF_SUBSCRIPTION:M.default.Messages.GIFT_EMBED_BODY_CLAIMED_SELF.format({skuName:s,onViewInLibrary:this.handleViewLibrary});if(null==e.subscriptionPlanId&&null!=n)return M.default.Messages.GIFT_EMBED_BODY_OWNED.format({skuName:s,onViewInLibrary:this.handleViewLibrary});if(A.doesUserSubscriptionMismatch(e,l))return M.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_MISMATCH.format({planName:l.premiumType===P.PremiumTypes.TIER_1?M.default.Messages.PREMIUM_TIER_1:M.default.Messages.PREMIUM_TIER_2});if(e.isClaimed)return M.default.Messages.GIFT_EMBED_BODY_CLAIMED_OTHER;if(!l.verified)return M.default.Messages.GIFT_EMBED_BODY_REQUIRES_VERIFICATION.format({onClick:this.handleVerificationClick});if(r)return M.default.Messages.GIFT_EMBED_BODY_SELF;if(e.hasMultipleCopies)return null!=o?(e.isSubscription?M.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_GIVEAWAY:M.default.Messages.GIFT_EMBED_BODY_GIVEAWAY).format({username:o.tag,totalCopies:e.maxUses,skuName:s}):(e.isSubscription?M.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_NO_USER_GIVEAWAY:M.default.Messages.GIFT_EMBED_BODY_NO_USER_GIVEAWAY).format({totalCopies:e.maxUses,skuName:s});if(e.isSubscription){if(null==i)throw new Error("How could you let this happen??");return null!=o?(i.interval===P.SubscriptionIntervalTypes.MONTH?M.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_DEFAULT_MONTHS:M.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_DEFAULT_YEARS).format({username:o.tag,skuName:s,intervalCount:i.intervalCount}):(i.interval===P.SubscriptionIntervalTypes.MONTH?M.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_NO_USER_DEFAULT_MONTHS:M.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_NO_USER_DEFAULT_YEARS).format({skuName:s,intervalCount:i.intervalCount})}return null!=o?M.default.Messages.GIFT_EMBED_BODY_DEFAULT.format({username:o.tag}):M.default.Messages.GIFT_EMBED_BODY_NO_USER_DEFAULT},n.render=function(){var e=this,t=this.props,n=t.giftCode,r=t.resolved,a=t.width,o=t.isSelfGift;return null==n||n.revoked?r?F(H,{isSelfGift:o,width:a}):F(C.ResponsiveLoadingEmbedTile,{isHorizontal:a>=C.HORIZONTAL_EMBED_BREAKPOINT}):F(R.StoreEmbedWithoutDimensions,{skuId:n.skuId,onEmbedClick:this.handleEmbedClick,analyticsSection:P.AnalyticsSections.GIFT_CODE_EMBED,renderCustomActions:function(){return e.renderActions(n)},renderCustomTitle:function(){return e.renderTitle(n)},renderCustomTagline:function(){return e.renderBody(n)},width:a})},U(t,[{key:"analyticsLocation",get:function(){return w({},this.props.analyticsContext.location,{section:P.AnalyticsSections.GIFT_CODE_EMBED})}}]),t}(a.Component);x.displayName="GiftCodeEmbed";var B=s.default.connectStores([p.default,_.default,m.default,g.default,h.default,v.default,y.default],function(e){var t=e.code,n=e.author,r=h.default.get(t),a=null!=r?_.default.get(r.skuId):null;return{sku:a,giftCode:r,gifter:null!=r&&null!=r.userId?m.default.getUser(r.userId):null,subscriptionPlan:null!=r&&null!=r.subscriptionPlanId?y.default.get(r.subscriptionPlanId):null,isSelfGift:null!=r?p.default.getId()===r.userId:p.default.getId()===n.id,currentUser:m.default.getCurrentUser(),resolved:h.default.getIsResolved(t),libraryApplication:null!=a&&null!=r?A.firstLibraryApplicationForGiftCode(r,a,v.default):null}})((0,f.default)((0,c.default)(x)));t.default=B},6425:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=_(n(17)),i=(_(n(814)),_(n(829)),_(n(112))),l=_(n(6107)),s=_(n(6108)),u=_(n(5955)),d=n(130),c=n(6110),f=_(n(5921)),p=_(n(5902)),h=n(5954),v=_(n(6048)),m=n(0),y=_(n(5320));function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var E=600,I=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),h=0;h<n;h++)r[h]=arguments[h];return(t=e.call.apply(e,[this].concat(r))||this).renderActions=function(){var e=t.props,n=e.inLibrary,r=e.sku,a=e.renderCustomActions,o=e.isMouseOver,l=(e.showBuyInline||!r.requiresPayment)&&!n,s=l&&o;return null!=a?a():g("div",{className:y.default.priceOs},void 0,g(p.default,{type:p.default.Types.DIRECTORY_TILE,sku:r,inLibrary:n,className:s?y.default.tilePriceWithVisibleBuyButton:y.default.tilePrice}),g(c.OperatingSystemSection,{systems:[m.OperatingSystems.WINDOWS],className:y.default.platform}),l?g(f.default,{skuId:r.id,applicationId:r.applicationId,size:i.default.Sizes.SMALL,shouldRenderPrice:!0,onStoreListing:!0,onClick:function(e){return e.preventDefault()},className:s?y.default.tileBuyButtonVisible:y.default.tileBuyButton}):null)},t.renderMedia=function(){var e,n,r,i=t.props,c=i.playing,f=i.muted,p=i.showMediaPlaceholder,h=i.onToggleMute,v=i.sku,m=i.isHorizontal,_=i.storeListing;return g(a.Fragment,{},void 0,g(u.default,{className:(0,o.default)(y.default.splashContainer,(e={},e[y.default.splashContainerHorizontal]=m,e)),video:null!=_.previewVideo?(0,d.getAssetURL)(v.applicationId,_.previewVideo):null,image:null!=_.thumbnail?(0,d.getAssetURL)(v.applicationId,_.thumbnail,E):null,title:v.name,playing:c,muted:f,placeholder:p,onToggleMute:h,splashClassName:y.default.splashVideo,splashPlaceholderClassName:y.default.splashPlaceholder}),v.exclusive?g(l.default,{className:(0,o.default)(y.default.exclusiveRegular,(n={},n[y.default.exclusivePlaying]=c,n))}):v.isTheGameAwardsWinner?g(s.default,{className:(0,o.default)(y.default.exclusiveRegular,(r={},r[y.default.exclusivePlaying]=c,r))}):null)},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.sku,n=e.storeListing,r=e.isHorizontal,a=e.className,o=e.renderCustomTagline,i=e.renderCustomTitle;return g(e.isEmbed?h.ResponsiveEmbedTile:v.default,{className:a,renderMedia:this.renderMedia,renderTitle:null!=i?i:function(){return t.name},renderTagline:null!=o?o:function(){return n.tagline},renderActions:this.renderActions,isHorizontal:r})},r}(a.PureComponent);I.displayName="ApplicationTile",I.defaultProps={showMediaPlaceholder:!1,isMouseOver:!1,showBuyInline:!1,isHorizontal:!1,isEmbed:!1};var T=I;t.default=T},6426:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=b(n(2)),i=M(n(3)),l=M(n(133)),s=M(n(11)),u=M(n(328)),d=M(n(20)),c=M(n(23)),f=M(n(14)),p=M(n(132)),h=b(n(795)),v=M(n(6032)),m=M(n(6427)),y=M(n(6430)),_=M(n(6431)),g=M(n(6432)),E=M(n(6434)),I=M(n(6435)),T=M(n(6437)),S=M(n(6438)),O=n(113),A=n(6033),N=M(n(250)),C=M(n(443)),R=M(n(5237)),P=n(0);function M(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function L(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function D(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var k=function(e,t){return function(n){(0,h.openPopout)(n.currentTarget,{closeOnScroll:!1,position:h.default.Positions.RIGHT,shadow:!1,render:function(n){var r=d.default.getChannel(t);return null==r?null:o.createElement(R.default,w({},n,{userId:e.id,guildId:r.getGuildId(),channelId:r.id}))}})}},U=function(e,t){return function(n){var r=d.default.getChannel(t);null!=r&&(0,A.openUserContextMenu)(n,e,r)}},G=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleJoinCall=function(){var e=t.props.message;l.default.selectVoiceChannel(null,e.getChannelId())},t}return D(t,e),t.prototype.render=function(){var e=this.props,t=e.message,n=e.missed,r=e.joinable,a=t.author,o=t.getChannelId();return L(m.default,{message:t,missed:n,joinable:r,onClickUsername:k(a,o),onContextMenuUsername:U(a,o),onClickJoinCall:this.handleJoinCall})},t}(o.PureComponent);G.displayName="Call";var F=i.default.connectStores([u.default,p.default],function(e){var t=e.message,n=s.default.getId(),r=t.getChannelId(),a=u.default.isCallActive(r,t.id),o=p.default.getVoiceState(P.ME,n);return{missed:!a&&null!=t.call&&!t.call.participants.includes(n),joinable:a&&(null==o||o.channelId!==r)}})(G),j=function(e){var t=e.message,n=t.author,r=t.getChannelId();return L(_.default,{message:t,onClickUsername:k(n,r),onContextMenuUsername:U(n,r)})};j.displayName="ChannelNameChange";var H=function(e){var t=e.message,n=t.author,r=t.getChannelId();return L(y.default,{message:t,onClickUsername:k(n,r),onContextMenuUsername:U(n,r)})};H.displayName="ChannelIconChange";var x=function(e){function t(){return e.apply(this,arguments)||this}D(t,e);var n=t.prototype;return n.handleViewPins=function(){O.ComponentDispatch.dispatch(P.ComponentActions.TOGGLE_CHANNEL_PINS)},n.render=function(){var e=this.props.message,t=e.author,n=e.getChannelId();return L(g.default,{message:e,onClickUsername:k(t,n),onContextMenuUsername:U(t,n),onClickPins:__OVERLAY__?null:this.handleViewPins})},t}(o.PureComponent);function B(e){var t=e.message,n=e.otherUser,r=t.author,a=t.getChannelId(),o=C.default.getName(null,a,n);return L(E.default,{message:t,otherUsername:o,onClickUsername:k(r,a),onContextMenuUsername:U(r,a),onClickOtherUsername:k(n,a),onContextMenuOtherUsername:U(n,a)})}x.displayName="ChannelPinnedMessage",B.displayName="RecipientAdd";var V=i.default.connectStores([f.default],function(e){var t=e.message;return{otherUser:f.default.getUser(t.mentions[0])}})(B);function K(e){var t=e.message,n=e.otherUser,r=t.author,a=t.getChannelId(),o=k(r,a),i=U(r,a);if(null!=n&&n.id!==r.id){var l=C.default.getName(null,a,n),s=k(n,a),u=U(n,a);return L(I.default,{message:t,onClickUsername:o,onContextMenuUsername:i,otherUsername:l,onClickOtherUsername:s,onContextMenuOtherUsername:u})}return L(I.default,{message:t,onClickUsername:o,onContextMenuUsername:i})}K.displayName="RecipientRemove";var W=i.default.connectStores([f.default],function(e){var t=e.message;return{otherUser:f.default.getUser(t.mentions[0])}})(K),Y=function(e){var t=e.message,n=t.author,r=t.getChannelId();return L(T.default,{message:t,onClickUsername:k(n,r),onContextMenuUsername:U(n,r)})};Y.displayName="UserJoin";var z=function(e){var t=e.message,n=e.guildName,r=t.author,a=t.getChannelId();return L(S.default,{message:t,guildName:n,onClickUsername:k(r,a),onContextMenuUsername:U(r,a)})};z.displayName="UserPremiumGuildSubscription";var $=i.default.connectStores([d.default,c.default],function(e){var t=e.message,n=d.default.getChannel(t.channel_id),r=null!=n?c.default.getGuild(n.getGuildId()):null;return{guildName:null!=r?r.name:null}})(z),q=((r={})[P.MessageTypes.RECIPIENT_ADD]=V,r[P.MessageTypes.RECIPIENT_REMOVE]=W,r[P.MessageTypes.CALL]=F,r[P.MessageTypes.CHANNEL_NAME_CHANGE]=j,r[P.MessageTypes.CHANNEL_ICON_CHANGE]=H,r[P.MessageTypes.CHANNEL_PINNED_MESSAGE]=x,r[P.MessageTypes.USER_JOIN]=Y,r[P.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION]=$,r[P.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_1]=$,r[P.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_2]=$,r[P.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_3]=$,r),X=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).onContextMenu=function(e){var n=t.props,r=n.message,a=n.channel;(0,n.onContextMenu)(e,{message:r,channel:a,target:e.target})},t}return D(t,e),t.prototype.render=function(){var e,t=this.props,n=t.message,r=t.renderButtons,a=t.channel,o=q[n.type];return null==o?(e=new Error("unknown message type "+n.type),N.default.captureException(e),console.error(e),null):L(v.default,{message:n,channel:a,isCompact:!1,onContextMenu:this.onContextMenu,renderButtons:P.MessageTypesDeletable[n.type]?r:null},void 0,L(o,{message:n}))},t}(o.PureComponent);t.default=X,X.displayName="SystemMessageWrapper"},6427:function(e,t,n){"use strict";t.__esModule=!0,t.default=s;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=i(n(5867)),o=i(n(10));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function s(e){var t=e.message,r=e.missed,i=e.joinable,s=e.onClickUsername,u=e.onContextMenuUsername,d=e.onClickJoinCall,c=t.getAuthorName(),f={onClick:s,onContextMenu:u};return r?l(a.default,{icon:n(6428),timestamp:t.timestamp},void 0,o.default.Messages.SYSTEM_MESSAGE_CALL_MISSED.format({username:c,usernameOnClick:f})):l(a.default,{icon:n(6429),timestamp:t.timestamp},void 0,o.default.Messages.SYSTEM_MESSAGE_CALL_STARTED.format({username:c,usernameOnClick:f}),i?l(a.default.Action,{onClick:d},void 0,o.default.Messages.SYSTEM_MESSAGE_JOIN_CALL):null)}s.displayName="Call"},6428:function(e,t,n){e.exports=n.p+"d80d1fdc43a3c42134a31a39581160ac.svg"},6429:function(e,t,n){e.exports=n.p+"c30220457097b064286a8759a9b6c4af.svg"},6430:function(e,t,n){"use strict";t.__esModule=!0,t.default=l;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=i(n(5867)),o=i(n(10));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.message,i=e.onClickUsername,l=e.onContextMenuUsername;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(a.default,{icon:n(6050),timestamp:t.timestamp},void 0,o.default.Messages.SYSTEM_MESSAGE_CHANNEL_ICON_CHANGE.format({username:t.getAuthorName(),usernameOnClick:{onClick:i,onContextMenu:l}}))}l.displayName="ChannelIconChange"},6431:function(e,t,n){"use strict";t.__esModule=!0,t.default=s;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=l(n(5867)),o=l(n(10)),i=l(n(5325));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.message,l=e.onClickUsername,s=e.onContextMenuUsername;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(a.default,{className:i.default.channelNameChange,icon:n(6050),timestamp:t.timestamp},void 0,o.default.Messages.SYSTEM_MESSAGE_CHANNEL_NAME_CHANGE.format({username:t.getAuthorName(),usernameOnClick:{onClick:l,onContextMenu:s},channelName:t.content}))}s.displayName="ChannelNameChange"},6432:function(e,t,n){"use strict";t.__esModule=!0,t.default=u;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=l(n(305)),o=l(n(5867)),i=l(n(10));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function u(e){var t=e.message,r=e.onClickUsername,l=e.onContextMenuUsername,u=e.onClickPins,d=t.nick,c=t.author,f=t.colorString,p=d||c.username,h=function(e,t){var n=f?{color:f}:null;return s(a.default,{onClick:r,onContextMenu:l,style:n},t,e)},v=null==u?i.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE_NO_CTA_FORMATTED.format({usernameOnClick:h,username:p}):i.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE.format({usernameHook:h,username:p,pinsActionOnClick:u});return s(o.default,{icon:n(6433),timestamp:t.timestamp},void 0,v)}u.displayName="ChannelPinnedMessage"},6433:function(e,t,n){e.exports=n.p+"5da4cdab01d4d89c593c48c62ae0d937.svg"},6434:function(e,t,n){"use strict";t.__esModule=!0,t.default=l;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=i(n(5867)),o=i(n(10));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.message,i=e.otherUsername,l=e.onClickUsername,s=e.onContextMenuUsername,u=e.onClickOtherUsername,d=e.onContextMenuOtherUsername,c=t.getAuthorName(),f=o.default.Messages.SYSTEM_MESSAGE_RECIPIENT_ADD.format({username:c,usernameOnClick:{onClick:l,onContextMenu:s},otherUsername:i,otherUsernameOnClick:{onClick:u,onContextMenu:d}});return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(a.default,{icon:n(6051),timestamp:t.timestamp},void 0,f)}l.displayName="RecipientAdd"},6435:function(e,t,n){"use strict";t.__esModule=!0,t.default=l;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=i(n(5867)),o=i(n(10));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t,i=e.message,l=e.onClickUsername,s=e.onContextMenuUsername,u=i.getAuthorName();if(e.otherUsername){var d=e.otherUsername,c=e.onClickOtherUsername,f=e.onContextMenuOtherUsername;t=o.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE.format({username:u,usernameOnClick:{onClick:l,onContextMenu:s},otherUsername:d,otherUsernameOnClick:{onClick:c,onContextMenu:f}})}else t=o.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE_SELF.format({username:u,usernameOnClick:{onClick:l,onContextMenu:s}});return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(a.default,{icon:n(6436),timestamp:i.timestamp},void 0,t)}l.displayName="RecipientRemove"},6436:function(e,t,n){e.exports=n.p+"aff52bc375fe2da876174301a5c6d09d.svg"},6437:function(e,t,n){"use strict";t.__esModule=!0,t.default=l;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=i(n(6111)),o=i(n(5867));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.message,i=e.onClickUsername,l=e.onContextMenuUsername,s=t.id,u=t.author,d=a.default.getSystemMessageUserJoin(s).format({username:u.username,usernameOnClick:{onClick:i,onContextMenu:l}});return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(o.default,{icon:n(6051),timestamp:t.timestamp},void 0,d)}l.displayName="UserJoin"},6438:function(e,t,n){"use strict";t.__esModule=!0,t.default=c;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a,o=n(5897),i=u(n(5867)),l=n(0),s=u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}var d=((r={})[l.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION]=null,r[l.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_1]=l.PremiumGuildTiers.TIER_1,r[l.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_2]=l.PremiumGuildTiers.TIER_2,r[l.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_3]=l.PremiumGuildTiers.TIER_3,r);function c(e){var t=e.message,r=e.onClickUsername,l=e.onContextMenuUsername,u=e.guildName,c=t.nick,f=t.author,p=function(e){return d[e.type]||null}(t),h=c||f.username,v={onClick:r,onContextMenu:l},m=null==p||null==u?s.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED.format({username:h,usernameOnClick:v}):s.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED_ACHIEVED_TIER.format({username:h,usernameOnClick:v,guildName:u,newTierName:(0,o.getTierName)(p)});return function(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(i.default,{icon:n(6439),timestamp:t.timestamp},void 0,m)}c.displayName="UserPremiumGuildSubscription"},6439:function(e,t,n){e.exports=n.p+"cb89dda4bb5e8a2b97dde8ad650ab818.svg"},6440:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=g(n(5853)),i=g(n(5909)),l=g(n(6441)),s=g(n(6444)),u=g(n(6448)),d=g(n(6449)),c=g(n(6450)),f=g(n(6451)),p=g(n(6452)),h=g(n(6453)),v=g(n(6557)),m=g(n(6558)),y=g(n(6559)),_=n(0);function g(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var I=E(v.default,{}),T=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e,t,n,r,a=this.props,v=a.style,g=a.type,T=a.className,S=a.channel,O=a.message,A=a.invertChildY,N=a.attachment,C=this.props.target;if(N)t=e=N.url;else for(;null!=C;)C instanceof HTMLImageElement&&null!=C.src&&(t=C.src),C instanceof HTMLAnchorElement&&null!=C.href&&(e=C.href),C=C.parentNode;var R=document.getSelection?document.getSelection():null;switch(R&&!R.isCollapsed&&(n=I,r=E(y.default,{value:R.toString()})),g){case _.ContextMenuTypes.MESSAGE_MAIN:return E("div",{className:T,style:v},void 0,E(o.default,{},void 0,n),E(o.default,{},void 0,r),E(o.default,{},void 0,E(l.default,{channel:S,message:O,invertChildY:A}),E(c.default,{channel:S,message:O}),E(h.default,{channel:S,message:O}),E(d.default,{channelId:S.id,message:O}),E(f.default,{channel:S,message:O}),E(p.default,{channel:S,message:O}),E(s.default,{channel:S,message:O})),E(m.default,{href:e,src:t}),E(u.default,{channel:S,message:O}));case _.ContextMenuTypes.MESSAGE_SYSTEM:return E("div",{className:T,style:v},void 0,E(o.default,{},void 0,n),E(o.default,{},void 0,r),E(o.default,{},void 0,E(s.default,{channel:S,message:O})),E(m.default,{href:e,src:t}),E(i.default,{id:O.id}));default:return null}},r}(a.PureComponent);T.displayName="MessageContextMenu";var S=T;t.default=S},6441:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=S(n(797)),o=(S(n(798)),S(n(5850))),i=S(n(3)),l=n(303),s=S(n(73)),u=n(446),d=S(n(199)),c=S(n(241)),f=S(n(159)),p=S(n(42)),h=S(n(81)),v=n(113),m=S(n(169)),y=n(463),_=S(n(6442)),g=S(n(5946)),E=S(n(5956)),I=n(0),T=S(n(10));function S(e){return e&&e.__esModule?e:{default:e}}function O(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var A=(0,a.default)({displayName:"MessageAddReactionItem",mixins:[o.default],renderFrequentlyUsedEmojis:function(){var e=this,t=this.props.channel.getGuildId(),r=c.default.getDisambiguatedEmojiContext(t).getFrequentlyUsedEmojis().filter(function(t){return!m.default.isEmojiDisabled(t,e.props.channel)}).map(function(t){var n,r;n=null==t.id?m.default.getURL(t.surrogatePair):h.default.getEmojiURL({id:t.id,animated:t.animated}),r=null==t.id?d.default.convertSurrogateToName(t.surrogatePair):":"+t.name+":";var a=t.id||t.surrogatePair;return O(_.default,{label:r,image:n,action:function(){return e.handleAddReaction(t)}},a)});return r.push(O(_.default,{label:T.default.Messages.OTHER_REACTIONS,image:n(6443),action:this.renderEmojiPicker},"otherReactions")),r},render:function(){var e=this.props,t=e.channel,n=e.canAddReactions;return p.default.renderReactions&&(t.isPrivate()||n)?O(g.default,{label:T.default.Messages.ADD_REACTION,render:this.renderFrequentlyUsedEmojis,invertChildY:this.props.invertChildY}):null},renderEmojiPicker:function(){(0,l.closeContextMenu)(),v.ComponentDispatch.dispatch(I.ComponentActions.TOGGLE_REACTION_POPOUT(this.props.message.id))},handleAddReaction:function(e){var t=this.props,n=t.channel,r=t.message;(0,u.addReaction)(n.id,r.id,(0,y.toReactionEmoji)(e)),(0,l.closeContextMenu)()},handleReactions:function(){s.default.push(E.default,{message:this.props.message})}}),N=i.default.connectStores([f.default],function(e){var t=e.channel;return{canAddReactions:f.default.can(I.Permissions.ADD_REACTIONS,t)}})(A);t.default=N},6442:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=l(n(17)),o=l(n(231)),i=l(n(824));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var u=function(e){var t,n,r=e.styles,l=e.image,u=e.label,d=e.action,c=e.active,f=void 0!==c&&c,p=e.disabled,h=void 0!==p&&p,v=e.danger,m=void 0!==v&&v;return h||(n=function(e){return d(e,u,f)}),s(o.default,{className:(0,a.default)(i.default.item,i.default.itemImage,(t={},t[i.default.danger]=m,t)),style:r,onClick:n},void 0,s("div",{className:i.default.label},void 0,u),s("img",{alt:"",src:l}))};u.displayName="ImageMenuItem";var d=u;t.default=d},6443:function(e,t,n){e.exports=n.p+"24e5837679a970699e904d047c741540.svg"},6444:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=v(n(797)),o=(v(n(798)),v(n(5850))),i=v(n(3)),l=n(303),s=v(n(162)),u=v(n(159)),d=v(n(14)),c=v(n(5848)),f=v(n(5942)),p=n(0),h=v(n(10));function v(e){return e&&e.__esModule?e:{default:e}}var m=(0,a.default)({displayName:"MessageDeleteItem",mixins:[o.default],render:function(){var e=this.props,t=e.message;return!e.canManageMessages&&t.author.id!==d.default.getCurrentUser().id||t.state===p.MessageStates.SENDING?null:function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(c.default,{label:h.default.Messages.DELETE_MESSAGE,action:this.handleDeleteMessage,danger:!0})},handleDeleteMessage:function(e){var t=this.props,n=t.channel,r=t.message;(0,l.closeContextMenu)(),r.state===p.MessageStates.SEND_FAILED?s.default.deleteMessage(n.id,r.id,!0):e.shiftKey?s.default.deleteMessage(n.id,r.id):f.default.confirmDelete(n,r,!0)}}),y=i.default.connectStores([u.default],function(e){var t=e.channel;return{canManageMessages:u.default.can(p.Permissions.MANAGE_MESSAGES,t)}})(m);t.default=y},6445:function(e,t,n){"use strict";t.__esModule=!0,t.canReportInChannel=d,t.canReportUser=c,t.canReportMessage=function(e){return null!=e&&c(e.author)&&d(e.getChannelId())};var r=s(n(11)),a=s(n(20)),o=s(n(329)),i=s(n(159)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u=50;function d(e){if(i.default.can(l.Permissions.MANAGE_MESSAGES,{channelId:e})){var t=a.default.getChannel(e);if(null!=t){var n=o.default.getMemberCount(t.getGuildId());return null!=n&&n>=u}}return!1}function c(e){if(null==e)return!1;var t=e.id;return r.default.getId()!==t}},6446:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=v(n(6447)),i=v(n(112)),l=v(n(188)),s=v(n(5870)),u=v(n(427)),d=v(n(432)),c=v(n(428)),f=v(n(98)),p=n(0),h=v(n(10));function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._isMounted=!1,y(n).handleReasonChange=n.handleReasonChange.bind(y(n)),y(n).handleReport=n.handleReport.bind(y(n)),n.state={loading:!0,submitting:!1,reasons:[],selectedReason:null},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){var e=this;this._isMounted=!0,o.default.getReasons(this.getReportData()).then(function(t){e._isMounted&&e.setState({reasons:t,loading:!1})})},a.componentWillUnmount=function(){this._isMounted=!1},a.close=function(){(0,this.props.onClose)()},a.renderHeader=function(){var e,t=this.props,n=t.guild,r=t.message,a=t.user;return n?e=h.default.Messages.REPORT_SERVER.format({name:n.toString()}):r?e=h.default.Messages.REPORT_MESSAGE.format({name:r.getAuthorName()}):a&&(e=h.default.Messages.REPORT_USER.format({name:a.tag})),m(l.default.Header,{},void 0,m(f.default,{tag:f.default.Tags.H4},void 0,e))},a.getReportData=function(){var e=this.props,t=e.guild,n=e.message,r=e.user,a=this.state.selectedReason,o={};return null!=n?(o.channel_id=n.getChannelId(),o.message_id=n.id):null!=r?o.user_id=r.id:null!=t&&(o.guild_id=t.id),null!=a&&(o.reason=a),o},a.renderReasons=function(){var e=this.state,t=e.loading,n=e.reasons,r=e.selectedReason;if(t)return m(u.default,{style:{height:100}});var a=n.map(function(e){var t=e.reason;return{name:e.label,desc:e.description,value:t}});return m(s.default,{value:r,onChange:this.handleReasonChange,options:a})},a.renderFooter=function(){var e=this,t=this.state,n=t.loading,r=t.selectedReason,a=t.submitting,o=n||a||null==r;return m(l.default.Footer,{},void 0,m(i.default,{type:"submit",disabled:o,submitting:a},void 0,h.default.Messages.REPORT),m(i.default,{look:i.default.Looks.LINK,color:i.default.Colors.PRIMARY,onClick:function(){return e.close()}},void 0,h.default.Messages.CANCEL))},a.render=function(){return m(l.default,{tag:"form",onSubmit:this.handleReport},void 0,this.renderHeader(),m(l.default.Content,{},void 0,m(d.default,{title:h.default.Messages.FORM_LABEL_REPORT_REASON},void 0,this.renderReasons()),m(c.default,{type:c.default.Types.DESCRIPTION},void 0,h.default.Messages.FORM_REPORT_HELP_TEXT.format({guidelinesURL:p.MarketingURLs.GUIDELINES}))),this.renderFooter())},a.handleReasonChange=function(e){var t=e.value;if("number"!=typeof t)throw new Error("Report.handleReasonChange: Invalid reason type");this.setState({selectedReason:t})},a.handleReport=function(e){var t=this;e.preventDefault(),this.setState({submitting:!0});var n=this.props.onReport;o.default.report(this.getReportData()).then(function(){n&&n(),t.close()},function(){return t.setState({submitting:!1})})},r}(a.Component);_.displayName="Report";var g=_;t.default=g},6447:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(9))&&r.__esModule?r:{default:r},o=n(0);var i={report:function(e){return a.default.post({url:o.Endpoints.REPORT,body:e})},getReasons:function(e){return a.default.get({url:o.Endpoints.REPORT,query:e}).then(function(e){return e.body})}};t.default=i},6448:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=p(n(3)),i=n(303),l=p(n(42)),s=n(5869),u=p(n(5853)),d=p(n(5848)),c=n(0),f=p(n(10));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleCopyID=function(e){var n=t.props.message,r=n.channel_id+"-"+n.id,a=r&&e.shiftKey?r:n.id;(0,s.copy)(a),(0,i.closeContextMenu)()},t.handleCopyLink=function(){var e=t.props,n=e.channel,r=e.message;(0,s.copy)(location.protocol+"//"+location.host+c.Routes.CHANNEL(n.guild_id,n.id,r.id)),(0,i.closeContextMenu)()},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){return!__OVERLAY__&&this.props.developerMode&&s.SUPPORTS_COPY?h(u.default,{},void 0,h(d.default,{label:f.default.Messages.COPY_ID,action:this.handleCopyID}),h(d.default,{label:f.default.Messages.COPY_MESSAGE_LINK,action:this.handleCopyLink})):null},r}(a.PureComponent);v.displayName="MessageDeveloperModeGroup";var m=o.default.connectStores([l.default],function(){return{developerMode:l.default.developerMode}})(v);t.default=m},6449:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(303),i=c(n(162)),l=c(n(14)),s=c(n(5848)),u=n(0),d=c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleEditMessage=function(){(0,o.closeContextMenu)(),i.default.startEditMessage(t.props.channelId,t.props.message.id,t.props.message.content)},t}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){var e=this.props.message,t=l.default.getCurrentUser();return e.state!==u.MessageStates.SEND_FAILED&&e.author.id===t.id?function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(s.default,{label:d.default.Messages.EDIT_MESSAGE,action:this.handleEditMessage}):null},a}(a.PureComponent);f.displayName="MessageEditItem";var p=f;t.default=p},6450:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=h(n(797)),o=(h(n(798)),h(n(5850))),i=h(n(3)),l=h(n(5937)),s=n(303),u=h(n(159)),d=h(n(5848)),c=h(n(5942)),f=n(0),p=h(n(10));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=(0,a.default)({displayName:"MessagePinItem",mixins:[o.default],render:function(){var e=this.props,t=e.channel,n=e.message;return!e.canManageMessages&&!t.isPrivate()||n.state===f.MessageStates.SEND_FAILED?null:!1===n.pinned?v(d.default,{action:this.handlePin,label:p.default.Messages.PIN_MESSAGE}):v(d.default,{action:this.handleUnpin,label:p.default.Messages.UNPIN_MESSAGE})},handlePin:function(e){(0,s.closeContextMenu)(),e.shiftKey?l.default.pinMessage(this.props.channel,this.props.message.id):c.default.confirmPin(this.props.channel,this.props.message)},handleUnpin:function(e){(0,s.closeContextMenu)(),e.shiftKey?l.default.unpinMessage(this.props.channel,this.props.message.id):c.default.confirmUnpin(this.props.channel,this.props.message)}}),y=i.default.connectStores([u.default],function(e){var t=e.channel;return{canManageMessages:u.default.can(f.Permissions.MANAGE_MESSAGES,t)}})(m);t.default=y},6451:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=c(n(797)),o=(c(n(798)),c(n(5850))),i=n(303),l=c(n(73)),s=c(n(5848)),u=c(n(5956)),d=c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,a.default)({displayName:"MessageReactionsItem",mixins:[o.default],render:function(){return this.props.message.reactions&&this.props.message.reactions.length>0?function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(s.default,{label:d.default.Messages.REACTIONS,action:this.handleReactions}):null},handleReactions:function(){(0,i.closeContextMenu)(),l.default.push(u.default,{message:this.props.message})}});t.default=f},6452:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=h(n(797)),o=(h(n(798)),h(n(5850))),i=h(n(3)),l=h(n(164)),s=n(303),u=n(446),d=h(n(159)),c=h(n(5848)),f=n(0),p=h(n(10));function h(e){return e&&e.__esModule?e:{default:e}}var v=(0,a.default)({displayName:"MessageRemoveReactionsItem",mixins:[o.default],render:function(){var e=this.props,t=e.message;return e.canManageMessages&&t.reactions&&t.reactions.length>0?function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(c.default,{label:p.default.Messages.REMOVE_ALL_REACTIONS,action:this.handleRemoveAllReactions,danger:!0}):null},handleRemoveAllReactions:function(e){var t=this;(0,s.closeContextMenu)(),e.shiftKey?(0,u.removeAllReactions)(this.props.channel.id,this.props.message.id):l.default.show({title:p.default.Messages.REMOVE_ALL_REACTIONS_CONFIRM_TITLE,body:p.default.Messages.REMOVE_ALL_REACTIONS_CONFIRM_BODY,confirmText:p.default.Messages.YES_TEXT,cancelText:p.default.Messages.NO_TEXT,onConfirm:function(){(0,u.removeAllReactions)(t.props.channel.id,t.props.message.id)}})}}),m=i.default.connectStores([d.default],function(e){var t=e.channel;return{canManageMessages:d.default.can(f.Permissions.MANAGE_MESSAGES,t)}})(v);t.default=m},6453:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(303),i=d(n(162)),l=d(n(5848)),s=n(0),u=d(n(10));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleResendMessage=function(){var e=t.props,n=e.channel,r=e.message;(0,o.closeContextMenu)(),i.default.retrySendMessage(n,r.id,r.content,r.tts)},t}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){return this.props.message.state===s.MessageStates.SEND_FAILED?function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(l.default,{label:u.default.Messages.RESEND_MESSAGE,action:this.handleResendMessage}):null},a}(a.PureComponent);c.displayName="MessageResendItem";var f=c;t.default=f},6454:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=v(n(3)),i=v(n(801)),l=n(860),s=v(n(133)),u=v(n(11)),d=v(n(458)),c=v(n(74)),f=v(n(6455)),p=n(6052),h=n(0);function v(e){return e&&e.__esModule?e:{default:e}}var m=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isLoadingGuild:!1},t.handleView=function(){var e=t.props,n=e.guildId,r=e.channelId,a=e.messageId;if(e.isMember)i.default.selectGuild(n),s.default.selectChannel(n,r,a);else{var o={page:h.AnalyticsPages.GUILD_CHANNEL,section:h.AnalyticsSections.GUILD_POPOUT,object:h.AnalyticsObjects.CARD};(0,p.startLurking)(n,o)}t.setState({isLoadingGuild:!0})},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.componentDidMount=function(){var e=this.props,t=e.guildId;null==e.guild&&null!=t&&(0,l.fetchGuildDiscoveryMetadata)([t])},o.render=function(){var e=this.props,t=e.loading,n=e.guild,a=e.guildId,o=this.state.isLoadingGuild;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(f.default,{loading:t,name:null!=n?n.name:null,icon:null!=n?n.icon:null,guildId:a,isVerified:null!=n&&null!=n.features&&n.features.has(h.GuildFeatures.VERIFIED),presenceCount:null!=n?n.presenceCount:null,memberCount:null!=n?n.memberCount:null,onView:this.handleView,submitting:o})},a}(a.Component);m.displayName="ConnectedGuildPopout";var y=o.default.connectStores([u.default,d.default,c.default],function(e){var t=e.messageReference,n=t.channel_id,r=t.guild_id,a=t.message_id;return{loading:null!=r&&d.default.isFetchingGuild(r),guild:null!=r&&d.default.getGuildMetadata(r),guildId:r,channelId:n,messageId:a,isMember:c.default.isMember(r,u.default.getId())}})(m);t.default=y},6455:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=h(n(310)),i=h(n(112)),l=h(n(158)),s=h(n(5925)),u=h(n(5866)),d=h(n(426)),c=n(0),f=h(n(10)),p=h(n(5328));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).generateGuildRecord=function(){var e=n.props,t=e.guildId,r=e.icon,a=e.isVerified,i=e.name;return new o.default({id:t,name:i,icon:r,features:a?[c.GuildFeatures.VERIFIED]:[]})},n.state={guildRecord:n.generateGuildRecord()},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidUpdate=function(e){e!==this.props&&this.setState({guildRecord:this.generateGuildRecord()})},a.renderLoading=function(){return v("div",{className:p.default.header},void 0,v(l.default,{align:l.default.Align.CENTER,justify:l.default.Justify.CENTER,direction:l.default.Direction.VERTICAL,className:p.default.headerTop},void 0,v("div",{className:p.default.iconWrapper},void 0,v("div",{className:p.default.iconPlaceholder})),v("div",{className:p.default.headerText},void 0,v("div",{className:p.default.namePlaceholder})),v(l.default,{className:p.default.memberInfo,align:l.default.Align.CENTER},void 0,v("div",{className:p.default.memberCount},void 0,v("div",{className:p.default.memberInfoPlaceholder})),v("div",{className:p.default.memberCount},void 0,v("div",{className:p.default.memberInfoPlaceholder}))),v("div",{className:p.default.viewButtonPlaceholder})))},a.renderGuild=function(){var e=this.props,t=e.name,n=e.presenceCount,r=e.memberCount,a=e.onView,o=e.submitting,c=this.state.guildRecord;return v(l.default,{align:l.default.Align.CENTER,justify:l.default.Justify.CENTER,direction:l.default.Direction.VERTICAL,className:p.default.headerTop},void 0,v(u.default,{guild:c,size:u.default.Sizes.XLARGE,animate:!0,onClick:a,className:p.default.guildIcon}),null!=t?v("div",{className:p.default.guildNameWrapper},void 0,v(s.default,{guild:c,className:p.default.badge,tooltipPosition:d.default.Positions.TOP}),v("span",{className:p.default.guildName},void 0,t)):null,v(l.default,{className:p.default.memberInfo,align:l.default.Align.CENTER},void 0,null!=n?v("div",{className:p.default.memberCount},void 0,v("div",{className:p.default.dotOnline}),v("span",{className:p.default.memberText},void 0,f.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_ONLINE.format({membersOnline:n}))):null,null!=r?v("div",{className:p.default.memberCount},void 0,v("div",{className:p.default.dotOffline}),v("span",{className:p.default.memberText},void 0,f.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_TOTAL.format({count:r}))):null),v(i.default,{className:p.default.viewButton,look:i.default.Looks.FILLED,color:i.default.Colors.BRAND,size:i.default.Sizes.SMALL,onClick:a,submitting:o},void 0,f.default.Messages.GUILD_POPOUT_VIEW_SERVER_BUTTON))},a.render=function(){var e=this.props.loading;return v("div",{className:p.default.guildPopout},void 0,e?this.renderLoading():this.renderGuild())},r}(a.Component);m.displayName="GuildPopout";var y=m;t.default=y},6464:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(82)),a=i(n(9)),o=n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t,n){this.isCanceled=!1,this.searchId=e,this.searchType=t,this.query=n}var t=e.prototype;return t.fetch=function(e,t,n){var i=this;if(!this.isCanceled){var l=this.searchType===o.SearchTypes.GUILD?o.Endpoints.SEARCH_GUILD:o.Endpoints.SEARCH_CHANNEL;this.searchId&&a.default.get({url:l(this.searchId),query:r.default.stringify(this.query)}).then(function(r){i.isCanceled||(200===r.status?e(r):202===r.status&&(i.query.attempts=(i.query.attempts||0)+1,i.retryDelay=r.body.retry_after||5e3,i.retryLater(e,t,n),t(r)))}).catch(function(e){console.error(e),n(e)})}},t.cancel=function(){this.isCanceled=!0,null!=this.indexingPollId&&clearTimeout(this.indexingPollId)},t.retryLater=function(e,t,n){null!=this.indexingPollId&&clearTimeout(this.indexingPollId),this.indexingPollId=setTimeout(this.fetch.bind(this,e,t,n),this.retryDelay)},e}();t.default=l},6465:function(e,t,n){"use strict";t.__esModule=!0,t.analyze=c,t.shouldHighlight=f,t.highlightAST=p,t.createASTHighlighter=function(e){var t=new Set(c(e));return function(e){return p(e,t)}};var r=o(n(6)),a=o(n(6737));function o(e){return e&&e.__esModule?e:{default:e}}var i=new Set(["a","an","and","are","as","at","be","but","by","for","if","in","into","is","it","no","not","of","on","or","such","that","the","their","then","there","these","they","this","to","was","will","with"]);function l(e){return e.replace(/('|\u2019|\uFF07)(s|S)$/,"")}function s(e){return e.toLowerCase()}function u(e){return i.has(e)}function d(e){return 0===e.length}function c(e){return(0,r.default)(e.split(/\W+/)).map(l).reject(d).map(s).reject(u).map(a.default).value()}function f(e,t){return!d(e=s(l(e)))&&!u(e)&&t.has((0,a.default)(e))}function p(e,t){if(Array.isArray(e))e.forEach(function(e){return p(e,t)});else if("string"==typeof e.content&&"codeBlock"!==e.type){var n=[],r="";e.content.split(/(\W+)/g).forEach(function(e){f(e,t)?(r.length>0&&n.push({type:"text",content:r}),n.push({type:"highlight",content:e}),r=""):r+=e}),n.length>0&&(r.length>0&&n.push({type:"text",content:r}),"text"===e.type?e.content=n:e.content=[{type:"text",content:n}])}else null!=e.content&&p(e.content,t);return e}},6466:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(52)),a=o(n(317));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.create=function(e,t){var n=e.hit,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["hit"]),i=a.default.create(o,function(e){return n?t(e):e});return new r({hit:n,message:i})},r.prototype.initialize=function(e){this.message=e.message,this.hit=e.hit||!1},r}(r.default);t.default=i},6474:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=y(n(6)),a=y(n(3)),o=y(n(24)),i=y(n(1)),l=m(n(455)),s=y(n(134)),u=m(n(315)),d=y(n(35)),c=y(n(60)),f=y(n(14)),p=y(n(827)),h=y(n(189)),v=n(0);function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var _="DetectedOffPlatformPremiumPerksStore",g={},E={},I=[];function T(){var e=!1,t=r.default.values(E),n=Array.isArray(t),a=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(a>=t.length)break;o=t[a++]}else{if((a=t.next()).done)break;o=a.value}var i=o,l=i.skuId,c=i.applicationId;if(!I.includes(l)){var v=d.default.getGame(c);if(null!=v){var m=h.default.get(l);null!=m?p.default.applicationIdsFetching.has(v.id)||p.default.isEntitledToSku(f.default.getCurrentUser(),l,v.id,v.id)||!m.available?null!=g[l]&&(delete g[l],e=!0):(g[l]={skuId:l,applicationId:c},e=!0):h.default.isFetching(l)||h.default.didFetchingSkuFail(l)||u.fetchSKU(v.id,l)}else d.default.isFetching(c)||d.default.didFetchingFail(c)||s.default.fetchApplication(c)}}return e}var S=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=a.prototype;return i.initialize=function(){this.waitFor(c.default,h.default,p.default),I=o.default.get(_)||I},i.getDetectedOffPlatformPremiumPerks=function(){return r.default.values(g)},a}(a.default.Store))(i.default,{LOGOUT:function(e){return g={},void(E={})},SKU_FETCH_SUCCESS:function(e){return T()},ENTITLEMENT_FETCH_APPLICATION_SUCCESS:function(e){return T()},ENTITLEMENT_CREATE:function(e){return T()},APPLICATION_FETCH_SUCCESS:function(e){return T()},DETECTED_OFF_PLATFORM_PREMIUM_PERKS_DISMISS:function(e){var t=e.skuId;if(delete g[t],I.includes(t))return!1;I.push(t),o.default.set(_,I)},RUNNING_GAMES_CHANGE:function(e){return function(){var e=!1,t=c.default.getRunningGames(),n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var a;if(n){if(r>=t.length)break;a=t[r++]}else{if((r=t.next()).done)break;a=r.value}var o=a,i=o.id,s=o.distributor;if(null!=i&&s!==v.Distributors.DISCORD){var u=v.OFF_PLATFORM_PREMIUM_PERKS,d=Array.isArray(u),f=0;for(u=d?u:u[Symbol.iterator]();;){var h;if(d){if(f>=u.length)break;h=u[f++]}else{if((f=u.next()).done)break;h=f.value}var m=h,y=m.skuId,_=m.applicationId;_===i&&(I.includes(y)||null==E[y]&&(p.default.applicationIdsFetched.has(_)||p.default.applicationIdsFetching.has(_)||null!=p.default.getForSku(y)||l.fetchUserEntitlementsForApplication(_),E[y]={skuId:y,applicationId:_},e=!0))}}}return e&&T(),e}()}});t.default=S},6475:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(3)),a=s(n(1)),o=s(n(116)),i=s(n(11)),l=s(n(87));n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u=10,d=15552e6,c=!1;var f=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(l.default,i.default)},a.isEligible=function(){return c},r}(r.default.Store))(a.default,{CONNECTION_OPEN:function(e){return c!==(c=l.default.getFriendIDs().length>=u&&o.default.extractTimestamp(i.default.getId())<Date.now()-d)}});t.default=f},6476:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(3)),a=c(n(24)),o=c(n(1)),i=c(n(165)),l=c(n(75)),s=c(n(42)),u=c(n(14)),d=n(0);function c(e){return e&&e.__esModule?e:{default:e}}var f="surveys",p={},h=[{id:d.Experiments.SURVEY_NITRO,url:function(){var e=u.default.getCurrentUser();return"https://www.surveymonkey.com/r/8MZCZGJ?user_id="+(null!=e?e.id:"")},noticeContent:"Help improve Nitro! Take a short survey and let us know your thoughts.",noticeButton:"Take Survey",title:"Nitro Survey",description:"Ask users their thoughts on nitro n stuff",validateDescriptor:function(){var e=u.default.getNullableCurrentUser();return null!=e&&e.premiumType===d.PremiumTypes.TIER_2}},{id:d.Experiments.SURVEY_LIGHT_THEME,url:function(){var e=u.default.getCurrentUser();return"https://www.surveymonkey.com/r/PTYBDKW?user_id="+(null!=e?e.id:"")},noticeContent:"Help improve Light Theme! Take a short survey and let us know your thoughts.",noticeButton:"Take Survey",title:"Light Theme Survey",description:"Ask users their thoughts on light theme",validateDescriptor:function(){return null!=u.default.getNullableCurrentUser()&&s.default.theme===d.ThemeTypes.LIGHT}}];function v(){Object.keys(p).length>0?a.default.set(f,p):a.default.remove(f)}var m=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=r.prototype;return s.initialize=function(){this.syncWith([l.default],function(){return!0});var e=a.default.get(f)||{},t=new Set(h.map(function(e){return e.id}));h.forEach(function(n){var r=n.id;e[r]&&t.has(r)&&(p[r]=!0)}),v(),o.default.wait(function(){return i.default.registerSurveys(h)})},s.getCurrentSurvey=function(){return h.find(function(e){var t=e.id,n=e.validateDescriptor;if(p[t])return!1;var r=l.default.getEligibleExperiment(t);return null!=r&&(null==n||n(r,e))})},r}(r.default.Store))(o.default,{SURVEY_HIDE:function(e){var t=e.id;p[t]=!0,v()},LOGOUT:function(e){return p={},void a.default.remove(f)}});t.default=m},6477:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=D(n(2)),o=L(n(17)),i=n(6186),l=L(n(6063)),s=L(n(3)),u=L(n(802)),d=D(n(6004)),c=L(n(5919)),f=L(n(5899)),p=L(n(191)),h=L(n(6060)),v=L(n(20)),m=L(n(99)),y=L(n(812)),_=L(n(5890)),g=L(n(50)),E=L(n(6177)),I=L(n(231)),T=L(n(795)),S=n(113),O=D(n(6483)),A=D(n(6064)),N=D(n(5898)),C=D(n(6485)),R=n(5893),P=n(0),M=L(n(10)),b=L(n(5345));function L(e){return e&&e.__esModule?e:{default:e}}function D(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function w(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n(5346);var k=512,U=(0,l.default)(d.search,500),G=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={focused:!1},n.handleSetSearchQuery=function(e){var t=e.query,r=e.anchor,a=e.focus,o=e.performSearch,i=e.replace,l=n.props.editorState,s=A.getFirstTextBlock(l);" "!==t.charAt(t.length-1)&&(t+=" "),r&&" "!==s.charAt(r-1)&&" "!==t.charAt(0)&&(t=" "+t),i?(l=A.replaceAllContent(t,l),r=0):l=A.updateContent(t,l,r,a),l=A.truncateContent(l,k),l=n.tokenize(l);var u=r+t.length;l=A.setCollapsedSelection(u,l),n.setEditorState(l),o&&n.search(A.getFirstTextBlock(l))},n.renderPopout=function(){return a.createElement(C.default,{ref:n.setSearchPopoutRef})},n.search=function(e){var t=n.props,r=t.searchId,a=t.isSearching;if(!e){var o=n.props.editorState;e=A.getFirstTextBlock(o)}if(r&&!a){for(var i=N.tokenizeQuery(e),l=N.getSearchQueryFromTokens(i),s=0;s<i.length;s++)N.filterHasAnswer(i[s],i[s+1])||(e=e.substring(0,i[s].start)+e.substring(i[s].end));if(!i.length||0===Object.keys(l).length)return!1;U(r,l,e),n.onBlur()}return!0},n.handleClearSearch=function(e){var t=n.props.editorState,r=n.state.focused;e.preventDefault(),e.stopPropagation(),""!==A.getFirstTextBlock(t)?(t=A.truncateContent(t,0),n.setEditorState(t),r||Promise.resolve().then(function(){return n.blurEditor()})):n.focusEditor()},n.handleFocusSearch=function(e){if(e.prefillCurrentChannel&&A.isEmpty(n.props.editorState)){var t=g.default.getChannelId(),r=v.default.getChannel(t);if(null==r||r.isPrivate())n.focusEditor();else{var a=m.default.getTextChannelNameDisambiguations(r.getGuildId())[r.id],o=null!=a?a.name:r.name;n.handleSetSearchQuery({query:f.default[P.SearchTokenTypes.FILTER_IN].key+"#"+o+" ",replace:!0})}}else n.focusEditor()},n.focusEditor=function(){var e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)._editorRef;e&&Promise.resolve().then(function(){return e.focus()})},n.blurEditor=function(){n._editorRef&&n._editorRef.blur()},n.setEditorRef=function(e){n._editorRef=e},n.setPopoutRef=function(e){n._popoutRef=e},n.setSearchPopoutRef=function(e){n._searchPopoutRef=e},n.onFocus=function(){var e=n.props.searchType;p.default.trackWithMetadata(P.AnalyticEvents.SEARCH_OPENED,{search_type:e}),n.setState({focused:!0})},n.onBlur=function(){n.setState({focused:!1},function(){u.default.close(P.SEARCH_POPOUT_ID),A.isEmpty(n.props.editorState)&&n.clearSearch()})},n.onDownArrow=function(e){return e.preventDefault(),n._searchPopoutRef&&n._searchPopoutRef.focusNextOption(),!0},n.onUpArrow=function(e){return e.preventDefault(),n._searchPopoutRef&&n._searchPopoutRef.focusPreviousOption(),!0},n.onTab=function(e){if(!P.EnableAccessibility)return e.preventDefault(),n._searchPopoutRef&&n._searchPopoutRef.selectOption(),!0},n.handleReturn=function(e){e.preventDefault();var t=!1;return n._searchPopoutRef&&(t=n._searchPopoutRef.selectOption()),t||n.search(),!0},n.onEscape=function(e){return e.preventDefault(),e.stopPropagation(),n.blurEditor(),!0},n.handleBeforeInput=function(e){var t=n.props.editorState,r=n.state.focused;return A.getFirstTextBlock(t).length>=k||(t=A.updateContent(e,t),t=A.truncateContent(t,k),t=n.tokenize(t),n.setEditorState(t),r||n.setState({focused:!0}),!0)},n.handleKeyCommand=function(e){var t=n.props.editorState,r=n.state.focused;switch(e){case"backspace":case"backspace-word":case"backspace-to-start-of-line":case"delete":case"delete-word":return t=A.deleteContent(e,t),t=n.tokenize(t),n.setEditorState(t),r||n.setState({focused:!0}),!0;case"transpose-characters":case"move-selection-to-start-of-block":case"move-selection-to-end-of-block":return t=A.miscCommand(e,t),t=n.tokenize(t),n.setEditorState(t),!0;case"split-block":case"underline":case"bold":case"italic":return!0}},n.handlePastedText=function(e){var t=n.props.editorState,r=n.state.focused;return e=null!=e?e.replace(/\n/g,""):"",t=A.updateContent(e,t),t=A.truncateContent(t,k),t=n.tokenize(t),r||n.setState({focused:!0}),n.setEditorState(t),!0},n.setEditorState=function(e){var t=n.props.searchId;d.setSearchState(t,e)},n.handleKeyBind=function(e){var t=e.key,r=e.metaKey,a=e.shiftKey,o=n.props.editorState;return e.stopPropagation(),"Home"===t||"ArrowLeft"===t&&r?(e.preventDefault(),o=a?A.setToStartSelection(o):A.setCollapsedStartSelection(o),n.setEditorState(o),!0):"End"===t||"ArrowRight"===t&&r?(e.preventDefault(),o=a?A.setToEndSelection(o):A.setCollapsedEndSelection(o),n.setEditorState(o),!0):A.getDefaultKeyBinding(e)},N.clearTokenCache(),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.componentDidMount=function(){S.ComponentDispatch.subscribe(P.ComponentActions.PERFORM_SEARCH,this.search),S.ComponentDispatch.subscribe(P.ComponentActions.SET_SEARCH_QUERY,this.handleSetSearchQuery),S.ComponentDispatch.subscribe(P.ComponentActions.FOCUS_SEARCH,this.handleFocusSearch)},l.componentDidUpdate=function(e){var t=this.props,n=t.editorState,r=t.searchId;if(this.state.focused&&this.ensurePopoutIsOpen(),n!==e.editorState){var a=N.tokenizeQuery(A.getFirstTextBlock(n)),o=O.getSelectionScope(a,n);d.updateAutocompleteQuery(r,a,o),this._editorRef&&A.scrollCursorIntoView(this._editorRef.editor)}},l.componentWillUnmount=function(){S.ComponentDispatch.unsubscribe(P.ComponentActions.PERFORM_SEARCH,this.search),S.ComponentDispatch.unsubscribe(P.ComponentActions.SET_SEARCH_QUERY,this.handleSetSearchQuery),S.ComponentDispatch.unsubscribe(P.ComponentActions.FOCUS_SEARCH,this.handleFocusSearch)},l.tokenize=function(e){var t=N.tokenizeQuery(A.getFirstTextBlock(e)).filter(function(e){return e.type!==c.default.NON_TOKEN_TYPE});return A.applyTokensAsEntities(t,e,f.default)},l.clearSearch=function(){var e=this.props.searchId;e&&d.clearSearchState(e)},l.ensurePopoutIsOpen=function(){this._popoutRef&&!y.default.isOpen(P.SEARCH_POPOUT_ID)&&this._popoutRef.open()},l.handlePastedFiles=function(){return!0},l.handleDroppedFiles=function(){return!0},l.handleDrop=function(){return!0},l.renderInput=function(){var e=this.props.editorState;return a.createElement(i.Editor,{ref:this.setEditorRef,onDownArrow:this.onDownArrow,onUpArrow:this.onUpArrow,onTab:this.onTab,onEscape:this.onEscape,onBlur:this.onBlur,onFocus:this.onFocus,handleReturn:this.handleReturn,handleBeforeInput:this.handleBeforeInput,handleKeyCommand:this.handleKeyCommand,handlePastedText:this.handlePastedText,handlePastedFiles:this.handlePastedFiles,handleDroppedFiles:this.handleDroppedFiles,handleDrop:this.handleDrop,keyBindingFn:this.handleKeyBind,placeholder:M.default.Messages.SEARCH,editorState:e,onChange:this.setEditorState})},l.render=function(){var e,t=this.props,n=t.searchId,r=t.editorState,i=t.hasResults,l=t.className,s=this.state.focused,u=!!A.getFirstTextBlock(r).length;return n?a.createElement(T.default,{ref:this.setPopoutRef,uniqueId:P.SEARCH_POPOUT_ID,render:this.renderPopout,position:T.default.Positions.BOTTOM,toggleClose:!1,animationType:T.default.Animations.NONE,preventInvert:!0},w("div",{className:l},void 0,w(I.default,{className:(0,o.default)(b.default.search,(e={},e[b.default.open]=u||s,e[b.default.focused]=s,e)),onClick:this.focusEditor},void 0,w("div",{className:b.default.searchBar},n,this.renderInput(),w(R.SearchBarIcon,{onClear:this.handleClearSearch,hasContent:u||i,className:b.default.icon}))))):null},r}(a.PureComponent);G.displayName="Search";var F=s.default.connectStores([_.default,h.default,E.default],function(){var e=_.default.getCurrentSearchId();return{searchId:e,searchType:_.default.getSearchType(),isSearching:!!e&&_.default.isSearching(e),editorState:e&&_.default.getEditorState(e)||A.createEmptyEditorState(O.generateDecorators(f.default)),hasResults:_.default.hasResults(e)}})(G);t.default=F},6483:function(e,t,n){"use strict";t.__esModule=!0,t.matchColonGroup=f,t.generateDecorators=function(e){void 0===e&&(e={});var t=[];return Object.keys(e).forEach(function(n){var r=e[n];t.push({strategy:function(e,t,r){return f(r,e,t,n)},component:c[r.componentType]})}),t},t.cleanQueryTokens=function(e,t){var n=!1,r=[];if(e.forEach(function(t,a){var o=e[a];r.push(t.getFullMatch()),d.IS_SEARCH_ANSWER_TOKEN.test(t.type)&&(o&&o.type!==i.default.NON_TOKEN_TYPE||!o)&&(n=!0,r.push(" "))}),!n)return t;return(0,s.replaceAllContent)(r.join(""),t)},t.getSelectionScope=function(e,t){var n=t.getSelection(),r=n.focusOffset,a=n.anchorOffset;return(0,u.getSelectionScope)(e,r,a)},t.Components=void 0;var r,a,o=n(6484),i=(r=n(5919))&&r.__esModule?r:{default:r},l=n(5899),s=n(6064),u=n(5898),d=n(0);var c=((a={})[l.ComponentTypes.FILTER]=o.Filter,a[l.ComponentTypes.ANSWER]=o.Answer,a);function f(e,t,n,r){t.findEntityRanges(function(t){var n=t.getEntity();return null!==n&&e.getEntity(n).getType()===r},n)}t.Components=c},6484:function(e,t,n){"use strict";t.__esModule=!0,t.Answer=t.Filter=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a,o=(r=n(5340))&&r.__esModule?r:{default:r};function i(e,t){return function(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("span",{className:t},void 0,e.children)}i.displayName="renderToken";t.Filter=function(e){return i(e,o.default.searchFilter)};t.Answer=function(e){return i(e,o.default.searchAnswer)}},6485:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SearchPopoutComponent=t.GroupData=void 0;var r,a,o=w(n(2)),i=D(n(17)),l=D(n(29)),s=D(n(6)),u=D(n(4)),d=D(n(3)),c=n(6004),f=n(5919),p=w(n(5899)),h=D(n(20)),v=D(n(74)),m=D(n(6486)),y=D(n(50)),_=D(n(160)),g=D(n(42)),E=D(n(305)),I=D(n(6487)),T=D(n(231)),S=D(n(302)),O=D(n(426)),A=n(5878),N=n(113),C=D(n(308)),R=w(n(5898)),P=D(n(6124)),M=n(0),b=D(n(10)),L=D(n(5344));function D(e){return e&&e.__esModule?e:{default:e}}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function k(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var F=(0,u.default)("2015-05-15").local();var j=function(e,t,n){var r=n.user,a=n.text;if(!r)return G("strong",{},void 0,a);var o=v.default.getNick(e,r.id)||r.username,i=r.avatarURL||r.getAvatarURL();return[G("img",{alt:"",className:L.default.displayAvatar,src:i},"avatar-"+t+"-"+r.id),G("span",{className:L.default.displayedNick},"display-nick-"+t+"-"+r.id,o),G("span",{className:L.default.displayUsername},"display-username-"+t+"-"+r.id,a)]},H=function(e,t,n){var r=n.channel,a=h.default.getChannel(r.parent_id),o=(0,A.getIconNameForChannel)(r);return G("div",{className:L.default.resultChannel},void 0,null!=o?G(S.default,{name:o,className:L.default.searchResultChannelIcon}):null,G("strong",{},void 0,r.toString()),null!=a?G("span",{className:L.default.searchResultChannelCategory},void 0,a.toString()):null)};H.displayName="renderChannel";var x=function(e){var t,n,r,a=e.searchId,o=e.result,l=e.group,s=e.selected,u=e.className,d=e.onSelect,c=e.onFocus,f=e.showFilter,h=e.renderResult;return f&&(n=G("span",{className:L.default.filter},void 0,p.default[l].key||"addme:")),r=h?h(a,l,o):G("strong",{},void 0,o.text),G(T.default,{className:(0,i.default)(L.default.option,u,(t={},t[L.default.selected]=s,t)),onClick:d,onMouseOver:c,onFocus:c},void 0,n,r,G(S.default,{name:S.default.Names.PLUS_ALT,className:L.default.plusIcon}))};x.displayName="ResultComponent";var B=function(e){return o.createElement(x,U({},e,{className:L.default.user,renderResult:j}))};B.displayName="UserResultComponent";var V=function(e){return o.createElement(x,U({},e,{renderResult:H}))};V.displayName="ChannelResultComponent";var K=s.default.memoize(function(e){return R.tokenizeQuery(e).map(function(e,t,n){return R.filterHasAnswer(e,n[t+1])?e:new f.Token(e.getFullMatch(),f.NON_TOKEN_TYPE)})}),W=function(e){function t(){return e.apply(this,arguments)||this}return k(t,e),t.prototype.render=function(){var e,t=this.props,n=t.selected,r=t.onSelect,a=t.onFocus,o=t.result,l="",s=K(o.text).map(function(e){var t,n=e.getFullMatch();if(""===n.trim())return null;var r=M.IS_SEARCH_FILTER_TOKEN.test(e.type),a=M.IS_SEARCH_ANSWER_TOKEN.test(e.type),o=!r&&!a;return l+=n,G("span",{className:(0,i.default)((t={},t[L.default.filter]=r,t[L.default.answer]=a,t[L.default.nonText]=o,t))},e.type+n,n)});return G(T.default,{className:(0,i.default)(L.default.option,L.default.history,(e={},e[L.default.selected]=n,e)),onClick:r,onMouseOver:a,onFocus:a,"aria-label":b.default.Messages.SEARCH_FROM_SUGGESTIONS.format({suggestion:l})},void 0,s,G(S.default,{name:S.default.Names.PLUS_ALT,className:L.default.plusIcon}))},t}(o.PureComponent);W.displayName="HistoryComponent";var Y=((r={})[M.SearchTokenTypes.FILTER_FROM]={titleText:function(){return b.default.Messages.SEARCH_GROUP_HEADER_FROM},component:B},r[M.SearchTokenTypes.FILTER_MENTIONS]={titleText:function(){return b.default.Messages.SEARCH_GROUP_HEADER_MENTIONS},component:B},r[M.SearchTokenTypes.FILTER_HAS]={titleText:function(){return b.default.Messages.SEARCH_GROUP_HEADER_HAS}},r[M.SearchTokenTypes.FILTER_FILE_TYPE]={titleText:function(){return b.default.Messages.SEARCH_GROUP_HEADER_FILE_TYPE}},r[M.SearchTokenTypes.FILTER_IN]={titleText:function(){return b.default.Messages.SEARCH_GROUP_HEADER_CHANNELS},component:V},r[M.SearchAutocompleteGroups.DATES]={titleText:function(){return b.default.Messages.SEARCH_GROUP_HEADER_DATES}},r[M.SearchAutocompleteGroups.HISTORY]={titleText:function(){return b.default.Messages.SEARCH_GROUP_HEADER_HISTORY},groupTip:function(e){var t=e.searchId;return G(O.default,{text:b.default.Messages.SEARCH_CLEAR_HISTORY,position:O.default.Positions.LEFT},void 0,G(T.default,{onClick:function(){return(0,c.clearHistory)(t)},className:L.default.searchClearHistory,title:b.default.Messages.SEARCH_CLEAR_HISTORY,"aria-label":b.default.Messages.SEARCH_CLEAR_HISTORY},void 0,G(S.default,{name:S.default.Names.CLEAR_HISTORY})))},component:W},r[M.SearchAutocompleteGroups.SEARCH_OPTIONS]={titleText:function(){return b.default.Messages.SEARCH_GROUP_HEADER_SEARCH_OPTIONS},groupTip:function(){return G(O.default,{text:b.default.Messages.LEARN_MORE,position:O.default.Positions.LEFT},void 0,G("div",{className:L.default.searchLearnMore},void 0,G(E.default,{href:C.default.getArticleURL(M.HelpdeskArticles.USING_SEARCH),title:b.default.Messages.LEARN_MORE},void 0,G(S.default,{name:S.default.Names.LEARN_MORE}))))},component:function(e){var t,n,r=e.result,a=e.selected,o=e.onSelect,l=e.onFocus,s=R.getSearchOptionAnswer(r.token);return G(T.default,{className:(0,i.default)(L.default.option,L.default.searchOption,(t={},t[L.default.selected]=a,t)),onClick:o,onMouseOver:l,onFocus:l},void 0,G("span",{className:L.default.filter},void 0,r.text),G("span",{className:(0,i.default)((n={},n[L.default.answer]=s,n))},void 0,s),G(S.default,{name:S.default.Names.PLUS_ALT,className:L.default.plusIcon}))}},r);t.GroupData=Y;var z=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={dateHint:(0,p.getRandomDateShortcut)(),selectedIndex:-1},t.handleDateChange=function(e){t.setSearchQuery(e.format(M.SEARCH_DATE_FORMAT)+" ",!0)},t.keepCurrentOptionSelected=function(e,n){var r=t.state.selectedIndex,a=t.props,o=a.resultsState,i=a.totalResults,l=o.mode,s=o.autocompletes,u=e.resultsState;if(l.type!==u.mode.type)t.setState({selectedIndex:-1});else if(n.selectedIndex>=0&&(n.selectedIndex===r||u.autocompletes.length!==s.length)){var d=R.getFlattenedStringArray(u.autocompletes,u.mode.type)[n.selectedIndex-1],c=R.getFlattenedStringArray(s,l.type).indexOf(d);-1!==c?t.setState({selectedIndex:c}):n.selectedIndex>=i&&t.setState({selectedIndex:i-1})}},t.focusNextOption=function(){t.focusOtherOption(1)},t.focusPreviousOption=function(){t.focusOtherOption(-1)},t.focusOtherOption=function(e){var n=t.state.selectedIndex,r=t.props.resultsState;R.showDatePicker(r.mode.filter)||t.focusOption(n+e)},t.focusOption=function(e){var n=e,r=t.props.resultsState.autocompletes,a=t.shouldShowSearchQuery();n<-1||!a&&n<0?n=R.getTotalResults(r)-1:a&&n>=R.getTotalResults(r)?n=-1:!a&&n>=R.getTotalResults(r)&&(n=0),t.setState({selectedIndex:n})},t.selectOption=function(e){var n=e;if(null==n&&(n=t.state.selectedIndex),n<0)return!1;var r=t.props.resultsState,a=r.autocompletes,o=r.mode;if(!R.showDatePicker(o.filter)){var i=R.getFlattenedStringArray(a,o.type);if(n>=i.length)return!1;var l=i[n],u=function(e){var t=!0,n=e.trim();return(0,s.default)(p.default).forOwn(function(e){e.key&&n===e.key&&(t=!1)}),t}(l);return t.setSearchQuery(l,u),!0}},t.setSearchQuery=function(e,n){void 0===n&&(n=!1);var r=t.props.resultsState,a=r.mode,o=r.cursorScope,i=0;a.token?i=a.token.start:o&&o.currentToken&&(i=o.currentToken.end);var l=a.token?a.token.end:i;N.ComponentDispatch.dispatch(M.ComponentActions.SET_SEARCH_QUERY,{query:e,anchor:i,focus:l,performSearch:n}),t.setState({selectedIndex:-1})},t.shouldShowSearchQuery=function(){var e=t.props.resultsState.mode;return e.type!==M.SearchPopoutModes.FILTER&&e.type!==M.SearchPopoutModes.EMPTY&&!R.showDatePicker(e.filter)},t.renderDatePicker=function(){return G("div",{className:L.default.datePicker},void 0,G(I.default,{locale:t.props.locale,onSelect:t.handleDateChange,maxDate:(0,u.default)().local(),minDate:F}),G("div",{className:L.default.datePickerHint},void 0,G("span",{className:L.default.hint},void 0,b.default.Messages.SEARCH_DATE_PICKER_HINT,"Â "),G(T.default,{tag:"span",className:L.default.hintValue,onClick:t.handleHintClick},void 0,t.state.dateHint)))},t.handleHintClick=function(){t.setSearchQuery(t.state.dateHint,!0)},t.performSearch=function(){N.ComponentDispatch.dispatch(M.ComponentActions.PERFORM_SEARCH)},t.renderAutocompletes=function(){var e=t.state.selectedIndex,n=t.props.searchId,r=t.props.resultsState,a=r.autocompletes,o=r.mode;if(R.showDatePicker(o.filter))return t.renderDatePicker();var i=-1;return a.map(function(r){if(!r||!r.results.length)return null;var a,l=Y[r.group]||{};l.titleText&&(a=G("div",{className:L.default.header},void 0,l.titleText()));var s=l.groupTip||null;s&&(s=G(s,{searchId:n}));var u=l.component||x,d=o.type===M.SearchPopoutModes.FILTER_ALL||!1;return G("div",{className:L.default.resultsGroup},r.group,a,s,r.results.map(function(a){return a&&r?(i+=1,G(u,{searchId:n,group:a.group||r.group,result:a,showFilter:d,selected:e===i,onSelect:t.selectOption.bind(null,i),onFocus:t.focusOption.bind(null,i)},r.group+"-"+a.text+"-"+(a.key||""))):null}))})},t}k(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t){var n=this.props,r=n.resultsState,a=n.totalResults,o=r.mode,i=e.resultsState;o.filter&&!i.mode.filter&&a?this.setState({selectedIndex:0}):o.type===M.SearchPopoutModes.FILTER_ALL&&i.mode.type!==o.type?this.setState({selectedIndex:-1}):this.keepCurrentOptionSelected(e,t)},n.render=function(){var e=this,t=this.state.selectedIndex,n=this.props,r=n.resultsState,a=n.totalResults;return G(P.default,{numResults:a,query:r.query,hideQuery:!this.shouldShowSearchQuery(),focusedIndex:t,renderCustomResults:this.renderAutocompletes,renderInitialState:this.renderAutocompletes,onHighlightQuery:function(){return e.focusOption(-1)},onSelectQuery:this.performSearch,renderNoResults:function(){return null}})},t}(o.PureComponent);t.SearchPopoutComponent=z,z.displayName="SearchPopoutComponent";var $=d.default.connectStores([_.default,y.default,m.default,g.default],function(){var e=_.default.getGuildId(),t=y.default.getChannelId(),n=e||t;(0,l.default)(null!=n,"SearchPopout.getStateFromStores - invalid searchId");var r=m.default.getState(n),a=R.getTotalResults(r.autocompletes);return{locale:g.default.locale,searchId:n,totalResults:a,resultsState:r}},{forwardRef:!0})(z);t.default=$},6486:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=m(n(3)),a=m(n(1)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(5899)),i=m(n(5889)),l=m(n(5931)),s=n(5898),u=m(n(74)),d=m(n(812)),c=m(n(5890)),f=m(n(306)),p=m(n(5995)),h=m(n(14)),v=n(0);function m(e){return e&&e.__esModule?e:{default:e}}var y={},_={},g=10,E=3;function I(e,t,n,r,a,o){var i=_[e];return null==i&&(i={results:[],context:p.default.getSearchContext(T.bind(null,e))},_[e]=i),{query:t||"",mode:n||{type:v.SearchPopoutModes.EMPTY,filter:null,token:null},tokens:r||[],cursorScope:a||null,autocompletes:o||[]}}function T(e,t){var n=t.results,r=_[e],a=y[e];if(null!=r&&null!=a){var o=a.mode,i=o.type,l=o.filter;if(i!==v.SearchPopoutModes.EMPTY&&(i!==v.SearchPopoutModes.FILTER||l===v.SearchTokenTypes.FILTER_FROM||l===v.SearchTokenTypes.FILTER_MENTIONS)){var s=E;a.mode.type===v.SearchPopoutModes.FILTER&&(s=g),r.results=function(e,t){void 0===t&&(t=g);(e=e.reduce(function(e,t){var n=h.default.getUser(t.id);return null==n?e:(e.push({text:n.tag,user:n}),e)},[])).length>t&&(e.length=t);return e}(n,s);var u=a.query,d=a.mode,c=a.tokens,f=a.cursorScope,p=a.autocompletes;p=N(e,d),y[e]=I(e,u,d,c,f,p),M.emitChange()}}}function S(e,t,n,r){if(void 0===r&&(r=g),!e)return null;var a;if(e===v.SearchTokenTypes.FILTER_FROM||e===v.SearchTokenTypes.FILTER_MENTIONS){var l=_[n];null==l?a=null:(null!=t&&0!==t.getFullMatch().trim().length||(l.results=i.default.getRecentlyTalked(n,g).map(function(e){var t=e.user;return{user:t,text:t.tag}})),a=l.results)}else{var s=o.default[e]&&o.default[e].getAutocompletions,u=(null!=t?t.getFullMatch():"").trim();a=s?s(u,n,r):[]}return a&&a.length?{group:e,results:a}:null}function O(e){var t,n=(e?e.getFullMatch():"").trim(),r=((t={})[v.SearchTokenTypes.FILTER_FROM]=!f.default.hidePersonalInformation,t[v.SearchTokenTypes.FILTER_MENTIONS]=!f.default.hidePersonalInformation,t[v.SearchTokenTypes.FILTER_HAS]=!0,t[v.SearchTokenTypes.FILTER_BEFORE]=!0,t[v.SearchTokenTypes.FILTER_AFTER]=!0,t[v.SearchTokenTypes.FILTER_ON]=!0,t[v.SearchTokenTypes.FILTER_IN]=c.default.getSearchType()===v.SearchTypes.GUILD,t),a=(0,o.getFilterAutocompletions)(n).filter(function(e){return r[e.token]});return{group:v.SearchAutocompleteGroups.SEARCH_OPTIONS,results:a}}function A(e,t){var n=(e?e.getFullMatch():"").trim(),r=[];return n&&(function(e){var t=c.default.getSearchType(e),n=[v.SearchTokenTypes.FILTER_HAS];return f.default.hidePersonalInformation||(n.push(v.SearchTokenTypes.FILTER_FROM),n.push(v.SearchTokenTypes.FILTER_MENTIONS)),t===v.SearchTypes.GUILD&&n.push(v.SearchTokenTypes.FILTER_IN),n}(t).forEach(function(n){if(n){var a=S(n,e,t,E);a&&r.push(a)}}),r.push(function(e,t){var n=(e?e.getFullMatch():"").trim();if(n){var r=o.default[v.SearchTokenTypes.FILTER_BEFORE].getAutocompletions(n,t,1),a=r[0],i=o.default[v.SearchTokenTypes.FILTER_ON].getAutocompletions(n,t,1),l=i[0],s=o.default[v.SearchTokenTypes.FILTER_AFTER].getAutocompletions(n,t,1),u=s[0];if(!a)return null;var d=[a,l,u];return{group:v.SearchAutocompleteGroups.DATES,results:d}}}(e,t))),(0,s.getTotalResults)(r)<5&&r.push(O(e)),r}function N(e,t){var n=[];return t.type===v.SearchPopoutModes.FILTER?n.push(S(t.filter,t.token,e,g)):t.type===v.SearchPopoutModes.FILTER_ALL?n=A(t.token,e):t.type===v.SearchPopoutModes.EMPTY&&(n.push(O(t.token)),n.push(function(e){if(f.default.hidePersonalInformation)return null;var t=c.default.getHistory(e);return t?{group:v.SearchAutocompleteGroups.HISTORY,results:t.map(function(e){return{text:e}})}:null}(e))),n}function C(){(0,s.clearTokenCache)()}function R(e){var t=y[e];if(t){var n=t.query,r=t.mode,a=t.tokens,o=t.cursorScope,i=t.autocompletes;y[e]=I(e,n,r,a,o,i.map(function(e){return e&&e.group===v.SearchAutocompleteGroups.HISTORY?null:e}))}}function P(){if(d.default.isOpen(v.SEARCH_POPOUT_ID)){var e=c.default.getCurrentSearchId();if(e&&y[e]){var t=y[e],n=t.query,r=t.mode,a=t.tokens,o=t.cursorScope;y[e]=I(e,n,r,a,o,N(e,r))}}}var M=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(u.default,f.default,d.default)},a.getState=function(e){return y[e]||I(e)},r}(r.default.Store))(a.default,{SEARCH_AUTOCOMPLETE_QUERY_UPDATE:function(e){var t=e.searchId,n=e.tokens,r=e.cursorScope;if(!d.default.isOpen(v.SEARCH_POPOUT_ID))return!1;var a,o=(0,s.getQueryFromTokens)(n),i=(0,s.getAutocompleteMode)(r,n),u=y[t]||{},c=_[t],f=!0;if(o!==u.query||u.mode&&u.mode.filter!==i.filter){if(i.type===v.SearchPopoutModes.EMPTY||i.type===v.SearchPopoutModes.FILTER&&i.filter!==v.SearchTokenTypes.FILTER_FROM&&i.filter!==v.SearchTokenTypes.FILTER_MENTIONS)null!=c&&(c.context.clearQuery(),c.results=[]),a=N(t,i);else if(null!=c){var p=i.token;null!=p&&p.getFullMatch().trim().length>0?(l.default.requestMembers(t,p.getFullMatch(),g),c.context.setQuery(p.getFullMatch().trim(),{guild:t}),a=u.autocompletes,f=!1):(c.context.clearQuery(),a=N(t,i))}}else a=u.autocompletes,f=!1;return y[t]=I(t,o,i,n,r,a),f},SEARCH_EDITOR_STATE_CLEAR:function(e){var t=e.searchId,n=_[t];null!=n&&(n.context.destroy(),n.results=[],delete _[t]),delete y[t]},CHANNEL_CREATE:function(e){return C()},CHANNEL_DELETE:function(e){return C()},STREAMER_MODE_UPDATE:function(e){return P()},POPOUT_OPEN:function(e){return P()},SEARCH_MODAL_OPEN:function(e){return P()},SEARCH_CLEAR_HISTORY:function(e){var t=e.searchId;null!=t?R(t):Object.keys(y).forEach(R)},LOGOUT:function(e){Object.keys(y).forEach(R)}}),b=M;t.default=b},6487:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),a=s(n(4)),o=s(n(6796));n(5341);var i,l=s(n(5342));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r){i||(i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===o)t.children=r;else if(o>1){for(var s=new Array(o),u=0;u<o;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:i,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.minDate,n=e.maxDate,r=e.onSelect,a=e.locale,i=e.value;return u("div",{className:l.default.calendarPicker},void 0,u(o.default,{fixedHeight:!0,inline:!0,selected:i,locale:a,onSelect:r,maxDate:n,minDate:t}))},r}(r.PureComponent);d.displayName="CalendarPicker",d.defaultProps={value:(0,a.default)().local()};var c=d;t.default=c},6488:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=s(n(305)),o=n(5880),i=n(308),l=s(n(10));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}t.default=function(){return u(a.default,{href:i.SUPPORT_LOCATION,target:"_blank"},void 0,u(o.Icon,{onClick:function(){},name:o.Icon.Names.NOVA_HELP,tooltip:l.default.Messages.HELP}))}},6489:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=v(n(3)),i=v(n(802)),l=v(n(20)),s=v(n(812)),u=v(n(50)),d=v(n(795)),c=n(5880),f=v(n(6490)),p=n(0),h=v(n(10));function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _="RECENT_MENTIONS_POPOUT",g=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).renderRecentMentionsPopout=function(e){return a.createElement(f.default,y({},e,{onJump:t.handleMentionsJump,channel:l.default.getChannel(u.default.getChannelId()),popoutName:_}))},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.handleMentionsJump=function(e){e.shiftKey||i.default.close(_)},o.render=function(){var e=this.props.open;return m(d.default,{animationType:d.default.Animations.NONE,uniqueId:_,position:d.default.Positions.BOTTOM_RIGHT,preventInvert:!0,render:this.renderRecentMentionsPopout,subscribeTo:p.ComponentActions.TOGGLE_MENTIONS,closeOnScroll:!1},void 0,m(c.Icon,{name:c.Icon.Names.NOVA_AT,tooltip:h.default.Messages.MENTIONS,selected:e}))},r}(a.PureComponent);g.displayName="RecentMentionsButton";var E=o.default.connectStores([s.default],function(){return{open:s.default.isOpen(_)}})(g);t.default=E},6490:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=T(n(2)),o=I(n(17)),i=I(n(797)),l=(I(n(798)),I(n(5850))),s=I(n(3)),u=I(n(6491)),d=(I(n(129)),I(n(6492))),c=I(n(42)),f=T(n(5894)),p=I(n(795)),h=T(n(6182)),v=I(n(5853)),m=I(n(5874)),y=n(0),_=I(n(10)),g=I(n(5347)),E=I(n(824));function I(e){return e&&e.__esModule?e:{default:e}}function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function A(e,t){var n=void 0===t?{}:t,r=n.guildFilter,a=n.roleFilter,o=n.everyoneFilter,i=n.messageId,l=void 0===i?null:i;r=void 0===r?d.default.guildFilter:r,a=void 0===a?d.default.roleFilter:a,o=void 0===o?d.default.everyoneFilter:o;var s=null;e&&(s=r===y.RecentMentionsFilters.ALL_SERVERS?null:e.getGuildId()),u.default.fetchRecentMentions(l,y.MAX_MENTIONS_PER_FETCH,s,a,o)}var N=(0,i.default)({displayName:"FilterPopout",mixins:[s.default.StoreListenerMixin(d.default),l.default],getStateFromStores:function(){return{everyoneFilter:d.default.everyoneFilter,roleFilter:d.default.roleFilter}},toggleRoleFilter:function(){var e=!this.state.roleFilter;u.default.setGuildFilter({roleFilter:e}),A(this.props.channel,{roleFilter:e})},toggleEveryoneFilter:function(){var e=!this.state.everyoneFilter;u.default.setGuildFilter({everyoneFilter:e}),A(this.props.channel,{everyoneFilter:e})},render:function(){return a.createElement("div",this.props,O("div",{className:(0,o.default)(E.default.contextMenu,"theme-"+c.default.theme,g.default.recentMentionsFilterPopout)},void 0,O(v.default,{},void 0,O(m.default,{label:_.default.Messages.RECENT_MENTIONS_FILTER_EVERYONE,action:this.toggleEveryoneFilter,active:this.state.everyoneFilter},"Everyone"),O(m.default,{label:_.default.Messages.RECENT_MENTIONS_FILTER_ROLES,action:this.toggleRoleFilter,active:this.state.roleFilter},"Roles"))))}}),C=(0,i.default)({displayName:"RecentMentions",mixins:[s.default.StoreListenerMixin(d.default,c.default),l.default],setGuildFilter:function(e){u.default.setGuildFilter({guildFilter:e}),A(this.props.channel,{guildFilter:e})},getStateFromStores:function(){return{theme:c.default.theme,messages:d.default.getMentions(),hasMore:d.default.hasMore,loading:d.default.loading,guildFilter:d.default.guildFilter,roleFilter:d.default.roleFilter,everyoneFilter:d.default.everyoneFilter}},loadMore:function(){var e=this.state.messages,t=e&&e.length>0?e[e.length-1].id:null;A(this.props.channel,{messageId:t})},renderEmptyState:function(e){var t=_.default.Messages.NO_RECENT_MENTIONS,r=e===y.ThemeTypes.LIGHT?n(6493):n(6494);return O(h.EmptyStateBottom,{msg:t,image:r})},getProTip:function(){return _.default.Messages.RECENT_MENTIONS_PRO_TIP},renderDisplayPopout:function(e){return a.createElement(N,S({},e,{channel:this.props.channel}))},fetchOnMount:function(e){d.default.hasLoadedEver||A(e)},componentWillUnmount:function(){this.state.messages&&this.state.messages.length>y.MAX_MENTIONS_PER_FETCH&&u.default.truncateMentions(y.MAX_MENTIONS_PER_FETCH)},onCloseMessage:function(e){u.default.deleteRecentMention(e.id)},render:function(){var e=this.state,t=e.messages,n=e.loading,r=e.hasMore;return O(h.default,{className:g.default.recentMentionsPopout,onFetch:this.fetchOnMount,onJump:this.props.onJump,onCloseMessage:this.onCloseMessage,channel:this.props.channel,messages:t,loading:n,hasMore:r,analyticsName:"Recent Mentions",loadMore:this.loadMore,showGuildNames:this.state.guildFilter===y.RecentMentionsFilters.ALL_SERVERS,showChannels:!0,getProTip:this.getProTip,canCloseAllMessages:!0,renderMentioned:!1,renderHeader:this.renderHeader,renderEmptyState:this.renderEmptyState})},renderHeader:function(){var e=this.state.theme,t=_.default.Messages.RECENT_MENTIONS_FILTER_EXPLAIN_EVERYTHING;this.state.everyoneFilter||this.state.roleFilter?this.state.everyoneFilter?this.state.roleFilter||(t=_.default.Messages.RECENT_MENTIONS_EVERYONE_AND_DIRECT):t=_.default.Messages.RECENT_MENTIONS_ROLES_AND_DIRECT:t=_.default.Messages.RECENT_MENTIONS_DIRECT_ONLY;var n=null,r=this.state.guildFilter,a=e===y.ThemeTypes.LIGHT?y.Colors.PRIMARY_DARK:y.Colors.WHITE;return this.props.channel&&!this.props.channel.isPrivate()?n=O(f.Item,{id:y.RecentMentionsFilters.THIS_SERVER,className:g.default.tabBarItem,color:a},void 0,_.default.Messages.THIS_SERVER):r=y.RecentMentionsFilters.ALL_SERVERS,O(h.Header,{title:_.default.Messages.RECENT_MENTIONS,className:g.default.header},void 0,O("div",{className:g.default.headerTabBarWrapper},void 0,O(f.default,{selectedItem:r,onItemSelect:this.setGuildFilter,type:f.Types.TOP,className:g.default.tabBar},void 0,O(f.Item,{id:y.RecentMentionsFilters.ALL_SERVERS,className:g.default.tabBarItem,color:a},void 0,_.default.Messages.ALL_SERVERS),n),O(p.default,{render:this.renderDisplayPopout,position:p.default.Positions.BOTTOM_LEFT,preventInvert:!0,dependsOn:this.props.popoutName,zIndexBoost:100,shadow:!1,offsetY:-25},void 0,O("div",{className:g.default.mentionFilter},void 0,O("div",{className:g.default.label},void 0,_.default.Messages.RECENT_MENTIONS_FILTER_LABEL),O("div",{className:g.default.value},void 0,t)))))}});t.default=C},6491:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(9)),a=i(n(1)),o=n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l={setGuildFilter:function(e){var t=e.guildFilter,n=e.roleFilter,r=e.everyoneFilter;a.default.dispatch({type:o.ActionTypes.SET_RECENT_MENTIONS_FILTER,guildFilter:t,roleFilter:n,everyoneFilter:r})},truncateMentions:function(e){a.default.dirtyDispatch({type:o.ActionTypes.TRUNCATE_MENTIONS,size:e})},fetchRecentMentions:function(e,t,n,i,l){void 0===t&&(t=o.MAX_MENTIONS_PER_FETCH),void 0===n&&(n=null),void 0===i&&(i=!0),void 0===l&&(l=!0),a.default.dirtyDispatch({type:o.ActionTypes.LOAD_RECENT_MENTIONS,guildId:n}),r.default.get({url:o.Endpoints.MENTIONS,query:{before:e,limit:t,guild_id:n,roles:i,everyone:l},retries:2}).then(function(t){var n=t.body;a.default.dispatch({type:o.ActionTypes.LOAD_RECENT_MENTIONS_SUCCESS,messages:n,isAfter:null!=e,hasMoreAfter:n.length>=o.MAX_MENTIONS_PER_FETCH})},function(){a.default.dispatch({type:o.ActionTypes.LOAD_RECENT_MENTIONS_FAILURE})})},deleteRecentMention:function(e){r.default.delete({url:o.Endpoints.MENTIONS_MESSAGE_ID(e),retries:2}),a.default.dispatch({type:o.ActionTypes.RECENT_MENTION_DELETE,id:e})}};t.default=l},6492:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=m(n(6)),a=m(n(3)),o=m(n(24)),i=m(n(1)),l=m(n(317)),s=m(n(11)),u=m(n(20)),d=m(n(236)),c=m(n(87)),f=m(n(160)),p=m(n(42)),h=m(n(14)),v=n(0);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g="recentMentionFilterSettings",E=[],I={},T=!1,S=!0,O=o.default.get(g,{guildFilter:v.RecentMentionsFilters.ALL_SERVERS,everyoneFilter:!0,roleFilter:!0}),A=!1,N=!1;function C(e){if(e instanceof l.default)return e;var t=d.default.getMessage(e.channel_id,e.id);return null!=t?t:l.default.create(e)}function R(e,t){if(void 0===t&&(t=null),e.type!==v.MessageTypes.DEFAULT)return null;t||(t=e.channel_id);var n=u.default.getChannel(t);if(!n||n&&n.type===v.ChannelTypes.DM)return null;if(O.guildFilter===v.RecentMentionsFilters.THIS_SERVER&&n.getGuildId()!==f.default.getGuildId())return null;var r=e.author.id,a=s.default.getId();return c.default.isBlocked(r)||r===a?null:(e=C(e)).isMentioned(a,!O.everyoneFilter,!O.roleFilter)?e:null}function P(e){null!=I[e]&&(delete I[e],E=r.default.filter(E,function(t){return t.id!==e}))}function M(e){P(e.id)}function b(e){var t=_({},O);O=r.default.defaults(r.default.pick(e,["guildFilter","roleFilter","everyoneFilter"]),O),o.default.set(g,O);var n=function(e,n){return t[e]!==O[e]&&O[e]===n},a=n("guildFilter",v.RecentMentionsFilters.THIS_SERVER)||n("everyoneFilter",!1)||n("roleFilter",!1);I={};var i=[];a&&E.forEach(function(e){var t=R(e);t&&(i.push(t),I[t.id]=!0)}),0===(E=i).length&&(A=!1)}function L(){r.default.forEach(E,function(e){e.timestamp.locale(p.default.locale)})}function D(){E=E.filter(function(e){return!c.default.isBlocked(e.author.id)})}var w=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,o,i,l=r.prototype;return l.initialize=function(){this.waitFor(h.default,u.default,d.default)},l.isOpen=function(){return N},l.getMentions=function(){return A||E.length?E:null},a=r,(o=[{key:"hasLoadedEver",get:function(){return A}},{key:"loading",get:function(){return T}},{key:"hasMore",get:function(){return S}},{key:"guildFilter",get:function(){return O.guildFilter}},{key:"everyoneFilter",get:function(){return O.everyoneFilter}},{key:"roleFilter",get:function(){return O.roleFilter}}])&&y(a.prototype,o),i&&y(a,i),r}(a.default.Store))(i.default,{LOAD_RECENT_MENTIONS:function(e){var t=e.guildId;T=!0,null==t&&O.guildFilter===v.RecentMentionsFilters.THIS_SERVER&&b({guildFilter:v.RecentMentionsFilters.ALL_SERVERS})},LOAD_RECENT_MENTIONS_SUCCESS:function(e){var t=e.hasMoreAfter,n=e.messages,a=e.isAfter,o=r.default.map(n,C);a?E=E.concat(o):(E=o,I={}),r.default.forEach(o,function(e){I[e.id]=!0}),T=!1,S=t,A=!0},LOAD_RECENT_MENTIONS_FAILURE:function(e){T=!1},SET_RECENT_MENTIONS_FILTER:b,TRUNCATE_MENTIONS:function(e){for(var t=e.size,n=t;n<E.length;++n)delete I[E[n].id];E=E.slice(0,t),S=!0},CHANNEL_SELECT:function(e){return function(){if(O.guildFilter!==v.RecentMentionsFilters.THIS_SERVER)return!1;A=!1}()},CONNECTION_OPEN:function(e){return E=[],I={},void(A=!1)},GUILD_DELETE:function(e){var t=e.guild;E=r.default.filter(E,function(e){var n=u.default.getChannel(e.channel_id);return!(!n||n.getGuildId()===t.id)||(delete I[e.id],!1)})},MESSAGE_CREATE:function(e){var t=e.channelId,n=R(e.message,t);if(!n)return!1;(E=E.slice()).unshift(n),I[n.id]=!0},MESSAGE_UPDATE:function(e){var t=e.message.id;if(null!=I[t]){var n=r.default.findIndex(E,function(e){return e.id===t}),a=(E=E.slice())[n];E[n]=a.updateMessage(e.message)}},MESSAGE_DELETE:M,RECENT_MENTION_DELETE:M,MESSAGE_DELETE_BULK:function(e){var t=e.ids;r.default.forEach(t,P)},USER_SETTINGS_UPDATE:function(e){return L()},I18N_LOAD_SUCCESS:function(e){return L()},CHANNEL_DELETE:function(e){var t=e.channel;E=r.default.filter(E,function(e){return e.channel_id!==t.id||(delete I[e.id],!1)})},RELATIONSHIP_ADD:function(e){return D()},RELATIONSHIP_REMOVE:function(e){return D()},MENTION_MODAL_OPEN:function(e){N=!0},MENTION_MODAL_CLOSE:function(e){N=!1}});t.default=w},6493:function(e,t,n){e.exports=n.p+"9b0d90147f7fab54f00dd193fe7f85cd.svg"},6494:function(e,t,n){e.exports=n.p+"308e587f3a68412f137f7317206e92c2.svg"},6495:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=h(n(3)),i=h(n(73)),l=h(n(6496)),s=n(5880),u=n(6497),d=h(n(440)),c=n(0),f=h(n(10)),p=h(n(5252));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={memoizedMode:t.props.mode,clicked:!1},t.handleInstallDownload=function(){t.state.clicked||(t.setState({clicked:!0}),(0,u.quitAndInstall)())},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){return e.mode!==t.memoizedMode?{memoizedMode:e.mode,clicked:!1}:null};var a=r.prototype;return a.handleDownloadApps=function(){i.default.push(d.default,{source:"Links"})},a.render=function(){switch(this.props.mode){case c.ActionTypes.UPDATE_AVAILABLE:return v(s.Icon,{hideOnClick:!1,tooltip:f.default.Messages.UPDATE_AVAILABLE,foreground:p.default.downloadArrow,background:p.default.cloud,name:s.Icon.Names.NOVA_DOWNLOADING});case c.ActionTypes.UPDATE_MANUALLY:case c.ActionTypes.UPDATE_DOWNLOADED:return v(s.Icon,{tooltip:f.default.Messages.UPDATE_DOWNLOADED,foreground:p.default.updateIconForeground,onClick:this.handleInstallDownload,name:s.Icon.Names.NOVA_DOWNLOAD});case c.ActionTypes.UPDATE_NOT_AVAILABLE:case c.ActionTypes.UPDATE_ERROR:case c.ActionTypes.CHECKING_FOR_UPDATES:default:return null}},r}(a.PureComponent);m.displayName="UpdateButton";var y=o.default.connectStores([l.default],function(){return{mode:l.default.getState()}})(m);t.default=y},6496:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var i=n(0).ActionTypes.UPDATE_NOT_AVAILABLE;function l(e){i=e.type}var s=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.getState=function(){return i},r}(r.default.Store))(a.default,{CHECKING_FOR_UPDATES:l,UPDATE_NOT_AVAILABLE:l,UPDATE_AVAILABLE:l,UPDATE_MANUALLY:l,UPDATE_ERROR:l,UPDATE_DOWNLOADED:l});t.default=s},6497:function(e,t,n){"use strict";var r;t.__esModule=!0,t.checkForUpdates=function(e){void 0===e&&(e=!1);return a.checkForUpdates(e)},t.quitAndInstall=function(){a.quitAndInstall()};var a=new(((r=n(6498))&&r.__esModule?r:{default:r}).default)},6498:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(9)),a=l(n(1)),o=l(n(8)),i=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var s=36e5,u=function(){function e(e){var t=this;void 0===e&&(e=s),this.updateAvailable=!1,this.hasNativeUpdate=!1,this._callbacks=[],this.checkForUpdates=function(e){return void 0===e&&(e=!1),!e&&t.updateAvailable||(o.default.embedded?o.default.send("CHECK_FOR_UPDATES"):t._handleNativeUpdateNotAvailable()),new Promise(function(e){t.updateAvailable?e(!0):t._callbacks.push(e)})},this._handleCheckingForUpdates=function(){a.default.dispatch({type:i.ActionTypes.CHECKING_FOR_UPDATES})},this._handleNativeUpdateNotAvailable=function(){t._handleCheckingForUpdates(),r.default.get({url:location.protocol+"//"+location.host+"/assets/version."+window.GLOBAL_ENV.RELEASE_CHANNEL+".json",query:{_:Date.now()/1e3/60/5|0}}).then(function(e){null!=e.body&&"53a48403351239f62852f3ec92a202c989a2ad73"!==e.body.hash&&e.body.required?t._handleUpdateDownloaded(!1):t._handleUpdateNotAvailable()},function(){return t._handleUpdateError()})},this._handleUpdateNotAvailable=function(){a.default.dispatch({type:i.ActionTypes.UPDATE_NOT_AVAILABLE}),t._emitCallbacks()},this._handleUpdateAvailable=function(e){t.updateAvailable=!0,t.hasNativeUpdate=e,a.default.dispatch({type:i.ActionTypes.UPDATE_AVAILABLE})},this._handleUpdateManually=function(){t.updateAvailable=!0,t.hasNativeUpdate=!0,a.default.dispatch({type:i.ActionTypes.UPDATE_MANUALLY})},this._handleUpdateError=function(e){t.updateAvailable=!1,a.default.dispatch({type:i.ActionTypes.UPDATE_ERROR,message:e})},this._handleUpdateDownloaded=function(e,n,r,o,l){t._handleUpdateAvailable(e),a.default.dispatch({type:i.ActionTypes.UPDATE_DOWNLOADED,releaseNotes:n,releaseName:r,releaseDate:o,updateURL:l}),t._emitCallbacks()},o.default.embedded&&(o.default.on(i.ActionTypes.CHECKING_FOR_UPDATES,this._handleCheckingForUpdates),o.default.on(i.ActionTypes.UPDATE_NOT_AVAILABLE,this._handleNativeUpdateNotAvailable),o.default.on(i.ActionTypes.UPDATE_AVAILABLE,function(){return t._handleUpdateAvailable(!0)}),o.default.on(i.ActionTypes.UPDATE_ERROR,this._handleUpdateError),o.default.on(i.ActionTypes.UPDATE_DOWNLOADED,function(){return t._handleUpdateDownloaded(!0)}),o.default.on(i.ActionTypes.UPDATE_MANUALLY,this._handleUpdateManually)),this._checkInterval=setInterval(this.checkForUpdates,e)}var t=e.prototype;return t.destroy=function(){clearInterval(this._checkInterval)},t.quitAndInstall=function(){this.updateAvailable&&(this.hasNativeUpdate?o.default.send("QUIT_AND_INSTALL"):location.reload(!0))},t._emitCallbacks=function(){var e=this;this._callbacks.forEach(function(t){return t(e.updateAvailable)}),this._callbacks=[]},e}();t.default=u},6501:function(e,t,n){"use strict";t.__esModule=!0,t.MODAL_CAROUSEL_PREV=t.MODAL_CAROUSEL_NEXT=t.CAROUSEL_PREV=t.CAROUSEL_NEXT=void 0;var r=l(n(821)),a=l(n(438)),o=n(113),i=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){return a.default.hasModalOpen()||r.default.hasLayers()},u={binds:["right"],global:!0,action:function(){if(!s())return o.ComponentDispatch.dispatch(i.ComponentActions.CAROUSEL_NEXT),!1}};t.CAROUSEL_NEXT=u;var d={binds:["left"],global:!0,action:function(){if(!s())return o.ComponentDispatch.dispatch(i.ComponentActions.CAROUSEL_PREV),!1}};t.CAROUSEL_PREV=d;var c={binds:["right","down","space"],global:!0,action:function(){return o.ComponentDispatch.dispatch(i.ComponentActions.MODAL_CAROUSEL_NEXT),!1}};t.MODAL_CAROUSEL_NEXT=c;var f={binds:["left","up"],global:!0,action:function(){return o.ComponentDispatch.dispatch(i.ComponentActions.MODAL_CAROUSEL_PREV),!1}};t.MODAL_CAROUSEL_PREV=f},6502:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(435),i=S(n(3)),l=S(n(800)),s=S(n(5851)),u=S(n(42)),d=S(n(14)),c=S(n(161)),f=S(n(6076)),p=S(n(189)),h=S(n(112)),v=S(n(302)),m=S(n(5911)),y=S(n(18)),_=S(n(190)),g=S(n(45)),E=n(0),I=S(n(10)),T=S(n(5423));function S(e){return e&&e.__esModule?e:{default:e}}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(e){var t,n,r,a,i;function s(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n,r=t.props.isAuthenticated;(e.preventDefault(),r)?(n=t.analyticsLocation,y.default.track(E.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location:n}),l.default.open(E.UserSettingsSections.PREMIUM)):g.default.transitionTo(E.Routes.LOGIN,{search:(0,o.stringify)(E.Routes.APPLICATION_STORE)})},t}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,s.prototype.render=function(){var e=this.props,t=e.size,n=e.className,r=e.isWindowFocused;return A(m.default,{onClick:this.handleClick,innerClassName:T.default.premiumSubscribeButton,color:h.default.Colors.GREEN,size:t,className:n,pauseAnimation:!r},void 0,A(v.default,{name:v.default.Names.NITRO_WHEEL,className:T.default.premiumIcon}),A("span",{className:T.default.buttonText},void 0,I.default.Messages.APPLICATION_STORE_GET_PREMIUM))},r=s,(a=[{key:"analyticsLocation",get:function(){var e=this.props.storeListingAnalyticsProperties,t=null!=e?e.promotionId:null;return O({},this.props.analyticsContext.location,{object:E.AnalyticsObjects.BUTTON_CTA,objectType:E.AnalyticsObjectTypes.BUY,promotionId:t})}}])&&N(r.prototype,a),i&&N(r,i),s}(a.Component);C.displayName="PremiumSubscribeButton";var R=i.default.connectStores([p.default,f.default,d.default,u.default,c.default],function(){var e=d.default.getNullableCurrentUser();return{isUserPremium:_.default.canInstallPremiumApplications(e),isWindowFocused:c.default.isFocused(),isAuthenticated:null!=e}})((0,s.default)(C));t.default=R},6503:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=l(n(17)),o=l(n(10)),i=l(n(5424));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.className;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("div",{className:(0,a.default)(i.default.perkTag,t)},void 0,o.default.Messages.APPLICATION_STORE_PREMIUM_PERKS)};s.displayName="PerkTag";var u=s;t.default=u},6504:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=y(n(3)),i=n(315),l=y(n(5851)),s=(y(n(814)),y(n(35))),u=y(n(6058)),d=y(n(189)),c=y(n(5976)),f=y(n(45)),p=y(n(5891)),h=n(0),v=y(n(10)),m=y(n(5429));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var g=[{id:h.Routes.APPLICATION_STORE,label:v.default.Messages.PREMIUM},{id:h.Routes.APPLICATION_STORE_BROWSE,label:v.default.Messages.APPLICATION_STORE_BROWSE}],E=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.sku;f.default.transitionTo(e.id,{state:{analyticsSource:{object:h.AnalyticsObjects.NAVIGATION_LINK,section:h.AnalyticsSections.NAVIGATION,page:null==n?h.AnalyticsPages.STORE_DIRECTORY_BROWSE:h.AnalyticsPages.STORE_LISTING}}})},t.renderCustomBreadcrumb=function(e,t){return _(p.default.Title,{className:t?null:m.default.breadcrumb,muted:!t},void 0,e.label)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){var e=this.props,t=e.sku,n=e.primarySkuId,r=e.isFetchingPrimarySku;null==n||r||null==t||(0,i.fetchSKU)(t.applicationId,n)},a.render=function(){var e=this.props,t=e.sku,n=e.primarySku,r=[].concat(g),a=h.Routes.APPLICATION_STORE_BROWSE;if(null!=t){var o=h.Routes.APPLICATION_STORE_LISTING_SKU(t.id,t.slug);a=o,null!=n&&r.push({id:h.Routes.APPLICATION_STORE_LISTING_SKU(n.id,n.slug),label:n.name}),r.push({id:o,label:t.name})}return _(c.default,{renderCustomBreadcrumb:this.renderCustomBreadcrumb,onBreadcrumbClick:this.handleClick,breadcrumbs:r,activeId:a})},r}(a.PureComponent);E.displayName="StoreBreadcrumbs";var I=(0,l.default)(o.default.connectStores([d.default,u.default,s.default],function(e){var t=e.sku,n=null!=t?s.default.getGame(t.applicationId):null,r=null!=n&&null!=n.primarySkuId&&n.primarySkuId!==t.id?n.primarySkuId:null;return{primarySkuId:r,isFetchingPrimarySku:null!=r&&d.default.isFetching(r),primarySku:null!=r?d.default.get(r):null}})(E));t.default=I},6505:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(1));n(0);function o(e){return e&&e.__esModule?e:{default:e}}var i,l,s;function u(){l={},i={},s=new Set}u();var d=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getStatisticsForApplication=function(e){return i[e]},a.shouldFetchStatisticsForApplication=function(e){var t=l[e];return!s.has(e)&&(null==t||Date.now()-t>36e5)},r}(r.default.Store))(a.default,{APPLICATION_ACTIVITY_STATISTICS_FETCH_START:function(e){var t=e.applicationId;s.add(t)},APPLICATION_ACTIVITY_STATISTICS_FETCH_FAIL:function(e){var t=e.applicationId;s.delete(t)},APPLICATION_ACTIVITY_STATISTICS_FETCH_SUCCESS:function(e){var t=e.statistics,n=e.applicationId;l[n]=Date.now(),s.delete(n),i[n]=t},LOGOUT:function(e){return u()}});t.default=d},6506:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a,o=(r=n(5441))&&r.__esModule?r:{default:r};t.default=function(){return function(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("div",{className:o.default.divider})}},6507:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=c(n(4)),i=n(810),l=n(242),s=c(n(305)),u=c(n(158)),d=c(n(5447));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getCoverImageURL=function(){var e=this.props,t=e.game,n=e.news.thumbnail;return null!=n&&null!=n.proxy_url?(0,l.getSizedImageSrc)(n.proxy_url,700,210,"png"):t.getSplashURL(700)},a.getCoverImageURLStyle=function(){var e=this.getCoverImageURL();return null!=e?{backgroundImage:"url("+e+")"}:null},a.getTimestamp=function(){var e=this.props.news;return null!=e.timestamp?(0,i.dateFormat)((0,o.default)(e.timestamp),"LL"):null},a.renderOpenBody=function(){var e=this.props.news,t=this.getCoverImageURLStyle(),n=this.getTimestamp();return f(u.default,{className:d.default.openWrap},void 0,f("div",{className:d.default.openBody},void 0,null!=n?f("div",{className:d.default.openTimestamp},void 0,n):null,f("div",{className:d.default.openTitle},void 0,e.title),f("div",{className:d.default.openDescription},void 0,e.description)),f("div",{className:d.default.openImage,style:t}))},a.renderCollapsedBody=function(){var e=this.props.news,t=this.getCoverImageURLStyle(),n=null!=e.timestamp?(0,i.dateFormat)((0,o.default)(e.timestamp),"LL"):null;return f(u.default,{className:d.default.collapsedWrap},void 0,f("div",{className:d.default.collapsedImage,style:t}),f(u.default,{className:d.default.collapsedBody,direction:u.default.Direction.VERTICAL,justify:u.default.Justify.CENTER,style:{margin:16}},void 0,null!=n?f("div",{className:d.default.collapsedTimestamp},void 0,n):null,f("div",{className:d.default.collapsedTitle},void 0,e.title)))},a.render=function(){var e=this.props,t=e.collapsed,n=e.news;return f(s.default,{href:n.url,target:"_blank",className:d.default.item},void 0,t?this.renderCollapsedBody():this.renderOpenBody())},r}(a.PureComponent);t.default=p,p.displayName="ApplicationNewsItem"},6508:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ItemSizes=void 0;var r,a=g(n(2)),o=_(n(17)),i=_(n(304)),l=_(n(5882)),s=g(n(6130)),u=g(n(6840)),d=_(n(231)),c=n(5924),f=_(n(6109)),p=_(n(5939)),h=_(n(5949)),v=n(113),m=n(0),y=_(n(5452));function _(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function E(){var e=function(e,t){t||(t=e.slice(0));return e.raw=t,e}(["grayscale(",")"]);return E=function(){return e},e}function I(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S={top:85,left:85,bottom:85,right:85},O={SMALL:{width:640,height:360,margin:15},MEDIUM:{width:880,height:495,margin:20}};t.ItemSizes=O;var A={width:1920,height:1080},N={width:1280,height:720},C=function(e){var t,n,r=e.item,a=e.size,o=e.onPlay,i=e.onEnded,l=e.onClick,s=e.playable,u=e.volume,f=e.isMuted,h=e.onVolumeChange,v=e.onMute;if(r.type===m.CarouselMediaTypes.YOUTUBE_VIDEO)t=T({url:(0,m.YOUTUBE_PREVIEW_URL)(r.youtubeVideoId)},A),n=T({url:(0,m.YOUTUBE_EMBED_URL)(r.youtubeVideoId)+"?rel=0&iv_load_policy=3&showinfo=0&modestbranding=1"},N);else{var _=null!=r.width?r.width:0,g=null!=r.height?r.height:0;t={url:r.thumbnailSrc,width:_,height:g},n={url:r.src,proxyURL:r.src,width:_,height:g}}var E=I(c.EmbedVideo,{href:null,thumbnail:t,video:n,allowFullScreen:!0,VideoComponent:p.default,maxHeight:a.height,maxWidth:a.width,onPlay:o,onEnded:i,playable:s,className:y.default.video,volume:u,onVolumeChange:h,autoMute:f,onMute:v,autoPlay:!0});return s?E:I(d.default,{onClick:l},void 0,E)},R=function(){return I("div",{className:y.default.paginationVideoOverlay},void 0,I(h.default,{inactive:!0,className:y.default.paginationVideoPlayPill}))};R.displayName="VideoOverlay";var P=I(R,{}),M=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={currentIndex:0,animate:!0,playingVideo:!1,hasInteracted:!1,hoveringPreviousItem:!1,hoveringNextItem:!1,volume:1,isMuted:!0},t.getItemSize=function(){var e=t.props.width,n=O.MEDIUM;return null!=e&&e<n.width&&(n=O.SMALL),n},t.setItem=function(e,n){var r=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),a=r.props,o=a.items,i=a.onIntentionalChange,l=r.state,s=l.currentIndex,d=l.hasInteracted,c=(0,u.normalizeIndex)(s,o.length),f=(0,u.normalizeIndex)(e,o.length),p=1===Math.abs(e-c)||e===o.length-1&&0===c||0===e&&c===o.length-1;n&&(d=!0),t.setState({playingVideo:!1,currentIndex:f,animate:p,hasInteracted:d}),n&&null!=i&&i(o[f],c,f)},t.autoNext=function(){t.setItem(t.state.currentIndex+1,!1)},t.manualNext=function(){t.setItem(t.state.currentIndex+1,!0)},t.manualPrevious=function(){t.setItem(t.state.currentIndex-1,!0)},t.handlePlay=function(e){return t.setState({playingVideo:!0,hasInteracted:!e})},t.handleEnded=function(){t.state.hasInteracted||t.autoNext()},t.handleVolumeChange=function(e){t.setState({volume:e,hasInteracted:!0})},t.handleMute=function(e){t.setState({isMuted:e,hasInteracted:!0})},t.handleVideoClick=function(e){t.setItem(e,!0)},t.handleEdgeItemMouseLeave=function(){t.setState({hoveringPreviousItem:!1,hoveringNextItem:!1})},t.renderCarouselImage=function(e,n,r){return r?I(d.default,{onClick:function(){return t.handleCurrentItemClick(e,n)},className:y.default.itemImageWrapper},void 0,I("img",{src:e.src,alt:"",className:y.default.currentImage})):I(d.default,{onClick:function(){return t.setItem(n,!0)},className:y.default.itemImageWrapper},void 0,I("img",{alt:"",className:y.default.itemImage,src:e.src,draggable:!1}))},t.renderItem=function(e,n,r){var a,l=t.state,s=l.currentIndex,d=l.volume,c=l.isMuted,f=n===(0,u.normalizeIndex)(s,t.props.items.length);return I(i.default.div,{className:(0,o.default)(y.default.item,(a={},a[y.default.currentItem]=f,a)),style:null!=r?t.getStyle(n,r):null,onMouseEnter:f?null:function(){return t.handleEdgeItemMouseEnter(n)},onMouseLeave:f?null:t.handleEdgeItemMouseLeave},void 0,e.type===m.CarouselMediaTypes.VIDEO||e.type===m.CarouselMediaTypes.YOUTUBE_VIDEO?I(C,{item:e,size:t.getItemSize(),onPlay:t.handlePlay,onEnded:t.handleEnded,playable:f,onClick:function(){return t.handleVideoClick(n)},volume:d,onVolumeChange:t.handleVolumeChange,isMuted:c,onMute:t.handleMute}):t.renderCarouselImage(e,n,f))},t.renderPaginationItem=function(e,n){var r=t.state.currentIndex===n;return I("div",{className:(0,o.default)(y.default.paginationItem,r?y.default.selectedStorePaginationItem:y.default.unselectedStorePaginationItem)},"page-"+n,I("img",{alt:null==e.alt?n:e.alt,className:y.default.storePaginationImg,src:t.getPaginationSrc(e),draggable:!1}),e.type===m.CarouselMediaTypes.YOUTUBE_VIDEO||e.type===m.CarouselMediaTypes.VIDEO?P:null,r?I("div",{className:y.default.overlappingBorder}):null)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){v.ComponentDispatch.subscribe(m.ComponentActions.CAROUSEL_PREV,this.manualPrevious),v.ComponentDispatch.subscribe(m.ComponentActions.CAROUSEL_NEXT,this.manualNext)},a.componentWillUnmount=function(){v.ComponentDispatch.unsubscribe(m.ComponentActions.CAROUSEL_PREV,this.manualPrevious),v.ComponentDispatch.unsubscribe(m.ComponentActions.CAROUSEL_NEXT,this.manualNext)},a.getStyle=function(e,t){var n=t.interpolate({inputRange:[0,1],outputRange:[1,0],extrapolate:i.default.Extrapolate.CLAMP});return{opacity:t.interpolate({inputRange:[0,1],outputRange:[.3,1],extrapolate:i.default.Extrapolate.CLAMP}),filter:i.default.template(E(),n)}},a.handleCurrentItemClick=function(e,t){var n=this.props.onCurrentItemClick;null!=n&&n(e,t),this.setState({hasInteracted:!0})},a.handleEdgeItemMouseEnter=function(e){var t=this.state.currentIndex;e<t?this.setState({hoveringPreviousItem:!0}):e>t&&this.setState({hoveringNextItem:!0})},a.renderCarousel=function(){var e,t,n=this.props.items,r=this.state,a=r.currentIndex,i=r.animate,l=r.hoveringPreviousItem,d=r.hoveringNextItem,c=I(u.default,{items:n,itemSize:this.getItemSize(),renderItem:this.renderItem,currentIndex:a,animate:i,edgeItems:2});return n.length<=1?c:I("div",{className:y.default.carouselButtonsContainer},void 0,c,I(s.CarouselPrevious,{onClick:this.manualPrevious,className:(0,o.default)(y.default.arrow,(e={},e[y.default.arrowHovered]=l,e))}),I(s.CarouselNext,{onClick:this.manualNext,className:(0,o.default)(y.default.arrow,(t={},t[y.default.arrowHovered]=d,t))}))},a.getPaginationSrc=function(e){return e.type===m.CarouselMediaTypes.YOUTUBE_VIDEO?(0,m.YOUTUBE_PREVIEW_URL)(e.youtubeVideoId):e.type===m.CarouselMediaTypes.IMG?e.src:e.type===m.CarouselMediaTypes.VIDEO?e.thumbnailSrc:null},a.render=function(){var e=this,t=this.props,n=t.items,r=t.className,a=t.autoplayInterval,o=t.paused,i=this.state,l=i.currentIndex,u=i.playingVideo,d=i.hasInteracted;return I(f.default,{pauseOnHover:!0,onInterval:this.autoNext,interval:a,className:r,disable:u||d||o},void 0,this.renderCarousel(),I("div",{className:y.default.pagination},void 0,I(s.default,{renderItem:this.renderPaginationItem,scrollToPadding:S,items:n,selectedIndex:l,onSetItem:function(t){return e.setItem(t,!0)},paginationContainerClass:y.default.scroller,gutterStyle:s.default.Gutter.STORE,align:n.length<6?s.default.Align.LEFT:s.default.Align.CENTER})))},r}(a.PureComponent);M.displayName="MediaCarousel",M.defaultProps={autoplayInterval:8e3,paused:!1};var b=(0,l.default)(M);t.default=b},6509:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.MessageStyles=void 0;var r,a=f(n(2)),o=c(n(163)),i=c(n(3)),l=c(n(1)),s=f(n(315)),u=c(n(6076)),d=c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var p=(0,o.default)({SHORT:null,LONG:null});t.MessageStyles=p;var h=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.getText=function(e,t){if(429===e.status)switch(t){case p.SHORT:return d.default.Messages.APPLICATION_STORE_LISTING_PURCHASE_RATE_LIMIT_ERROR_SHORT;case p.LONG:return d.default.Messages.APPLICATION_STORE_LISTING_PURCHASE_RATE_LIMIT_ERROR}switch(t){case p.SHORT:return d.default.Messages.APPLICATION_STORE_LISTING_PURCHASE_GENERIC_ERROR_SHORT;case p.LONG:return d.default.Messages.APPLICATION_STORE_LISTING_PURCHASE_GENERIC_ERROR}},o.componentWillUnmount=function(){this.props.purchaseError&&l.default.wait(function(){return s.clearPurchaseError()})},o.render=function(){var e=this.props,t=e.className,n=e.purchaseError,a=e.messageStyle;return null==n?null:function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("div",{className:t},void 0,this.getText(n,a))},a}(a.PureComponent);h.displayName="ApplicationStorePurchaseError",h.defaultProps={messageStyle:p.LONG};var v=i.default.connectStores([u.default],function(){return{purchaseError:u.default.error}})(h);t.default=v},6510:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=p(n(17)),i=n(810),l=n(6511),s=p(n(305)),u=p(n(302)),d=n(0),c=p(n(10)),f=p(n(5462));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=function(e){var t=e.iconName,n=e.className;return h("div",{className:(0,o.default)(f.default.iconCircle,n)},void 0,h(u.default,{name:t,className:f.default.icon}))};v.displayName="IconCircle";var m=function(e){var t=e.circle,n=e.smallHeader,r=e.text,a=e.className;return h("div",{className:(0,o.default)(f.default.recommendationReason,a)},void 0,t,h("div",{className:f.default.description},void 0,null!=n?h("div",{className:f.default.smallHeader},void 0,n):null,h("div",{className:f.default.text},void 0,r)))};m.displayName="Unit";var y=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderReviewAggregator=function(e){var t=this.props.className,n=(0,l.getRatingTier)(e);return null==n?null:h(m,{circle:null!=e.url?h(s.default,{href:e.url,useDefaultUnderlineStyles:!1,className:(0,o.default)(f.default.reviewCircle,f.default.circleAnchor),style:{backgroundColor:n.color}},void 0,e.criticScore):h("div",{className:f.default.reviewCircle,style:{backgroundColor:n.color}},void 0,e.criticScore),smallHeader:c.default.Messages.APPLICATION_STORE_SECTION_TITLE_METACRITIC,text:n.label,className:t})},a.render=function(){var e=this.props,t=e.reason,n=e.className;return t.type===d.StoreRecommendationTypes.RECENT_RELEASE_DATE?h(m,{className:n,circle:h(v,{iconName:u.default.Names.CALENDAR}),smallHeader:c.default.Messages.APPLICATION_STORE_NEW_RELEASE,text:(0,i.dateFormat)(t.releaseDate,"LL")}):t.type===d.StoreRecommendationTypes.RELEASE_DATE?h(m,{className:n,circle:h(v,{iconName:u.default.Names.CALENDAR}),smallHeader:c.default.Messages.APPLICATION_STORE_DETAILS_RELEASE_DATE,text:(0,i.dateFormat)(t.releaseDate,"LL")}):t.type===d.StoreRecommendationTypes.EARLY_ACCESS?null!=t.releaseDate?h(m,{className:n,circle:h(v,{iconName:u.default.Names.EARLY_ACCESS,className:f.default.earlyAccess}),smallHeader:c.default.Messages.APPLICATION_STORE_EARLY_ACCESS,text:(0,i.dateFormat)(t.releaseDate,"LL")}):h(m,{className:n,circle:h(v,{iconName:u.default.Names.EARLY_ACCESS,className:f.default.earlyAccess}),text:c.default.Messages.APPLICATION_STORE_EARLY_ACCESS}):t.type===d.StoreRecommendationTypes.METACRITIC_SCORE?this.renderReviewAggregator(t.reviewAggregator):t.type===d.StoreRecommendationTypes.FLAVOR_TEXT?h(m,{circle:h(v,{iconName:u.default.Names.CHECKMARK}),text:t.flavorText,className:n}):t.type===d.StoreRecommendationTypes.HAS_FREE_PREMIUM_CONTENT?h(m,{className:n,circle:h(v,{iconName:u.default.Names.NITRO_WHEEL,className:f.default.premiumCircle}),text:c.default.Messages.APPLICATION_STORE_FREE_PREMIUM_CONTENT}):null},r}(a.Component);t.default=y,y.displayName="StoreRecommendationReason"},6511:function(e,t,n){"use strict";t.__esModule=!0,t.getRatingTier=function(e){var t=u[e.aggregator];if(null==t)return null;if(e.aggregator===o.ReviewAggregators.METACRITIC&&e.criticTotalRatings<l)return null;return t.find(function(t){return t.minimumScore<=e.criticScore})};var r,a,o=n(0),i=(r=n(10))&&r.__esModule?r:{default:r};var l=4;function s(e,t,n){return{minimumScore:e,color:t,get label(){return n()}}}var u=((a={})[o.ReviewAggregators.METACRITIC]=[s(90,"#6c3",function(){return i.default.Messages.METACRITIC_VERDICT_UNIVERSAL_ACCLAIM}),s(75,"#6c3",function(){return i.default.Messages.METACRITIC_VERDICT_GENERALLY_FAVORABLE}),s(50,"#fc3",function(){return i.default.Messages.METACRITIC_VERDICT_MIXED_OR_AVERAGE}),s(20,"#f00",function(){return i.default.Messages.METACRITIC_VERDICT_GENERALLY_UNFAVORABLE}),s(0,"#f00",function(){return i.default.Messages.METACRITIC_VERDICT_OVERWHELMING_DISLIKE})],a)},6627:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=_e(n(2)),o=ye(n(17)),i=n(6),l=ye(n(100)),s=ye(n(439)),u=ye(n(3)),d=n(59),c=ye(n(1)),f=ye(n(848)),p=n(6829),h=n(455),v=ye(n(73)),m=n(818),y=ye(n(5851)),_=ye(n(5961)),g=(ye(n(115)),ye(n(814)),ye(n(829)),ye(n(830))),E=ye(n(35)),I=ye(n(23)),T=ye(n(159)),S=ye(n(6019)),O=ye(n(42)),A=ye(n(161)),N=ye(n(6505)),C=ye(n(6001)),R=ye(n(827)),P=ye(n(189)),M=ye(n(807)),b=ye(n(200)),L=ye(n(112)),D=ye(n(5875)),w=ye(n(158)),k=ye(n(302)),U=ye(n(6830)),G=ye(n(307)),F=ye(n(427)),j=ye(n(426)),H=ye(n(18)),x=n(5869),B=n(815),V=ye(n(45)),K=n(130),W=n(6065),Y=ye(n(5855)),z=ye(n(5891)),$=ye(n(5885)),q=ye(n(5921)),X=ye(n(6506)),Q=ye(n(6831)),J=ye(n(6833)),Z=ye(n(6834)),ee=ye(n(6835)),te=ye(n(6836)),ne=ye(n(6838)),re=ye(n(6839)),ae=ye(n(6844)),oe=_e(n(6509)),ie=ye(n(6845)),le=ye(n(6851)),se=ye(n(6504)),ue=ye(n(6854)),de=ye(n(6856)),ce=_e(n(6857)),fe=ye(n(6858)),pe=n(0),he=ye(n(10)),ve=n(5908),me=ye(n(5470));function ye(e){return e&&e.__esModule?e:{default:e}}function _e(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function ge(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Te=8e3,Se=1500,Oe=50;function Ae(e){return location.protocol+"//"+location.host+e}var Ne=ge(F.default,{}),Ce=ge(X.default,{}),Re=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).showCopyLinkTextTimeout=new d.Timeout,t._purchaseRef=a.createRef(),t._trackedViewed=!1,t._analyticsSource=null,t._extraAnalyticsProperties=null,t.state={showHeaderPurchaseUnit:!1,showLinkCopied:!1},t.trackCarouselScroll=function(e,n,r){var a=t.props.sku;null!=a&&H.default.track(pe.AnalyticEvents.STORE_LISTING_MEDIA_SCROLLED,Ee({},a.getAnalyticsData(),{card_index:r,card_type:e.type===pe.CarouselMediaTypes.IMG?"image":"video"}))},t.copyCurrentUrl=function(){var e=t.props.location;(0,x.copy)(Ae(e.pathname)),t.setState({showLinkCopied:!0},function(){t.showCopyLinkTextTimeout.start(Se,function(){t.setState({showLinkCopied:!1})})})},t.handleCreateInstantInvite=function(){var e=t.props,n=e.channel,r=e.guild;null!=n&&null!=r&&v.default.push($.default,{guild:r,channel:n,source:pe.InstantInviteSources.GUILD_CHANNELS})},t.renderInviteLink=function(){var e=t.props,n=e.channel,r=e.guild;return null==n||null==r?null:T.default.can(pe.Permissions.CREATE_INSTANT_INVITE,r)||null!=r.vanityURLCode?ge(L.default,{"aria-label":he.default.Messages.CREATE_INSTANT_INVITE,look:L.default.Looks.BLANK,size:L.default.Sizes.NONE,onClick:t.handleCreateInstantInvite,className:me.default.link},void 0,ge(k.default,{name:k.default.Names.LINK,className:me.default.linkIcon})):null},t.renderCopyLink=function(){var e=t.state.showLinkCopied;return t.isChannelType?t.renderInviteLink():ge(j.default,{text:e?he.default.Messages.APPLICATION_STORE_LINK_COPIED:null,position:j.default.Positions.LEFT,forceOpen:e},void 0,ge(L.default,{"aria-label":e?he.default.Messages.APPLICATION_STORE_LINK_COPIED:he.default.Messages.COPY_LINK,look:L.default.Looks.BLANK,size:L.default.Sizes.NONE,onClick:t.copyCurrentUrl,className:me.default.link},void 0,ge(k.default,{name:k.default.Names.LINK,className:me.default.linkIcon})))},t.renderCarousel=function(e,n){if(0===n.carouselItems.length)return null;var r=t.props,a=r.pageSize,o=r.isFocused;return ge(Y.default,{section:pe.AnalyticsSections.HERO},void 0,ge(re.default,{pageSize:a,items:n.carouselItems.map(function(r){return t.parseMediaItems(e,r,n.assets)}),autoplayInterval:Te,paused:!o,onChange:t.trackCarouselScroll,onIntentionalChange:t.trackCarouselScroll}))},t.handleScroll=(0,i.debounce)(function(){if(null!=t._purchaseRef.current){var e=l.default.findDOMNode(t._purchaseRef.current.getApplicationBuyButton());if(e instanceof HTMLElement){var n=e.getBoundingClientRect().top,r=n<0||n>window.innerHeight;t.state.showHeaderPurchaseUnit!==r&&t.setState({showHeaderPurchaseUnit:r})}}},Oe),t.renderListing=function(){var e=t.props,n=e.application,r=e.storeListing,a=e.sku,o=e.pageSize;return null==n||null==a||null==r||r.isSlimDirectoryVersion()?ge(w.default,{align:w.default.Align.CENTER,justify:w.default.Justify.CENTER},void 0,Ne):o===ve.PageSizes.SMALL?t.renderSmall(n,r,a):t.renderLarge(n,r,a)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u,y,_,g=r.prototype;return g.componentDidMount=function(){var e=this.props,t=e.sku,n=e.storeListing,r=e.isFetchingEntitlements,a=e.shouldFetchStatistics,o=e.hasFetchedActivities,i=e.didFetchEntitlements,l=e.isAuthenticated,s=e.location,u=e.fetchStoreListing;if(null!=s.state){var d=s.state,v=d.analyticsSource,m=d.analyticsProperties;this._analyticsSource=v,this._extraAnalyticsProperties=m}else this._analyticsSource=pe.DIRECT_ANALYTICS_LOCATION;(null==n||n.isSlimDirectoryVersion())&&u(),null!=t&&(r||i||(0,h.fetchUserEntitlementsForApplication)(t.applicationId),a&&c.default.wait(function(){return(0,p.fetchStatisticsForApplication)(t.applicationId)})),l&&!o&&f.default.getActivities(),this.handleScroll(),this.trackViewed(),this.replaceUrlWithSlug()},g.componentDidUpdate=function(e){var t=this.props,n=t.locale,r=t.sku,a=t.shouldFetchStatistics,o=t.skuId,i=t.storeListingId,l=t.slug,s=t.storeListing,u=t.fetchStoreListing;if(s!==e.storeListing&&null!=s&&(0,W.deepLinkRouteIfLandedAndNotAuthed)(pe.RPCDeepLinks.STORE_LISTING,{skuId:o,slug:l}),n===e.locale&&o===e.skuId||u(),a&&!e.shouldFetchStatistics){if(null==r)throw new Error("Unexpected missing sku");c.default.wait(function(){return(0,p.fetchStatisticsForApplication)(r.applicationId)})}o===e.skuId&&i===e.storeListingId||(this._trackedViewed=!1),this.trackViewed(),this.replaceUrlWithSlug()},g.componentWillUnmount=function(){this.showCopyLinkTextTimeout.stop();var e=this.props.analyticsContext,t=e.loadId,n=e.loadDate;null!=n&&H.default.track(pe.AnalyticEvents.STORE_LISTING_EXITED,{load_id:t,duration_ms:Date.now()-n})},g.replaceUrlWithSlug=function(){var e=this.props,t=e.sku,n=e.application,r=e.channel,a=e.skuId,o=e.applicationId,i=e.slug;null==r&&(null!=a&&null!=t&&i!==t.slug&&V.default.replaceWith({pathname:pe.Routes.APPLICATION_STORE_LISTING_SKU(t.id,t.slug),search:location.search}),null!=o&&null!=n&&null!=n.slug&&i!==n.slug&&V.default.replaceWith({pathname:pe.Routes.APPLICATION_STORE_LISTING_APPLICATION(n.id,n.slug),search:location.search}))},g.trackViewed=function(){var e=this.props,t=e.sku,n=e.storeListing,r=e.hasFetchedNews,a=e.hasNews,o=e.analyticsContext;if(!this._trackedViewed&&null!=t&&null!=n&&null!=n.description&&(this.isChannelType||r)){var i=n.carouselItems.reduce(function(e,t){return null!=t.assetId?e.images++:e.videos++,e},{images:0,videos:0});H.default.track(pe.AnalyticEvents.STORE_LISTING_VIEWED,Ee({},this._extraAnalyticsProperties,{load_id:o.loadId,has_description:null!=n.description&&n.description.length>0,has_staff_review:null!=n.staffNotes,carousel_image_count:i.images,carousel_video_count:i.videos,has_news:this.isChannelType&&a,location:o.location.page,source:this._analyticsSource},t.getAnalyticsData(!0))),this._trackedViewed=!0}},g.renderHeaderToolbar=function(e,t){var n=this,r=this.props,a=r.isInTestMode,i=r.slug,l=r.storeListing,s=r.channel,u=r.analyticsContext.location,d=this.state.showHeaderPurchaseUnit;return function(){var r;return ge("div",{className:me.default.headerBarListing},void 0,ge("div",{className:me.default.headerSection},void 0,a&&null!=t?ge(ce.default,{size:ce.TestModeStoreListingButtonEnums.Sizes.MIN,dropdownSize:ce.TestModeStoreListingButtonEnums.DropdownSizes.MEDIUM,look:ce.TestModeStoreListingButtonEnums.Looks.OUTLINED,color:ce.TestModeStoreListingButtonEnums.Colors.YELLOW,skuId:t.id,className:me.default.testModeSelectButton,currentStoreListingId:null!=l?l.id:null,onStoreListingSelect:function(e){null!=t&&(0,m.goToSKUStoreListing)(t.id,{slug:i,analyticsSource:{page:u.page,section:pe.AnalyticsSections.NAVIGATION,object:null},storeListingId:e.id})}}):null),ge("div",{className:me.default.headerSection},void 0,ge("div",{className:(0,o.default)(me.default.headerPurchase,(r={},r[me.default.active]=d,r))},void 0,null!=t?t.getDisplayPrice():null,null!=e&&null!=t?ge(q.default,{wrapperClassName:me.default.headerActionButton,applicationId:e.id,skuId:t.id,color:L.default.Colors.GREEN,size:L.default.Sizes.SMALL,tooltipPosition:j.default.Positions.BOTTOM,entitlementBranchId:null!=l?l.entitlementBranchId:null,channelId:null!=s?s.id:null,onStoreListing:!0}):null,ge(oe.default,{messageStyle:oe.MessageStyles.SHORT,className:me.default.purchaseError}))),n.renderCopyLink())}},g.renderHeader=function(e,t){var n=this.props,r=n.channel,o=n.isAuthenticated;return ge(z.default,{isAuthenticated:o,renderToolbar:this.renderHeaderToolbar(e,t)},void 0,null!=r?ge(a.Fragment,{},void 0,ge(z.default.Icon,{name:k.default.Names.STORE_TAG}),ge(z.default.Title,{},void 0,r.name)):null!=t&&t.premium?ge(a.Fragment,{},void 0,ge(z.default.Icon,{name:k.default.Names.NITRO_WHEEL}),ge(se.default,{sku:t})):null!=t?ge(a.Fragment,{},void 0,ge(z.default.Icon,{name:k.default.Names.STORE_TAG}),ge(z.default.Title,{},void 0,t.name)):null)},g.parseMediaItems=function(e,t,n){var r=t.assetId,a=t.youtubeVideoId;if(null!=r){var o=n.find(function(e){return e.id===r});if(null!=o){var i=o.width,l=o.height;if(null==i||null==l)throw new Error("ApplicationStoreListing.parseMediaItems: Video and Image assets must have a width and height defined");return o.mimeType.startsWith("video/")?{type:pe.CarouselMediaTypes.VIDEO,thumbnailSrc:(0,K.getAssetURL)(e.id,o,1024,"webp"),src:(0,K.getAssetURL)(e.id,o),height:l,width:i}:{type:pe.CarouselMediaTypes.IMG,src:(0,K.getAssetURL)(e.id,o,1024),height:l,width:i}}}if(null!=a)return{type:pe.CarouselMediaTypes.YOUTUBE_VIDEO,youtubeVideoId:a};throw new Error("Store carousel item must have one of assetId or youtubeVideoId")},g.renderHeaderAssets=function(e,t,n){var r=this.props.theme,a=t.headerBackground,o=r===pe.ThemeTypes.LIGHT?t.headerLogoLightTheme:t.headerLogoDarkTheme;return null==a||null==o?ge("div",{className:me.default.noHeaderSpacer}):ge("div",{className:me.default.headerAssets},void 0,ge("div",{className:me.default.headerBackground,style:{backgroundImage:"url("+(0,K.getAssetURL)(e.id,a,1024,"png")+")"}}),ge("img",{className:me.default.headerLogo,src:(0,K.getAssetURL)(e.id,o,1024,"png"),alt:n.name}))},g.renderPurchaseSection=function(e,t,n){var r=this.props,o=r.channel,i=r.isFocused,l=r.fetchStoreListing;return ge(Y.default,{section:pe.AnalyticsSections.STORE_LISTING_BUY_GAME},void 0,a.createElement(ie.default,{storeListing:e,fetchStoreListing:l,game:t,sku:n,guildId:null!=o?o.guild_id:null,channelId:null!=o?o.id:null,isFocused:i,className:me.default.purchaseUnit,ref:this._purchaseRef}))},g.renderWhyYouMightLikeThis=function(e,t){return ge(le.default,{sku:e,storeListing:t,className:me.default.whyYouMightLikeIt})},g.renderPremiumPerks=function(e,t){return ge(ne.default,{sku:e,storeListing:t,className:me.default.premiumPerks})},g.renderVerifiedGuildInvite=function(e,t){if(null==e.guild)return null;var n=this.props,r=n.channel,a=n.pageSize;return ge(fe.default,{skuId:t.id,guild:e.guild,className:me.default.guildInvite,inChannel:null!=r,pageSize:a})},g.renderFeatures=function(e){return ge(Z.default,{sku:e})},g.renderSystemRequirements=function(e){return null==e.systemRequirements||0===Object.keys(e.systemRequirements).length?null:ge(de.default,{className:me.default.systemRequirements,systemRequirements:e.systemRequirements,pageSize:this.props.pageSize})},g.renderDescription=function(e,t,n){var r=t.description;if(null==r)throw new Error("Rendering ApplicationStoreListing without description");return ge(a.Fragment,{},void 0,ge(D.default,{tag:"h1"},void 0,he.default.Messages.APPLICATION_STORE_ABOUT_HEADER.format({name:n.name})),Ce,ge(J.default,{applicationId:e.id,blurb:t.summary,description:r,className:me.default.description,assets:t.assets}))},g.renderNews=function(e){return this.isChannelType?null:ge(te.default,{application:e,className:me.default.news})},g.renderReviews=function(e){return null==e.reviews?null:e.reviews.map(function(e){return ge(ue.default,{review:e,className:me.default.reviewAggregator},e.aggregator)})},g.renderApplicationContentRating=function(e){return ge(Q.default,{sku:e,className:me.default.contentRating})},g.renderApplicationLegalInfo=function(e){return ge(ee.default,{sku:e,className:me.default.legalInfo})},g.renderJsonLD=function(){var e=this.props,t=e.sku,n=e.storeListing,r=e.application;if(null==t||null==n||null==r)return null;var a=[],o=r.getSplashURL(1024);null!=o&&a.push(o),null!=n.headerLogoLightTheme&&a.unshift((0,K.getAssetURL)(r.id,n.headerLogoLightTheme,1024,"jpg"));var i=U.default.Product({name:t.name,description:t.summary||n.tagline,image:U.default.Product.Image(a),sku:t.id});if(null!=t.reviews&&t.reviews.length>0){var l=t.reviews[0];l.criticScore>0&&l.criticTotalRatings>3&&(i.aggregateRating=U.default.AggregateRating({bestRating:100,worstRating:0,ratingValue:l.criticScore,ratingCount:l.criticTotalRatings}))}var s=t.getPrice();if(null!=s){var u=s.amount,d=s.currency;i.offers=U.default.Offer({priceCurrency:d.toUpperCase(),price:(0,B.formatPrice)(u,d,{style:"decimal"})})}var c=U.default.ItemPage({mainEntity:i});return ge(U.default,{data:c})},g.renderSmall=function(e,t,n){return ge("div",{className:(0,o.default)(me.default.listing,me.default.listingSmall)},void 0,this.renderHeaderAssets(e,t,n),this.renderCarousel(e,t),this.renderPurchaseSection(t,e,n),this.renderWhyYouMightLikeThis(n,t),this.renderPremiumPerks(n,t),this.renderDescription(e,t,n),this.renderVerifiedGuildInvite(t,n),this.renderFeatures(n),this.renderNews(e),this.renderReviews(n),this.renderSystemRequirements(n),this.renderApplicationContentRating(n),this.renderApplicationLegalInfo(n))},g.renderLarge=function(e,t,n){return ge("div",{className:me.default.listing},void 0,this.renderHeaderAssets(e,t,n),this.renderCarousel(e,t),ge("div",{className:me.default.listingLarge},void 0,ge("div",{className:me.default.body},void 0,ge("div",{className:me.default.leftColumn},void 0,this.renderWhyYouMightLikeThis(n,t),this.renderPremiumPerks(n,t),this.renderDescription(e,t,n),this.renderNews(e),this.renderSystemRequirements(n),this.renderApplicationContentRating(n),this.renderApplicationLegalInfo(n)),ge("div",{className:me.default.rightColumn},void 0,this.renderPurchaseSection(t,e,n),this.renderVerifiedGuildInvite(t,n),this.renderReviews(n),this.renderFeatures(n)))))},g.render=function(){var e=this.props,t=e.application,n=e.sku,r=e.storeListing,o=e.matureAgree,i=e.isAuthenticated;if(null==t||null==n||null==r||r.isSlimDirectoryVersion())return ge(a.Fragment,{},void 0,this.renderHeader(t,n),ge(w.default,{align:w.default.Align.CENTER,justify:w.default.Justify.CENTER},void 0,ge(F.default,{className:me.default.spinner})));if(!o&&n.showAgeGate){var l=i?null:ge("div",{className:me.default.gatedListing},void 0,this.renderListing());return ge(a.Fragment,{},void 0,ge(s.default,{title:t.name}),this.renderJsonLD(),this.renderHeader(t,n),ge(ae.default,{game:t}),l)}return i?ge("div",{className:me.default.listingWrapper},void 0,ge(s.default,{title:t.name}),this.renderJsonLD(),ge(Y.default,{section:pe.AnalyticsSections.NAVIGATION},void 0,this.renderHeader(t,n)),ge(G.default,{onScroll:this.handleScroll,outerClassName:me.default.scroller,track:!0,momentum:!0,keyboardScroll:!0,gutterStyle:G.default.GutterStyles.STORE},void 0,ge(Y.default,{section:pe.AnalyticsSections.BODY},void 0,this.renderListing()))):ge("div",{},void 0,ge(s.default,{title:t.name}),this.renderJsonLD(),this.renderHeader(t,n),this.renderListing())},u=r,(y=[{key:"isChannelType",get:function(){return null!=this.props.channel}}])&&Ie(u.prototype,y),_&&Ie(u,_),r}(a.PureComponent);Re.displayName="ApplicationStoreListing";var Pe=(0,y.default)((0,_.default)(u.default.connectStores([E.default,P.default,M.default,R.default,C.default,N.default,S.default,g.default,b.default,A.default,I.default],function(e){var t,n,r,a=e.inputSkuId,o=e.applicationId,i=e.storeListingId,l=e.isAuthenticated,s=e.channel;if(null==o){if(null==a)throw new Error("Needs applicationId or skuId");t=a,null!=(o=null!=(n=P.default.get(a))?n.applicationId:null)&&(r=E.default.getGame(o))}else if(null==a){if(null==o)throw new Error("Needs applicationId or skuId");null!=(r=E.default.getGame(o))&&(t=r.destinationSkuId),n=null!=t?P.default.get(t):null}var u=null!=o&&b.default.inTestModeForApplication(o);return{skuId:t,application:null!=o?E.default.getGame(o):null,isFetchingEntitlements:null!=o&&R.default.applicationIdsFetching.has(o),didFetchEntitlements:null!=o&&R.default.applicationIdsFetched.has(o),shouldFetchStatistics:l&&null!=o&&N.default.shouldFetchStatisticsForApplication(o),hasFetchedActivities:S.default.hasFetchedActivities,sku:n,isFocused:A.default.isFocused(),storeListing:M.default.getStoreListing({storeListingId:i,skuId:t,channelId:null!=s?s.id:null,isTestMode:u}),isInTestMode:null!=o&&u,matureAgree:C.default.didMatureAgree,hasFetchedNews:null!=o&&g.default.isFetched(o),hasNews:null!=o&&g.default.getByGameId(o).length>0,theme:O.default.theme,locale:O.default.locale,guild:null!=s?I.default.getGuild(s.getGuildId()):null}})(Re)));t.default=Pe},6628:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=f(n(163)),l=f(n(112)),s=f(n(231)),u=f(n(158)),d=f(n(302)),c=f(n(5468));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=(0,i.default)({SMALL:null,MEDIUM:null,LARGE:null}),v=((r={})[h.SMALL]=c.default.dropdownSmall,r[h.MEDIUM]=c.default.dropdownMedium,r[h.LARGE]=c.default.dropdownLarge,r),m=function(e){var t=e.onDropdownClick,n=e.children,r=e.contentClassName,a=e.dropdownSize,i=void 0===a?h.MEDIUM:a,f=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["onDropdownClick","children","contentClassName","dropdownSize"]);return o.createElement(l.default,f,p(u.default,{align:u.default.Align.CENTER},void 0,p(u.default.Child,{className:r},void 0,n),null!=t?p(s.default,{className:v[i],onClick:function(e){e.stopPropagation(),null!=t&&t(e)}},void 0,p("div",{className:c.default.arrowSeparator}),p(d.default,{name:d.default.Names.ARROW_DROP_DOWN,className:c.default.dropdownArrow})):null))};m.displayName="DropdownButton",m.DropdownSizes=h,m.Sizes=l.default.Sizes,m.Colors=l.default.Colors,m.Looks=l.default.Looks;var y=m;t.default=y},6797:function(e,t,n){var r={"./af":6190,"./af.js":6190,"./ar":6191,"./ar-dz":6192,"./ar-dz.js":6192,"./ar-kw":6193,"./ar-kw.js":6193,"./ar-ly":6194,"./ar-ly.js":6194,"./ar-ma":6195,"./ar-ma.js":6195,"./ar-sa":6196,"./ar-sa.js":6196,"./ar-tn":6197,"./ar-tn.js":6197,"./ar.js":6191,"./az":6198,"./az.js":6198,"./be":6199,"./be.js":6199,"./bg":6200,"./bg.js":6200,"./bm":6201,"./bm.js":6201,"./bn":6202,"./bn.js":6202,"./bo":6203,"./bo.js":6203,"./br":6204,"./br.js":6204,"./bs":6205,"./bs.js":6205,"./ca":6206,"./ca.js":6206,"./cs":6207,"./cs.js":6207,"./cv":6208,"./cv.js":6208,"./cy":6209,"./cy.js":6209,"./da":6210,"./da.js":6210,"./de":6211,"./de-at":6212,"./de-at.js":6212,"./de-ch":6213,"./de-ch.js":6213,"./de.js":6211,"./dv":6214,"./dv.js":6214,"./el":6215,"./el.js":6215,"./en-SG":6216,"./en-SG.js":6216,"./en-au":6217,"./en-au.js":6217,"./en-ca":6218,"./en-ca.js":6218,"./en-gb":6219,"./en-gb.js":6219,"./en-ie":6220,"./en-ie.js":6220,"./en-il":6221,"./en-il.js":6221,"./en-nz":6222,"./en-nz.js":6222,"./eo":6223,"./eo.js":6223,"./es":6224,"./es-do":6225,"./es-do.js":6225,"./es-us":6226,"./es-us.js":6226,"./es.js":6224,"./et":6227,"./et.js":6227,"./eu":6228,"./eu.js":6228,"./fa":6229,"./fa.js":6229,"./fi":6230,"./fi.js":6230,"./fo":6231,"./fo.js":6231,"./fr":6232,"./fr-ca":6233,"./fr-ca.js":6233,"./fr-ch":6234,"./fr-ch.js":6234,"./fr.js":6232,"./fy":6235,"./fy.js":6235,"./ga":6236,"./ga.js":6236,"./gd":6237,"./gd.js":6237,"./gl":6238,"./gl.js":6238,"./gom-latn":6239,"./gom-latn.js":6239,"./gu":6240,"./gu.js":6240,"./he":6241,"./he.js":6241,"./hi":6242,"./hi.js":6242,"./hr":6243,"./hr.js":6243,"./hu":6244,"./hu.js":6244,"./hy-am":6245,"./hy-am.js":6245,"./id":6246,"./id.js":6246,"./is":6247,"./is.js":6247,"./it":6248,"./it-ch":6249,"./it-ch.js":6249,"./it.js":6248,"./ja":6250,"./ja.js":6250,"./jv":6251,"./jv.js":6251,"./ka":6252,"./ka.js":6252,"./kk":6253,"./kk.js":6253,"./km":6254,"./km.js":6254,"./kn":6255,"./kn.js":6255,"./ko":6256,"./ko.js":6256,"./ku":6257,"./ku.js":6257,"./ky":6258,"./ky.js":6258,"./lb":6259,"./lb.js":6259,"./lo":6260,"./lo.js":6260,"./lt":6261,"./lt.js":6261,"./lv":6262,"./lv.js":6262,"./me":6263,"./me.js":6263,"./mi":6264,"./mi.js":6264,"./mk":6265,"./mk.js":6265,"./ml":6266,"./ml.js":6266,"./mn":6267,"./mn.js":6267,"./mr":6268,"./mr.js":6268,"./ms":6269,"./ms-my":6270,"./ms-my.js":6270,"./ms.js":6269,"./mt":6271,"./mt.js":6271,"./my":6272,"./my.js":6272,"./nb":6273,"./nb.js":6273,"./ne":6274,"./ne.js":6274,"./nl":6275,"./nl-be":6276,"./nl-be.js":6276,"./nl.js":6275,"./nn":6277,"./nn.js":6277,"./pa-in":6278,"./pa-in.js":6278,"./pl":6279,"./pl.js":6279,"./pt":6280,"./pt-br":6281,"./pt-br.js":6281,"./pt.js":6280,"./ro":6282,"./ro.js":6282,"./ru":6283,"./ru.js":6283,"./sd":6284,"./sd.js":6284,"./se":6285,"./se.js":6285,"./si":6286,"./si.js":6286,"./sk":6287,"./sk.js":6287,"./sl":6288,"./sl.js":6288,"./sq":6289,"./sq.js":6289,"./sr":6290,"./sr-cyrl":6291,"./sr-cyrl.js":6291,"./sr.js":6290,"./ss":6292,"./ss.js":6292,"./sv":6293,"./sv.js":6293,"./sw":6294,"./sw.js":6294,"./ta":6295,"./ta.js":6295,"./te":6296,"./te.js":6296,"./tet":6297,"./tet.js":6297,"./tg":6298,"./tg.js":6298,"./th":6299,"./th.js":6299,"./tl-ph":6300,"./tl-ph.js":6300,"./tlh":6301,"./tlh.js":6301,"./tr":6302,"./tr.js":6302,"./tzl":6303,"./tzl.js":6303,"./tzm":6304,"./tzm-latn":6305,"./tzm-latn.js":6305,"./tzm.js":6304,"./ug-cn":6306,"./ug-cn.js":6306,"./uk":6307,"./uk.js":6307,"./ur":6308,"./ur.js":6308,"./uz":6309,"./uz-latn":6310,"./uz-latn.js":6310,"./uz.js":6309,"./vi":6311,"./vi.js":6311,"./x-pseudo":6312,"./x-pseudo.js":6312,"./yo":6313,"./yo.js":6313,"./zh-cn":6314,"./zh-cn.js":6314,"./zh-hk":6315,"./zh-hk.js":6315,"./zh-tw":6316,"./zh-tw.js":6316};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=6797},6811:function(e,t,n){"use strict";t.__esModule=!0,t.APPLICATION_STORE_LAYOUT=void 0;var r,a=n(6501),o=n(5993),i=n(0);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=l({},o.DEFAULT_LAYOUT,((r={})[i.KeybindActions.CAROUSEL_NEXT]=a.CAROUSEL_NEXT,r[i.KeybindActions.CAROUSEL_PREV]=a.CAROUSEL_PREV,r));t.APPLICATION_STORE_LAYOUT=s},6812:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=f(n(82)),i=n(232),l=f(n(5851)),s=f(n(18)),u=f(n(6813)),d=f(n(6817)),c=n(0);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._applicationIdsViewed=new Set,t._skuIdsViewed=new Set,t.handleSKUViewed=function(e){t._applicationIdsViewed.add(e.applicationId),t._skuIdsViewed.add(e.id)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.componentDidMount=function(){var e=this.props,t=e.location,n=e.analyticsContext,r=null!=t.search?o.default.parse(t.search.slice(1)):null;s.default.track(c.AnalyticEvents.STORE_DIRECTORY_VIEWED,{load_id:n.loadId,source:null!=t.state?t.state.analyticsSource:c.DIRECT_ANALYTICS_LOCATION,location:n.location.page,utm_campaign_current:null!=r?r.utm_campaign_current:null})},l.componentWillUnmount=function(){var e=this.props.analyticsContext,t=e.loadId,n=e.loadDate;if(null==n)throw new Error("loadDate was null during unmount");s.default.track(c.AnalyticEvents.STORE_DIRECTORY_EXITED,{load_id:t,duration_ms:Date.now()-n,application_ids_viewed:Array.from(this._applicationIdsViewed),sku_ids_viewed:Array.from(this._skuIdsViewed)})},l.render=function(){var e=this,t=this.props,n=t.scrollTo,r=t.getScrollTop;return p(i.Switch,{},void 0,p(i.Route,{path:c.Routes.APPLICATION_STORE,exact:!0,render:function(t){return a.createElement(d.default,h({},t,{scrollTo:n,getScrollTop:r,onSKUViewed:e.handleSKUViewed}))}}),p(i.Route,{path:c.Routes.APPLICATION_STORE_BROWSE,render:function(t){return a.createElement(u.default,h({},t,{scrollTo:n,getScrollTop:r,onSKUViewed:e.handleSKUViewed}))}}))},r}(a.Component);v.displayName="ApplicationStoreDirectory";var m=(0,l.default)(v);t.default=m},6813:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=x(n(4)),i=x(n(82)),l=x(n(439)),s=x(n(3)),u=x(n(1)),d=n(6126),c=n(6125),f=n(5948),p=x(n(802)),h=x(n(449)),v=x(n(5851)),m=x(n(5961)),y=(x(n(6117)),x(n(88))),_=x(n(42)),g=x(n(6058)),E=x(n(189)),I=x(n(5863)),T=x(n(158)),S=x(n(307)),O=x(n(6363)),A=x(n(5965)),N=x(n(427)),C=x(n(18)),R=n(113),P=n(841),M=x(n(45)),b=n(5903),L=x(n(462)),D=n(6065),w=x(n(5855)),k=x(n(5891)),U=x(n(6127)),G=x(n(6504)),F=n(0),j=x(n(10)),H=x(n(5430));function x(e){return e&&e.__esModule?e:{default:e}}function B(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var V=function(e){var t=e.label,n=e.options,r=e.value,a=e.onChange,o=e.onOpen,i=e.onClose;return B("div",{className:H.default.filterBrowsing},void 0,B("label",{},void 0,t),B(A.default,{className:H.default.filterBrowsingSelectValue,popoutClassName:H.default.filterBrowsingSelectPopout,look:A.default.Looks.MINIMAL,options:n,value:r,onChange:a,onOpen:o,onClose:i}))};V.displayName="FilterItem";var K=(0,o.default)(new Date(0)),W=function(e){var t=E.default.get(e);if(null==t)throw new Error("Should not be rendering/comparing without SKU");return t},Y=function(e,t){var n=W(e),r=W(t);return n.name.localeCompare(r.name,"en",{sensitivity:"base"})},z=function(e,t){return Y(t,e)},$=function(e,t){var n=W(e),r=W(t),a=n.releaseDate,o=r.releaseDate,i=Date.now();return(null==a||a.isAfter(i))&&(a=K),(null==o||o.isAfter(i))&&(o=K),a.isAfter(o)?-1:a.isBefore(o)?1:Y(e,t)},q=(0,P.cachedFunction)(function(e){for(var t=new Set,n=0;n<e.length;n++){var r=E.default.get(e[n]);null!=r&&null!=r.genres&&r.genres.size>0&&Array.from(r.genres).forEach(function(e){return t.add(e)})}var a=Array.from(t).map(function(e){return{label:(0,b.getGenreText)(e),value:e}}).sort(function(e,t){return"string"!=typeof e.label||"string"!=typeof t.label?0:e.label.localeCompare(t.label)});return a.unshift({label:j.default.Messages.APPLICATION_STORE_FILTER_ALL_GENRES,value:F.StoreApplicationGenresFilter.ALL}),a}),X=B(G.default,{}),Q=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).scrollerRef=a.createRef(),t.searchBoxRef=a.createRef(),t._popoutCount=0,t.getFiltersQueryObject=function(e){var n=t.props.filters,r=e&&null!=e.q?e.q:n.q,a=e&&null!=e.sort?e.sort:n.sort,o=e&&null!=e.genre?e.genre:n.genre;return{q:r,sort:a,genre:(0,b.getGenreURLSlugFromId)(o)}},t.trackFilterUpdated=function(e){C.default.track(F.AnalyticEvents.STORE_DIRECTORY_FILTER_UPDATED,{load_id:t.props.analyticsContext.loadId,filter:e})},t.filterByGenre=function(e){var n=e.value;t.trackFilterUpdated(n),t.updateUrlWithFilters({genre:n},{persistForBackButton:!0})},t.sortByApplicationOrder=function(e){var n=e.value;t.updateUrlWithFilters({sort:n},{persistForBackButton:!0})},t.filterByTitle=function(e){t.updateUrlWithFilters({q:e})},t.focusInput=function(){var e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t).searchBoxRef;null!=e.current&&e.current.focus()},t.handlePopoutOpen=function(){t._popoutCount+=1},t.handlePopoutClose=function(){t._popoutCount=Math.max(0,t._popoutCount-1)},t.handleScroll=function(){t._popoutCount>0&&p.default.closeAll()},t.getSortedSkuIds=function(e,t){switch(t){case F.StoreApplicationSort.NEW_RELEASES:return e.allSkuIds.sort($);case F.StoreApplicationSort.ALPHABETICAL:return e.allSkuIds.sort(Y);case F.StoreApplicationSort.REVERSE_ALPHABETICAL:return e.allSkuIds.sort(z);default:return e.allSkuIds}},t.scrollTo=function(e,n){if(void 0===n&&(n=!1),null!=t.props.scrollTo)t.props.scrollTo(e,n);else{var r=t.scrollerRef.current;null!=r&&r.scrollTo(e,n)}},t.getScrollTop=function(){return null!=t.props.getScrollTop?t.props.getScrollTop():null!=t.scrollerRef.current?t.scrollerRef.current.getScrollData().scrollTop:0},t.handleToggleHideLibraryApplications=function(e,t){(0,d.setHideLibraryGames)(t)},t.handleFilterTitleChange=function(e){t.filterByTitle(e)},t.reset=function(){t.filterByTitle("")},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){var e=this.props,t=e.filters,n=e.location.search,r=this.getFiltersQueryObject({});L.default.formatSearch(r)!==n&&M.default.replaceWith(L.default.formatPathWithQuery(F.Routes.APPLICATION_STORE_BROWSE,r)),(0,D.deepLinkRouteIfLandedAndNotAuthed)(F.RPCDeepLinks.STORE_BROWSE,t),R.ComponentDispatch.subscribe(F.ComponentActions.FOCUS_SEARCH,this.focusInput);var a=this.props,o=a.lastDirectoryScrollTop,i=a.directoryLayoutId,l=a.shouldFetchDirectoryLayout;null!=o&&this.scrollTo(o),l&&u.default.wait(function(){(0,d.loadDirectory)(i)});var s=this.props,c=s.location,f=s.analyticsContext.loadId;C.default.track(F.AnalyticEvents.STORE_DIRECTORY_BROWSE_VIEWED,{source:null!=c.state?c.state.analyticsSource:F.DIRECT_ANALYTICS_LOCATION,load_id:f})},o.componentWillUnmount=function(){var e=this;u.default.wait(function(){R.ComponentDispatch.unsubscribe(F.ComponentActions.FOCUS_SEARCH,e.focusInput),(0,c.handleDirectoryUnmount)(e.getScrollTop(),F.DirectoryLocations.BROWSE),(0,d.saveFilters)(e.getFiltersQueryObject()),(0,f.muteStoreDirectory)()})},o.updateUrlWithFilters=function(e,t){var n=(void 0===t?{}:t).persistForBackButton,r=L.default.formatPathWithQuery(F.Routes.APPLICATION_STORE_BROWSE,this.getFiltersQueryObject(e));n?M.default.transitionTo(r):M.default.replaceWith(r)},o.renderListings=function(){var e=this.props,t=e.directoryLayout,n=e.isLibraryApplicationsHidden,r=e.filters,o=r.sort,i=r.genre,l=r.q,s=e.onSKUViewed,u=e.isFetchingDirectoryLayout;if(null==t)return u?this.renderLoading():null;var d={titleQuery:null!=l&&l.length>=3?l:null,hideApplicationsInUserLibrary:n,genre:i,premiumOnly:!0};return a.createElement(S.default,{ref:this.scrollerRef,track:!0,onScroll:this.handleScroll,gutterStyle:S.default.GutterStyles.STORE,momentum:!0,keyboardScroll:!0},B("div",{className:H.default.filterBackground},void 0,B("h2",{className:H.default.browseTitle},void 0,j.default.Messages.APPLICATION_STORE_NAVIGATION_BROWSE_PREMIUM),B(w.default,{section:F.AnalyticsSections.HERO},void 0,this.renderFilters())),B(w.default,{section:F.AnalyticsSections.BODY},void 0,B("div",{className:H.default.browse},void 0,B(U.default,{className:H.default.applications,viewConfig:d,skuIds:this.getSortedSkuIds(t,o),analyticsSort:o,onSKUViewed:s}))))},o.renderLoading=function(){return B(T.default,{align:T.default.Align.CENTER,justify:T.default.Justify.CENTER},void 0,B(N.default,{className:H.default.spinner}))},o.renderFilterByGenre=function(){var e=this.props,t=e.directoryLayout,n=e.filters.genre;if(null==t)return null;var r=q(t.allSkuIds);return B(V,{label:j.default.Messages.APPLICATION_STORE_BROWSE_BY_GENRE_LABEL,options:r,value:n,onChange:this.filterByGenre,onOpen:this.handlePopoutOpen,onClose:this.handlePopoutClose})},o.renderFilterByTitle=function(){var e=this.props.filters.q;return a.createElement(O.default,{searchTerm:e,className:H.default.filterByTitle,inputClassName:H.default.filterByTitleInput,label:j.default.Messages.APPLICATION_STORE_SEARCH_BY_TITLE,placeholder:j.default.Messages.APPLICATION_STORE_SEARCH_BY_TITLE,onChange:this.handleFilterTitleChange,onClear:this.reset,autoFocus:null!=e&&e.length>0,ref:this.searchBoxRef})},o.renderSortBy=function(){var e=this.props.filters.sort;return B(V,{label:j.default.Messages.APPLICATION_STORE_SORT_BY,options:[{label:j.default.Messages.APPLICATION_STORE_BROWSE_SORT_NEW_RELEASES,value:F.StoreApplicationSort.NEW_RELEASES},{label:j.default.Messages.APPLICATION_STORE_BROWSE_SORT_TITLE_ALPHABETICAL,value:F.StoreApplicationSort.ALPHABETICAL},{label:j.default.Messages.APPLICATION_STORE_BROWSE_SORT_TITLE_REVERSE_ALPHABETICAL,value:F.StoreApplicationSort.REVERSE_ALPHABETICAL}],value:e,onChange:this.sortByApplicationOrder,onOpen:this.handlePopoutOpen,onClose:this.handlePopoutClose})},o.renderFilters=function(){var e=this.props,t=e.isLibraryApplicationsHidden,n=e.libraryApplicationsSize,r=e.isAuthenticated,a=e.theme;return B("header",{className:H.default.filters},void 0,B("div",{className:H.default.filterBrowsingHeaderWrapper},void 0,this.renderFilterByTitle()),B("div",{className:H.default.sortFilterBar},void 0,B("div",{className:H.default.filterAndSort},void 0,this.renderFilterByGenre(),this.renderSortBy()),r?B(I.default,{className:H.default.hideGames,value:t,onChange:this.handleToggleHideLibraryApplications,type:a===F.ThemeTypes.DARK?I.default.Types.INVERTED:I.default.Types.DEFAULT,reverse:!0},void 0,t?j.default.Messages.APPLICATION_STORE_HIDE_GAMES_IN_LIBRARY_HIDDEN.format({gamesHidden:n}):j.default.Messages.APPLICATION_STORE_HIDE_GAMES_IN_LIBRARY):null))},o.render=function(){var e=this.props,t=e.isAuthenticated,n=e.location,r=i.default.parse(n.search.slice(1)),a=null!=r.genre?(0,b.getGenreIdFromURLSlug)(r.genre):null,o=null!=a&&-1!==a?(0,b.getGenreText)(a):null,s=null!=o?j.default.Messages.APPLICATION_STORE_GENRE_TITLE.format({genre:o}):"Discord";return B("div",{className:H.default.browseWrapper},void 0,B(l.default,{title:s}),B(k.default,{isAuthenticated:t},void 0,B(k.default.Icon,{name:h.default.NITRO_WHEEL}),X),this.props.isFetchingDirectoryLayout?this.renderLoading():this.renderListings())},r}(a.PureComponent);function J(e,t,n){return new Set(Object.values(t)).has(e)?e:n}Q.displayName="ApplicationStoreBrowse";var Z=(0,m.default)((0,v.default)(Q)),ee=s.default.connectStores([g.default,y.default,_.default],function(e){var t=e.location,n=null==t.state||!1!==t.state.scrollRestoration,r=g.default.lastBrowseDirectoryView,a=t.search.slice(1),o=0!==a.length?i.default.parse(a):g.default.previousFilters,l=null!=o.genre?(0,b.getGenreIdFromURLSlug)(o.genre):null;return{directoryLayoutId:F.STORE_DIRECTORY_LAYOUT_ID,directoryLayout:g.default.getDirectoryLayout(F.STORE_DIRECTORY_LAYOUT_ID),shouldFetchDirectoryLayout:g.default.shouldFetch(F.STORE_DIRECTORY_LAYOUT_ID),isFetchingDirectoryLayout:g.default.isFetching(F.STORE_DIRECTORY_LAYOUT_ID),lastDirectoryScrollTop:null!=r&&n&&r.scrollTop,isLibraryApplicationsHidden:g.default.isLibraryApplicationsHidden,filters:{q:o.q,sort:J(o.sort,F.StoreApplicationSort,F.StoreApplicationSort.NEW_RELEASES),genre:J(l,F.StoreApplicationGenresFilter,F.StoreApplicationGenresFilter.ALL)},libraryApplicationsSize:Object.keys(y.default.getAllLibraryApplications()).length,theme:_.default.theme}})(Z);t.default=ee},6814:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=h(n(17)),o=(h(n(814)),h(n(829)),h(n(112))),i=h(n(6107)),l=h(n(6108)),s=h(n(5955)),u=n(5903),d=n(130),c=h(n(5921)),f=n(5902),p=h(n(5422));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=v(f.InLibraryPrice,{}),y=function(e){var t=e.sku,n=e.storeListing,r=e.playing,f=e.muted,h=e.inLibrary,y=e.showMediaPlaceholder,_=e.onToggleMute,g=e.isMouseOver,E=e.className,I=e.showBuyInline||!t.requiresPayment,T=g&&r,S=I&&!h&&g&&r;return v("div",{className:(0,a.default)(p.default.tileMedia,E)},void 0,v(s.default,{className:p.default.splashContainer,video:null!=n.previewVideo?(0,d.getAssetURL)(t.applicationId,n.previewVideo):null,image:null!=n.boxArt?(0,d.getAssetURL)(t.applicationId,n.boxArt,600):null!=n.thumbnail?(0,d.getAssetURL)(t.applicationId,n.thumbnail,600):null,title:t.name,playing:r,muted:f,placeholder:y,onToggleMute:_,renderMediaOverlay:function(e){var n,r,s,d,f,y;return v("div",{},void 0,v("div",{className:(0,a.default)(p.default.mediaFade,(n={},n[p.default.mediaFadePlaying]=e,n))}),v("div",{className:(0,a.default)(p.default.details,(r={},r[p.default.detailsPlaying]=e,r))},void 0,v("h2",{className:p.default.gameTitle},void 0,t.name),v("div",{className:p.default.genres},void 0,Array.from(t.genres).map(function(e){return v("span",{className:p.default.genreTag},e,(0,u.getGenreText)(e))})),I?v("div",{className:(0,a.default)(p.default.tileOwnership,(s={},s[p.default.tileOwnershipVisible]=T,s))},void 0,h?m:v(c.default,{skuId:t.id,applicationId:t.applicationId,size:o.default.Sizes.SMALL,shouldRenderPrice:!0,onStoreListing:!0,onClick:function(e){return e.preventDefault()},className:(0,a.default)(p.default.tileBuyButton,(d={},d[p.default.tileBuyButtonVisible]=S,d))})):null),t.exclusive?v(i.default,{className:(0,a.default)(p.default.exclusiveMedia,(f={},f[p.default.exclusivePlaying]=e,f))}):t.isTheGameAwardsWinner?v(l.default,{className:(0,a.default)(p.default.exclusiveMedia,(y={},y[p.default.exclusivePlaying]=e,y))}):null)}}))};y.displayName="ApplicationTileFullMedia";var _=y;t.default=_},6815:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=g(n(17)),i=n(232),l=g(n(3)),s=g(n(5851)),u=g(n(14)),d=g(n(112)),c=g(n(5955)),f=g(n(18)),p=g(n(190)),h=n(130),v=g(n(6502)),m=g(n(6503)),y=n(0),_=g(n(5425));function g(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var T=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).trackLinkClicked=function(){var e=t.props,n=e.tileData.skuId,r=e.analyticsContext;n===y.PREMIUM_ROUTE_HASH&&f.default.track(y.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location:I({},r.location,{object:y.AnalyticsObjects.CARD,objectType:y.AnalyticsObjectTypes.PERK})})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.getPerkLocation=function(){var e=this.props,t=e.index,n=e.analyticsContext.location,r=e.tileData.skuId,a={analyticsProperties:{list_index:t},analyticsSource:{object:y.AnalyticsObjects.CARD,objectType:y.AnalyticsObjectTypes.PERK,page:n.page,section:n.section}};return r===y.PREMIUM_ROUTE_HASH?{hash:y.PREMIUM_ROUTE_HASH,state:a}:(0,h.getStoreListingLocation)(r,I({},a))},l.renderMedia=function(){var e=this.props,t=e.playing,n=e.muted,r=e.showMediaPlaceholder,a=e.onToggleMute,o=e.tileData,i=o.name,l=o.video,s=o.image;return E(c.default,{className:_.default.splashContainer,video:l,image:s,placeholder:r,title:i,playing:t,muted:n,onToggleMute:a,splashClassName:_.default.splashVideo,splashPlaceholderClassName:_.default.splashPlaceholder})},l.renderActions=function(){var e,t,n=this.props,r=n.isMouseOver,i=n.isUserPremium,l=n.tileData.skuId;return E(a.Fragment,{},void 0,E(m.default,{className:(0,o.default)(_.default.perkTag,(e={},e[_.default.perkTagHidden]=!i&&r,e))}),i?null:E(v.default,{skuId:l,size:d.default.Sizes.SMALL,className:(0,o.default)(_.default.tileBuyButton,(t={},t[_.default.tileBuyButtonVisible]=r,t))}))},l.render=function(){var e=this.props,t=e.className,n=e.tileData,r=n.name,a=n.tagline,l=e.onMouseEnter,s=e.onMouseLeave;return E(i.Link,{className:(0,o.default)(_.default.tile,t),to:this.getPerkLocation(),onClick:this.trackLinkClicked,onMouseEnter:l,onMouseLeave:s},void 0,E("div",{className:_.default.media},void 0,this.renderMedia()),E("div",{className:_.default.description},void 0,E("h2",{className:_.default.title},void 0,r),E("div",{className:_.default.tagline},void 0,a),E("div",{className:_.default.actions},void 0,this.renderActions())))},r}(a.PureComponent);T.displayName="PerkTile",T.defaultProps={isMouseOver:!1};var S=(0,s.default)(l.default.connectStores([u.default],function(){return{isUserPremium:p.default.canInstallPremiumApplications(u.default.getNullableCurrentUser())}})(T));t.default=S},6816:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=_(n(17)),i=n(232),l=_(n(3)),s=_(n(5851)),u=_(n(14)),d=_(n(112)),c=_(n(5955)),f=_(n(190)),p=n(130),h=_(n(6502)),v=_(n(6503)),m=n(0),y=_(n(5426));function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var I=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.getPerkLocation=function(){var e=this.props,t=e.index,n=e.analyticsContext.location,r=e.tileData.skuId,a={analyticsProperties:{list_index:t},analyticsSource:{object:m.AnalyticsObjects.CARD,objectType:m.AnalyticsObjectTypes.PERK,page:n.page,section:n.section}};return(0,p.getStoreListingLocation)(r,E({},a))},l.renderMedia=function(){var e=this.props,t=e.playing,n=e.muted,r=e.showMediaPlaceholder,a=e.onToggleMute,o=e.tileData,i=o.name,l=o.video,s=o.image;return g(c.default,{className:y.default.splashContainer,video:l,image:s,placeholder:r,title:i,playing:t,muted:n,onToggleMute:a,splashClassName:y.default.splashVideo,splashPlaceholderClassName:y.default.splashPlaceholder})},l.renderActions=function(){var e,t,n=this.props,r=n.isMouseOver,i=n.isUserPremium,l=n.tileData.skuId;return g(a.Fragment,{},void 0,g(v.default,{className:(0,o.default)(y.default.perkTag,(e={},e[y.default.perkTagHidden]=!i&&r,e))}),i?null:g(h.default,{skuId:l,size:d.default.Sizes.SMALL,className:(0,o.default)(y.default.tileBuyButton,(t={},t[y.default.tileBuyButtonVisible]=r,t))}))},l.render=function(){var e=this.props,t=e.className,n=e.tileData,r=n.name,a=n.tagline,l=e.onMouseEnter,s=e.onMouseLeave;return g(i.Link,{className:(0,o.default)(y.default.tile,t),to:this.getPerkLocation(),onMouseEnter:l,onMouseLeave:s},void 0,g("div",{},void 0,this.renderMedia()),g("div",{className:y.default.mediaFade}),g("div",{className:y.default.description},void 0,g("h2",{className:y.default.title},void 0,r),g("div",{className:y.default.tagline},void 0,a),g("div",{className:y.default.actions},void 0,this.renderActions())))},r}(a.PureComponent);I.displayName="PerkTileFullMedia",I.defaultProps={isMouseOver:!1};var T=(0,s.default)(l.default.connectStores([u.default],function(){return{isUserPremium:f.default.canInstallPremiumApplications(u.default.getNullableCurrentUser())}})(I));t.default=T},6817:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),l=Y(n(82)),s=Y(n(439)),u=n(232),d=n(114),c=Y(n(3)),f=Y(n(1)),p=n(6126),h=n(6125),v=n(5948),m=Y(n(800)),y=Y(n(5851)),_=Y(n(5961)),g=Y(n(42)),E=Y(n(14)),I=Y(n(161)),T=Y(n(828)),S=Y(n(6058)),O=Y(n(112)),A=Y(n(158)),N=Y(n(302)),C=Y(n(307)),R=Y(n(427)),P=Y(n(838)),M=Y(n(190)),b=Y(n(45)),L=Y(n(462)),D=n(6065),w=Y(n(5855)),k=Y(n(6002)),U=Y(n(5891)),G=Y(n(6128)),F=Y(n(6127)),j=Y(n(6818)),H=Y(n(6129)),x=Y(n(6820)),B=Y(n(6821)),V=n(0),K=Y(n(10)),W=Y(n(5263));function Y(e){return e&&e.__esModule?e:{default:e}}function z(e,t,n,r){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var q=function(e){var t=e.message,n=e.urlParams,r=void 0===n?{}:n,a=e.analyticsContext;return z(u.Link,{className:W.default.viewAllGames,to:{pathname:V.Routes.APPLICATION_STORE_BROWSE,search:L.default.formatSearch(r),state:{scrollRestoration:!1,analyticsState:$({},a.location,{object:V.AnalyticsObjects.BUTTON_BROWSE})}}},void 0,z("span",{},void 0,t),z(N.default,{name:N.default.Names.CARET,className:W.default.viewAllIcon,direction:P.default.Directions.RIGHT}))};q.displayName="ViewLink";var X=z(j.default,{}),Q=z(s.default,{title:"Discord"}),J=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).scrollerRef=i.createRef(),t.scrollTo=function(e,n){if(void 0===n&&(n=!1),null!=t.props.scrollTo)t.props.scrollTo(e,n);else{var r=t.scrollerRef.current;null!=r&&r.scrollTo(e,n)}},t.getScrollTop=function(){return null!=t.props.getScrollTop?t.props.getScrollTop():null!=t.scrollerRef.current?t.scrollerRef.current.getScrollData().scrollTop:0},t.goToPremiumSettings=function(){var e=t.props,n=e.location;null!=e.user&&(f.default.wait(function(){return m.default.open(V.UserSettingsSections.PREMIUM)}),b.default.replaceWith(n.pathname+n.search))},t.renderToolbar=function(){return X},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){var e=this.props,t=e.lastDirectoryScrollTop,n=e.location,r=e.directoryLayoutId,a=e.shouldFetchDirectoryLayout;(0,D.deepLinkRouteIfLandedAndNotAuthed)(V.RPCDeepLinks.STORE_HOME),n.hash===V.PREMIUM_ROUTE_HASH&&this.goToPremiumSettings(),null!=t&&this.scrollTo(t),a&&f.default.wait(function(){return(0,p.loadDirectory)(r)})},a.componentDidUpdate=function(e){var t=this.props,n=t.directoryLayoutId,r=t.shouldFetchDirectoryLayout;location.hash===V.PREMIUM_ROUTE_HASH&&this.goToPremiumSettings(),r&&f.default.wait(function(){return(0,p.loadDirectory)(n)})},a.componentWillUnmount=function(){var e=this;f.default.wait(function(){(0,h.handleDirectoryUnmount)(e.getScrollTop(),V.DirectoryLocations.HOME),(0,v.muteStoreDirectory)()})},a.renderFeaturedPremiumListings=function(e){if(null==e.premiumSkuIds||0===e.premiumSkuIds.length)return null;var t=this.props,n=t.onSKUViewed,r=t.analyticsContext;return z(i.Fragment,{},void 0,z("div",{className:W.default.premiumApplicationsHeader},void 0,z("h3",{},void 0,K.default.Messages.APPLICATION_STORE_HOME_RECENTLY_ADDED),z(q,{message:K.default.Messages.APPLICATION_STORE_HOME_VIEW_ALL_APPLICATIONS,analyticsContext:r})),z("div",{},void 0,z(H.default,{tileWidth:V.PREMIUM_HOME_TILE_WIDTH,tileMargin:V.PREMIUM_HOME_TILE_MARGIN},void 0,z(F.default,{analyticsIndexOffset:12,tileClassName:W.default.homeTile,skuIds:e.premiumSkuIds,onSKUViewed:n,maxTiles:12,wrap:!1}))))},a.renderCategories=function(e){if(null==e.categories||0===e.categories.length)return null;var t=this.props,n=t.onSKUViewed,r=t.analyticsContext,a=t.theme;return z(i.Fragment,{},void 0,e.categories.map(function(e,t){return z(i.Fragment,{},t,z("h3",{className:W.default.categoryHeader},void 0,e.name),z("div",{},void 0,z(H.default,{tileWidth:V.PREMIUM_HOME_TILE_WIDTH,tileMargin:V.PREMIUM_HOME_TILE_MARGIN},void 0,z(F.default,{tileClassName:W.default.homeTile,skuIds:e.skuIds,onSKUViewed:n,maxTiles:12,wrap:!1}))))}),z(A.default,{},void 0,z("div",{className:W.default.viewAllGamesButton},void 0,z(O.default.Link,{to:{pathname:V.Routes.APPLICATION_STORE_BROWSE,state:{scrollRestoration:!1,analyticsState:$({},r.location,{object:V.AnalyticsObjects.BUTTON_BROWSE})}},innerClassName:W.default.viewAllGamesButtonInner,look:O.default.Looks.OUTLINED,color:a===V.ThemeTypes.DARK?O.default.Colors.WHITE:O.default.Colors.BLACK},void 0,z("div",{},void 0,K.default.Messages.APPLICATION_STORE_HOME_VIEW_ALL_APPLICATIONS),z(N.default,{name:N.default.Names.CARET,className:W.default.viewAllIcon,direction:P.default.Directions.RIGHT})))))},a.renderPerkListings=function(){var e=this.props.onSKUViewed;return z("div",{className:W.default.perkListings},void 0,z("h3",{className:W.default.categoryHeader},void 0,K.default.Messages.APPLICATION_STORE_PREMIUM_PERKS_HEADER),z("div",{},void 0,z(H.default,{tileWidth:V.PREMIUM_HOME_TILE_WIDTH,tileMargin:V.PREMIUM_HOME_TILE_MARGIN},void 0,V.PERK_TILES.map(function(t,n){return z(G.default,{tileData:t,type:V.StoreDirectoryTileTypes.PERK,className:W.default.homeTile,onSKUViewed:e},n)}))))},a.renderRecommendedListings=function(e){return null==e.recommendedSkuIds||e.recommendedSkuIds.length<5?null:z(x.default,{recommendedSkuIds:e.recommendedSkuIds})},a.renderContent=function(){var e,t=this.props,n=t.directoryLayout,r=t.isWindowFocused,a=t.isUserPremium;return null==n?this.renderLoading():z(i.Fragment,{},void 0,z("div",{className:W.default.home},void 0,n.heroItems.length>0?z(w.default,{section:V.AnalyticsSections.HERO},void 0,z(B.default,{className:W.default.heroCarousel,items:a?(e=n.heroItems,e.filter(function(e){return null==e.url||(0,d.parse)(e.url).hash!==V.PREMIUM_ROUTE_HASH})):n.heroItems,isWindowFocused:r})):null,z("div",{className:W.default.homeBody},void 0,z(w.default,{section:V.AnalyticsSections.BODY},void 0,this.renderPerkListings(),this.renderRecommendedListings(n),this.renderFeaturedPremiumListings(n),this.renderCategories(n)))),z("footer",{className:W.default.footer},void 0,z("h1",{className:W.default.footerMain},void 0,K.default.Messages.APPLICATION_STORE_HOME_FOOTER_MAIN),z("h2",{className:W.default.footerSub},void 0,K.default.Messages.APPLICATION_STORE_HOME_FOOTER_SUB)))},a.renderLoading=function(){return z(A.default,{align:A.default.Align.CENTER,justify:A.default.Justify.CENTER},void 0,z(R.default,{className:W.default.spinner}))},a.render=function(){var e=this.props.isAuthenticated,t=e?i.createElement(C.default,{ref:this.scrollerRef,track:!0,gutterStyle:C.default.GutterStyles.STORE,momentum:!0,keyboardScroll:!0},this.renderContent()):this.renderContent();return z("div",{className:e?W.default.homeWrapperNormal:W.default.marketingWrapper},void 0,Q,z(w.default,{section:V.AnalyticsSections.NAVIGATION},void 0,z(U.default,{renderToolbar:this.renderToolbar,isAuthenticated:e,className:W.default.headerBar},void 0,z(U.default.Icon,{name:N.default.Names.NITRO_WHEEL}),z(U.default.Title,{},void 0,K.default.Messages.PREMIUM))),this.props.isFetchingDirectoryLayout?this.renderLoading():t)},r}(i.PureComponent);J.displayName="ApplicationStoreHome";var Z=c.default.connectStores([S.default,g.default,I.default,E.default],function(e){var t=e.location,n=e.directoryLayoutId,r=S.default.lastHomeDirectoryView,a=l.default.parse(t.search.slice(1))[V.STORE_DIRECTORY_LAYOUT_ID_QUERY_OVERRIDE]||n,o=E.default.getNullableCurrentUser();return{directoryLayoutId:a,directoryLayout:S.default.getDirectoryLayout(a),shouldFetchDirectoryLayout:S.default.shouldFetch(a),isFetchingDirectoryLayout:S.default.isFetching(a),lastDirectoryScrollTop:null!=r&&r.scrollTop,theme:g.default.theme,isWindowFocused:I.default.isFocused(),isUserPremium:M.default.isPremium(o),user:o}})((0,_.default)((0,y.default)(J))),ee=(0,k.default)((0,T.default)(V.Experiments.STORE_DIRECTORY_LAYOUT,"Store Directory layout IDS",["Control: "+V.STORE_DIRECTORY_LAYOUT_ID,"Treatment 1: "+V.StoreDirectoryExperimentLayoutIds.TREATMENT_1,"Treatment 2: "+V.StoreDirectoryExperimentLayoutIds.TREATMENT_2,"Treatment 3: "+V.StoreDirectoryExperimentLayoutIds.TREATMENT_3]),((a={})[V.ExperimentTypes.NONE]=function(e){return i.createElement(Z,$({},e,{directoryLayoutId:V.STORE_DIRECTORY_LAYOUT_ID}))},a[V.ExperimentTypes.USER]=((r={})[V.ExperimentBuckets.CONTROL]=function(e){return i.createElement(Z,$({},e,{directoryLayoutId:V.STORE_DIRECTORY_LAYOUT_ID}))},r[V.ExperimentBuckets.TREATMENT_1]=function(e){return i.createElement(Z,$({},e,{directoryLayoutId:V.StoreDirectoryExperimentLayoutIds.TREATMENT_1}))},r[V.ExperimentBuckets.TREATMENT_2]=function(e){return i.createElement(Z,$({},e,{directoryLayoutId:V.StoreDirectoryExperimentLayoutIds.TREATMENT_2}))},r[V.ExperimentBuckets.TREATMENT_3]=function(e){return i.createElement(Z,$({},e,{directoryLayoutId:V.StoreDirectoryExperimentLayoutIds.TREATMENT_3}))},r),a));t.default=ee},6818:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=S(n(17)),i=S(n(3)),l=n(6126),s=S(n(802)),u=S(n(5851)),d=S(n(88)),c=S(n(807)),f=S(n(5905)),p=S(n(795)),h=S(n(5889)),v=n(113),m=S(n(45)),y=S(n(462)),_=S(n(6124)),g=n(6819),E=n(0),I=S(n(10)),T=S(n(5432));function S(e){return e&&e.__esModule?e:{default:e}}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var R=370,P=4;function M(e,t){(0,l.updateSearchTerm)(e),m.default.transitionTo(E.Routes.APPLICATION_STORE_BROWSE,{search:y.default.formatSearch({q:e}),state:t})}function b(e){return C(g.ApplicationResultsEmpty,{onViewAllGamesClick:function(){return M("",e)}})}b.displayName="renderNoResults";var L=i.default.connectStores([c.default],function(e){var t=e.sku;return{storeListing:c.default.getForSKU(t.id),inLibrary:d.default.hasApplication(t.applicationId,t.applicationId,!0)}})(g.ApplicationResult),D=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).popoutRef=a.createRef(),t.state={query:"",focused:!1,focusedIndex:-1,results:[]},t.searchBarRef=null,t.setInputRef=function(e){t.searchBarRef=e},t.focusInput=function(){var e=N(t).searchBarRef;null!=e&&e.focus()},t.reset=function(){t.setState({query:"",results:[]})},t.handleInputChange=function(e){var n=t.state,r=n.query,a=n.results,o=e.trim();""===o?a=[]:o!==r.trim()&&(a=h.default.querySKUs(o,P,!0)),t.setState({query:e,results:a})},t.handleSelect=function(e){var n,r,a=t.state,o=a.query,i=a.results[e];null==i?M(o,t.transitionState):(n=i.sku,r=t.transitionState,m.default.transitionTo(E.Routes.APPLICATION_STORE_LISTING_SKU(n.id,n.slug),{state:r}))},t.handleHighlight=function(e){t.setState({focusedIndex:e})},t.handleFocus=function(){t.setState({focused:!0})},t.handleBlur=function(){t.setState({focused:!1})},t.handleKeyDown=function(e){var n=e.ctrlKey,r=e.altKey,a=e.metaKey,o=e.which,i=N(t),l=i.searchBarRef,s=i.state,u=s.query,d=s.focusedIndex,c=s.results;if(!(n||r||a))switch(e.stopPropagation(),o){case E.KeyboardKeys.ESCAPE:""!==u?t.reset():null!=l&&l.blur();break;case E.KeyboardKeys.ENTER:t.handleSelect(d),e.preventDefault();break;case E.KeyboardKeys.ARROW_UP:d=Math.max(d-1,-1),t.handleHighlight(d),e.preventDefault();break;case E.KeyboardKeys.ARROW_DOWN:d=Math.min(d+1,c.length-1),t.handleHighlight(d),e.preventDefault()}},t.renderPopoutResult=function(e){var n=t.state,r=n.results,a=n.focusedIndex,o=r[e];return null!=o?C(L,{sku:o.sku,focused:e===a,onSelect:function(){return t.handleSelect(e)},onHighlight:function(){return t.handleHighlight(e)}},o.sku.id):null},t.renderPopout=function(){var e=t.state,n=e.results,r=e.query,a=e.focusedIndex;return""!==r.trim()?C(_.default,{numResults:n.length,query:r,width:R,renderResult:t.renderPopoutResult,renderNoResults:function(){return b(t.transitionState)},focusedIndex:a,onSelectQuery:function(){return t.handleSelect(-1)},onHighlightQuery:function(){return t.handleHighlight(-1)}}):null},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,l,u,d=r.prototype;return d.componentDidMount=function(){v.ComponentDispatch.subscribe(E.ComponentActions.FOCUS_SEARCH,this.focusInput)},d.componentDidUpdate=function(e,t){var n=this.popoutRef.current,r=this.state,a=r.focused,o=r.query,i=r.focusedIndex;o=o.trim(),a&&!t.focused?null!=n&&n.open():!a&&t.focused&&s.default.close("game-store-search"),o===t.query.trim()&&i===t.focusedIndex||s.default.rerender("game-store-search")},d.componentWillUnmount=function(){v.ComponentDispatch.unsubscribe(E.ComponentActions.FOCUS_SEARCH,this.focusInput),this.reset()},d.render=function(){var e,t=this,n=this.props.className,r=this.state,i=r.query,l=r.focused;return a.createElement(p.default,{ref:this.popoutRef,offsetX:-65,uniqueId:"game-store-search",position:p.default.Positions.BOTTOM_LEFT,toggleClose:!1,render:this.renderPopout,animationType:p.default.Animations.NONE},C("div",{className:(0,o.default)(n,(e={},e[T.default.browseSearch]=!0,e[T.default.focused]=l,e))},void 0,a.createElement(f.default,{className:T.default.searchBar,ref:this.setInputRef,name:"search",placeholder:I.default.Messages.APPLICATION_STORE_BROWSE_SEARCH_PLACEHOLDER,query:i,onChange:this.handleInputChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onClear:function(){t.reset(),t.focusInput()},maxLength:100,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})))},i=r,(l=[{key:"transitionState",get:function(){return{analyticsSource:O({},this.props.analyticsContext.location,{object:E.AnalyticsObjects.SEARCH})}}}])&&A(i.prototype,l),u&&A(i,u),r}(a.PureComponent);D.displayName="ApplicationStoreBrowseSearch";var w=(0,u.default)(D);t.default=w},6819:function(e,t,n){"use strict";t.__esModule=!0,t.ApplicationResultsEmpty=t.ApplicationResult=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=p(n(17)),o=p(n(231)),i=p(n(302)),l=p(n(45)),s=n(130),u=p(n(5902)),d=n(0),c=p(n(10)),f=p(n(5431));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=function(e){var t,n=e.focused,r=e.sku,i=e.onSelect,l=e.onHighlight,d=e.storeListing,c=e.inLibrary,p=null;if(null!=d){var v=d.thumbnail;p=null!=v?(0,s.getAssetURL)(r.applicationId,v,128):null}return h(o.default,{className:(0,a.default)(f.default.result,(t={},t[f.default.focused]=n,t)),onMouseEnter:l,onClick:i},void 0,h("div",{className:f.default.resultAssetContainer},void 0,null!=p?h("img",{className:f.default.resultAsset,src:p,alt:""}):h("div",{className:f.default.resultAssetEmpty})),h("div",{className:f.default.resultContent},void 0,h("div",{className:f.default.resultName},void 0,r.name),h(u.default,{type:u.default.Types.DIRECTORY_SEARCH,sku:r,inLibrary:c,className:f.default.price,iconClass:f.default.iconClass})))};t.ApplicationResult=v,v.displayName="ApplicationResult";var m=function(e){var t=e.onViewAllGamesClick;return h("div",{className:f.default.empty},void 0,h("div",{className:f.default.emptyTitle},void 0,c.default.Messages.APPLICATION_STORE_BROWSE_EMPTY_HEADER),h("div",{className:f.default.emptyNote},void 0,c.default.Messages.APPLICATION_STORE_SEARCH_EMPTY.format({goToGuildDiscovery:function(){return l.default.transitionTo(d.Routes.GUILD_DISCOVERY)}})),h(o.default,{tag:"a",onClick:t,className:f.default.allGamesContainer},void 0,c.default.Messages.APPLICATION_STORE_HOME_VIEW_ALL_APPLICATIONS,h(i.default,{name:i.default.Names.RIGHT_CARET,className:f.default.caret})))};t.ApplicationResultsEmpty=m,m.displayName="ApplicationResultsEmpty"},6820:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=u(n(6127)),o=u(n(6129)),i=n(0),l=u(n(10)),s=u(n(5263));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c=function(e){var t=e.recommendedSkuIds,n=e.onSKUViewed;return d("div",{},void 0,d("h3",{className:s.default.categoryHeader},void 0,l.default.Messages.APPLICATION_STORE_RECOMMENDED_HEADER),d("div",{},void 0,d(o.default,{tileWidth:i.PREMIUM_HOME_TILE_WIDTH,tileMargin:i.PREMIUM_HOME_TILE_MARGIN},void 0,d(a.default,{tileClassName:s.default.homeTile,skuIds:t,onSKUViewed:n,maxTiles:10,wrap:!1}))))};c.displayName="RecommendedApplications";var f=c;t.default=f},6821:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=O(n(2)),o=S(n(17)),i=n(59),l=S(n(803)),s=n(5938),u=O(n(303)),d=S(n(5851)),c=S(n(35)),f=S(n(189)),p=O(n(6130)),h=S(n(18)),v=n(113),m=S(n(6022)),y=S(n(6822)),_=O(n(6823)),g=S(n(6826)),E=S(n(6827)),I=n(0),T=S(n(5440));function S(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var C=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={visibleIndex:0,isVisible:!0},t._nextTimeout=new i.Timeout,t.trackViewedItem=function(){var e=t.state.visibleIndex,n=t.props,r=n.items,a=n.analyticsContext,o=a.loadId,i=a.location,l=r[e];if(null!=l){var s={card_index:e,load_id:o,location:i};if(null==l.skuId)h.default.track(I.AnalyticEvents.STORE_DIRECTORY_HERO_VIEWED,N({},s));else{var u=f.default.get(l.skuId);if(null==u)return;var d=c.default.getGame(u.applicationId);if(null==d)return;h.default.track(I.AnalyticEvents.STORE_DIRECTORY_HERO_VIEWED,N({},s,{card_type:"application",application_id:d.id,sku_id:l.skuId}))}}},t.prevItem=function(){var e=t.state.visibleIndex,n=t.props.items;0===e?t.setState({visibleIndex:n.length-1}):t.setState({visibleIndex:e-1})},t.nextItem=function(){var e=t.props.items,n=t.state.visibleIndex;t.setState({visibleIndex:(n+1)%e.length})},t.handleSetItem=function(e){t.setState({visibleIndex:e})},t.handleVisibilityChange=function(e){t.setState({isVisible:e})},t.handleApplicationContextMenu=function(e,t){u.openContextMenu(e,function(e){return a.createElement(m.default,N({},e,{type:I.ContextMenuTypes.APPLICATION_STORE_DIRECTORY,applicationId:t}))})},t.renderHero=function(e,n){var r=t.props,a=r.analyticsContext,o=r.isWindowFocused;return A(_.default,{backgroundOverride:e.background,media:null!=e.skuId||null!=e.fullVideo||null!=e.previewVideo||null!=e.thumbnail?A(g.default,{heroCarouselItem:e,forcePaused:!t.state.isVisible||!o,analyticsContext:a,onEnd:t.nextItem}):null,description:A(y.default,{heroCarouselItem:e,analyticsContext:a,onContextMenu:t.handleApplicationContextMenu}),skuId:e.skuId},e.skuId||n)},t.renderPaginationItem=function(e,n){var r=t.state.visibleIndex===n;return A(_.HeroCarouselPaginationItem,{selected:r,pagination:A(E.default,{skuId:e.skuId,customTitle:e.title,customPaginationImage:e.paginationImage})},e.skuId||n)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var d=r.prototype;return d.componentDidMount=function(){this.trackViewedItem(),this.maybeScheduleNextItem(),v.ComponentDispatch.subscribe(I.ComponentActions.CAROUSEL_PREV,this.prevItem),v.ComponentDispatch.subscribe(I.ComponentActions.CAROUSEL_NEXT,this.nextItem)},d.componentDidUpdate=function(e,t){this.state.visibleIndex!==t.visibleIndex&&(this.trackViewedItem(),this.maybeScheduleNextItem())},d.componentWillUnmount=function(){this._nextTimeout.stop(),v.ComponentDispatch.unsubscribe(I.ComponentActions.CAROUSEL_PREV,this.prevItem),v.ComponentDispatch.unsubscribe(I.ComponentActions.CAROUSEL_NEXT,this.nextItem)},d.maybeScheduleNextItem=function(e){void 0===e&&(e=3e4);var t=this.state.visibleIndex,n=this.props.items[t];null!=n&&null==n.skuId&&null==n.previewVideo?this._nextTimeout.start(e,this.nextItem):this._nextTimeout.stop()},d.renderPagination=function(){var e=this.props.items,t=this.state.visibleIndex;return A("div",{className:T.default.paginationContainer},void 0,A("div",{className:T.default.pagination},void 0,A(p.CarouselPrevious,{className:T.default.prevArrow,onClick:this.prevItem}),A(p.default,{renderItem:this.renderPaginationItem,items:e,selectedIndex:t,onSetItem:this.handleSetItem}),A(p.CarouselNext,{className:T.default.nextArrow,onClick:this.nextItem})))},d.render=function(){var e=this.props,t=e.className,n=e.items,r=this.state.visibleIndex;return A(s.VisibilitySensor,{onChange:this.handleVisibilityChange},void 0,A("div",{className:(0,o.default)(T.default.heroCarousel,t)},void 0,A(l.default,{className:T.default.carouselContainer},void 0,this.renderHero(n[r],r)),this.renderPagination()))},r}(a.PureComponent);C.displayName="HeroCarousel";var R=(0,d.default)(C);t.default=R},6822:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=g(n(4)),i=n(232),l=n(114),s=g(n(3)),u=g(n(189)),d=g(n(807)),c=g(n(112)),f=g(n(18)),p=n(130),h=g(n(5921)),v=g(n(5902)),m=n(0),y=g(n(10)),_=g(n(5435));function g(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).trackLinkClicked=function(){var e=t.props,n=e.sku,r=e.analyticsContext,a=e.heroCarouselItem.url;null!=n?f.default.track(m.AnalyticEvents.STORE_DIRECTORY_CARD_INTERACTED,I({},n.getAnalyticsData(),{is_hero:!0,load_id:r.loadId,location:t.analyticsLocation})):null!=a&&(0,l.parse)(a).hash===m.PREMIUM_ROUTE_HASH&&f.default.track(m.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location:r.location})},t.getLocation=function(){var e=t.props,n=e.sku,r=e.heroCarouselItem.url,a=e.analyticsContext;if(null!=r){var o=(0,l.parse)(r);return{pathname:o.pathname,hash:o.hash,search:o.search,state:{analyticsSource:a.location}}}return null!=n?(0,p.getStoreListingLocation)(n.id,{slug:n.slug,analyticsSource:t.analyticsLocation}):(console.error("Missing url or store listing location"),m.Routes.APPLICATION_STORE)},t.handleContextMenu=function(e){var n=t.props,r=n.sku,a=n.onContextMenu;null!=r&&null!=a&&a(e,r.applicationId)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,s,u,d=r.prototype;return d.getHeader=function(e){return null==e?null:e.exclusive?y.default.Messages.APPLICATION_STORE_FIRST_ON_DISCORD:e.premium?y.default.Messages.APPLICATION_STORE_HERO_CAROUSEL_FEATURED_PREMIUM_GAME:null!=e.releaseDate&&e.releaseDate.isAfter((0,o.default)().subtract(2,"weeks"))?y.default.Messages.APPLICATION_STORE_HERO_CAROUSEL_NEW_RELEASE:y.default.Messages.APPLICATION_STORE_HERO_CAROUSEL_FEATURED_GAME},d.render=function(){var e=this.props,t=e.sku,n=e.storeListing,r=e.heroCarouselItem,a=r.description,o=r.title,l=r.header,s=r.buttonLabel,u=this.getLocation();return E("div",{className:_.default.itemDescription},void 0,E("h2",{className:_.default.header},void 0,null!=l?l:this.getHeader(t)),E(i.Link,{to:u,onClick:this.trackLinkClicked,onContextMenu:this.handleContextMenu},void 0,E("h1",{className:_.default.title},void 0,o||(null!=t?t.name:null))),E("div",{className:_.default.tagline},void 0,a||(null!=n?n.tagline:"")),E("div",{className:null!=t&&t.isOnSale?_.default.actionsContainerSale:_.default.actionsContainerNormal},void 0,null!=t&&t.requiresPayment?E(v.default,{type:v.default.Types.DIRECTORY_HERO,sku:t,inLibrary:!1,className:_.default.price}):null!=t?E("div",{className:_.default.buyButtonWrapper},void 0,E(h.default,{skuId:t.id,applicationId:t.applicationId,size:c.default.Sizes.SMALL,onStoreListing:!0})):null,E(c.default.Link,{to:u,onClick:this.trackLinkClicked,look:c.default.Looks.OUTLINED,color:c.default.Colors.WHITE,className:null!=t&&t.isOnSale?_.default.learnMoreButtonSale:_.default.learnMoreButton},void 0,s||y.default.Messages.APPLICATION_STORE_HERO_CAROUSEL_LEARN_MORE)))},a=r,(s=[{key:"analyticsLocation",get:function(){return I({},this.props.analyticsContext.location,{object:m.AnalyticsObjects.CAROUSEL})}}])&&T(a.prototype,s),u&&T(a,u),r}(a.PureComponent);S.displayName="HeroCarouselApplicationDescription";var O=s.default.connectStores([d.default,u.default],function(e){var t=e.heroCarouselItem.skuId,n=null!=t?u.default.get(t):null;return{sku:n,storeListing:null!=n?d.default.getForSKU(n.id):null}})(S);t.default=O},6823:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.HeroCarouselPaginationItem=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=c(n(17)),i=c(n(304)),l=c(n(231)),s=c(n(6824)),u=c(n(6825)),d=c(n(5437));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var h=300,v=i.default.Easing.bezier(.17,.67,.16,.99),m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._animatedItemContainer=new i.default.Value(1),t._animatedMedia=new i.default.Value(1),t.state={playing:!1,videoError:!1},t.componentWillEnter=function(e){t._animatedMedia.setValue(0),t._animatedItemContainer.setValue(0),i.default.parallel([i.default.timing(t._animatedMedia,{toValue:1,duration:400}),i.default.timing(t._animatedItemContainer,{toValue:1,delay:150,duration:350})]).start(e)},t.componentWillLeave=function(e){i.default.parallel([i.default.timing(t._animatedMedia,{toValue:0,delay:25,duration:h}),i.default.timing(t._animatedItemContainer,{toValue:0,duration:h})]).start(e)},t}p(t,e);var n=t.prototype;return n.getBackgroundStyle=function(){return i.default.accelerate({transform:[{translateY:this._animatedItemContainer.interpolate({inputRange:[0,1],outputRange:["-20px","0px"]})},{scale:this._animatedItemContainer.interpolate({inputRange:[0,1],outputRange:[.98,1]})}]})},n.getDescriptionStyle=function(){return i.default.accelerate({transform:[{translateY:this._animatedItemContainer.interpolate({inputRange:[0,1],outputRange:["-20px","0px"]})}]})},n.getMediaStyle=function(){return i.default.accelerate({transform:[{scale:this._animatedMedia.interpolate({inputRange:[0,1],outputRange:[.8,1],easing:v})}],opacity:this._animatedMedia.interpolate({inputRange:[0,.4,1],outputRange:[0,0,1],easing:v})})},n.getContainerStyle=function(){return i.default.accelerate({opacity:this._animatedItemContainer.interpolate({inputRange:[0,1],outputRange:[0,1],easing:i.default.Easing.out(i.default.Easing.ease)})})},n.renderMedia=function(e){return f(i.default.div,{style:this.getMediaStyle(),className:d.default.itemMedia},void 0,f(s.default,{},void 0,e))},n.render=function(){var e=this.props,t=e.description,n=e.skuId,r=e.backgroundOverride,a=e.media;return f(i.default.div,{className:d.default.carouselItem,style:this.getContainerStyle()},void 0,f(i.default.div,{className:d.default.itemBackground,style:this.getBackgroundStyle()},void 0,f(u.default,{skuId:n,backgroundOverride:r})),f("div",{className:d.default.itemBody},void 0,f(i.default.div,{className:d.default.itemDescriptionContainer,style:this.getDescriptionStyle()},void 0,t),null!=a?f("div",{className:d.default.itemMediaContainer},void 0,this.renderMedia(a)):null))},t}(a.PureComponent);m.displayName="HeroCarouselItem";var y=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.render=function(){var e,t=this.props,n=t.pagination,r=t.selected,a=t.onClick;return f(l.default,{onClick:a,className:(0,o.default)(d.default.paginationItemContainer,(e={},e[d.default.paginationSelected]=r,e))},void 0,n,r?f("div",{className:d.default.overlappingBorder}):null)},t}(a.PureComponent);t.HeroCarouselPaginationItem=y,y.displayName="HeroCarouselPaginationItem";var _=m;t.default=_},6824:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=n(100),l=(r=n(304))&&r.__esModule?r:{default:r},s=n(819);function u(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c={WebkitFontSmoothing:"subpixel-antialiased",MozFontSmoothing:"subpixel-antialiased",fontSmoothing:"subpixel-antialiased",backfaceVisibility:"hidden"},f=function(e){return d({transform:"perspective("+2*e+"px)",transformStyle:"preserve-3d"},c)},p={tension:50,friction:7},h=d({},p,{friction:4}),v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={width:t.props.width||0,height:t.props.height||0},t.horizontalRotation=new l.default.Value(0),t.verticalRotation=new l.default.Value(0),t.scale=new l.default.Value(1),t.handleMouseEnter=function(){var e=t.props.hoverScale;t.animateTo({scaleValue:e})},t.handleMouseMove=function(e){var n=e.clientX,r=e.clientY,a=e.currentTarget,o=t.state,i=o.width,l=o.height,s=a.getBoundingClientRect(),u=s.top,d=-1*((n-s.left)/i*2-1),c=(r-u)/l*2-1;t.animateTo({horizontalValue:d,verticalValue:c})},t.handleMouseLeave=function(){t.animateTo({horizontalValue:0,verticalValue:0,scaleValue:1})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){if(0===this.state.width||0===this.state.height){var e=(0,i.findDOMNode)(this);if(e instanceof HTMLElement){var t=e.getBoundingClientRect(),n=t.width,r=t.height;this.setState({width:n,height:r})}}},a.animateTo=function(e){var t=e.horizontalValue,n=e.verticalValue,r=e.scaleValue,a=this.horizontalRotation,o=this.verticalRotation,i=this.scale;null!=r&&l.default.spring(i,d({},h,{toValue:r})).start(),null!=t&&l.default.spring(a,d({},p,{toValue:t})).start(),null!=n&&l.default.spring(o,d({},p,{toValue:n})).start()},a.getAnimatedStyle=function(){var e=this.horizontalRotation,t=this.verticalRotation,n=this.scale,r=this.props.interpolateLengthToAngle,a=this.state,o=a.width,i=a.height;return l.default.accelerate(d({},c,{transform:[{rotateX:t.interpolate({inputRange:[0,1],outputRange:["0deg",r(i)+"deg"]})},{rotateY:e.interpolate({inputRange:[0,1],outputRange:["0deg",r(o)+"deg"]})},{scale:n}]}))},a.render=function(){var e=this.state,t=e.width,n=e.height,r=this.props.children;return s.isMobile||s.isTablet?r:u("div",{style:f(Math.max(t,n)),onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave},void 0,u(l.default.div,{style:this.getAnimatedStyle()},void 0,r))},r}(o.Component);v.displayName="HoverCard",v.defaultProps={hoverScale:1.015,interpolateLengthToAngle:function(e){return-.0030075188*e+6.8120300752}};var m=v;t.default=m},6825:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=f(n(3)),i=f(n(189)),l=f(n(807)),s=n(6337),u=n(130),d=n(0),c=f(n(5436));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.getBackgroundStyle=function(){var e,t=this.props,n=t.backgroundOverride,r=t.applicationId,a=t.storeListing;return{backgroundImage:null!=(e=null!=n?(0,u.getAssetURL)(r||d.CustomDiscordApplicationId,n,1280):null!=a&&null!=a.heroBackground?(0,u.getAssetURL)(r,a.heroBackground,1280,"jpg"):(0,s.getApplicationBackground)(r))?"url("+e+")":null}},o.render=function(){return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("div",{className:c.default.itemBackground,style:this.getBackgroundStyle()})},a}(a.PureComponent);p.displayName="HeroCarouselBackground";var h=o.default.connectStores([i.default,l.default],function(e){var t=e.skuId,n=null!=t?i.default.get(t):null;return{applicationId:null!=n?n.applicationId:null,storeListing:null!=n?l.default.getForSKU(n.id):null}})(p);t.default=h},6826:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=_(n(3)),i=_(n(189)),l=_(n(807)),s=_(n(231)),u=_(n(5973)),d=_(n(5949)),c=_(n(18)),f=n(6337),p=n(113),h=n(130),v=n(0),m=_(n(10)),y=_(n(5438));function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var I=400,T=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._trailerRef=a.createRef(),t._previewRef=a.createRef(),t.state={trailerPlaying:!1,trailerVideoError:!1,showTrailer:!1},t.handleTilePlaying=function(e){!e.muted&&t.state.trailerPlaying&&t.setState({trailerPlaying:!1})},t.handleUpdatePlayPreview=function(e){var n=t._previewRef.current;null!=n&&(e?n.play():n.pause())},t.handleUpdatePlayTrailer=function(e){var n=t._trailerRef.current;null!=n&&n.setPlay(e)},t.handleTrailerError=function(){t.setState({trailerVideoError:!0})},t.handlePlay=function(){t.setState({trailerPlaying:!0});var e=t.props,n=e.sku,r=e.analyticsContext;null!=n&&c.default.track(v.AnalyticEvents.STORE_DIRECTORY_CARD_INTERACTED,E({},n.getAnalyticsData(),{is_hero:!0,watch_trailer:!0,load_id:r.loadId,location:r.location}))},t.handlePause=function(){t.setState({trailerPlaying:!1})},t.getThumbnailAsset=function(){var e=t.props,n=e.heroCarouselItem.thumbnail,r=e.storeListing;return null!=n?n:null!=r&&null!=r.thumbnail?r.thumbnail:null},t.getPreviewVideoAsset=function(){var e=t.props,n=e.heroCarouselItem.previewVideo,r=e.storeListing;return null!=n?n:null!=r&&null!=r.previewVideo?r.previewVideo:null},t.getFullVideoUrl=function(e){var n=t.props,r=n.heroCarouselItem.fullVideo,a=n.storeListing;return null!=r?(0,h.getAssetURL)(e,r):null!=a&&null!=a.heroVideo?(0,h.getAssetURL)(e,a.heroVideo):(0,f.getApplicationTrailer)(e)},t.renderTrailer=function(e){var n=t.props.onEnd,r=t.getFullVideoUrl(e),o=t.getThumbnailAsset(),i=t.getPreviewVideoAsset();return a.createElement(u.default,{width:"100%",height:"100%",ref:t._trailerRef,className:y.default.itemTrailer,poster:o?(0,h.getAssetURL)(e,o,I):null,onError:t.handleTrailerError,src:t.state.trailerVideoError&&null!=i?(0,h.getAssetURL)(e,i):r,type:u.default.Types.VIDEO,onPlay:t.handlePlay,onPause:t.handlePause,onEnd:n})},t.renderPreview=function(e){var n=t.props,r=n.onEnd,o=n.forcePaused,i=t.getPreviewVideoAsset();return null==i?t.renderThumbnail(e):g("div",{className:y.default.itemPreviewContainer},void 0,g("div",{className:y.default.playContainer},void 0,g(d.default,{className:y.default.playPill,onPlay:t.showTrailer,playText:t.state.trailerVideoError?null:m.default.Messages.PLAY_FULL_VIDEO})),a.createElement("video",{ref:t._previewRef,className:y.default.itemPreview,muted:!0,autoPlay:!o,playsInline:!0,onEnded:r},g("source",{src:(0,h.getAssetURL)(e,i),type:"video/mp4"})))},t.renderThumbnail=function(e){var n=t.getThumbnailAsset();return null==n?null:g("div",{className:y.default.itemPreviewContainer},void 0,g("div",{className:y.default.itemPreview,style:{backgroundImage:"url("+(0,h.getAssetURL)(e,n,I)+")"}}))},t.showTrailer=function(e){e.preventDefault(),e.stopPropagation(),t.state.showTrailer||t.setState({showTrailer:!0,trailerPlaying:!0})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){return t.showTrailer&&e.forcePaused&&t.trailerPlaying?{trailerPlaying:!1}:null};var o=r.prototype;return o.componentWillUnmount=function(){p.ComponentDispatch.unsubscribe(v.ComponentActions.STORE_VIDEO_PLAY,this.handleTilePlaying)},o.componentDidMount=function(){p.ComponentDispatch.subscribe(v.ComponentActions.STORE_VIDEO_PLAY,this.handleTilePlaying)},o.componentDidUpdate=function(e){var t=this.props.forcePaused;this.state.showTrailer&&this.handleUpdatePlayTrailer(this.state.trailerPlaying),this.props.forcePaused!==e.forcePaused&&this.handleUpdatePlayPreview(!t)},o.render=function(){var e=this.state.showTrailer,t=this.props,n=t.sku,r=null==t.heroCarouselItem.skuId?v.CustomDiscordApplicationId:null!=n?n.applicationId:null;return null==r?null:g(s.default,{className:y.default.applicationMedia,onClick:this.showTrailer},void 0,e?this.renderTrailer(r):null!=this.getPreviewVideoAsset()?this.renderPreview(r):this.renderThumbnail(r))},r}(a.Component);T.displayName="HeroCarouselMedia";var S=o.default.connectStores([l.default,i.default],function(e){var t=e.heroCarouselItem.skuId,n=null!=t?i.default.get(t):null;return{sku:n,storeListing:null!=n?l.default.getForSKU(n.id):null}})(T);t.default=S},6827:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=d(n(3)),o=d(n(189)),i=d(n(807)),l=n(130),s=n(0),u=d(n(5439));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.sku,n=e.storeListing,a=e.customTitle,o=e.customPaginationImage,i=null!=a?a:null!=t?t.name:null,d=null!=t?t.applicationId:s.CustomDiscordApplicationId,c=null!=o?o:null!=n?n.thumbnail:null;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("img",{className:u.default.paginationItem,src:null!=c?(0,l.getAssetURL)(d,c,80):null,alt:i})};c.displayName="HeroCarouselPagination";var f=a.default.connectStores([i.default,o.default],function(e){var t=e.skuId,n=null!=t?o.default.get(t):null;return{sku:n,storeListing:null!=n?i.default.getForSKU(n.id):null}})(c);t.default=f},6828:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=n(818),l=(r=n(6627))&&r.__esModule?r:{default:r};n(5908);var s=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).fetchStoreListing=function(e){var n=t.props,r=n.storeListingId,a=n.skuId,o=n.applicationId,l=null!=e?e:a;return null!=r?(0,i.fetchStoreListingById)(r):null!=l?(0,i.fetchStoreListingForSku)(l):null!=o?(0,i.fetchStoreListingForApplication)(o):void 0},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.fetchStoreListing()},o.render=function(){var e=this.props,t=e.skuId,n=e.applicationId,r=e.slug,o=e.storeListingId,i=e.pageSize,s=e.location;return function(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(l.default,{inputSkuId:t,applicationId:n,fetchStoreListing:this.fetchStoreListing,slug:r,storeListingId:o,location:s,pageSize:i})},r}(o.Component);s.displayName="DirectoryStoreListing";var u=s;t.default=u},6829:function(e,t,n){"use strict";t.__esModule=!0,t.fetchStatisticsForApplication=function(e){return u.apply(this,arguments)};var r=l(n(9)),a=l(n(1)),o=l(n(170)),i=n(0);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function u(){var e;return e=regeneratorRuntime.mark(function e(t){var n,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dispatch({type:i.ActionTypes.APPLICATION_ACTIVITY_STATISTICS_FETCH_START,applicationId:t}),e.prev=1,e.next=4,r.default.get(i.Endpoints.APPLICATION_ACTIVITY_STATISTICS(t));case 4:return n=e.sent,l=n.body,a.default.dispatch({type:i.ActionTypes.APPLICATION_ACTIVITY_STATISTICS_FETCH_SUCCESS,statistics:l,applicationId:t}),e.abrupt("return",l);case 10:throw e.prev=10,e.t0=e.catch(1),a.default.dispatch({type:i.ActionTypes.APPLICATION_ACTIVITY_STATISTICS_FETCH_FAIL,applicationId:t}),new o.default(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}),(u=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,l,"next",e)}function l(e){s(o,r,a,i,l,"throw",e)}i(void 0)})}).apply(this,arguments)}},6830:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=Object.freeze({THING:"Thing",PERSON:"Person",PRODUCT:"Product",OFFER:"Offer",AGGREGATE_OFFER:"AggregateOffer",RATING:"Rating",AGGREGATE_RATING:"AggregateRating",ORGANIZATION:"Organization",ITEM_PAGE:"ItemPage",UNIT_PRICE_SPECIFICATION:"UnitPriceSpecification",QUANTITATIVE_VALUE:"QuantitativeValue"});function l(e){return function e(t){return Object.keys(t).forEach(function(n){null==t[n]?delete t[n]:"object"==typeof t[n]?t[n]=e(t[n]):t[n]=t[n]}),t}(function(e){var t;try{t=JSON.parse(JSON.stringify(e))}catch(e){throw new Error("[JSONLD] Invalid object format")}return t}(e))}function s(e,t){return o({"@type":e},l(t))}function u(e){return s(i.THING,e)}var d=u;function c(e){return s(i.PRODUCT,e)}c.Image=function(e){if(null==e)return null;var t=e.filter(function(e){return null!=e&&""!==e});return 0===t.length?null:1===t.length?t[0]:t};var f=Object.freeze({DAMAGED:"http://schema.org/DamagedCondition",NEW:"http://schema.org/NewCondition",REFURBISHED:"http://schema.org/RefurbishedCondition",USED:"http://schema.org/UsedCondition"}),p=Object.freeze({DISCONTINUED:"http://schema.org/Discontinued",IN_STOCK:"http://schema.org/InStock",IN_STORE_ONLY:"http://schema.org/InStoreOnly",LIMITED_AVAILABILITY:"http://schema.org/LimitedAvailability",ONLINE_ONLY:"http://schema.org/OnlineOnly",OUT_OF_STOCK:"http://schema.org/OutOfStock",PREORDER:"http://schema.org/PreOrder",PRESALE:"http://schema.org/PreSale",SOLD_OUT:"http://schema.org/SoldOut"});function h(e){return s(i.OFFER,e)}h.ItemConditions=f,h.ItemAvailability=p;var v=Object.freeze({ANNUAL:"ANN",MONTHLY:"MON"});function m(e){return s(i.QUANTITATIVE_VALUE,e)}m.UnitCodes=v;var y=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){var e=this.props,t=(e.debug,e.data);return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("script",{type:"application/ld+json"},void 0,JSON.stringify(o({"@context":"http://schema.org"},t)))},a}(a.Component);y.displayName="JSONLD",y.Thing=u,y.Brand=d,y.Person=function(e){return s(i.PERSON,e)},y.Organization=function(e){return s(i.ORGANIZATION,e)},y.ItemPage=function(e){return s(i.ITEM_PAGE,e)},y.Product=c,y.Offer=h,y.Rating=function(e){return s(i.RATING,e)},y.AggregateRating=function(e){return s(i.AGGREGATE_RATING,e)},y.AggregateOffer=function(e){return s(i.AGGREGATE_OFFER,e)},y.QuantitativeValue=m,y.UnitPriceSpecification=function(e){return s(i.UNIT_PRICE_SPECIFICATION,e)};var _=y;t.default=_},6831:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=(f(n(814)),f(n(5875))),l=f(n(6832)),s=f(n(158)),u=n(0),d=f(n(10)),c=f(n(5443));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=((r={})[u.ContentRatingAgencies.ESRB]={1:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_ALCOHOL_REFERENCE,2:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_ANIMATED_BLOOD,3:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_BLOOD,4:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_BLOOD_AND_GORE,5:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_CARTOON_VIOLENCE,6:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_COMIC_MISCHIEF,7:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_CRUDE_HUMOR,8:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_DRUG_REFERENCE,9:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_FANTASY_VIOLENCE,10:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_INTENSE_VIOLENCE,11:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_LANGUAGE,12:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_LYRICS,13:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_MATURE_HUMOR,14:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_NUDITY,15:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_PARTUAL_NUDITY,16:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_REAL_GAMBLING,17:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_SEXUAL_CONTENT,18:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_SEXUAL_THEMES,19:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_SEXUAL_VIOLENCE,20:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_SIMULATED_GAMBLING,21:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_STRONG_LANGUAGE,22:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_STRONG_LYRICS,23:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_STRONG_SEXUAL_CONTENT,24:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_SUGGESTIVE_THEMES,25:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_TOBACCO_REFERENCE,26:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_USE_OF_ALCOHOL,27:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_USE_OF_DRUGS,28:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_USE_OF_TOBACCO,29:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_VIOLENCE,30:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_VIOLENT_REFERENCES,31:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_IN_GAME_PURCHASES,32:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_USERS_INTERACT,33:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_SHARES_LOCATION,34:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_ESRB_UNRESTRICTED_INTERNET},r[u.ContentRatingAgencies.PEGI]={1:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_PEGI_VIOLENCE,2:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_PEGI_BAD_LANGUAGE,3:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_PEGI_FEAR,4:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_PEGI_GAMBLING,5:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_PEGI_SEX,6:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_PEGI_DRUGS,7:d.default.Messages.APPLICATION_STORE_RATING_DESCRIPTORS_PEGI_DISCRIMINATION},r),v=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderContentRatingImage=function(){var e=this.props.sku,t=e.contentRating,n=e.contentRatingAgency;return null==t||null==n?null:p(l.default,{className:c.default.rating,agency:n,rating:t.rating})},a.render=function(){var e=this.props,t=e.sku,n=t.contentRating,r=t.contentRatingAgency,a=e.className;if(null==n||null==r)return null;var o=n.descriptors.map(function(e){return h[r][e]}).join(", ");return p("div",{className:a},void 0,p(i.default,{},void 0,d.default.Messages.APPLICATION_STORE_SECTION_TITLE_RATINGS),p(s.default,{className:c.default.content},void 0,this.renderContentRatingImage(),p("div",{className:c.default.info},void 0,o)))},r}(o.PureComponent);v.displayName="ApplicationContentRating";var m=v;t.default=m},6832:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.Categories=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a,o,i,l=d(n(17)),s=n(0),u=d(n(5442));function d(e){return e&&e.__esModule?e:{default:e}}var c={ESRB:{EVERYONE:"1",EVERYONE_TEN_PLUS:"2",TEEN:"3",MATURE:"4",ADULT:"5",RATING_PENDING:"6"},PEGI:{THREE:"1",SEVEN:"2",TWELVE:"3",SIXTEEN:"4",EIGHTEEN:"5"}};t.Categories=c;var f=((o={})[s.ContentRatingAgencies.ESRB]=((r={})[c.ESRB.EVERYONE]=u.default.esrbEveryone,r[c.ESRB.EVERYONE_TEN_PLUS]=u.default.esrbEveryoneTenPlus,r[c.ESRB.TEEN]=u.default.esrbTeen,r[c.ESRB.MATURE]=u.default.esrbMature,r[c.ESRB.ADULT]=u.default.esrbAdult,r[c.ESRB.RATING_PENDING]=u.default.esrbRatingPending,r),o[s.ContentRatingAgencies.PEGI]=((a={})[c.PEGI.THREE]=u.default.pegiThree,a[c.PEGI.SEVEN]=u.default.pegiSeven,a[c.PEGI.TWELVE]=u.default.pegiTwelve,a[c.PEGI.SIXTEEN]=u.default.pegiSixteen,a[c.PEGI.EIGHTEEN]=u.default.pegiEighteen,a),o),p=function(e){var t=e.agency,n=e.rating,r=e.className,a=f[t][n];return null==a?null:function(e,t,n,r){i||(i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===o)t.children=r;else if(o>1){for(var s=new Array(o),u=0;u<o;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:i,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("div",{className:(0,l.default)(u.default.contentRating,a,r)})};p.displayName="ContentRating";var h=p;t.default=h},6833:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=p(n(17)),i=p(n(202)),l=p(n(112)),s=p(n(5875)),u=p(n(6692)),d=n(130),c=p(n(10)),f=p(n(5444));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=/^!\[([^\]]*)\]\(asset:\/\/(\d+)\)/,y=v({},u.default.rules,{heading:v({},u.default.rules.heading,{react:function(e,t,n){var r="h"+Math.min(Math.max(2,e.level+1),4);return h(s.default,{tag:r},n.key,t(e.content,n))}}),assetImage:{order:5,match:function(e,t){var n=e.match(m);if(null!=n){var r=n[2],a=t.assets.find(function(e){return e.id===r});return null!=a&&[].concat(n,[a,t.applicationId])}return!1},parse:function(e){return{asset:e[3],alt:e[1],applicationId:e[4]}},react:function(e,t,n){return h("div",{className:f.default.assetWrapper},n.key,h("img",{alt:e.alt,src:(0,d.getAssetURL)(e.applicationId,e.asset,800),className:f.default.asset}))}}}),_=i.default.parserFor(y),g=i.default.ruleOutput(y,"react"),E=i.default.reactFor(g),I=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={collapsed:!0,collapsable:!0},t.handleToggleCollapse=function(){t.setState({collapsed:!t.state.collapsed})},t.setContentContainerRef=function(e){t._container=e},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){if(null!=this._container){var e=this._container.getBoundingClientRect().height>400;this.setState({collapsable:e})}},i.render=function(){var e,t=this.props,n=t.applicationId,r=t.description,i=t.blurb,s=t.className,d=t.assets,p=this.state,v=p.collapsed,m=p.collapsable;return h("div",{className:s},void 0,h("div",{className:(0,o.default)((e={},e[f.default.collapsed]=m&&v,e))},void 0,a.createElement("div",{ref:this.setContentContainerRef},h("div",{className:f.default.blurb},void 0,i),h(u.default,{className:f.default.description,parser:_,output:E,state:{assets:d,applicationId:n}},void 0,r))),m?h(l.default,{className:f.default.toggleCollapseButton,onClick:this.handleToggleCollapse,color:l.default.Colors.PRIMARY},void 0,v?c.default.Messages.APPLICATION_STORE_DESCRIPTION_READ_MORE:c.default.Messages.APPLICATION_STORE_DESCRIPTION_READ_LESS):null)},r}(a.PureComponent);I.displayName="ApplicationDescription";var T=I;t.default=T},6834:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=c(n(5875)),i=c(n(302)),l=c(n(426)),s=n(0),u=c(n(10)),d=c(n(5445));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=[{feature:s.SKUFeatureTypes.SINGLE_PLAYER,getText:function(){return u.default.Messages.APPLICATION_STORE_SINGLE_PLAYER},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_SINGLE_PLAYER_TOOLTIP},iconName:i.default.Names.PERSON},{feature:s.SKUFeatureTypes.LOCAL_MULTIPLAYER,getText:function(){return u.default.Messages.APPLICATION_STORE_LOCAL_MULTIPLAYER},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_LOCAL_MULTIPLAYER_TOOLTIP},iconName:i.default.Names.PEOPLE},{feature:s.SKUFeatureTypes.ONLINE_MULTIPLAYER,getText:function(){return u.default.Messages.APPLICATION_STORE_ONLINE_MULTIPLAYER},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_ONLINE_MULTIPLAYER_TOOLTIP},iconName:i.default.Names.PEOPLE},{feature:s.SKUFeatureTypes.PVP,getText:function(){return u.default.Messages.APPLICATION_STORE_PVP},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_PVP_TOOLTIP},iconName:i.default.Names.MODERATION},{feature:s.SKUFeatureTypes.LOCAL_COOP,getText:function(){return u.default.Messages.APPLICATION_STORE_LOCAL_COOP},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_LOCAL_COOP_TOOLTIP},iconName:i.default.Names.PEOPLE},{feature:s.SKUFeatureTypes.ONLINE_COOP,getText:function(){return u.default.Messages.APPLICATION_STORE_ONLINE_COOP},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_ONLINE_COOP_TOOLTIP},iconName:i.default.Names.PEOPLE},{feature:s.SKUFeatureTypes.CROSS_PLATFORM,getText:function(){return u.default.Messages.APPLICATION_STORE_CROSS_PLATFORM},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_CROSS_PLATFORM_TOOLTIP},iconName:i.default.Names.SYNCED},{feature:s.SKUFeatureTypes.RICH_PRESENCE,getText:function(){return u.default.Messages.APPLICATION_STORE_RICH_PRESENCE},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_RICH_PRESENCE_TOOLTIP},iconName:i.default.Names.RICH_ACTIVITY},{feature:s.SKUFeatureTypes.DISCORD_GAME_INVITES,getText:function(){return u.default.Messages.APPLICATION_STORE_DISCORD_GAME_INVITES},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_DISCORD_GAME_INVITES_TOOLTIP},iconName:i.default.Names.PLUS_CIRCLE_PLAY},{feature:s.SKUFeatureTypes.SPECTATOR_MODE,getText:function(){return u.default.Messages.APPLICATION_STORE_SPECTATOR_MODE},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_SPECTATOR_MODE_TOOLTIP},iconName:i.default.Names.VIDEO_CAMERA},{feature:s.SKUFeatureTypes.CONTROLLER_SUPPORT,getText:function(){return u.default.Messages.APPLICATION_STORE_CONTROLLER_SUPPORT},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_CONTROLLER_SUPPORT_TOOLTIP},iconName:i.default.Names.GAMEPAD},{feature:s.SKUFeatureTypes.CLOUD_SAVES,getText:function(){return u.default.Messages.APPLICATION_STORE_CLOUD_SAVES},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_CLOUD_SAVES_TOOLTIP},iconName:i.default.Names.CLOUD},{feature:s.SKUFeatureTypes.SECURE_NETWORKING,getText:function(){return u.default.Messages.APPLICATION_STORE_SECURE_NETWORKING},getTooltip:function(){return u.default.Messages.APPLICATION_STORE_SECURE_NETWORKING_TOOLTIP},iconName:i.default.Names.SECURE_NETWORKING}],h=function(e){var t=e.iconName,n=e.text,r=e.tooltip;return f("div",{className:d.default.row},void 0,f(l.default,{text:r},void 0,f(i.default,{name:t,className:d.default.featureIcon})),f("span",{className:d.default.featureText},void 0,n),f(i.default,{name:i.default.Names.CHECKMARK,className:d.default.checkmarkIcon}))};h.displayName="ApplicationFeature";var v=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props.sku,t=p.filter(function(t){var n=t.feature;return e.features.has(n)}).map(function(e){var t=e.feature,n=e.iconName,r=e.getText,a=e.getTooltip;return f(h,{iconName:n,text:r(),tooltip:a()},t)});return 0===t.length?null:f("div",{className:d.default.features},void 0,f(o.default,{},void 0,u.default.Messages.APPLICATION_STORE_SECTION_TITLE_FEATURES),t)},r}(a.PureComponent);v.displayName="ApplicationFeatureFlags";var m=v;t.default=m},6835:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=(s(n(814)),s(n(5875))),i=s(n(10)),l=s(n(5446));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.className,n=e.sku;return null==n.legalNotice?null:u("div",{className:t},void 0,u(o.default,{},void 0,i.default.Messages.APPLICATION_STORE_SECTION_TITLE_COPYRIGHT),u("div",{className:l.default.content},void 0,n.legalNotice))},r}(a.PureComponent);d.displayName="ApplicationLegalInfo";var c=d;t.default=c},6836:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=v(n(3)),i=v(n(134)),l=v(n(73)),s=v(n(830)),u=v(n(6507)),d=v(n(112)),c=v(n(5875)),f=v(n(6837)),p=v(n(10)),h=v(n(5449));function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var y=function(t){var n,r;function a(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).handleViewAllClick=function(){var t=e.props.application;l.default.push(f.default,{application:t})},e}r=t,(n=a).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var o=a.prototype;return o.componentDidMount=function(){var t=this.props,n=t.isFetched,r=t.application;n||e(function(){return i.default.getGameNews([r.id])})},o.render=function(){var e=this.props,t=e.application,n=e.news,r=e.className,a=n.length>4;return 0===n.length?null:m("div",{className:r},void 0,m(c.default,{},void 0,p.default.Messages.APPLICATION_STORE_SECTION_TITLE_NEWS),n.slice(0,4).map(function(e,n){return m(u.default,{game:t,news:e,collapsed:0!==n},e.url)}),a?m(d.default,{className:h.default.viewAllButton,size:d.default.Sizes.SMALL,color:d.default.Colors.PRIMARY,onClick:this.handleViewAllClick},void 0,p.default.Messages.APPLICATION_STORE_VIEW_ALL_NEWS):null)},a}(a.Component);y.displayName="ApplicationNews";var _=o.default.connectStores([s.default],function(e){var t=e.application;return{news:s.default.getByGameId(t.id),isFetched:s.default.isFetched(t.id)}})(y);t.default=_}).call(this,n(30).setImmediate)},6837:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=p(n(3)),i=p(n(73)),l=p(n(830)),s=p(n(6507)),u=p(n(158)),d=p(n(188)),c=p(n(10)),f=p(n(5448));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).close=function(){i.default.pop()},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.application,n=e.news;return h(d.default,{size:d.default.Sizes.LARGE,className:f.default.modal},void 0,h(d.default.Header,{justify:u.default.Justify.BETWEEN},void 0,h("div",{},void 0,h("div",{className:f.default.headerTitle},void 0,t.name),h("div",{className:f.default.headerSubtitle},void 0,c.default.Messages.APPLICATION_STORE_ALL_NEWS)),h(d.default.CloseButton,{onClick:this.close})),h(d.default.Content,{},void 0,n.map(function(e){return h(s.default,{game:t,news:e,collapsed:!1},e.url)})))},r}(a.PureComponent);v.displayName="ApplicationAllNewsModal";var m=o.default.connectStores([l.default],function(e){var t=e.application;return{news:l.default.getByGameId(t.id)}})(v);t.default=m},6838:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=_(n(3)),i=n(818),l=_(n(5851)),s=_(n(189)),u=_(n(807)),d=_(n(5875)),c=n(130),f=_(n(6506)),p=_(n(6128)),h=_(n(6129)),v=n(0),m=_(n(10)),y=_(n(5450));function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var E=g(f.default,{}),I=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isLoading:!0},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){var e=this,t=[],n=this.props.premiumPerkSkuIds,r=Array.isArray(n),a=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(a>=n.length)break;o=n[a++]}else{if((a=n.next()).done)break;o=a.value}var l=o;t.push((0,i.fetchStoreListingForSku)(l).catch(function(){return null}))}Promise.all(t).then(function(){return e.setState({isLoading:!1})})},a.getTileData=function(e,t){return{image:null!=t.thumbnail?(0,c.getAssetURL)(e.applicationId,t.thumbnail,600):null,video:null!=t.previewVideo?(0,c.getAssetURL)(e.applicationId,t.previewVideo):null,name:e.name,tagline:null!=t.tagline?t.tagline:"",skuId:e.id}},a.renderSinglePerk=function(e,t){return g(p.default,{tileData:this.getTileData(t,e),type:v.StoreDirectoryTileTypes.PERK_FULL_MEDIA,className:y.default.perkTileLarge},e.id)},a.renderPerkScroller=function(e){var t=this;return g(h.default,{tileWidth:v.PREMIUM_PERK_LISTING_TILE_WIDTH,tileMargin:v.PREMIUM_PERK_LISTING_TILE_MARGIN},void 0,e.map(function(e){return g(p.default,{tileData:t.getTileData(e.sku,e.listing),type:v.StoreDirectoryTileTypes.PERK,className:y.default.perkTile},e.listing.id)}))},a.render=function(){var e=this.props,t=e.className,n=e.perkSkuAndStoreListingPairs;return this.state.isLoading?null:0===n.length?null:g("div",{className:t},void 0,g(d.default,{tag:"h1"},void 0,m.default.Messages.APPLICATION_STORE_PREMIUM_PERKS),E,n.length>1?this.renderPerkScroller(n):this.renderSinglePerk(n[0].listing,n[0].sku))},r}(a.PureComponent);I.displayName="ApplicationPremiumPerks";var T=Object.freeze([]),S=(0,l.default)(o.default.connectStores([u.default,s.default],function(e){var t=e.sku,n=e.storeListing;if(null==n)return{premiumPerkSkuIds:T,perkSkuAndStoreListingPairs:T};var r=n.childSkuIds.filter(function(e){return t.id!==e}).map(s.default.get).filter(Boolean).filter(function(e){return e.isPremiumPerk()}),a=r.map(function(e){if(null==e)return null;var t=u.default.getForSKU(e.id);return null==t?null:{sku:e,listing:t}}).filter(Boolean);return{premiumPerkSkuIds:r.map(function(e){return e.id}),perkSkuAndStoreListingPairs:a}})(I));t.default=S},6839:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),a=c(n(73)),o=c(n(438)),i=c(n(6508)),l=c(n(6841)),s=c(n(6843)),u=n(0),d=n(5908);function c(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var h=2048;function v(e){return e.split("?")[0]+"?size="+h}var m=function(e){var t=e.index,n=e.items,a=p(e,["index","items"]),o=n[t],i=0,s=[],d=n,c=Array.isArray(d),h=0;for(d=c?d:d[Symbol.iterator]();;){var m;if(c){if(h>=d.length)break;m=d[h++]}else{if((h=d.next()).done)break;m=h.value}var y=m;if(y.type===u.CarouselMediaTypes.IMG){var _=y.width,g=y.height,E=y.src;y===o&&(i=s.length),s.push({src:v(E),width:_,height:g})}}return r.createElement(l.default,f({},a,{items:s,startWith:i}))};m.displayName="ZoomedCarousel";var y=function(e){var t,n;function l(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(t=e.call.apply(e,[this].concat(i))||this).handleCurrentItemClick=function(e,n){e.type!==u.CarouselMediaTypes.IMG||o.default.hasModalOpen()||a.default.push(function(e){return r.createElement(m,f({},e,{index:n,items:t.props.items}))})},t}return n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,l.prototype.render=function(){var e=this.props,t=e.pageSize,n=p(e,["pageSize"]),a=t===d.PageSizes.SMALL?s.default:i.default;return r.createElement(a,f({},n,{onCurrentItemClick:this.handleCurrentItemClick}))},l}(r.Component);y.displayName="ApplicationStoreListingCarousel";var _=y;t.default=_},6840:function(e,t,n){"use strict";t.__esModule=!0,t.normalizeIndex=h,t.default=t.CarouselWithPreview=t.Alignment=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=u(n(17)),i=u(n(304)),l=u(n(5882)),s=u(n(5451));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f={tension:7,friction:5,overshootClamping:!0},p={LEFT:"left",CENTER:"center",RIGHT:"right"};function h(e,t){return(e%t+t)%t}t.Alignment=p;var v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).animatedIndex=new i.default.Value(t.props.currentIndex),t.animatedAlignmentOffset=new i.default.Value(t.getAlignmentOffset(t.props.align)),t.animatedOpacity=new i.default.Value(1),t.getItemStyle=function(){var e=t.props.itemSize,n=e.width;return{flexBasis:n,marginRight:e.margin,height:e.height,width:n}},t.interpolateValueForItem=function(e){return t.animatedIndex.interpolate({inputRange:[e-1,e,e+1],outputRange:[0,1,0],extrapolate:"clamp"})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidUpdate=function(e){var t=this.props,n=t.align,r=t.animate,a=t.currentIndex,o=t.items,l=h(a,o.length),s=h(e.currentIndex,o.length);l===s&&o.length===e.items.length||this.updateAnimatedIndex(l,s),r&&n!==e.align&&i.default.spring(this.animatedAlignmentOffset,c({},f,{toValue:this.getAlignmentOffset(n)})).start()},a.getAlignmentOffset=function(e){var t=this.props,n=t.width,r=t.itemSize,a=t.gutter;return e===p.CENTER?(n-r.width)/2:e===p.RIGHT?n-r.width-a:a},a.getCarouselTranslate=function(){var e=this.props,t=e.itemSize;return e.edgeItems*(t.width+t.margin)},a.animateToIndex=function(e,t){var n=this.animatedIndex,r=this.props,a=r.items;r.edgeItems>0&&(0===e&&t===a.length-1?n.setValue(-1):0===t&&e===a.length-1&&a.length>2&&n.setValue(a.length)),i.default.spring(n,c({},f,{toValue:e})).start()},a.updateAnimatedIndex=function(e,t){var n=this.animatedIndex,r=this.animatedOpacity;this.props.animate?this.animateToIndex(e,t):i.default.timing(r,{fromValue:1,toValue:0,duration:100}).start(function(){n.setValue(e),i.default.timing(r,{fromValue:0,toValue:1,duration:100}).start()})},a.renderSingleItem=function(){var e=this.props,t=e.renderItem,n=e.items,r=e.itemSize,a=e.className;return d("div",{className:(0,o.default)(s.default.singleItemWrapper,s.default.viewport,a)},void 0,d("div",{className:s.default.singleItem,style:{width:r.width,height:r.height}},void 0,t(n[0],0)))},a.renderCarouselItems=function(){var e=this,t=this.animatedIndex,n=this.animatedAlignmentOffset,r=this.animatedOpacity,a=this.props,o=a.renderItem,l=a.items,u=a.itemSize,c=a.edgeItems,f=u.margin,p=u.width,h=this.getCarouselTranslate(),v=this.getItemStyle(),m=(c>0?[].concat(l.slice(-c),l,l.slice(0,c)):l).map(function(t,n){return d("div",{style:v,className:s.default.item},n,o(t,n-c,e.interpolateValueForItem(n-c)))});return d(i.default.div,{className:s.default.carousel,style:{opacity:r,left:i.default.add(t.interpolate({inputRange:[0,1],outputRange:[-h,-f-p-h]}),n)}},void 0,m)},a.render=function(){var e=this.props,t=e.items,n=e.className;if(t.length<=0)throw new Error("Carousel has no items");return 1===t.length?this.renderSingleItem():d("div",{className:(0,o.default)(s.default.viewport,n)},void 0,this.renderCarouselItems())},r}(a.Component);t.CarouselWithPreview=v,v.displayName="CarouselWithPreview",v.defaultProps={animate:!0,edgeItems:2,align:p.CENTER,gutter:0};var m=(0,l.default)(v);t.default=m},6841:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=v(n(6063)),i=v(n(304)),l=v(n(803)),s=v(n(5999)),u=n(6842),d=v(n(5886)),c=n(6130),f=n(242),p=n(0),h=v(n(5453));function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var g={friction:10,tension:100};function E(e,t){return(e%t+t)%t}var I=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={translate:new i.default.Value(0),opacity:new i.default.Value(1)},t}_(t,e);var n=t.prototype;return n.componentWillEnter=function(e){var t=this.props.directionHistory,n=this.state,r=n.translate,a=n.opacity;r.setValue(t[t.length-1]),a.setValue(0),e(),i.default.parallel([i.default.timing(a,{toValue:1,easing:i.default.Easing.out(i.default.Easing.linear),duration:200}),i.default.spring(r,y({toValue:0},g))]).start()},n.componentWillLeave=function(e){var t=this.props.directionHistory,n=this.state,r=n.opacity,a=n.translate;i.default.parallel([i.default.timing(r,{toValue:0,easing:i.default.Easing.in(i.default.Easing.linear),duration:200}),i.default.spring(a,y({toValue:-1*t[t.length-1]},g))]).start(e)},n.getStyle=function(){var e=this.state,t=e.translate,n=e.opacity;return i.default.accelerate({opacity:n,transform:[{translateX:t.interpolate({inputRange:[0,1],outputRange:["0px","300px"]})}]})},n.render=function(){var e=this.props.item;return m(i.default.img,{src:e.src,alt:"",className:h.default.slide,style:this.getStyle()})},t}(a.Component);I.displayName="ModalCarouselItem";var T=function(e){function t(t){var n;return(n=e.call(this,t)||this).gotoNext=function(){var e=n.state.currentIndex;n.navigateTo(e+1)},n.gotoPrev=function(){var e=n.state.currentIndex;n.navigateTo(e-1)},n.state={currentIndex:t.startWith,directionHistory:[]},n}_(t,e);var n=t.prototype;return n.componentDidMount=function(){this.preloadNextImages(),d.default.disable(),d.default.enableTemp(u.MODAL_CAROUSEL_LAYOUT)},n.componentWillUnmount=function(){d.default.disableTemp()},n.preloadNextImages=function(){var e=this.state.currentIndex,t=this.props.items,n=E(e+1,t.length),r=E(e-1,t.length);this.preloadImage(t[n]),this.preloadImage(t[r])},n.preloadImage=function(e){(0,f.loadImage)(e.src)},n.componentDidUpdate=function(e,t){this.state.currentIndex!==t.currentIndex&&this.preloadNextImages()},n.navigateTo=function(e){var t=this.state,n=t.directionHistory,r=t.currentIndex;n.push(e-r),e=E(e,this.props.items.length),this.setState({currentIndex:e,directionHistory:n})},n.render=function(){var e=this.props.onClose,t=this.state,n=t.currentIndex,r=t.directionHistory;return m(l.default,{component:"div",className:h.default.wrapper,onClick:e},void 0,m(c.CarouselPrevious,{className:h.default.navPrev,onClick:this.gotoPrev}),m(I,{item:this.props.items[n],directionHistory:r},this.props.items[n].src),m(c.CarouselNext,{className:h.default.navNext,onClick:this.gotoNext}))},t}(a.Component);T.displayName="ModalCarousel",T.defaultProps={startWith:0};var S=(0,s.default)(function(e,t){var n;return(n={})[p.ComponentActions.MODAL_CAROUSEL_NEXT]=(0,o.default)(t.gotoNext,300),n[p.ComponentActions.MODAL_CAROUSEL_PREV]=(0,o.default)(t.gotoPrev,300),n})(T);t.default=S},6842:function(e,t,n){"use strict";t.__esModule=!0,t.MODAL_CAROUSEL_LAYOUT=void 0;var r,a=n(6501),o=n(0),i=((r={})[o.KeybindActions.MODAL_CAROUSEL_NEXT]=a.MODAL_CAROUSEL_NEXT,r[o.KeybindActions.MODAL_CAROUSEL_PREV]=a.MODAL_CAROUSEL_PREV,r);t.MODAL_CAROUSEL_LAYOUT=i},6843:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=h(n(17)),i=h(n(6695)),l=h(n(231)),s=n(5924),u=h(n(5939)),d=n(6508),c=n(0),f=n(5908),p=h(n(5454));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var y=function(e){var t=e.className,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["className"]);return a.createElement(u.default,m({},n,{className:(0,o.default)(p.default.sizedToParent,t),mediaPlayerClassName:p.default.sizedToParent}))};y.displayName="CarouselVideo";var _={width:1280,height:720},g={width:640,height:360},E=function(e){var t,n,r=e.item,a=e.onPlay,o=e.volume,i=e.onVolumeChange,l=e.onMute,u=e.isMuted;if(r.type===c.CarouselMediaTypes.YOUTUBE_VIDEO)t=m({url:(0,c.YOUTUBE_PREVIEW_URL)(r.youtubeVideoId)},_),n=m({url:(0,c.YOUTUBE_EMBED_URL)(r.youtubeVideoId)+"?rel=0&iv_load_policy=3&showinfo=0&modestbranding=1"},g);else{var h=null!=r.width?r.width:0,E=null!=r.height?r.height:0;t={url:r.thumbnailSrc,width:h,height:E},n={url:r.src,proxyURL:r.src,width:h,height:E}}return v("div",{className:p.default.embedContainer},void 0,v(s.EmbedVideo,{className:p.default.sizedToParent,href:null,thumbnail:t,VideoComponent:y,video:n,maxHeight:d.ItemSizes.SMALL.height,maxWidth:f.PageSizes.SMALL,onPlay:a,playable:!0,volume:o,onVolumeChange:i,autoMute:u,onMute:l,autoPlay:!0}))};E.displayName="Video";var I=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={hasInteracted:!1,isVideoPlaying:!1,isMuted:!0,volume:1},t.handlePlay=function(e){t.setState({isVideoPlaying:!0,hasInteracted:!e})},t.handleVolumeChange=function(e){t.setState({volume:e,hasInteracted:!0})},t.handleMute=function(e){t.setState({isMuted:e,hasInteracted:!0})},t.handleChangeItem=function(){t.setState({isVideoPlaying:!1})},t.handleIntentionalChange=function(e,n,r,a){t.setState({hasInteracted:!0});var o=t.props.onIntentionalChange;null!=o&&o(e,n,r,a)},t.renderItem=function(e,n){var r,a=t.state,o=a.isMuted,i=a.volume;switch(e.type){case c.CarouselMediaTypes.YOUTUBE_VIDEO:case c.CarouselMediaTypes.VIDEO:r=v(E,{item:e,onPlay:t.handlePlay,isMuted:o,volume:i,onVolumeChange:t.handleVolumeChange,onMute:t.handleMute});break;case c.CarouselMediaTypes.IMG:r=v("img",{className:p.default.smallCarouselImage,src:e.src,alt:""});break;default:throw new Error("Unexpected MediaType")}return v(l.default,{className:p.default.smallCarouselItem,onClick:function(){return t.handleCurrentItemClick(e,n)}},void 0,r)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.handleCurrentItemClick=function(e,t){var n=this.props.onCurrentItemClick;null!=n&&n(e,t),this.setState({hasInteracted:!0})},a.render=function(){var e=this.props,t=e.items,n=e.autoplayInterval,r=e.paused,a=this.state.hasInteracted;return v(i.default,{items:t.slice(0,12),delay:n,paused:r||a,renderItem:this.renderItem,className:p.default.smallCarousel,onIntentionalChange:this.handleIntentionalChange,onChangeItem:this.handleChangeItem})},r}(a.PureComponent);I.displayName="SmallMediaCarousel",I.defaultProps={paused:!1};var T=I;t.default=T},6844:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(818),i=(u(n(115)),u(n(6318))),l=u(n(10)),s=u(n(5455));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleDisagree=function(){(0,o.matureDisagree)()},t.handleAgree=function(){(0,o.matureAgree)()},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props.game.name;return d("div",{className:s.default.matureListing},void 0,d(i.default,{onAgree:this.handleAgree,onDisagree:this.handleDisagree,title:l.default.Messages.MATURE_LISTING_TITLE.format({name:e}),description:l.default.Messages.MATURE_LISTING_DESCRIPTION,agreement:l.default.Messages.MATURE_LISTING_ACCEPT,disagreement:l.default.Messages.MATURE_LISTING_DECLINE}))},r}(a.PureComponent);c.displayName="ApplicationStoreListingMature";var f=c;t.default=f},6845:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ApplicationStorePurchaseUnit=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=L(n(17)),i=n(232),l=L(n(3)),s=n(455),u=L(n(800)),d=L(n(88)),c=L(n(14)),f=L(n(827)),p=L(n(6846)),h=L(n(112)),v=L(n(158)),m=L(n(302)),y=L(n(190)),_=n(815),g=n(5903),E=L(n(5921)),I=L(n(5902)),T=L(n(6847)),S=L(n(6848)),O=L(n(6509)),A=L(n(6849)),N=n(6110),C=L(n(6850)),R=n(0),P=L(n(10)),M=L(n(5254)),b=L(n(5461));function L(e){return e&&e.__esModule?e:{default:e}}function D(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var w=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._applicationBuyButtonRef=a.createRef(),t.handleViewLibrary=function(e){var n=t.props.libraryApplication;null!=n&&n.isHidden()&&(e.preventDefault(),u.default.open(R.UserSettingsSections.GAME_LIBRARY))},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.componentDidMount=function(){var e=this.props,t=e.isEntitled,n=e.isFetchingEntitlementsForApplication,r=e.sku,a=e.currentUser;null!=t||n||null==a||r.type===R.SKUTypes.GAME||(0,s.fetchUserEntitlementsForApplication)(r.applicationId)},l.getApplicationBuyButton=function(){return this._applicationBuyButtonRef.current},l.getActionText=function(){var e=this.props,t=e.sku,n=e.isEntitled,r=e.storeListing,a=function(e){switch(e.type){case R.SKUTypes.DLC:return{distribution:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_DISTRIBUTION_DLC,free:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_FREE_DLC,preorder:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_PREORDER_DLC,preorderEntitled:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_PREORDER_ENTITLED};case R.SKUTypes.CONSUMABLE:return{distribution:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_DISTRIBUTION_CONSUMABLE,free:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_FREE_CONSUMABLE,preorder:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_PREORDER_CONSUMABLE,preorderEntitled:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_PREORDER_ENTITLED};case R.SKUTypes.BUNDLE:return{distribution:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_DISTRIBUTION_BUNDLE,free:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_FREE_BUNDLE,preorder:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_PREORDER_BUNDLE,preorderEntitled:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_PREORDER_ENTITLED};case R.SKUTypes.GAME:default:return{distribution:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_DISTRIBUTION_APPLICATION,free:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_FREE_APPLICATION,preorder:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_PREORDER_APPLICATION,preorderEntitled:P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_PREORDER_ENTITLED}}}(t),o=null!=r.entitlementBranchId;return!t.available&&t.premium?P.default.Messages.APPLICATION_STORE_COMING_SOON:t.isPreorder()&&!o?n?a.preorderEntitled:a.preorder:t.requiresPayment&&!o?a.distribution:a.free},l.renderHeader=function(){var e=this.props,t=e.isEntitled,n=e.libraryApplication,r=e.sku,a=e.currentUser;if(!0===t){var o=null!=n&&n.isHidden();return D(i.Link,{className:b.default.entitledHeader,to:{pathname:R.Routes.APPLICATION_LIBRARY,state:{applicationId:null!=n?n.id:null}},onClick:this.handleViewLibrary},void 0,D(m.default,{name:m.default.Names.LIBRARY,className:b.default.entitledHeaderIcon}),D("div",{},void 0,o?P.default.Messages.APPLICATION_STORE_PURCHASE_IN_LIBRARY_HIDDEN:P.default.Messages.APPLICATION_STORE_PURCHASE_IN_LIBRARY))}return r.exclusive?D("div",{className:b.default.exclusiveHeader},void 0,D("div",{className:b.default.exclusiveHeaderExclusive},void 0,P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_FIRST_ON),D(m.default,{name:m.default.Names.DISCORD_WORDMARK,className:b.default.exclusiveHeaderIcon})):r.premium?D("div",{className:b.default.premiumHeader},void 0,D(m.default,{name:m.default.Names.NITRO,className:b.default.premiumHeaderIcon}),y.default.canInstallPremiumApplications(a)?null:D("div",{className:b.default.premiumHeaderPrice},void 0,P.default.Messages.BILLING_PRICE_PER_MONTH.format({price:(0,_.formatPrice)(R.SubscriptionPlanInfo[R.SubscriptionPlans.PREMIUM_MONTH_TIER_2].price,R.CurrencyCodes.USD)}))):null},l.renderAlternativeSkus=function(){var e=this.props,t=e.storeListing,n=e.sku,r=e.guildId,o=e.channelId;return null!=t.entitlementBranchId||0===t.alternativeSkuIds.length?null:D(a.Fragment,{},void 0,D("div",{className:b.default.actionText},void 0,P.default.Messages.APPLICATION_STORE_LISTING_SELECT_EDITION),D(T.default,{storeListing:t,selectedSkuId:n.id,className:b.default.alternativeSkus,guildId:r,channelId:o}))},l.renderAccuratePreorderInfo=function(){var e=this.props,t=e.isEntitled,n=e.sku,r=e.isFocused;return n.isPreorder()&&null!=n.preorderReleaseAt&&t?D("div",{className:b.default.countdownSection},void 0,D("div",{className:b.default.countdownHeader},void 0,P.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_TIME_LEFT_UNTIL_RELEASE),D(p.default,{endTime:n.preorderReleaseAt.valueOf(),interval:r?1e3:6e4})):null},l.renderApproximatePreorderInfo=function(){var e=this.props,t=e.isEntitled,n=e.sku;if(!n.isPreorder()||null==n.preorderApproximateReleaseDate&&null!=n.preorderReleaseAt&&t)return null;var r=(0,g.getReadablePreorderReleaseDate)(n);return D("div",{className:b.default.releaseDate},void 0,P.default.Messages.APPLICATION_STORE_PURCHASE_AVAILABLE_DATE.format({releaseDate:r}))},l.renderPrice=function(){var e=this.props,t=e.sku,n=e.storeListing,r=e.isEntitled;if(t.restricted)return D("div",{className:b.default.price},void 0,P.default.Messages.APPLICATION_STORE_RESTRICTED);var a=null!=n.entitlementBranchId;return t.available&&(t.premium||null!=t.getPrice())||a?D("div",{className:b.default.price},void 0,D(I.default,{type:I.default.Types.LISTING,inLibrary:!0===r,sku:t,hasEntitlementBranch:a}),this.renderApproximatePreorderInfo()):!t.available&&t.premium?D("div",{className:(0,o.default)(b.default.price,M.default.listingPrice)},void 0,P.default.Messages.APPLICATION_STORE_FREE_WITH_PREMIUM):D("div",{className:b.default.price},void 0,P.default.Messages.APPLICATION_STORE_COMING_SOON)},l.renderBody=function(){var e=this.props,t=e.sku,n=e.game,r=e.channelId,o=e.isEntitled,i=e.isUserPremium,l=e.storeListing,s=t.isGiftable(),u=null!=l.entitlementBranchId;return D(a.Fragment,{},void 0,this.renderAccuratePreorderInfo(),D(v.default,{justify:v.default.Justify.BETWEEN,align:v.default.Align.CENTER,className:b.default.headerBar},void 0,D("div",{className:b.default.actionText},void 0,this.getActionText()),D(N.OperatingSystemSection,{systems:t.supportedOperatingSystems})),this.renderPrice(),!0!==o||!s||u?D(a.Fragment,{},void 0,a.createElement(E.default,{ref:this._applicationBuyButtonRef,skuId:t.id,applicationId:n.id,channelId:r,entitlementBranchId:l.entitlementBranchId,fullWidth:!0,onStoreListing:!0}),t.premium&&!i&&t.isAvailableForDistribution()&&!u?D(E.default,{skuId:t.id,applicationId:n.id,channelId:r,color:h.default.Colors.PRIMARY,className:b.default.secondaryBuyButton,forceDistribution:!0,shouldRenderPrice:!0,fullWidth:!0,onStoreListing:!0}):null):null,s&&!u?D(E.default,{asGift:!0,className:b.default.secondaryBuyButton,skuId:t.id,applicationId:n.id,channelId:r,fullWidth:!0,onStoreListing:!0,color:!0===o?h.default.Colors.GREEN:h.default.Colors.PRIMARY,hover:h.default.Hovers.DEFAULT}):null,D(O.default,{className:b.default.purchaseError}),D(A.default,{className:b.default.warning,sku:t}))},l.render=function(){var e=this.props,t=e.game,n=e.storeListing,r=e.sku,a=e.guildId,o=e.channelId,i=e.fetchStoreListing;return D("div",{className:e.className},void 0,this.renderHeader(),D("div",{className:b.default.bodySection},void 0,this.renderAlternativeSkus(),this.renderBody()),null==n.entitlementBranchId?D("div",{className:b.default.bodySection},void 0,D(C.default,{storeListing:n,sku:r,guildId:a,channelId:o,fetchStoreListing:i})):null,D("div",{className:b.default.bodySection},void 0,D(S.default,{game:t,sku:r})))},r}(a.PureComponent);t.ApplicationStorePurchaseUnit=w,w.displayName="ApplicationStorePurchaseUnit";var k=l.default.connectStores([c.default,f.default,d.default],function(e){var t=e.sku,n=e.game,r=e.storeListing,a=c.default.getNullableCurrentUser(),o=null!=r.entitlementBranchId?r.entitlementBranchId:n.id;return{isUserPremium:y.default.canInstallPremiumApplications(a),isEntitled:f.default.isEntitledToSku(a,t.id,n.id,o),isFetchingEntitlementsForApplication:f.default.applicationIdsFetching.has(t.applicationId),libraryApplication:d.default.getLibraryApplication(n.id,o),currentUser:a}},{forwardRef:!0})(w);t.default=k},6846:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=c(n(17)),i=n(59),l=n(810),s=c(n(6104)),u=c(n(10)),d=c(n(5456));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={now:Date.now()},t.interval=new i.Interval,t.handleIntervalUpdate=function(){t.setState({now:Date.now()})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){this.interval.start(this.props.interval,this.handleIntervalUpdate)},a.componentWillUnmount=function(){this.interval.stop()},a.componentDidUpdate=function(e){this.props.interval!==e.interval&&this.interval.start(this.props.interval,this.handleIntervalUpdate)},a.renderSection=function(e,t,n){return f("div",{className:n?d.default.unitClose:d.default.unitNormal},void 0,f(s.default,{className:d.default.duration,value:e,padStartLength:2,forcePosition:s.default.Positions.ABOVE}),f("div",{className:d.default.header},void 0,t))},a.render=function(){var e=this.props,t=e.endTime,n=e.className,r=(0,l.diffAsUnits)(this.state.now,t),a=r.days<1;return f("div",{className:(0,o.default)(d.default.countdown,n)},void 0,this.renderSection(r.days,u.default.Messages.APPLICATION_STORE_COUNTDOWN_DAYS,a),this.renderSection(r.hours,u.default.Messages.APPLICATION_STORE_COUNTDOWN_HOURS,a),this.renderSection(r.minutes,u.default.Messages.APPLICATION_STORE_COUNTDOWN_MINUTES,a),this.renderSection(r.seconds,u.default.Messages.APPLICATION_STORE_COUNTDOWN_SECONDS,a))},r}(a.Component);p.displayName="ApplicationStoreCountdown",p.defaultProps={interval:1e3};var h=p;t.default=h},6847:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(232),i=h(n(3)),l=h(n(5851)),s=h(n(189)),u=h(n(302)),d=h(n(426)),c=n(130),f=n(0),p=h(n(5457));function h(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,i,l,s=r.prototype;return s.renderSku=function(e,t){var n=this.props,r=n.selectedSkuId,a=n.guildId,i=n.channelId,l=e.id===r;return m(d.default,{text:e.getDisplayPrice()},e.id,m(o.Link,{className:l?p.default.alternativeSkuSelected:p.default.alternativeSkuDefault,to:(0,c.getStoreListingLocation)(e.id,{guildId:a,channelId:i,slug:e.slug,analyticsSource:this.analyticsLocation})},void 0,l?m(u.default,{name:u.default.Names.CHECKMARK,className:p.default.selectedIcon}):null,t))},s.render=function(){var e=this,t=this.props,n=t.skus,r=t.className;return 0===n.length?null:m("div",{className:r},void 0,m("div",{className:p.default.alternativeSkus},void 0,n.map(function(t){return e.renderSku(t,t.name)})))},a=r,(i=[{key:"analyticsLocation",get:function(){return v({},this.props.analyticsContext.location,{object:f.AnalyticsObjects.ALTERNATIVE_SKU})}}])&&y(a.prototype,i),l&&y(a,l),r}(a.PureComponent);_.displayName="AlternativeSkus";var g=i.default.connectStores([s.default],function(e){return{skus:e.storeListing.alternativeSkuIds.map(function(e){return s.default.get(e)}).filter(function(e){return null!=e})}})((0,l.default)(_));t.default=g},6848:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=v(n(2)),o=h(n(17)),i=n(232),l=h(n(5851)),s=(h(n(115)),h(n(814)),h(n(5875))),u=v(n(810)),d=n(5903),c=n(0),f=h(n(10)),p=h(n(5458));function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var y=function(e){var t=e.label,n=e.value;return m("div",{className:p.default.row},void 0,m("label",{className:p.default.label},void 0,t,":"),m("span",{className:p.default.info},void 0,n))};y.displayName="Row";var _=m("span",{},void 0,", "),g=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.renderReleaseDate=function(){var e=this.props.sku;return null==e.releaseDate?null:m(y,{label:f.default.Messages.APPLICATION_STORE_DETAILS_RELEASE_DATE,value:u.dateFormat(e.releaseDate,"LL")})},l.renderGenres=function(){var e=this.props,t=e.sku,n=e.analyticsContext.location;if(null==t.genres||0===t.genres.size)return null;var r=[];return t.genres.forEach(function(e){var o=(0,d.getGenreURLSlugFromId)(e),l=null!=o?"?genre="+o:"";r.push(m(a.Fragment,{},e,m(i.Link,{to:{pathname:c.Routes.APPLICATION_STORE_BROWSE,search:l,state:{scrollRestoration:!1,analyticsSource:n}},className:p.default.genre},void 0,(0,d.getGenreText)(e)),r.length<t.genres.size-1?_:null))}),m(y,{label:f.default.Messages.APPLICATION_STORE_DETAILS_GENRES,value:r})},l.renderDevelopers=function(){var e=this.props.game;if(0===e.developers.length)return null;var t=e.developers.map(function(e){return e.name}).join(", ");return m(y,{label:f.default.Messages.APPLICATION_STORE_DETAILS_DEVELOPER,value:t})},l.renderPublishers=function(){var e=this.props.game;if(0===e.publishers.length)return null;var t=e.publishers.map(function(e){return e.name}).join(", ");return m(y,{label:f.default.Messages.APPLICATION_STORE_DETAILS_PUBLISHER,value:t})},l.render=function(){var e=this.props.className;return m("div",{className:(0,o.default)(e,p.default.details)},void 0,m(s.default,{className:p.default.contentHeader},void 0,f.default.Messages.APPLICATION_STORE_SECTION_TITLE_DETAILS),this.renderReleaseDate(),this.renderGenres(),this.renderDevelopers(),this.renderPublishers())},r}(a.Component);g.displayName="ApplicationDetails";var E=(0,l.default)(g);t.default=E},6849:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=O(n(2)),o=S(n(17)),i=n(232),l=S(n(3)),s=S(n(73)),u=n(315),d=S(n(42)),c=S(n(14)),f=S(n(827)),p=S(n(189)),h=S(n(231)),v=S(n(308)),m=O(n(8)),y=n(130),_=n(819),g=S(n(440)),E=n(0),I=S(n(10)),T=S(n(5459));function S(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var N=Object.freeze({RESTRICTED_IN_REGION:1,REQUIRES_DESKTOP_APP:2,UNAVAILABLE_OPERATING_SYSTEM:3,DLC_REQUIRES_BASE_APPLICATION:4,EARLY_ACCESS:5,UNAVAILABLE_IN_LANGUAGE:6}),C=v.default.getArticleURL(E.HelpdeskArticles.APPLICATION_STORE_OVERVIEW),R=v.default.getArticleURL(E.HelpdeskArticles.APPLICATION_STORE_EARLY_ACCESS),P=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){var e=this.props,t=e.sku,n=e.dependentSku;null!=t.dependentSkuId&&null==n&&(0,u.fetchSKU)(t.applicationId,t.dependentSkuId)},a.getTitle=function(e){switch(e){case N.RESTRICTED_IN_REGION:return I.default.Messages.APPLICATION_STORE_WARNING_RESTRICTED_IN_REGION_TITLE;case N.REQUIRES_DESKTOP_APP:return I.default.Messages.APPLICATION_STORE_WARNING_REQUIRES_DESKTOP_APP_TITLE;case N.UNAVAILABLE_OPERATING_SYSTEM:switch(m.default.getPlatform()){case m.PlatformTypes.WINDOWS:return I.default.Messages.APPLICATION_STORE_WARNING_UNAVAILABLE_WINDOWS_TITLE;case m.PlatformTypes.OSX:return I.default.Messages.APPLICATION_STORE_WARNING_UNAVAILABLE_MAC_OS_TITLE;case m.PlatformTypes.LINUX:return I.default.Messages.APPLICATION_STORE_WARNING_UNAVAILABLE_LINUX_TITLE;default:return I.default.Messages.APPLICATION_STORE_WARNING_REQUIRES_DESKTOP_APP_TITLE}case N.DLC_REQUIRES_BASE_APPLICATION:return I.default.Messages.APPLICATION_STORE_WARNING_DLC_REQUIRES_BASE_APPLICATION_TITLE;case N.EARLY_ACCESS:return I.default.Messages.APPLICATION_STORE_WARNING_EARLY_ACCESS_TITLE;case N.UNAVAILABLE_IN_LANGUAGE:return I.default.Messages.APPLICATION_STORE_WARNING_UNAVAILABLE_IN_LANGUAGE_TITLE}},a.getDescription=function(e){var t=this;switch(e){case N.RESTRICTED_IN_REGION:return I.default.Messages.APPLICATION_STORE_WARNING_RESTRICTED_IN_REGION_DESCRIPTION.format({helpArticle:C});case N.REQUIRES_DESKTOP_APP:return I.default.Messages.APPLICATION_STORE_WARNING_REQUIRES_DESKTOP_APP_DESCRIPTION.format({downloadHook:function(e,n){return _.isMobile?e:A(h.default,{className:T.default.link,tag:"a",onClick:t.handleDownloadApps},n,e)}});case N.UNAVAILABLE_OPERATING_SYSTEM:return I.default.Messages.APPLICATION_STORE_WARNING_UNAVAILABLE_OS_DESCRIPTION;case N.DLC_REQUIRES_BASE_APPLICATION:var n=this.props.dependentSku;return null==n?null:I.default.Messages.APPLICATION_STORE_WARNING_DLC_REQUIRES_BASE_APPLICATION_DESCRIPTION.format({baseName:n.name,helpArticle:C,baseHook:function(e,t){return A(i.Link,{to:{pathname:E.Routes.APPLICATION_STORE_LISTING_SKU(n.id),state:{analyticsSource:E.AnalyticsLocations.APPLICATION_STORE_WARNING}}},t,e)}});case N.EARLY_ACCESS:return I.default.Messages.APPLICATION_STORE_WARNING_EARLY_ACCESS_DESCRIPTION.format({helpArticle:R});case N.UNAVAILABLE_IN_LANGUAGE:return I.default.Messages.APPLICATION_STORE_WARNING_UNAVAILABLE_IN_LANGUAGE_DESCRIPTION}},a.handleDownloadApps=function(){s.default.push(g.default,{source:E.AnalyticsLocations.APPLICATION_STORE_WARNING})},a.getColorClass=function(e){switch(e){case N.RESTRICTED_IN_REGION:return T.default.red;default:return T.default.yellow}},a.renderWarning=function(e){var t=this.getTitle(e),n=this.getDescription(e);return A("div",{className:(0,o.default)(T.default.warning,this.getColorClass(e))},e,A("div",{className:T.default.title},void 0,t),A("div",{className:T.default.description},void 0,n))},a.render=function(){var e=this.props,t=e.sku,n=e.dependentSku,r=e.isEntitledToDependentSku,a=e.className,o=[];return t.restricted&&o.push(this.renderWarning(N.RESTRICTED_IN_REGION)),m.default.isWeb()?o.push(this.renderWarning(N.REQUIRES_DESKTOP_APP)):t.supportedOperatingSystems.includes((0,y.nativePlatformTypeToSKUOperatingSystem)(m.default.getPlatform()))||o.push(this.renderWarning(N.UNAVAILABLE_OPERATING_SYSTEM)),null==n||r||o.push(this.renderWarning(N.DLC_REQUIRES_BASE_APPLICATION)),t.accessType===E.SKUAccessTypes.EARLY_ACCESS&&o.push(this.renderWarning(N.EARLY_ACCESS)),0===o.length?null:A("div",{className:a},void 0,o)},r}(a.PureComponent);P.displayName="ApplicationStoreWarning";var M=l.default.connectStores([c.default,d.default,f.default],function(e){var t=e.sku,n=null!=t.dependentSkuId?p.default.get(t.dependentSkuId):null;return{locale:d.default.locale,dependentSku:n,isEntitledToDependentSku:null!=t.dependentSkuId&&!0===f.default.isEntitledToSku(c.default.getNullableCurrentUser(),t.dependentSkuId,t.applicationId)}})(P);t.default=M},6850:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=n(232),i=y(n(3)),l=n(315),s=y(n(5851)),u=y(n(35)),d=y(n(189)),c=y(n(807)),f=y(n(112)),p=n(130),h=n(0),v=y(n(10)),m=y(n(5460));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function g(e,t){var n=e.applicationId,r=(0,p.getPrimarySKUForApplication)(n,u.default,d.default);return null!=r?c.default.getForSKU(r.id,t):null}var E=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isCollapsed:!0},t.handleCollapsedToggle=function(){t.setState({isCollapsed:!t.state.isCollapsed})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){var e=this.props,t=e.sku,n=e.fetchStoreListing;null==g(t,e.channelId)&&n(t.id)},i.componentDidUpdate=function(e){var t=this.props,n=t.sku,r=t.relatedSkuIds;if(null!=r&&r!==e.relatedSkuIds){var a=r,o=Array.isArray(a),i=0;for(a=o?a:a[Symbol.iterator]();;){var s;if(o){if(i>=a.length)break;s=a[i++]}else{if((i=a.next()).done)break;s=i.value}var u=s;(0,l.fetchSKU)(n.applicationId,u)}}},i.renderSection=function(e,t,n){var r=this.props,i=r.sku,l=r.channelId,s=r.guildId,u=r.analyticsContext,d=this.state.isCollapsed,c=5===t.length?5:4,y=d?t.slice(0,c):t,g=y.map(function(e,t){return _(o.Link,{className:n&&t===y.length-1?m.default.skuLast:m.default.skuNormal,to:(0,p.getStoreListingLocation)(e.id,{guildId:s,channelId:l,slug:e.slug,analyticsSource:u.location})},e.id,_("div",{className:m.default.name},void 0,e.name),_("div",{className:m.default.price},void 0,null!=e.getPrice()?e.getDisplayPrice():null))});return 0===g.length?null:_(a.Fragment,{},void 0,_("div",{className:m.default.title},void 0,function(e,t){if(e===t)switch(e){case h.SKUTypes.GAME:return v.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_GAMES_SAME;case h.SKUTypes.DLC:return v.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_DLC_SAME;case h.SKUTypes.CONSUMABLE:return v.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_CONSUMABLES_SAME;case h.SKUTypes.BUNDLE:return v.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_BUNDLES_SAME}else switch(e){case h.SKUTypes.GAME:return v.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_GAMES_DIFFERENT;case h.SKUTypes.DLC:return v.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_DLC_DIFFERENT;case h.SKUTypes.CONSUMABLE:return v.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_CONSUMABLES_DIFFERENT;case h.SKUTypes.BUNDLE:return v.default.Messages.APPLICATION_STORE_PURCHASE_HEADER_BUNDLES_DIFFERENT}}(e,i.type)),g,c<t.length&&d?_(f.default,{color:f.default.Colors.PRIMARY,size:f.default.Sizes.SMALL,onClick:this.handleCollapsedToggle,className:m.default.collapseButton},void 0,v.default.Messages.APPLICATION_STORE_EXPAND_DOWNLOADABLE_CONTENT):null)},i.render=function(){var e=this.props.relatedSKUs;if(0===e.length)return null;var t=e.filter(function(e){return e.type===h.SKUTypes.BUNDLE}),n=e.filter(function(e){return e.type===h.SKUTypes.DLC}),r=e.filter(function(e){return e.type===h.SKUTypes.CONSUMABLE});return _("div",{},void 0,this.renderSection(h.SKUTypes.BUNDLE,t,0===n.length&&0===r.length),this.renderSection(h.SKUTypes.DLC,n,0===r.length),this.renderSection(h.SKUTypes.CONSUMABLE,r,!0))},r}(a.PureComponent);E.displayName="RelatedContent";var I=(0,s.default)(i.default.connectStores([c.default,d.default],function(e){var t=e.sku,n=e.channelId,r=g(t,n);if(null==r)return{relatedSkuIds:void 0,relatedSKUs:Object.freeze([])};var a=r.childSkuIds.filter(function(e){return t.id!==e}).map(d.default.get).filter(Boolean).filter(function(e){return!e.isPremiumPerk()});return{relatedSkuIds:a.map(function(e){return e.id}),relatedSKUs:a}})(E));t.default=I},6851:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=E(n(17)),i=E(n(3)),l=E(n(6334)),s=E(n(6019)),u=E(n(14)),d=E(n(6505)),c=E(n(189)),f=E(n(807)),p=E(n(6510)),h=n(130),v=E(n(6852)),m=E(n(6853)),y=n(0),_=E(n(10)),g=E(n(5465));function E(e){return e&&e.__esModule?e:{default:e}}function I(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var T=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderReasons=function(e,t){return 0===e.length&&0===t.length?null:I("div",{className:g.default.section},void 0,I("div",{className:g.default.sectionContent},void 0,e.map(function(e){return I("div",{className:g.default.unit},e.type,I(v.default,{reason:e}))}),t.map(function(e){return I("div",{className:g.default.unit},e.type,I(p.default,{reason:e}))})))},a.getReviewToRender=function(){var e=this.props,t=e.storeListing,n=e.nonSocialReasons;if(null!=t.staffNotes)return{type:m.default.Types.STAFF_NOTES,staffNotes:t.staffNotes};var r=n.find(function(e){return e.type===y.StoreRecommendationTypes.METACRITIC_SCORE&&null!=e.reviewAggregator.reviews&&e.reviewAggregator.reviews.length>0});if(null!=r){if(r.type!==y.StoreRecommendationTypes.METACRITIC_SCORE||null==r.reviewAggregator)throw new Error("Unexpected null reviewAggregator");return{type:m.default.Types.METACRITIC_REVIEW,reviewAggregator:r.reviewAggregator}}return null},a.render=function(){var e=this.props,t=e.socialReasons,n=e.nonSocialReasons,r=e.storeListing,a=e.className;if(0===t.length&&0===n.length&&null==r.staffNotes)return null;var i=n,l=this.getReviewToRender();return null!=l&&l.type===m.default.Types.METACRITIC_REVIEW&&(i=n.filter(function(e){return e.type!==y.StoreRecommendationTypes.METACRITIC_SCORE})),I("div",{className:(0,o.default)(g.default.root,a)},void 0,I("div",{className:g.default.header},void 0,_.default.Messages.APPLICATION_STORE_SECTION_TITLE_RECOMMENDATION),this.renderReasons(t,i),null!=l?I(m.default,{data:l,className:g.default.review}):null)},r}(a.Component);T.displayName="ApplicationWhyYouMightLikeIt";var S=i.default.connectStores([c.default,u.default,f.default,l.default,s.default,d.default],function(e){var t=e.sku;return{socialReasons:(0,h.getSocialRecommendationReasons)(t.id,c.default,u.default,l.default,s.default,d.default),nonSocialReasons:(0,h.getNonSocialRecommendationReasons)(t.id,c.default,f.default)}})(T);t.default=S},6852:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=m(n(17)),l=m(n(5849)),s=m(n(5964)),u=m(n(5917)),d=m(n(795)),c=m(n(426)),f=m(n(5237)),p=n(0),h=m(n(10)),v=m(n(5463));function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=((r={})[p.StoreRecommendationTypes.NOW_PLAYING]={single:function(e,t){return h.default.Messages.APPLICATION_STORE_RECOMMENDATION_NOW_PLAYING_SINGLE.format({user1:e.username,user1Hook:function(){return t(e)}})},double:function(e,t,n){return h.default.Messages.APPLICATION_STORE_RECOMMENDATION_NOW_PLAYING_DOUBLE.format({user1:e.username,user1Hook:function(){return n(e)},user2:t.username,user2Hook:function(){return n(t)}})},other:function(e){return h.default.Messages.APPLICATION_STORE_RECOMMENDATION_NOW_PLAYING_OTHER.format({count:e})}},r[p.StoreRecommendationTypes.RECENTLY_PLAYED]={single:function(e,t){return h.default.Messages.APPLICATION_STORE_RECOMMENDATION_RECENTLY_PLAYED_SINGLE.format({user1:e.username,user1Hook:function(){return t(e)}})},double:function(e,t,n){return h.default.Messages.APPLICATION_STORE_RECOMMENDATION_RECENTLY_PLAYED_DOUBLE.format({user1:e.username,user1Hook:function(){return n(e)},user2:t.username,user2Hook:function(){return n(t)}})},other:function(e){return h.default.Messages.APPLICATION_STORE_RECOMMENDATION_RECENTLY_PLAYED_OTHER.format({count:e})}},r[p.StoreRecommendationTypes.EVER_PLAYED]={single:function(e,t){return h.default.Messages.APPLICATION_STORE_RECOMMENDATION_EVER_PLAYED_SINGLE.format({user1:e.username,user1Hook:function(){return t(e)}})},double:function(e,t,n){return h.default.Messages.APPLICATION_STORE_RECOMMENDATION_EVER_PLAYED_DOUBLE.format({user1:e.username,user1Hook:function(){return n(e)},user2:t.username,user2Hook:function(){return n(t)}})},other:function(e){return h.default.Messages.APPLICATION_STORE_RECOMMENDATION_EVER_PLAYED_OTHER.format({count:e})}},r),E=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderUserPopout=function(e,t){return o.createElement(f.default,_({},t,{userId:e.id}))},t.renderUserTooltip=function(e,t,n){return y("div",{className:v.default.tooltip},void 0,y("div",{},void 0,e.tag),y(s.default,{className:v.default.tooltipTimestamp,start:t,end:n,location:s.default.Locations.ACTIVITY_FEED}))},t.renderPlayer=function(e,n,r,a){var o,s=e;if(null==s)return null;var u=t.props.reason.userInfo.find(function(e){return e.user===s});return null==u?null:y(d.default,{render:function(e){return t.renderUserPopout(s,e)},position:d.default.Positions.RIGHT,closeOnScroll:!1},s.id,y(c.default,{text:t.renderUserTooltip(s,u.startTime,u.endTime),"aria-label":s.tag},void 0,y(l.default,{className:(0,i.default)(v.default.playerAvatar,(o={},o[v.default.avatarMasked]=!a,o)),src:s.getAvatarURL(),size:l.default.Sizes.SMALL})))},t.renderPlayerOverflow=function(e,t,n){return y("div",{className:v.default.playerOverflow},n,e)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderDescription=function(e,t){var n=this,r=g[e];return 1===t.length?r.single(t[0].user,function(e){return n.renderActivityDiscordTag(e)}):2===t.length?r.double(t[0].user,t[1].user,function(e){return n.renderActivityDiscordTag(e)}):r.other(t.length)},a.renderActivityDiscordTag=function(e){var t=this;return y(d.default,{render:function(n){return t.renderUserPopout(e,n)},position:d.default.Positions.RIGHT,closeOnScroll:!1},e.id,y("span",{className:v.default.username},void 0,e.username))},a.render=function(){var e=this.props,t=e.reason,n=e.className,r=t.type,a=t.userInfo;return 0===a.length?null:y("div",{className:(0,i.default)(v.default.recommendationActivity,n)},void 0,y(u.default,{className:v.default.players,users:a.map(function(e){return e.user}),renderUser:this.renderPlayer,max:4,renderMoreUsers:this.renderPlayerOverflow}),y("div",{className:v.default.description},void 0,this.renderDescription(r,a)))},r}(o.PureComponent);E.displayName="ApplicationRecommendationActivity";var I=E;t.default=I},6853:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a=h(n(17)),o=h(n(3)),i=h(n(161)),l=h(n(305)),s=n(5849),u=h(n(6510)),d=h(n(5884)),c=n(0),f=h(n(10)),p=h(n(5464));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=Object.freeze({STAFF_NOTES:1,METACRITIC_REVIEW:2}),y=function(e){var t=e.user,n=e.className,r=e.animate;return v("div",{className:(0,a.default)(p.default.staffReviewHeader,n)},void 0,v(d.default,{outerClassName:p.default.avatar,size:s.AvatarSizes.LARGE,user:t,animate:r}),v("div",{className:p.default.headerText},void 0,v("div",{className:p.default.label},void 0,f.default.Messages.APPLICATION_STORE_STAFF_PICK),v("div",{className:p.default.username},void 0,t.username)))};y.displayName="StaffReason";var _=o.default.connectStores([i.default],function(){return{animate:i.default.isFocused()}})(y),g=function(e){var t=e.data,n=e.className;if(t.type===m.STAFF_NOTES){if(null==t.staffNotes)return null;var r=t.staffNotes,a=r.user,o=r.content;return null==a?null:v("div",{className:n},void 0,v(_,{user:a,className:p.default.header}),v("div",{className:p.default.notes},void 0,o))}if(t.type===m.METACRITIC_REVIEW){var i=t.reviewAggregator;if(null==i.reviews)return null;for(var s=i.reviews[0],d=1;d<i.reviews.length;d++){var f=i.reviews[d];null!=f.score&&f.score>(null!=s.score?s.score:0)&&(s=f)}return v("div",{className:n},void 0,v(u.default,{reason:{type:c.StoreRecommendationTypes.METACRITIC_SCORE,reviewAggregator:t.reviewAggregator},className:p.default.header}),v("div",{className:p.default.notes},void 0,s.quote),v("div",{className:p.default.publisher},void 0,null!=s.url&&0!==s.url.length?v(l.default,{href:s.url,className:p.default.publisherAnchor},void 0,s.publisher):s.publisher))}throw new Error("Unknown type")};g.Types=m;var E=g;t.default=E},6854:function(e,t,n){"use strict";t.__esModule=!0,t.default=h;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(2));var r,a,o=d(n(5875)),i=d(n(6855)),l=n(6511),s=n(0),u=d(n(10));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(e){var t=e.review,n=e.className,r=(0,l.getRatingTier)(t);return null==r?null:c("div",{className:n},void 0,c(o.default,{},void 0,u.default.Messages.APPLICATION_STORE_SECTION_TITLE_METACRITIC),c(i.default,{score:t.criticScore,scoreColor:r.color,icon:i.default.Icons.METACRITIC,url:t.url},void 0,c(i.default.Verdict,{},void 0,r.label),c("span",{},void 0,u.default.Messages.METACRITIC_NUM_CRITIC_RATINGS.format({numRatings:t.criticTotalRatings})),c("span",{},void 0,u.default.Messages.METACRITIC_USER_SCORE.format({score:t.secondaryScore,numRatings:t.secondaryTotalRatings}))))}f.displayName="MetacriticReviewScoreCard";var p=((r={})[s.ReviewAggregators.METACRITIC]=f,r);function h(e){var t=e.review,n=e.className,r=p[t.aggregator];if(null==r)throw new Error("unknown review aggregator "+t.aggregator);return c(r,{review:t,className:n})}h.displayName="ReviewScoreCardWrapper"},6855:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=c(n(2)),o=d(n(231)),i=d(n(158)),l=c(n(302)),s=d(n(128)),u=d(n(5466));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=Object.freeze({METACRITIC:l.IconNames.METACRITIC});function h(e){var t=e.children;return f(s.default,{size:s.default.Sizes.MEDIUM,weight:s.default.Weights.SEMIBOLD,className:u.default.verdict},void 0,t)}h.displayName="ReviewScoreCardVerdict";var v=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderIcon=function(){var e=this.props.icon;return null==e?null:f(l.default,{name:e,width:100,height:100,className:u.default.icon})},a.renderCard=function(){var e=this.props,t=e.score,n=e.scoreColor,r=e.children;return f(i.default,{direction:i.default.Direction.HORIZONTAL,className:u.default.card},void 0,f(i.default,{align:i.default.Align.CENTER,justify:i.default.Justify.CENTER,grow:0,shrink:0,className:u.default.score,style:{backgroundColor:n}},void 0,t),f(i.default,{direction:i.default.Direction.VERTICAL,className:u.default.body},void 0,this.renderIcon(),r))},a.render=function(){var e=this.props.url;return null==e?this.renderCard():f(o.default,{tag:"a",href:e,rel:"noreferrer noopener",target:"_blank",className:u.default.clickableWrapper},void 0,this.renderCard())},r}(a.PureComponent);v.displayName="ReviewScoreCard",v.Icons=p,v.Verdict=h;var m=v;t.default=m},6856:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o,i=_(n(2)),l=y(n(17)),s=y(n(112)),u=y(n(5875)),d=y(n(158)),c=n(847),f=_(n(8)),p=n(0),h=y(n(10)),v=n(5908),m=y(n(5467));function y(e){return e&&e.__esModule?e:{default:e}}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function g(e,t,n,r){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var I=((r={})[p.OperatingSystems.WINDOWS]=h.default.Messages.WINDOWS,r[p.OperatingSystems.MACOS]=h.default.Messages.MACOS,r[p.OperatingSystems.LINUX]=h.default.Messages.LINUX,r),T=((a={})[p.OperatingSystems.WINDOWS]=f.PlatformTypes.WINDOWS,a[p.OperatingSystems.MACOS]=f.PlatformTypes.OSX,a[p.OperatingSystems.LINUX]=f.PlatformTypes.LINUX,a),S=function(e){function t(){return e.apply(this,arguments)||this}return E(t,e),t.prototype.render=function(){var e,t=this.props,n=t.active,r=t.children,a=t.pageSize,o=t.onClick,i=a===v.PageSizes.LARGE;return g(s.default,{size:i?s.default.Sizes.MIN:s.default.Sizes.LARGE,fullWidth:!i,color:n?m.default.tabSelectedColor:m.default.tabNotSelectedColor,className:(0,l.default)((e={},e[m.default.tabPageLarge]=i,e[m.default.tabPageSmall]=!i,e[m.default.tabSelected]=n,e[m.default.tabNotSelected]=!n,e)),onClick:o},void 0,r)},t}(i.PureComponent);S.displayName="Tab";var O=function(e){function t(t){var n;(n=e.call(this,t)||this).handleSelectOperatingSystem=function(e){n.setState({selectedOperatingSystem:e})};for(var r=f.default.getPlatform(),a=Object.keys(t.systemRequirements),o=a[0],i=0,l=a;i<l.length;i++){var s=l[i];T[s]===r&&(o=s)}return n.state={selectedOperatingSystem:o},n}E(t,e);var n=t.prototype;return n.renderTabs=function(){var e=this,t=this.props,n=t.pageSize,r=t.systemRequirements,a=this.state.selectedOperatingSystem,o=Object.keys(r);return 1===o.length?null:g(d.default,{className:m.default.tabs},void 0,g("div",{className:m.default.separator}),o.map(function(t){return g(S,{active:t===a,onClick:function(){return e.handleSelectOperatingSystem(t)},pageSize:n},t,I[t])}))},n.renderRequirementsSection=function(e,t){if(null==e)return null;var n=function(e){return[{key:h.default.Messages.APPLICATION_STORE_SPECS_OS,value:e.operating_system_version},{key:h.default.Messages.APPLICATION_STORE_SPECS_CPU,value:e.cpu},{key:h.default.Messages.APPLICATION_STORE_SPECS_MEMORY,value:null!=e.ram?h.default.Messages.APPLICATION_STORE_SPECS_MEMORY_VALUE.format({size:(0,c.formatSize)(1e3*e.ram,{showDecimalForGB:!1})}):null},{key:h.default.Messages.APPLICATION_STORE_SPECS_VIDEO,value:e.gpu},{key:h.default.Messages.APPLICATION_STORE_SPECS_STORAGE,value:null!=e.disk?(0,c.formatSize)(1e3*e.disk,{showDecimalForGB:!1}):null},{key:h.default.Messages.APPLICATION_STORE_SPECS_SOUND,value:e.sound_card},{key:h.default.Messages.APPLICATION_STORE_SPECS_NETWORK,value:e.network},{key:h.default.Messages.APPLICATION_STORE_SPECS_NOTES,value:e.notes}]}(e).map(function(e,t){var n=null!=e.value?e.value.trim():null;return null==n||0===n.length?null:g("div",{className:m.default.requirement},t,g("span",{className:m.default.requirementKey},void 0,e.key,":"),n)}).filter(function(e){return null!=e});return g("div",{className:m.default.requirements},void 0,g(u.default,{tag:"h4"},void 0,t),n)},n.renderBody=function(){var e=this.props.systemRequirements[this.state.selectedOperatingSystem],t=e.minimum,n=e.recommended;return g("div",{className:m.default.requirementsContainer},void 0,this.renderRequirementsSection(t,h.default.Messages.APPLICATION_STORE_SPECS_MINIMUM),this.renderRequirementsSection(n,h.default.Messages.APPLICATION_STORE_SPECS_RECOMMENDED))},n.render=function(){return g("div",{className:this.props.className},void 0,g(u.default,{},void 0,h.default.Messages.APPLICATION_STORE_SECTION_TITLE_SYSTEM_REQUIREMENTS),this.renderTabs(),this.renderBody())},t}(i.PureComponent);O.displayName="SystemRequirements";var A=O;t.default=A},6857:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TestModeStoreListingButtonEnums=void 0;var r,a=h(n(2)),o=p(n(3)),i=h(n(303)),l=p(n(35)),s=p(n(88)),u=p(n(807)),d=p(n(5848)),c=p(n(6628)),f=p(n(10));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var y={DropdownSizes:c.default.DropdownSizes,Sizes:c.default.Sizes,Colors:c.default.Colors,Looks:c.default.Looks};t.TestModeStoreListingButtonEnums=y;var _=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderContextMenu=function(e){var n=e.className,r=e.style,a=t.props,o=a.storeListings,l=a.onStoreListingSelect,s=a.currentStoreListingId,u=o.map(function(e){return e.id!==s?m(d.default,{label:e.id,action:function(){i.closeContextMenu(),l&&l(e)}},e.id):null});return m("div",{className:n,style:r},void 0,u)},t.handleContextMenu=function(e){e.stopPropagation(),i.openContextMenu(e,t.renderContextMenu)},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.storeListings,n=e.primaryStoreListing,r=(e.skuId,e.onStoreListingSelect,e.currentStoreListingId,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["storeListings","primaryStoreListing","skuId","onStoreListingSelect","currentStoreListingId"])),o=null!=n?1:0;return(o+=t.length)<2?null:a.createElement(c.default,v({onClick:this.handleContextMenu,onDropdownClick:this.handleContextMenu,onContextMenu:this.handleContextMenu},r),f.default.Messages.APPLICATION_TEST_MODE_VIEW_OTHER_LISTINGS)},r}(a.PureComponent);_.displayName="TestModeStoreListingButton";var g=o.default.connectStores([u.default,s.default,l.default],function(e){var t=e.skuId;return{storeListings:u.default.getUnpublishedForSKU(t),primaryStoreListing:u.default.getForSKU(t)}})(_);t.default=g},6858:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=A(n(17)),i=n(435),l=A(n(3)),s=A(n(801)),u=n(818),d=A(n(5961)),c=A(n(310)),f=A(n(23)),p=A(n(318)),h=A(n(50)),v=A(n(112)),m=A(n(5875)),y=A(n(158)),_=A(n(5866)),g=A(n(302)),E=A(n(45)),I=n(0),T=A(n(10)),S=n(5908),O=A(n(5469));function A(e){return e&&e.__esModule?e:{default:e}}function N(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var C="Application Store Verified Guild Invite - Lurker",R=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleJoinOrView=function(){var e=t.props,n=e.guild,r=e.skuId,a=e.isInGuild,o=function(){return E.default.transitionTo(I.Routes.CHANNEL(n.id,h.default.getChannelId(n.id)))};e.isLurking?(0,u.joinPublishedStoreListingSkuGuild)(r).then(o):a?o():s.default.joinGuild(n.id,!0,C).then(o)},t.handleLogin=function(){var e={redirect_to:I.Routes.APPLICATION_STORE_LISTING_SKU(t.props.skuId)};E.default.transitionTo(I.Routes.LOGIN,{search:(0,i.stringify)(e)})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderMemberInfo=function(){var e=this.props.guild,t=e.approximateMemberCount,n=e.approximatePresenceCount;return null==t||null==n?null:N(y.default,{className:O.default.memberInfo,align:y.default.Align.CENTER},void 0,N("div",{className:O.default.dotOnline}),N("span",{className:O.default.memberText},void 0,T.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_ONLINE.format({membersOnline:n})),N("div",{className:O.default.dotOffline}),N("span",{className:O.default.memberText},void 0,T.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_TOTAL.format({count:t})))},a.render=function(){var e=this.props,t=e.guild,n=e.inChannel,r=e.isInGuild,a=e.isLurking,i=e.isAuthenticated,l=e.className,s=e.pageSize;if(n&&r)return null;var u=new c.default(t),d=T.default.Messages.LURKER_MODE_VIEW_GUILD,f=this.handleJoinOrView,p=v.default.Looks.FILLED,h=v.default.Colors.PRIMARY;return i?r?(p=v.default.Looks.OUTLINED,h=O.default.buttonColorInGuild,d=N(y.default,{align:y.default.Align.CENTER},void 0,N("div",{},void 0,T.default.Messages.JOINED_SERVER),N(g.default,{name:g.default.Names.CHECKMARK,className:O.default.joinedCheckmark}))):a&&n&&(d=T.default.Messages.JOIN_SERVER):(d=T.default.Messages.LOGIN,f=this.handleLogin),N("div",{className:(0,o.default)(l,s===S.PageSizes.SMALL?O.default.inviteSmall:O.default.inviteLarge)},void 0,N(m.default,{},void 0,T.default.Messages.APPLICATION_STORE_SECTION_TITLE_VERIFIED_GUILD),N("div",{className:O.default.content},void 0,N("div",{className:O.default.info},void 0,N(_.default,{guild:u,active:!0,size:_.default.Sizes.LARGE,className:O.default.guildIcon}),N("div",{className:O.default.infoText},void 0,N("div",{className:O.default.name},void 0,t.name),this.renderMemberInfo())),N(v.default,{size:v.default.Sizes.SMALL,className:O.default.actionButton,fullWidth:!0,color:h,look:p,onClick:f},void 0,d)))},r}(a.PureComponent);R.displayName="VerifiedGuildInvite";var P=(0,d.default)(l.default.connectStores([f.default,p.default],function(e){var t=e.guild,n=p.default.isLurking(t.id);return{isInGuild:null!=f.default.getGuild(t.id)&&!n,isLurking:n}})(R));t.default=P}}]);
//# sourceMappingURL=4231c022e68a4ee9d8db.js.map