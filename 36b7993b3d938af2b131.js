(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{1288:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,n=L(r(1)),a=k(r(9)),i=r(435),l=k(r(451)),s=k(r(15)),u=L(r(430)),d=k(r(182)),c=k(r(85)),f=L(r(177)),p=k(r(52)),h=k(r(1397)),v=k(r(25)),m=k(r(1408)),M=r(130),g=r(185),C=r(128),y=r(452),E=k(r(96)),A=k(r(436)),_=k(r(2011)),O=k(r(442)),T=k(r(183)),S=k(r(424)),b=k(r(441)),N=k(r(460)),D=k(r(187)),R=k(r(2021)),w=r(4),I=r(21),P=k(r(1291));function k(e){return e&&e.__esModule?e:{default:e}}function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function F(e,t,r,n){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=n;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var j=F(T.default,{}),W=function(e){var t,r;function o(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).state={isCreateTeamModalOpen:!1,isMfaModalOpen:!1,isLoading:!0,errorMessage:null,addedTeam:null},t.handleAcceptInvite=function(){var e=t.props.location,r=(0,i.parse)(e.search).token;if(null==r)return E.default.replaceWith(w.Routes.TEAMS);u.acceptTeamInvitation(r).then(function(e){t.setState({errorMessage:null,isMfaModalOpen:!1,addedTeam:e})}).catch(function(e){e.code!==w.APIErrorCodes.MFA_REQUIRED?t.setState({errorMessage:(0,C.getMessageFromAPIError)(e,I.Messages.Teams.GENERIC_ACCEPT_INVITATION_ERROR.format(),C.ErrorTypes.TEAMS)}):t.setState({isMfaModalOpen:!0})})},t.handleModalContinue=function(){t.props.location.pathname===w.Routes.TEAM_INVITE_ACCEPT?t.handleAcceptInvite():t.handleMfaModalRequestClose()},t.handleMfaModalRequestClose=function(){t.setState({isMfaModalOpen:!1})},t.handleCreateTeamClick=function(){t.props.user.mfa_enabled?t.setState({isCreateTeamModalOpen:!0}):t.setState({isMfaModalOpen:!0})},t.handleCreateTeamModalRequestClose=function(){t.setState({isCreateTeamModalOpen:!1})},t.renderTeamNameCell=function(e){return F("div",{className:P.default.teamWrapper},void 0,t.renderTeamIcon(e.team),F(v.default,{className:P.default.teamName},void 0,e.name))},t}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=o.prototype;return s.componentDidMount=function(){var e=this,t=this.props.location;u.fetchTeams().then(function(){e.setState({isLoading:!1,errorMessage:null},function(){t.pathname===w.Routes.TEAM_INVITE_ACCEPT&&e.handleAcceptInvite()})}).catch(function(t){e.setState({isLoading:!1,errorMessage:(0,C.getMessageFromAPIError)(t,I.Messages.Errors.ERROR_FETCHING_TEAMS.format())})})},s.getTableRows=function(){var e=[],t=this.props.teams,r=Array.isArray(t),o=0;for(t=r?t:t[Symbol.iterator]();;){var n;if(r){if(o>=t.length)break;n=t[o++]}else{if((o=t.next()).done)break;n=o.value}var a=n,i=a[0],l=a[1];e.push({id:i,name:l.name,team:l,rowProps:{link:w.Routes.EDIT_TEAM(i)}})}return e},s.getTableColumns=function(){return[{cellProps:{columnSpread:12},heading:I.Messages.Teams.TEAM_NAME,key:"name",isSortable:!0,render:this.renderTeamNameCell}]},s.renderError=function(){var e=this.props.user,t=this.state.errorMessage;return e.verified?null==t?null:F(f.default,{type:f.AlertTypes.ERROR},void 0,t):F(f.default,{type:f.AlertTypes.WARNING},void 0,I.Messages.Errors.VERIFIED_EMAIL_REQUIRED)},s.renderSuccess=function(){var e=this.state.addedTeam;return null==e?null:F(f.default,{type:f.AlertTypes.SUCCESS},void 0,I.Messages.Teams.SUCCESSFULLY_ADDED.format({teamName:e.name}))},s.renderNewTeamButton=function(){var e,t=this.props.teams.size>=w.MAXIMUM_ALLOWED_TEAMS,r=F(p.default,{className:(0,a.default)((e={},e[p.default.Styles.DISABLED]=t,e)),onClick:t?null:this.handleCreateTeamClick,height:p.default.Height.MEDIUM},void 0,I.Messages.Teams.NEW_TEAM);return t?F(m.default,{text:I.Messages.Teams.MAX_TEAMS_REACHED.format({maxTeams:w.MAXIMUM_ALLOWED_TEAMS}),position:m.default.Positions.TOP},void 0,F("div",{},void 0,r)):r},s.renderTeamIcon=function(e){var t=(0,M.getTeamIcon)(e.id,e.icon)||(0,g.getDefaultAvatar)(0);return F("div",{className:P.default.teamIcon,style:null!=t?{backgroundImage:"url("+t+")"}:null})},s.renderTeamsTable=function(){return this.state.isLoading?j:0===this.props.teams.size?F(A.default,{imageUri:w.Images.EMPTY_TABLE_STATE,imageWidth:289,primaryCopy:I.Messages.Teams.NO_TEAMS_PRIMARY,secondaryCopy:I.Messages.Teams.NO_TEAMS_SECONDARY}):F(h.default,{columns:this.getTableColumns(),rows:this.getTableRows()})},s.render=function(){var e=this.state,t=e.isCreateTeamModalOpen,r=e.isMfaModalOpen;return null==this.props.user?null:F(n.Fragment,{},void 0,F(l.default,{title:(0,y.getTitle)(I.Messages.Teams.PAGE_TITLE)}),F(b.default,{},void 0,F(N.default,{},void 0,I.Messages.Teams.SIDEBAR_HEADING),F(D.default,{},void 0,I.Messages.Teams.SIDEBAR_INTRO)),F(O.default,{},void 0,F(S.default,{action:this.renderNewTeamButton(),bottomMargin:S.default.BottomMarginSizes.MEDIUM_LARGE},void 0,I.Messages.Teams.PAGE_TITLE),this.renderError(),this.renderSuccess(),this.renderTeamsTable(),F(_.default,{isOpen:r,onClose:this.handleMfaModalRequestClose,onSubmit:this.handleModalContinue,introCopy:I.Messages.Teams.TEAM_MFA_MODAL}),F(R.default,{isOpen:t,onRequestClose:this.handleCreateTeamModalRequestClose})))},o}(n.Component);W.displayName="Teams";var H=s.default.connectStores([d.default,c.default],function(){return{user:c.default.user,teams:d.default.teamsMap}})(W);t.default=H},1397:function(e,t,r){"use strict";t.__esModule=!0,t.default=t.ViewportWrapWidth=t.defaultSort=void 0;var o,n=p(r(1)),a=f(r(9)),i=f(r(69)),l=f(r(419)),s=f(r(131)),u=p(r(418)),d=p(r(420)),c=f(r(1242));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}function M(e,t,r,n){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=n;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var g=(0,i.default)({ASCENDING:null,DESCENDING:null}),C=(0,i.default)({RIGHT:null}),y=function(e,t){return e[t]},E=function(e,t,r){void 0===r&&(r={});var o=e[r.columnKey],n=t[r.columnKey],a=r.sortDirection===g.ASCENDING;return"number"==typeof o&&"number"==typeof n?o>n?a?1:-1:o<n?a?-1:1:0:"string"==typeof o&&"string"==typeof n?r.sortDirection===g.ASCENDING?o.toString().localeCompare(n.toString()):n.toString().localeCompare(o.toString()):0};t.defaultSort=E;var A={SMALL:c.default.viewportSmall,MEDIUM:c.default.viewportMedium};t.ViewportWrapWidth=A;var _=function(e){var t=e.children;return M(u.GridSection,{wrap:u.GridSection.Wrap.NO_WRAP,className:c.default.header},void 0,t)};_.displayName="TableHeader";var O=function(e){var t,r=e.children,o=e.link,n=e.className,i=null!=o,l=M(u.GridSection,{className:(0,a.default)(n,(t={},t[c.default.rowWrapper]=!i,t)),wrap:u.GridSection.Wrap.NO_WRAP},void 0,r);return i?M(s.default,{className:(0,a.default)(c.default.rowLink,c.default.rowWrapper),to:o},void 0,l):l},T=function(e){var t,r=e.align,o=e.children,i=e.className,l=m(e,["align","children","className"]);return n.createElement(u.GridChild,v({className:(0,a.default)(c.default.cell,i,(t={},t[c.default.cellAlignRight]=r===C.RIGHT,t))},l),o)};T.displayName="TableCell";var S=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).handleClick=function(){var e=t.props,r=e.columnKey;(0,e.onClick)(r)},t}h(t,e);var r=t.prototype;return r.renderSortDirectionIndicator=function(e){var t,r=e.isCellRightAligned,o=this.props,n=o.activeColumnKey,i=o.columnKey,l=o.isSortable,s=o.sortDirection;return l?M(d.default,{name:d.IconNames.ARROW_DROP_DOWN,className:(0,a.default)(c.default.sortDirectionIndicator,(t={},t[c.default.sortDirectionIndicatorIsVisible]=null!=n&&n===i,t[c.default.sortDirectionIndicatorAscending]=s===g.ASCENDING,t[c.default.sortDirectionIndicatorDescending]=s===g.DESCENDING,t[c.default.sortDirectionIndicatorAlignRight]=r,t))}):null},r.render=function(){var e,t,r=this.props,o=r.children,i=r.align,s=r.isSortable,d=(r.onClick,m(r,["children","align","isSortable","onClick"])),f=i===C.RIGHT,p=this.renderSortDirectionIndicator({isCellRightAligned:f});return n.createElement(u.GridChild,v({},d,{onClick:this.handleClick}),M(l.default,{className:(0,a.default)((e={},e[c.default.headingSortable]=s,e))},void 0,M("div",{className:(0,a.default)(c.default.headingWrapper,(t={},t[c.default.headingWrapperAlignRight]=f,t))},void 0,f?p:null,M("div",{className:c.default.headingContent},void 0,o),f?null:p)))},t}(n.Component);S.displayName="TableHeaderCell";var b=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).state={activeColumnKey:null!=t.props.defaultSortKey?t.props.defaultSortKey:null,sortDirection:null!=t.props.defaultSortDirection?t.props.defaultSortDirection:g.ASCENDING},t.handleTableHeaderCellClick=function(e){t.setState(function(t){var r=e===t.activeColumnKey&&t.sortDirection===g.ASCENDING?g.DESCENDING:g.ASCENDING;return{activeColumnKey:e,sortDirection:r}})},t}h(t,e);var r=t.prototype;return r.renderTableHeader=function(){var e=this,t=this.props.columns,r=this.state,o=r.activeColumnKey,a=r.sortDirection,i=t.reduce(function(t,r){return null!=r.heading?t.concat(n.createElement(S,v({key:r.key,activeColumnKey:o,columnKey:r.key,isSortable:r.isSortable,onClick:e.handleTableHeaderCellClick,sortDirection:a},r.cellProps),r.heading)):t},[]);return M(_,{},void 0,i)},r.renderTableBody=function(){var e=this.props,t=e.defaultValue,r=e.rows,o=e.columns,a=e.sort,i=this.state,s=i.activeColumnKey,u=i.sortDirection;return(null==s?r:r.sort(function(e,t){return a(e,t,{columnKey:s,sortDirection:u})})).map(function(e){var r=o.map(function(r){var o=null!=r.render?r.render:y,a=M(l.default,{className:c.default.rowColumnName},void 0,r.heading||"");return n.createElement(T,v({key:r.key,align:r.align},r.cellProps),a,o(e,r.key)||t)});return n.createElement(O,v({key:e.id},e.rowProps),r)})},r.renderTotalRow=function(){var e=this.props,t=e.totalRow,r=e.columns,o=e.defaultValue;if(null==t)return null;var a=r.map(function(e){var r=null!=e.render?e.render:y;return n.createElement(T,v({key:e.key,align:e.align},e.cellProps),r(t,e.key)||o)});return n.createElement(O,v({className:c.default.totalRow,key:t.id},t.rowProps),a)},r.render=function(){var e=this.props,t=e.className,r=e.tableWrapPoint;return M(u.default,{className:(0,a.default)(t,r)},void 0,this.renderTableHeader(),this.renderTableBody(),this.renderTotalRow())},t}(n.Component);t.default=b,b.displayName="Table",b.CellAlignment=C,b.SortDirections=g,b.defaultProps={defaultValue:null,sort:E}},1408:function(e,t,r){"use strict";t.__esModule=!0,t.default=t.Colors=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}(r(1)),n=d(r(9)),a=d(r(53)),i=d(r(438)),l=r(1439),s=d(r(1548)),u=d(r(450));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f={TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom"},p={BLACK:"black",BRAND:"brand",GREEN:"green",YELLOW:"yellow",RED:"red"};t.Colors=p;var h=function(e){var t,r;function d(t){var r;return(r=e.call(this,t)||this).timer=new l.Timeout,r.handleTouchStart=function(e){var t=r.getChildProps().onTouchStart;r.maybeShow(),t&&t(e)},r.handleTouchEnd=function(e){var t=r.getChildProps().onTouchEnd;r.hide(),t&&t(e)},r.state={id:i.default.v4(),isOpen:!1},c(r).getStateFromStores=r.getStateFromStores.bind(c(r)),c(r).show=r.show.bind(c(r)),c(r).handleMouseEnter=r.handleMouseEnter.bind(c(r)),c(r).handleMouseLeave=r.handleMouseLeave.bind(c(r)),c(r).handleClick=r.handleClick.bind(c(r)),c(r).handleContextMenu=r.handleContextMenu.bind(c(r)),r}r=e,(t=d).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var f=d.prototype;return f.getStateFromStores=function(){var e=u.default.isOpen(this.state.id);this.state.isOpen!==e&&this.setState({isOpen:e})},f.componentDidMount=function(){u.default.addChangeListener(this.getStateFromStores)},f.componentDidUpdate=function(e){this.state.isOpen&&(null==this.props.text?this.hide():e.position===this.props.position&&e.text===this.props.text||this.show())},f.componentWillUnmount=function(){u.default.removeChangeListener(this.getStateFromStores),this.hide()},f.getChildProps=function(){return o.Children.only(this.props.children).props},f.maybeShow=function(){this.props.delay>0?this.showDelayed():this.show()},f.show=function(){this.timer.stop();var e=a.default.findDOMNode(this);if(e instanceof Element){var t=this.props,r=t.position,o=t.text,n=t.color,i=e.getBoundingClientRect(),l=i.top,u=i.left,d=i.right,c=i.bottom;s.default.show(this.state.id,{position:r,text:o,color:n,targetWidth:d-u,targetHeight:c-l,x:u,y:l})}},f.showDelayed=function(){this.timer.start(this.props.delay,this.show)},f.hide=function(){this.timer.stop(),this.state.isOpen&&s.default.hide(this.state.id)},f.render=function(){var e=this.props,t=e.children,r=e.className,a=e.text;if(null==t)return null;if(null==a)return t;var i=o.Children.only(t);return o.cloneElement(i,{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick,onContextMenu:this.handleContextMenu,className:(0,n.default)(r,i.props.className)})},f.handleMouseEnter=function(e){var t=this.getChildProps().onMouseEnter;this.maybeShow(),t&&t(e)},f.handleMouseLeave=function(e){var t=this.getChildProps().onMouseLeave;this.hide(),t&&t(e)},f.handleClick=function(e){var t=this.getChildProps().onClick,r=this.props.onClick;this.hide(),t&&t(e),r&&r(e)},f.handleContextMenu=function(e){var t=this.getChildProps().onContextMenu;this.hide(),t&&t(e)},d}(o.PureComponent);h.displayName="Tooltip",h.defaultProps={position:f.TOP,color:p.BLACK,delay:0},h.Positions=f,h.Colors=p;var v=h;t.default=v},1548:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o=a(r(22)),n=a(r(23));function a(e){return e&&e.__esModule?e:{default:e}}var i={show:function(e,t){o.default.dirtyDispatch({type:n.default.TOOLTIP_SHOW,id:e,tooltip:t})},hide:function(e){o.default.dirtyDispatch({type:n.default.TOOLTIP_HIDE,id:e})}};t.default=i},2011:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,n=S(r(1)),a=r(1547),i=r(2012),l=T(r(15)),s=r(2015),u=r(99),d=T(r(2016)),c=T(r(85)),f=T(r(52)),p=T(r(40)),h=S(r(420)),v=T(r(2017)),m=T(r(1408)),M=r(128),g=r(458),C=T(r(419)),y=S(r(179)),E=T(r(2018)),A=r(4),_=r(21),O=T(r(1290));function T(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function b(e,t,r,n){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=n;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var N=function(e){var t=e.title,r=e.image,o=e.children;return b(p.default,{className:O.default.modalRow,justify:p.default.Justify.BETWEEN,wrap:p.default.Wrap.NO_WRAP},void 0,b(p.default,{justify:p.default.Justify.CENTER,grow:1,shrink:1},void 0,r),b(p.default,{className:O.default.modalRowTextWrap,direction:p.default.Direction.VERTICAL,align:p.default.Align.START,justify:p.default.Justify.CENTER,grow:0},void 0,b(C.default,{className:O.default.modalLabel},void 0,t),b("div",{},void 0,o)))};N.displayName="ModalRow";var D=function(e){var t,r;function o(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).state={currentModalStep:0,isSubmitting:!1,totpSecret:(0,i.generateTotpSecret)(),code:"",isDownloaded:!1,error:null},t.goToNextStep=function(){t.setState(function(e){return{currentModalStep:e.currentModalStep+1}})},t.renderFormStatus=function(){var e=t.state.error;return null==e?null:b(y.ModalAlert,{},void 0,e)},t.activateCode=function(){var e=t.state,r=e.code,o=e.totpSecret;t.setState({isSubmitting:!0},function(){(0,s.enableMFA)({code:r,secret:(0,i.encodeTotpSecret)(o)}).then(function(){return(0,u.fetchUser)().catch(A.NOOP)}).then(function(){t.setState({isSubmitting:!1,error:null})}).catch(function(e){t.setState({isSubmitting:!1,error:(0,M.getMessageFromAPIError)(e,_.Messages.Errors.ERROR_ACTIVATING_CODE.format())})})})},t.handleCodeChange=function(e){t.setState(function(){return{code:e}})},t.getDownloadFileContents=function(){var e=t.props,r=e.backupCodes,o=e.user;if(null==r)return"";var n=r.map(function(e){var t=e.consumed,r=e.code;return"* "+r.substr(0,4)+"-"+r.substr(4)+" "+(t?"("+_.Messages.MultiFactorAuth.MFA_BACKUP_CODE_USED+")":"")}).join("\r\n");return _.Messages.MultiFactorAuth.MFA_DISCORD_BACKUP_CODES.format({email:o.email})+"\r\n\r\n"+n},t.downloadBackupCodes=function(e){e.preventDefault();var r=new Blob([t.getDownloadFileContents()],{type:"text/plain"});(0,a.saveAs)(r,"discord_backup_codes.txt"),t.setState({isDownloaded:!0})},t}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var l=o.prototype;return l.renderModalStepOne=function(){var e=this.props,t=e.onClose,r=e.introCopy,o=this.state.isSubmitting;return b(n.Fragment,{},void 0,b(y.ModalContent,{},void 0,b(y.ModalHeader,{},void 0,_.Messages.MultiFactorAuth.MODAL_HEADER),r),b(y.ModalFooter,{},void 0,b(y.ModalCancel,{onClick:t,disabled:o},void 0,_.Messages.Actions.CANCEL),b(y.ModalConfirm,{onClick:this.goToNextStep},void 0,_.Messages.Actions.CONTINUE)))},l.renderModalStepTwo=function(){var e=this.props,t=e.user,r=e.backupCodes,o=e.onClose,a=this.state,l=a.totpSecret,s=a.code,u=a.isSubmitting;if(null==t)return null;var d=b(p.default,{},void 0,b(h.default,{name:h.IconNames.CHECKMARK})),c=null!=r&&!u,m={text:c?d:_.Messages.Actions.ACTIVATE,color:c?f.default.Color.GREEN:f.default.Color.BRAND},M=b("div",{className:O.default.qrWrap},void 0,b(E.default,{width:100,height:100,text:(0,i.encodeTotpSecretAsUrl)(t.email,l)}));return b(n.Fragment,{},void 0,b(y.ModalContent,{},void 0,b(y.ModalHeader,{},void 0,_.Messages.MultiFactorAuth.MODAL_HEADER_TWO),this.renderFormStatus(),b(N,{title:_.Messages.MultiFactorAuth.DOWNLOAD_APP,image:b("img",{src:A.Images.ICON_GOOGLE_AUTH,className:O.default.modalRowImage,width:100,height:100,alt:_.Messages.ImageAltTags.GOOGLE_AUTH})},void 0,_.Messages.MultiFactorAuth.DOWNLOAD_APP_DESCRIPTION.format({googleAuthURL:A.Links.GOOGLE_AUTH,authyURL:A.Links.AUTHY})),b("div",{className:O.default.divider}),b(N,{title:_.Messages.MultiFactorAuth.SCAN_CODE,image:M},void 0,_.Messages.MultiFactorAuth.SCAN_CODE_DESCRIPTION),b("div",{className:O.default.divider}),b(N,{title:_.Messages.MultiFactorAuth.VALIDATE_CODE,image:b("img",{src:A.Images.ICON_PHONE_CODE,className:O.default.modalRowImage,height:100,width:100,alt:_.Messages.ImageAltTags.PHONE_CODE})},void 0,_.Messages.MultiFactorAuth.VALIDATE_CODE_DESCRIPTION,b(v.default,{className:O.default.codeInput,placeholder:"000 000",onClick:this.activateCode,onChange:this.handleCodeChange,value:s,buttonProps:m,submitting:u,disabled:c}))),b(y.ModalFooter,{},void 0,b(y.ModalCancel,{onClick:o,disabled:u},void 0,_.Messages.Actions.CANCEL),b(y.ModalConfirm,{disabled:!c,onClick:this.goToNextStep},void 0,_.Messages.Actions.CONTINUE)))},l.renderContinueButton=function(){var e=this.props.onSubmit,t=this.state.isDownloaded,r=b(f.default,{onClick:e},void 0,_.Messages.MultiFactorAuth.CONTINUE_TO_TEAMS),o=b(m.default,{text:_.Messages.MultiFactorAuth.DISABLED_UNTIL_DOWNLOAD,position:m.default.Positions.TOP},void 0,b("div",{},void 0,b(f.default,{className:f.default.Styles.DISABLED},void 0,_.Messages.MultiFactorAuth.CONTINUE_TO_TEAMS)));return t?r:o},l.renderModalStepThree=function(){return b(n.Fragment,{},void 0,b(y.ModalContent,{},void 0,b(y.ModalHeader,{className:O.default.modalHeader},void 0,_.Messages.MultiFactorAuth.MODAL_HEADER_THREE),b("img",{className:O.default.treasureChest,src:A.Images.ASSET_BACKUP_CODE_TREASURE,alt:_.Messages.ImageAltTags.TREASURE_CHEST}),b(p.default,{},void 0,b(C.default,{},void 0,_.Messages.MultiFactorAuth.DOWNLOAD_BACKUP_CODES)),b("div",{},void 0,_.Messages.MultiFactorAuth.DOWNLOAD_BACKUP_DESCRIPTION),b(f.default,{className:O.default.downloadButton,onClick:this.downloadBackupCodes},void 0,_.Messages.Actions.DOWNLOAD)),b(y.ModalFooter,{},void 0,this.renderContinueButton()))},l.renderDesktopOnlyNotice=function(){return b(n.Fragment,{},void 0,b(y.ModalContent,{},void 0,b(y.ModalHeader,{},void 0,_.Messages.MultiFactorAuth.MODAL_HEADER),_.Messages.MultiFactorAuth.DESKTOP_ONLY),b(y.ModalFooter,{},void 0,b(y.ModalConfirm,{onClick:this.props.onClose},void 0,_.Messages.Actions.CONFIRM)))},l.getModalContent=function(){if((0,g.isMobile)())return this.renderDesktopOnlyNotice();var e=this.state.currentModalStep;return[this.renderModalStepOne(),this.renderModalStepTwo(),this.renderModalStepThree()][e]},l.render=function(){var e=this.props.isOpen;return b(y.default,{open:e,className:O.default.modal,onRequestClose:A.NOOP},void 0,this.getModalContent())},o}(n.Component);D.displayName="MFAModal";var R=l.default.connectStores([c.default,d.default],function(){return{user:c.default.user,backupCodes:d.default.backupCodes}})(D);t.default=R},2015:function(e,t,r){"use strict";t.__esModule=!0,t.enableMFA=function(e){var t=e.code,r=e.secret;return o.default.post({url:l.Endpoints.MFA_TOTP_ENABLE,body:{code:t,secret:r}}).then(function(e){return n.default.dispatch({type:i.default.MFA_ENABLE_SUCCESS,token:e.body.token,codes:e.body.backup_codes})}).catch(a.APIErrorHandler)},t.viewBackupCodes=function(e,t){void 0===t&&(t=!1);return o.default.post({url:l.Endpoints.MFA_CODES,body:{password:e,regenerate:t}}).then(function(e){return n.default.dispatch({type:i.default.MFA_VIEW_BACKUP_CODES,codes:e.body.backup_codes})}).catch(a.APIErrorHandler)};var o=s(r(84)),n=s(r(22)),a=r(128),i=s(r(23)),l=r(4);function s(e){return e&&e.__esModule?e:{default:e}}},2016:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o=r(429),n=l(r(102)),a=l(r(15)),i=l(r(22));l(r(23));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=null;var d=new(function(e){var t,r,o,n,a;function i(){return e.apply(this,arguments)||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o=i,(n=[{key:"backupCodes",get:function(){return u}}])&&s(o.prototype,n),a&&s(o,a),i}(a.default.Store))(i.default,{MFA_ENABLE_SUCCESS:function(e){var t=e.token,r=e.codes;n.default.setToken(t),u=r},MFA_VIEW_BACKUP_CODES:function(e){var t=e.codes;u=(0,o.sortBy)(t,"code")}});t.default=d},2017:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}(r(1)),a=c(r(9)),i=c(r(52)),l=c(r(40)),s=c(r(422)),u=c(r(461)),d=c(r(1289));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r,n){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=n;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var p=function(e){var t,r;function o(){return e.apply(this,arguments)||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.prototype.render=function(){var e=this.props,t=e.buttonProps,r=e.placeholder,o=e.submitting,n=e.disabled,c=e.onChange,p=e.onClick,h=e.value,v=e.className;return f(l.default,{className:(0,a.default)(u.default.input,v),direction:l.default.Direction.HORIZONTAL,justify:l.default.Justify.BETWEEN,align:l.default.Align.CENTER,wrap:l.default.Wrap.NO_WRAP,grow:0},void 0,f(s.default,{className:d.default.textInput,inputClassName:d.default.noBorder,value:h,onChange:c,placeholder:r,disabled:n}),f(i.default,{className:d.default.textInputButton,color:t.color,height:i.default.Height.SHORT,onClick:p,submitting:o,disabled:n},void 0,t.text))},o}(n.Component);t.default=p,p.displayName="TextInputWithButton",p.defaultProps={buttonProps:{text:"",color:i.default.Color.BRAND},disabled:!1}},2018:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}(r(1)),a=(o=r(2019))&&o.__esModule?o:{default:o},i=r(4);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}var s=function(e){var t,r;function o(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).qrCodeRef=n.createRef(),t}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=o.prototype;return s.componentDidMount=function(){this.createNewQRCode()},s.componentDidUpdate=function(){this.createNewQRCode()},s.createNewQRCode=function(){null!=this.qrCodeRef.current&&new a.default(this.qrCodeRef.current,l({},this.props,{correctLevel:a.default.CorrectLevel.M}))},s.render=function(){return n.createElement("div",{ref:this.qrCodeRef,style:{padding:8,borderRadius:4,background:i.Colors.WHITE}})},o}(n.PureComponent);t.default=s,s.displayName="QRCode",s.defaultProps={width:128,height:128}},2021:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,n=m(r(1)),a=m(r(430)),i=m(r(418)),l=v(r(422)),s=r(128),u=v(r(96)),d=v(r(423)),c=v(r(419)),f=m(r(179)),p=r(4),h=r(21);function v(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function M(e,t,r,n){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=n;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var g=M(l.default,{name:"name"}),C=function(e){var t,r;function o(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).state={errorMessage:null,isSubmitting:!1},t.handleCreateNewTeam=function(e){var r=e.name;r?t.setState({isSubmitting:!0},function(){a.createTeam({name:r}).then(function(e){u.default.transitionTo(p.Routes.TEAM_INFORMATION(e.id))}).catch(function(e){t.setState({isSubmitting:!1,errorMessage:(0,s.getMessageFromAPIError)(e,h.Messages.Errors.ERROR_CREATING_TEAM.format())})})}):t.setState({errorMessage:h.Messages.Teams.TEAM_NAME_REQUIRED})},t.handleRequestClose=function(){var e=t.props.onRequestClose;t.state.isSubmitting||(e(),t.setState({errorMessage:null}))},t}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=o.prototype;return n.renderFormStatus=function(){var e=this.state.errorMessage;return null==e?null:M(f.ModalAlert,{type:f.ModalAlertTypes.ERROR},void 0,e)},n.render=function(){var e=this.props.isOpen;return M(f.default,{open:e,onRequestClose:this.handleRequestClose},void 0,M(d.default,{onSubmit:this.handleCreateNewTeam},void 0,M(f.ModalContent,{},void 0,M(f.ModalHeader,{},void 0,h.Messages.Teams.CREATE_NEW_TEAM),this.renderFormStatus(),M(i.default,{},void 0,M(i.GridSection,{},void 0,M(i.GridChild,{columnSpread:12},void 0,M(c.default,{isRequired:!0},void 0,h.Messages.Forms.NAME),g)))),M(f.ModalFooter,{},void 0,M(f.ModalCancel,{onClick:this.handleRequestClose},void 0,h.Messages.Actions.CANCEL),M(f.ModalConfirm,{type:"submit"},void 0,h.Messages.Actions.CONFIRM))))},o}(n.Component);t.default=C,C.displayName="CreateTeamModal"}}]);
//# sourceMappingURL=36b7993b3d938af2b131.js.map