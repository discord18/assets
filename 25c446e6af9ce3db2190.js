(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{1373:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}t.default=e}(r(1));var n,o=l(r(9)),a=l(r(25)),i=l(r(1237));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t,r=e.children,l=e.tag,u=void 0===l?"h2":l,s=e.isFlush,c=void 0!==s&&s;return function(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}(a.default,{className:(0,o.default)(i.default.heading,(t={},t[i.default.flush]=c,t)),color:a.default.Colors.WHITE,size:a.default.Sizes.LARGE,tag:u,weight:a.default.Weights.MEDIUM},void 0,r)};u.displayName="PageHeading";var s=u;t.default=s},1374:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}t.default=e}(r(1));var n,o=l(r(9)),a=l(r(25)),i=l(r(1238));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t,r=e.children,l=e.className,u=e.tag,s=void 0===u?"p":u,c=e.isFlush,d=void 0!==c&&c;return function(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}(a.default,{className:(0,o.default)(i.default.subheading,l,(t={},t[i.default.flush]=d,t)),color:a.default.Colors.PRIMARY_300,size:a.default.Sizes.MEDIUM_LARGE,tag:s,weight:a.default.Weights.NORMAL},void 0,r)};u.displayName="PageSubheading";var s=u;t.default=s},1375:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=u(r(1)),o=l(r(9)),a=u(r(177)),i=l(r(1239));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e){var t,r;function l(){return e.apply(this,arguments)||this}return r=e,(t=l).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,l.prototype.render=function(){var e=this.props,t=e.className,r=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,["className"]);return n.createElement(a.default,s({},r,{className:(0,o.default)(i.default.formStatusAlert,t)}))},l}(n.Component);t.default=c,c.displayName="FormStatusAlert",c.Types=a.AlertTypes},1387:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(1)),a=d(r(9)),i=r(432),l=r(70),u=d(r(420)),s=r(4),c=d(r(1241));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var y={DEFAULT:"default",INVERTED:"inverted",GHOST:"ghost"},v={BOX:c.default.box,ROUND:c.default.round},h=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={focused:!1},t.handleFocus=function(){t.setState({focused:!0})},t.handleBlur=function(){t.setState({focused:!1})},t.handleChange=function(e){var r=t.props,n=r.onChange,o=r.name;null!=n&&n(e.currentTarget.checked,o)},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getInputMode=function(){return this.props.disabled?"disabled":this.props.readOnly?"readonly":"default"},o.getStyle=function(){var e=this.props,t=e.value,r=e.type,n=e.color,o=this.props.style||{};if(!1===t)return o;switch(o=f({},o),r){case y.DEFAULT:o.borderColor=n;break;case y.GHOST:o.borderColor=(0,i.hex2rgb)(n,.15),o.backgroundColor=(0,i.hex2rgb)(n,.15);break;case y.INVERTED:o.backgroundColor=n,o.borderColor=n}return o},o.getColor=function(){var e=this.props,t=e.value,r=e.type,n=e.color,o=r===y.INVERTED?s.Colors.WHITE:n;return r===y.INVERTED&&n===s.Colors.WHITE&&(o=s.Colors.BLACK),t?o:"transparent"},o.render=function(){var e,t=this.state.focused,r=this.props,n=r.disabled,o=r.readOnly,i=r.value,d=r.shape,y=r.className,v=r.children,h=r.size;return p("label",{className:(0,a.default)((0,l.getClass)(c.default,"checkboxWrapper",n?"disabled":""),y),style:{height:h}},void 0,p("input",{className:(0,l.getClass)(c.default,"input",this.getInputMode()),type:"checkbox",onChange:n||o?s.NOOP:this.handleChange,onFocus:n||o?s.NOOP:this.handleFocus,onBlur:this.handleBlur,checked:i,style:{width:h,height:h}}),p("div",{className:(0,a.default)(c.default.checkbox,d,(e={},e[c.default.checked]=i,e[c.default.focused]=t,e)),style:f({width:h,height:h},this.getStyle())},void 0,p(u.default,{name:u.default.Names.CHECKMARK,width:18,height:18,color:this.getColor()})),v?p("div",{className:c.default.label,style:{lineHeight:h+"px"}},void 0,v):null)},n}(o.PureComponent);h.displayName="Checkbox",h.Types=y,h.Shapes=v,h.defaultProps={size:24,disabled:!1,readOnly:!1,value:!1,type:y.DEFAULT,color:s.Colors.WHITE,shape:v.BOX,onChange:s.NOOP};var m=h;t.default=m},1522:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=a(r(15)),o=a(r(22));a(r(23));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=[];var u=new(function(e){var t,r,n,o,a;function u(){return e.apply(this,arguments)||this}return r=e,(t=u).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n=u,(o=[{key:"paymentSources",get:function(){return l}}])&&i(n.prototype,o),a&&i(n,a),u}(n.default.Store))(o.default,{PAYMENT_SOURCES_FETCH_SUCCESS:function(e){var t;t=e.paymentSources,l=t},PAYMENT_SOURCE_CREATE_SUCCESS:function(e){var t;t=e.paymentSource,l=[].concat(l,[t])}});t.default=u},1523:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(1)),a=l(r(9)),i=l(r(1328));function l(e){return e&&e.__esModule?e:{default:e}}var u=Object.freeze({UNKNOWN:"unknown",VISA:"visa",DISCOVER:"discover",MASTERCARD:"mastercard",AMEX:"amex",PAYPAL:"paypal"}),s={SMALL:i.default.cardIconSmall,MEDIUM:i.default.cardIconMedium,LARGE:i.default.cardIconLarge,XLARGE:i.default.cardIconXLarge},c=function(e){var t,r;function o(){return e.apply(this,arguments)||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.getType=function(e){if(null==e)return u.UNKNOWN;var t=e.replace(/[^a-z]/gi,"").toUpperCase();return u[t]||u.UNKNOWN},o.prototype.render=function(){var e,t=this.props,r=t.flipped,o=t.type,l=t.className,u=t.size;return function(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}("div",{className:(0,a.default)(u,i.default[o],l,(e={},e[i.default.flipped]=r,e))},void 0,o)},o}(o.PureComponent);t.default=c,c.displayName="PaymentSourceIcon",c.Types=u,c.Sizes=s,c.defaultProps={size:s.SMALL,flipped:!1}},1653:function(e,t,r){"use strict";t.__esModule=!0,t.ensureStripeIsLoaded=function(){return o.default.ensure(i).then(function(e){return e.setPublishableKey(a.PaymentSettings.STRIPE.KEY),e})},t.formatStripeErrors=function(e){return Object.keys(e).reduce(function(t,r){return t.push(e[r]),t},[]).join(", ")};var n,o=(n=r(2214))&&n.__esModule?n:{default:n},a=r(4);var i="https://js.stripe.com/v2/";o.default.register(i,"Stripe")},1715:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o,a=l(r(15)),i=l(r(22));l(r(23));function l(e){return e&&e.__esModule?e:{default:e}}var u=new(function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=a.prototype;return i.getClient=function(){return n},i.getPayPalClient=function(){return o},a}(a.default.Store))(i.default,{BRAINTREE_CREATE_CLIENT_SUCCESS:function(e){var t=e.client;n=t},BRAINTREE_CREATE_PAYPAL_CLIENT_SUCCESS:function(e){var t=e.paypalClient;o=t},BRAINTREE_TEARDOWN_PAYPAL_CLIENT:function(e){o=null}});t.default=u},2211:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=O(r(1)),a=A(r(9)),i=r(83),l=r(1405),u=A(r(15)),s=A(r(178)),c=A(r(1449)),d=A(r(52)),p=A(r(1408)),f=r(1421),y=A(r(96)),v=A(r(2212)),h=A(r(1375)),m=A(r(1373)),C=A(r(421)),_=A(r(424)),S=A(r(1374)),P=r(4),E=O(r(21)),g=A(r(1333));function A(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function b(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function M(e){var t,r=e.onBuyClick,n=e.purchaseDisabled,o=b(d.default,{className:(0,a.default)(g.default.heroButton,(t={},t[d.default.Styles.DISABLED]=n,t)),color:d.default.Color.WHITE,onClick:n?null:r},void 0,E.Messages.DeveloperLicense.BUTTON_BUY);return b(C.default,{hasBorder:!1,className:g.default.hero},void 0,b("div",{className:g.default.heroImage}),b(_.default,{},void 0,E.Messages.DeveloperLicense.HERO_HEADING),b("p",{},void 0,E.Messages.DeveloperLicense.HERO_YOU_CAN),b("ul",{},void 0,b("li",{},void 0,E.Messages.DeveloperLicense.FEATURE_IN_SERVER_STORE_PAGES),b("li",{},void 0,E.Messages.DeveloperLicense.FEATURE_NEWS_CHANNEL),b("li",{},void 0,E.Messages.DeveloperLicense.FEATURE_ALPHA_BETA_TESTING)),b("div",{className:g.default.priceUnit},void 0,b("div",{className:g.default.priceCopy},void 0,(0,l.formatPrice)(P.APPLICATION_LICENSE_PRICE,P.CurrencyCodes.USD,E.default.getLocale(),{minimumFractionDigits:0,maximumFractionDigits:0})),n?b(p.default,{text:E.Messages.DeveloperLicense.APPLICATION_MUST_BE_OWNED_BY_TEAM,position:p.default.Positions.TOP},void 0,b("div",{},void 0,o)):o))}function N(){return b("div",{},void 0,b(_.default,{},void 0,E.Messages.DeveloperLicense.BODY_HEADER),b("div",{className:g.default.description},void 0,b("p",{},void 0,E.Messages.DeveloperLicense.DESCRIPTION_PARAGRAPH_1),b("p",{},void 0,E.Messages.DeveloperLicense.DESCRIPTION_PARAGRAPH_2),b("p",{},void 0,E.Messages.DeveloperLicense.DESCRIPTION_PARAGRAPH_3.format({documentationURL:y.default.prependBasename(P.Routes.DOCS_GAME_AND_SERVER_MANAGEMENT_HOW_TO_GET_YOUR_GAME_ON_DISCORD)}))))}M.displayName="Hero",N.displayName="Body";var T=b(N,{}),R=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={isPaymentModalOpen:!1},t.handleLicensePurchase=function(){y.default.transitionTo(P.Routes.CHECKLIST(t.props.match.params.id))},t.handleRequestPaymentModalClose=function(){t.setState({isPaymentModalOpen:!1})},t.handleHeroBuyClick=function(){t.setState({isPaymentModalOpen:!0})},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.renderAlert=function(){var e=this.props.application;if(!(0,f.isTeamApplication)(e))return b(h.default,{type:h.default.Types.WARNING},void 0,E.Messages.DeveloperLicense.NOT_TEAM_APPLICATION.format({documentationURL:y.default.prependBasename(P.Routes.DOCS_TOPICS_TEAMS)}))},o.render=function(){var e=this.props,t=e.application,r=e.hasUnconsumedLicense,n=e.match,o=this.state.isPaymentModalOpen,a=n.params.id;return r?b(i.Redirect,{to:P.Routes.CHECKLIST(a)}):b("div",{},void 0,b(C.default,{},void 0,b(m.default,{},void 0,E.Messages.DeveloperLicense.DEVELOPER_LICENSE_HEADING),b(S.default,{isFlush:!0},void 0,E.Messages.DeveloperLicense.DEVELOPER_LICENSE_SUBHEADING),this.renderAlert()),b(M,{onBuyClick:this.handleHeroBuyClick,purchaseDisabled:!(0,f.isTeamApplication)(t)}),T,b(v.default,{onPurchaseComplete:this.handleLicensePurchase,productName:E.Messages.DeveloperLicense.APPLICATION_LICENSE_PRODUCT_NAME,productPrice:P.APPLICATION_LICENSE_PRICE,productCurrency:P.CurrencyCodes.USD,isOpen:o,onRequestClose:this.handleRequestPaymentModalClose}))},n}(o.Component);R.displayName="DeveloperLicense";var D=u.default.connectStores([s.default],function(e){var t=e.match.params.id;return{application:s.default.getApplication(t),hasUnconsumedLicense:c.default.hasUnconsumedLicenseEntitlement()}})(R);t.default=D},2212:function(e,t,r){"use strict";t.__esModule=!0,t.default=t.PaymentModalSteps=void 0;var n,o=_(r(1)),a=C(r(15)),i=_(r(2213)),l=C(r(1522)),u=r(128),s=_(r(179)),c=C(r(2215)),d=C(r(2219)),p=C(r(2222)),f=C(r(2407)),y=C(r(2409)),v=C(r(2410)),h=r(4),m=r(21);function C(e){return e&&e.__esModule?e:{default:e}}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function S(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var E=[m.Messages.PaymentModal.PAYMENT_TYPE,m.Messages.PaymentModal.PAYMENT_INFORMATION,m.Messages.PaymentModal.ADDRESS,m.Messages.PaymentModal.REVIEW],g={SELECT_PAYMENT_SOURCE_TYPE:0,COLLECT_PAYMENT_SOURCE_DATA:1,COLLECT_ADDRESS_DATA:2,REVIEW_DETAILS:3};t.PaymentModalSteps=g;var A={isSubmitting:!1,paymentSourceType:null,hasAcceptedTerms:!1,error:null,braintreeNonce:"",creditCardData:{cardNumber:"",expirationDate:"",cvc:"",name:""},billingAddressData:{name:"",country:"",city:"",line1:"",line2:"",state:"",postalCode:""}};function O(e){return 0===e.length?g.SELECT_PAYMENT_SOURCE_TYPE:g.REVIEW_DETAILS}var b=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state=P({currentStep:O(t.props.paymentSources),isLoading:!0},A),t.handleRequestClose=function(){var e=t.props,r=e.onRequestClose,n=e.paymentSources;t.state.isSubmitting||(t.setState(P({currentStep:O(n)},A)),r())},t.startAddNewPaymentSource=function(){t.setState({currentStep:g.SELECT_PAYMENT_SOURCE_TYPE})},t.handleCreateNewPaymentSource=function(e){var r=t.state,n=r.creditCardData,o=r.paymentSourceType,a=r.braintreeNonce,l=r.billingAddressData;t.setState({isSubmitting:!0},function(){var r=e;if(o===h.PaymentSourceTypes.CARD)return r.name=n.name,i.createCardPaymentSource({type:h.PaymentSourceTypes.CARD,cardNumber:n.cardNumber,cvc:n.cvc,expirationDate:n.expirationDate,billingAddress:r}).then(t.handleCreatePaymentSourceSuccess).catch(t.handleCreatePaymentSourceError);r.name=l.name,i.createPaypalPaymentSource(a,r).then(t.handleCreatePaymentSourceSuccess).catch(function(e){t.handleCreatePaymentSourceError((0,u.getMessageFromAPIError)(e,m.Messages.Errors.ERROR_CREATING_PAYMENT_SOURCE.format()))})})},t.handleCreatePaymentSourceSuccess=function(){t.setState({currentStep:t.state.currentStep+1,isSubmitting:!1,error:null})},t.handleCreatePaymentSourceError=function(e){t.setState({error:e,isSubmitting:!1})},t.purchaseLicense=function(e){t.setState({isSubmitting:!0},function(){i.purchaseApplicationLicense(e).then(function(){t.setState({isSubmitting:!1},function(){t.handleRequestClose();var e=t.props.onPurchaseComplete;null!=e&&e()})}).catch(function(e){t.setState({isSubmitting:!1,error:(0,u.getMessageFromAPIError)(e,m.Messages.Errors.ERROR_PURCHASING_LICENSE.format())})})})},t.handlePreviousClick=function(e){var r=t.state,n=r.currentStep,o=r.paymentSourceType,a=n-1;switch(n){case g.SELECT_PAYMENT_SOURCE_TYPE:return t.setState({currentStep:g.REVIEW_DETAILS});case g.COLLECT_PAYMENT_SOURCE_DATA:return o===h.PaymentSourceTypes.CARD?t.setState({creditCardData:e,currentStep:a,error:null}):t.setState({currentStep:a,error:null});case g.COLLECT_ADDRESS_DATA:return t.setState({billingAddressData:e,currentStep:a,error:null});default:t.setState({currentStep:a,error:null})}},t.handleNextClick=function(e){var r=t.state,n=r.currentStep,o=r.paymentSourceType,a=n+1;switch(n){case g.SELECT_PAYMENT_SOURCE_TYPE:return t.setState({currentStep:a,paymentSourceType:e});case g.COLLECT_PAYMENT_SOURCE_DATA:return o===h.PaymentSourceTypes.CARD?t.setState({creditCardData:e,currentStep:a}):t.setState({currentStep:a,braintreeNonce:e.nonce,billingAddressData:e.billingAddress});case g.COLLECT_ADDRESS_DATA:return t.handleCreateNewPaymentSource(e);case g.REVIEW_DETAILS:t.purchaseLicense(e)}},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.componentDidMount=function(){var e=this;i.fetchPaymentSources().then(function(t){e.setState({isLoading:!1,currentStep:O(t)})})},a.renderErrorMessage=function(){var e=this.state.error;return null==e?null:S(s.ModalAlert,{},void 0,e)},a.renderModalContent=function(){var e=this.state,t=e.currentStep,r=e.creditCardData,n=e.isSubmitting,a=e.paymentSourceType,i=e.billingAddressData,l={currentStep:t,onRequestClose:this.handleRequestClose,onPreviousClick:this.handlePreviousClick,onNextClick:this.handleNextClick};switch(t){case g.SELECT_PAYMENT_SOURCE_TYPE:return o.createElement(v.default,l);case g.COLLECT_PAYMENT_SOURCE_DATA:return a===h.PaymentSourceTypes.CARD?o.createElement(d.default,P({},l,r)):o.createElement(p.default,l);case g.COLLECT_ADDRESS_DATA:return o.createElement(c.default,P({},l,i,{isSubmitting:n}));case g.REVIEW_DETAILS:return o.createElement(y.default,P({},l,{isSubmitting:n,handleAddPaymentSource:this.startAddNewPaymentSource}));default:return null}},a.render=function(){var e=this.props,t=e.isOpen,r=e.productName,n=e.productPrice,o=e.productCurrency,a=this.state,i=a.isLoading,l=a.currentStep;return i?null:S(s.default,{open:t,onRequestClose:this.handleRequestClose},void 0,S(f.default,{productName:r,productPrice:n,productCurrency:o,modalSteps:E,currentStep:l},void 0,this.renderErrorMessage()),this.renderModalContent())},n}(o.Component);b.displayName="PaymentModal";var M=a.default.connectStores([l.default],function(){return{paymentSources:l.default.paymentSources}})(b);t.default=M},2213:function(e,t,r){"use strict";t.__esModule=!0,t.createCardPaymentSource=function(e){return p.apply(this,arguments)},t.createPaypalPaymentSource=function(e,t){return f(u.PaymentGateways.BRAINTREE,e,t).catch(a.APIErrorHandler)},t.purchaseApplicationLicense=t.fetchPaymentSources=t.createPaymentSource=void 0;var n=s(r(84)),o=s(r(22)),a=r(128),i=r(1653),l=s(r(23)),u=r(4);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,n,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,l,"next",e)}function l(e){c(a,n,o,i,l,"throw",e)}i(void 0)})}}function p(){return(p=d(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:return r=e.sent,e.abrupt("return",f(u.PaymentGateways.STRIPE,r.id,t.billingAddress).catch(i.formatStripeErrors));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var f=function(e,t,r){return n.default.post({url:u.Endpoints.PAYMENT_SOURCES,body:{payment_gateway:e,token:t,billing_address:{name:r.name,line_1:r.line1,line_2:r.line2,city:r.city,state:r.state,postal_code:r.postalCode,country:r.country}}}).then(function(e){o.default.dispatch({type:l.default.PAYMENT_SOURCE_CREATE_SUCCESS,paymentSource:e.body})})};t.createPaymentSource=f;t.fetchPaymentSources=function(){return n.default.get({url:u.Endpoints.PAYMENT_SOURCES}).then(function(e){return o.default.dispatch({type:l.default.PAYMENT_SOURCES_FETCH_SUCCESS,paymentSources:e.body}),e.body})};function y(e){return v.apply(this,arguments)}function v(){return(v=d(regeneratorRuntime.mark(function e(t){var r,n,o,a,l,s,c,d,p,f,y,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type===u.PaymentSourceTypes.CARD){e.next=2;break}throw new Error("Stripe is only for Card types");case 2:return e.next=4,(0,i.ensureStripeIsLoaded)();case 4:return r=e.sent,n=t.cardNumber,o=t.cvc,a=t.expirationDate,l=t.billingAddress,s=l.name,c=l.line1,d=l.line2,p=l.city,f=l.state,y=l.postalCode,v=l.country,e.abrupt("return",new Promise(function(e,t){r.card.createToken({number:n,cvc:o,exp:a,name:s,address_line1:c,address_line2:d,address_city:p,address_state:f,address_zip:y,address_country:v},function(r,n){200===r&&null!=n&&n.id?e(n):t(n)})}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.purchaseApplicationLicense=function(e){return n.default.post({url:u.Endpoints.PURCHASE_SKU(u.APPLICATION_LICENSE_SKU_ID),body:{payment_source_id:e,expected_amount:u.APPLICATION_LICENSE_PRICE}}).then(function(e){o.default.dispatch({type:l.default.ENTITLEMENT_CREATE_SUCCESS,entitlements:e.body.entitlements})}).catch(a.APIErrorHandler)}},2214:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=new Map,o=new Map,a=3e3;function i(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l={ensure:function(e){var t=n.get(e);return t||(t=function(e){return new Promise(function(t,r){var l=!1,u=o.get(e),s=function(){l||(l=!0,i(c),clearTimeout(d),n.delete(e),r(new Error("script error")))},c=document.createElement("script");c.async=1,c.type="text/javascript",c.onload=function(){return i(c),clearTimeout(d),u&&window[u]?t(window[u]):u&&!window[u]?r(new Error("globalKey does not exist in window")):void t()},c.onerror=s,c.src=e,document.body.appendChild(c);var d=setTimeout(s,a)})}(e),n.set(e,t),t)},register:function(e,t){o.set(e,t)}};t.default=l},2215:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o,a=m(r(1)),i=h(r(2216)),l=h(r(2217)),u=h(r(2218)),s=m(r(418)),c=h(r(425)),d=h(r(422)),p=h(r(423)),f=h(r(419)),y=r(179),v=r(21);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function C(e,t,r,n){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=n;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var _=l.default.map(function(e){return{value:e.code,label:e.name}}),S=((n={}).US=u.default,n.CA=i.default,n),P=["country","state","line1","city","postalCode"],E=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={country:t.props.country,state:t.props.state,line1:t.props.line1,line2:t.props.line2,city:t.props.city,postalCode:t.props.postalCode,errors:{}},t.handleCountryChange=function(e){t.setState({country:e.value})},t.handleStateChange=function(e){t.setState({state:e.value})},t.handlePreviousStep=function(){var e=t.props.onPreviousClick,r=t.state;e({country:r.country,state:r.state,line1:r.line1,line2:r.line2,city:r.city,postalCode:r.postalCode})},t.handleNextStep=function(){var e=t.props.onNextClick;t.isFormValid()&&e(t.state)},t.handleFieldChange=function(e,r){var n,o=t.state.errors;null!=r&&(null!=o[r]&&delete o[r],t.setState(((n={})[r]=e,n)))},t.renderStateField=function(){var e=t.state,r=e.country,n=e.state,o=e.errors,a=null==r?null:S[r];return null!=a?C(c.default,{options:a,onChange:t.handleStateChange,value:n,error:o.state}):C(d.default,{onChange:t.handleFieldChange,name:"state",value:n,error:o.state})},t.renderForm=function(){var e=t.state,r=e.country,n=e.line1,o=e.line2,a=e.city,i=e.postalCode,l=e.errors;return C(p.default,{},void 0,C(s.default,{},void 0,C(s.GridSection,{},void 0,C(s.GridChild,{columnSpread:12},void 0,C(f.default,{},void 0,v.Messages.Address.COUNTRY),C(c.default,{onChange:t.handleCountryChange,options:_,value:r,error:l.country})),C(s.GridChild,{columnSpread:12},void 0,C(f.default,{},void 0,v.Messages.Address.ADDRESS_1),C(d.default,{onChange:t.handleFieldChange,placeholder:v.Messages.Address.ADDRESS_1_PLACEHOLDER,name:"line1",value:n,error:l.line1})),C(s.GridChild,{columnSpread:12},void 0,C(f.default,{},void 0,v.Messages.Address.ADDRESS_2),C(d.default,{onChange:t.handleFieldChange,placeholder:v.Messages.Address.ADDRESS_2_PLACEHOLDER,name:"line2",value:o})),C(s.GridChild,{columnSpread:12},void 0,C(f.default,{},void 0,v.Messages.Address.CITY),C(d.default,{onChange:t.handleFieldChange,placeholder:v.Messages.Address.CITY_PLACEHOLDER,name:"city",value:a,error:l.city})),C(s.GridChild,{columnSpread:6},void 0,C(f.default,{},void 0,v.Messages.Address.STATE),t.renderStateField()),C(s.GridChild,{columnSpread:6},void 0,C(f.default,{},void 0,v.Messages.Address.POSTAL_CODE),C(d.default,{onChange:t.handleFieldChange,name:"postalCode",value:i,error:l.postalCode})))))},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.isFormValid=function(){var e=this,t={};return P.forEach(function(r){""===e.state[r]&&(t[r]=v.Messages.PaymentModal.FIELD_REQUIRED)}),this.setState({errors:t}),0===Object.keys(t).length},o.render=function(){var e=this.props,t=e.onRequestClose,r=e.isSubmitting;return C(a.Fragment,{},void 0,C(y.ModalContent,{},void 0,this.renderForm()),C(y.ModalFooter,{},void 0,C(y.ModalBack,{onClick:this.handlePreviousStep},void 0,v.Messages.Actions.BACK),C(y.ModalCancel,{onClick:t},void 0,v.Messages.Actions.CANCEL),C(y.ModalConfirm,{submitting:r,onClick:this.handleNextStep},void 0,v.Messages.Actions.NEXT)))},n}(a.Component);t.default=E,E.displayName="AddressForm"},2219:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o,a=m(r(1)),i=h(r(15)),l=h(r(1522)),u=m(r(418)),s=h(r(422)),c=r(1653),d=h(r(423)),p=h(r(419)),f=r(179),y=h(r(2220)),v=r(21);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function C(e,t,r,n,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,o)}function _(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var S=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={cardNumber:t.props.cardNumber,expirationDate:t.props.expirationDate,cvc:t.props.cvc,name:t.props.name,errors:{}},t.handleFieldChange=function(e,r){var n,o=t.state.errors;null!=r&&(null!=o[r]&&delete o[r],t.setState(((n={})[r]=e,n.errors=o,n)))},t.handleNextStep=function(){var e=t.props.onNextClick,r=t.state,n=r.cardNumber,o=r.expirationDate,a=r.cvc,i=r.name;t.isFormValid()&&e({cardNumber:n,expirationDate:o,cvc:a,name:i})},t.handlePreviousStep=function(){var e=t.props.onPreviousClick,r=t.state;e({cardNumber:r.cardNumber,expirationDate:r.expirationDate,cvc:r.cvc,name:r.name})},t.renderCreditCardForm=function(){var e=t.state,r=e.cardNumber,n=e.expirationDate,o=e.cvc,a=e.name,i=e.errors;return _(d.default,{},void 0,_(u.default,{},void 0,_(u.GridSection,{},void 0,_(u.GridChild,{columnSpread:12},void 0,_(p.default,{},void 0,v.Messages.PaymentModal.CREDIT_CARD_NUMBER),_(y.default,{name:"cardNumber",onChange:t.handleFieldChange,value:r,error:i.cardNumber,placeholder:v.Messages.PaymentModal.CREDIT_CARD_PLACEHOLDER})),_(u.GridChild,{columnSpread:6},void 0,_(p.default,{},void 0,v.Messages.PaymentModal.EXPIRATION_DATE),_(s.default,{name:"expirationDate",onChange:t.handleFieldChange,value:n,error:i.expirationDate,placeholder:v.Messages.PaymentModal.EXPIRATION_PLACEHOLDER})),_(u.GridChild,{columnSpread:6},void 0,_(p.default,{},void 0,v.Messages.PaymentModal.CVC),_(s.default,{name:"cvc",onChange:t.handleFieldChange,value:o,error:i.cvc,placeholder:v.Messages.PaymentModal.CVC_PLACEHOLDER})),_(u.GridChild,{columnSpread:12},void 0,_(p.default,{},void 0,v.Messages.PaymentModal.NAME_ON_CARD),_(s.default,{name:"name",onChange:t.handleFieldChange,value:a,error:i.name,placeholder:v.Messages.PaymentModal.NAME_PLACEHOLDER})))))},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.componentDidMount=function(){var e,t=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.ensureStripeIsLoaded)();case 2:o=e.sent;case 3:case"end":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){C(a,n,o,i,l,"next",e)}function l(e){C(a,n,o,i,l,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}(),i.isFormValid=function(){var e=this.state,t=e.cardNumber,r=e.expirationDate,n=e.cvc,a=e.name;if(null==o)return!1;var i={};return o.card.validateCardNumber(t)||(i.cardNumber=v.Messages.PaymentModal.INVALID_CARD_NUMBER),o.card.validateExpiry(r)||(i.expirationDate=v.Messages.PaymentModal.INVALID_EXPIRATION_DATE),o.card.validateCVC(n)||(i.cvc=v.Messages.PaymentModal.INVALID_CVC),""===a&&(i.name=v.Messages.PaymentModal.INVALID_NAME),this.setState({errors:i}),0===Object.keys(i).length},i.render=function(){var e=this.props,t=e.onRequestClose,r=e.paymentSources;return _(a.Fragment,{},void 0,_(f.ModalContent,{},void 0,this.renderCreditCardForm()),_(f.ModalFooter,{},void 0,r.length>0?_(f.ModalBack,{onClick:this.handlePreviousStep},void 0,v.Messages.Actions.BACK):null,_(f.ModalCancel,{onClick:t},void 0,v.Messages.Actions.CANCEL),_(f.ModalConfirm,{onClick:this.handleNextStep},void 0,v.Messages.Actions.NEXT)))},n}(a.Component);S.displayName="NewCreditCardForm";var P=i.default.connectStores([l.default],function(){return{paymentSources:l.default.paymentSources}})(S);t.default=P},2220:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(1)),a=c(r(9)),i=c(r(422)),l=c(r(2221)),u=c(r(1523)),s=c(r(1329));function c(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var f=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).selectionStart=0,t.setRef=function(e){var r=t.props.inputRef;t._inputRef=e,null!=r&&r(e)},t.handleChange=function(e,r){var n=t.props,o=n.value,a=n.onChange,i=t._inputRef;if(e!==o&&null!=i&&null!=o){var u=l.default.prettifyCreditCardNumber(e),s=i.selectionStart;if(o===u)s-=1,u=l.default.prettifyCreditCardNumber(u.substring(0,s)+u.substring(s+1));else{var c=u.length-e.length;c>0&&(s+=c)}t.selectionStart=s,null!=a&&a(u,r)}},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.componentDidUpdate=function(e){var t=this._inputRef;e.value!==this.props.value&&null!=t&&t.setSelectionRange(this.selectionStart,this.selectionStart)},c.getMaxLength=function(e){var t=null!=e?l.default.getCreditCardType(e):l.default.DEFAULT_CARD_TYPE;return t.lengths[t.lengths.length-1]+t.gaps.length},c.render=function(){var e=this.props,t=e.value,r=e.flipped,n=e.inputClassName,c=e.className,f=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,["value","flipped","inputClassName","className"]),y=l.default.getCreditCardType(t),v=this.getMaxLength(t);return p("div",{className:(0,a.default)(s.default.cardNumberWrapper,c)},void 0,p(u.default,{className:s.default.cardIcon,type:y.type,flipped:r}),o.createElement(i.default,d({},f,{value:l.default.prettifyCreditCardNumber(t),onChange:this.handleChange,inputRef:this.setRef,maxLength:v,inputClassName:(0,a.default)(s.default.cardNumberInput,n)})))},n}(o.PureComponent);f.displayName="CardNumberField",f.defaultProps={flipped:!1};var y=f;t.default=y},2221:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(1654))&&n.__esModule?n:{default:n};var a={type:"",gaps:[4,8,12],lengths:[16],code:{name:"CVV",size:3}},i=/[^0-9]/g,l=/[^0-9\/]/g;function u(e){for(var t=s(e).split(""),r=c(e),n=0;n<r.gaps.length;){var o=r.gaps[n]+n;if(!(o<t.length))break;t.splice(o,0," "),n+=1}return t.join("")}function s(e){return e.replace(i,"")}function c(e){var t=s(e);return t&&(0,o.default)(t)[0]||a}var d={DEFAULT_CARD_TYPE:a,prettifyCreditCardNumber:u,formatCreditCardNumber:function(e){var t=s(e);return c(t),u(t)},getCreditCardType:c,cleanCardNumber:s,validateCardNumber:function(e){var t=c(e);if(null==t)throw new Error("Could not recognize card type.");if(!t.lengths.includes(e.length))throw new Error("Card number length is incorrect.")},getTypeInfo:function(e){return o.default.getTypeInfo(e)},formatExpiration:function(e){var t=e.replace(l,"").split("/"),r=t[0],n=t[1],o=[];return parseInt(r,10)>12&&(r=r.substring(0,1)),o.push(r),(parseInt(r,10)>1||2===r.length||n)&&o.push("/"),n&&parseInt(n,10)>99&&(n=(n+"").substring(0,2)),o.push(n),o.join("")}};t.default=d},2222:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=m(r(1)),a=h(r(15)),i=m(r(2223)),l=h(r(1715)),u=h(r(52)),s=m(r(418)),c=h(r(422)),d=h(r(419)),p=r(179),f=h(r(1523)),y=r(21),v=h(r(1261));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function C(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function _(e,t,r,n,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){_(a,n,o,i,l,"next",e)}function l(e){_(a,n,o,i,l,"throw",e)}i(void 0)})}}var P=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).handleTokenizePayPal=S(regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.onNextClick,e.next=3,i.tokenizePayPal();case 3:null!=(n=e.sent)&&r(n);case 5:case"end":return e.stop()}},e)})),t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.componentDidMount=function(){var e=this;i.createClient().catch(function(){e.setState({errorMessage:y.Messages.PaymentModal.ERROR_CONNECTING_TO_PAYPAL})})},a.componentDidUpdate=function(e){var t=this.props.paypalClient;null==e.paypalClient&&null!=t&&this.handleTokenizePayPal()},a.componentWillUnmount=function(){i.teardown()},a.render=function(){var e=this.props,t=e.onRequestClose,r=e.onPreviousClick;return C(o.Fragment,{},void 0,C(p.ModalContent,{},void 0,C(d.default,{},void 0,y.Messages.PaymentModal.PAYPAL_ACCOUNT),C(s.default,{},void 0,C(s.GridSection,{},void 0,C(s.GridChild,{columnSpread:12},void 0,C("div",{className:v.default.inputWrapper},void 0,C(f.default,{className:v.default.cardIcon,type:f.default.Types.PAYPAL}),C(c.default,{inputClassName:v.default.textInput,value:y.Messages.PaymentModal.CONFIRM_PAYPAL_IN_BROWSER,disabled:!0})))))),C(p.ModalFooter,{},void 0,C(p.ModalBack,{onClick:r},void 0,y.Messages.Actions.BACK),C(p.ModalCancel,{onClick:t},void 0,y.Messages.Actions.CANCEL),C(u.default,{onClick:this.handleTokenizePayPal,look:u.default.Look.OUTLINED},void 0,y.Messages.PaymentModal.REOPEN_WINDOW)))},n}(o.Component);P.displayName="NewPayPalForm";var E=a.default.connectStores([l.default],function(){return{paypalClient:l.default.getPayPalClient()}})(P);t.default=E},2223:function(e,t,r){"use strict";t.__esModule=!0,t.createClient=function(){return n.default.client.create({authorization:l.PaymentSettings.BRAINTREE.KEY}).then(function(e){return o.default.dispatch({type:i.default.BRAINTREE_CREATE_CLIENT_SUCCESS,client:e}),s()})},t.createPayPalClient=s,t.tokenizePayPal=function(){var e=a.default.getPayPalClient();if(null==e)throw new Error("braintree paypal client must be initialized before calling this");return e.tokenize({flow:"vault"}).then(function(e){var t=e.details,r=t.email,n=t.firstName,o=t.lastName,a=t.billingAddress;return{nonce:e.nonce,email:r,billingAddress:{name:n+" "+o,line1:a.line1,line2:a.line2,city:a.city,state:a.state,country:a.countryCode,postalCode:a.postalCode}}}).catch(function(e){var t=e.code;if(t!==l.BraintreeErrors.PAYPAL_POPUP_CLOSED)throw new Error})},t.teardown=function(){var e=a.default.getPayPalClient();if(null==e)return Promise.resolve();o.default.dispatch({type:i.default.BRAINTREE_TEARDOWN_PAYPAL_CLIENT});try{return e.teardown()}catch(e){return Promise.resolve()}};var n=u(r(2224)),o=u(r(22)),a=u(r(1715)),i=u(r(23)),l=r(4);function u(e){return e&&e.__esModule?e:{default:e}}function s(){var e=a.default.getClient();if(null==e)throw new Error("braintree client must be initialized before calling this");return n.default.paypal.create({client:e}).then(function(e){return o.default.dispatch({type:i.default.BRAINTREE_CREATE_PAYPAL_CLIENT_SUCCESS,paypalClient:e})})}},2258:function(e,t){},2260:function(e,t){},2292:function(e,t){},2293:function(e,t){},2407:function(e,t,r){"use strict";t.__esModule=!0,t.default=v;f(r(1));var n,o=r(1405),a=p(r(184)),i=p(r(25)),l=r(179),u=p(r(2408)),s=r(4),c=f(r(21)),d=p(r(1331));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function y(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function v(e){var t=e.productName,r=e.productPrice,n=e.productCurrency,p=e.modalSteps,f=e.currentStep,v=e.children;return y("div",{className:d.default.headerWrap},void 0,y(l.ModalHeader,{},void 0,c.Messages.PaymentModal.PURCHASE_LICENSE),y("div",{className:d.default.productDetailWrapper},void 0,y("div",{className:d.default.productDetails},void 0,y(a.default,{src:s.Images.ASSET_DEFAULT_AVATAR_1}),y(i.default,{color:i.default.Colors.WHITE,className:d.default.productName},void 0,t)),y("div",{className:d.default.price},void 0,(0,o.formatPrice)(r,n,c.default.getLocale()))),v,y(u.default,{steps:p,currentStep:f}),y(l.ModalDivider,{className:d.default.divider}))}v.displayName="PaymentModalHeader"},2408:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=s(r(1)),a=s(r(420)),i=u(r(25)),l=u(r(1330));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function c(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var d=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(t=e.call.apply(e,[this].concat(n))||this).renderSteps=function(){var e=t.props,r=e.steps,n=e.currentStep;return r.map(function(e,t){return c(o.Fragment,{},t,c(i.default,{color:n===t?i.default.Colors.WHITE:i.default.Colors.PRIMARY_400,size:i.default.Sizes.SMALL},void 0,e),t===r.length-1?null:c(a.default,{name:a.IconNames.ARROW_RIGHT,height:22,width:16,className:l.default.arrowIcon}))})},t}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){return c("div",{className:l.default.stepTracker},void 0,this.renderSteps())},n}(o.Component);t.default=d,d.displayName="StepTracker"},2409:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=S(r(1)),a=_(r(15)),i=_(r(1522)),l=_(r(52)),u=_(r(1387)),s=S(r(418)),c=_(r(425)),d=_(r(96)),p=_(r(423)),f=_(r(419)),y=r(179),v=_(r(1523)),h=r(4),m=r(21),C=_(r(1261));function _(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function P(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var E="ADD_PAYMENT_SOURCE",g=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={selectedPaymentSource:null,hasAcceptedTerms:!1},t.handleAcceptTermsClick=function(){t.setState(function(e){return{hasAcceptedTerms:!e.hasAcceptedTerms}})},t.handleSelectPaymentSource=function(e){var r=t.props.handleAddPaymentSource;e.value!==E?t.setState({selectedPaymentSource:e.value}):r()},t.handleSubmitPayment=function(){var e=t.props.onNextClick,r=t.state.selectedPaymentSource;null!=r&&e(r)},t.renderOptionWithIcon=function(e){return null==e.type?e.label:P("div",{className:C.default.paymentSelectOption},void 0,P(v.default,{type:e.type}),P("span",{className:C.default.selectOptionLabel},void 0,e.label))},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.getPaymentSelectOptions=function(){var e=this.props.paymentSources.map(function(e){return e.type===h.PaymentSourceTypes.PAYPAL?{value:e.id,label:e.email,type:v.default.Types.PAYPAL}:{value:e.id,label:m.Messages.PaymentModal.CARD_ENDING_IN.format({lastFour:e.last_4}),type:e.brand.toLowerCase()}});return e.push({label:m.Messages.PaymentModal.ADD_PAYMENT_SOURCE,value:E,type:null}),e},a.render=function(){var e=this.props,t=e.onRequestClose,r=e.isSubmitting,n=this.state,a=n.selectedPaymentSource,i=n.hasAcceptedTerms;return P(o.Fragment,{},void 0,P(y.ModalContent,{},void 0,P(p.default,{},void 0,P(s.default,{},void 0,P(s.GridSection,{},void 0,P(s.GridChild,{columnSpread:12},void 0,P(f.default,{},void 0,m.Messages.PaymentModal.PAY_WITH),P(c.default,{valueRenderer:this.renderOptionWithIcon,optionRenderer:this.renderOptionWithIcon,options:this.getPaymentSelectOptions(),value:a,onChange:this.handleSelectPaymentSource,clearable:!1})),P(s.GridChild,{columnSpread:12},void 0,P(f.default,{},void 0,m.Messages.PaymentModal.LEGAL_MUMBO_JUMBO),P(u.default,{value:i,onChange:this.handleAcceptTermsClick},void 0,m.Messages.PaymentModal.AGREE_TO_DISTRIBUTION_AGREEMENT.format({link:d.default.prependBasename(h.Routes.DOCS_STORE_DISTRIBUTION_AGREEMENT)}))))))),P(y.ModalFooter,{},void 0,P(y.ModalCancel,{onClick:t,disabled:r},void 0,m.Messages.Actions.CANCEL),P(y.ModalConfirm,{color:l.default.Color.GREEN,onClick:this.handleSubmitPayment,disabled:!i||null==a,submitting:r},void 0,m.Messages.Actions.PAY)))},n}(o.Component);g.displayName="ReviewPayment";var A=a.default.connectStores([i.default],function(){return{paymentSources:i.default.paymentSources}})(g);t.default=A},2410:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=v(r(1)),a=y(r(15)),i=y(r(1522)),l=v(r(418)),u=y(r(419)),s=r(179),c=y(r(2411)),d=r(4),p=r(21),f=y(r(1261));function y(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function h(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var m=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){var e=this.props,t=e.paymentSources,r=e.onRequestClose,n=e.onPreviousClick,a=e.onNextClick;return h(o.Fragment,{},void 0,h(s.ModalContent,{},void 0,h(u.default,{},void 0,p.Messages.PaymentModal.PAY_WITH),h(l.default,{},void 0,h(l.GridSection,{},void 0,h(l.GridChild,{columnSpread:6},void 0,h(c.default,{className:f.default.paymentButton,onClick:a,type:d.PaymentSourceTypes.CARD})),h(l.GridChild,{columnSpread:6},void 0,h(c.default,{className:f.default.paymentButton,onClick:a,type:d.PaymentSourceTypes.PAYPAL}))))),h(s.ModalFooter,{},void 0,t.length>0?h(s.ModalBack,{onClick:n},void 0,p.Messages.Actions.BACK):null,h(s.ModalCancel,{onClick:r},void 0,p.Messages.Actions.CANCEL)))},n}(o.Component);m.displayName="SelectPaymentSource";var C=a.default.connectStores([i.default],function(){return{paymentSources:i.default.paymentSources}})(m);t.default=C},2411:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(1)),i=d(r(52)),l=d(r(1523)),u=r(4),s=r(21),c=d(r(1332));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,n){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=n;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var f=((n={})[u.PaymentSourceTypes.CARD]={icon:l.default.Types.UNKNOWN,copy:s.Messages.PaymentModal.CREDIT_CARD},n[u.PaymentSourceTypes.PAYPAL]={icon:l.default.Types.PAYPAL,copy:s.Messages.PaymentModal.PAYPAL},n),y=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).handleClick=function(){var e=t.props;(0,e.onClick)(e.type)},t}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){var e=this.props,t=e.type,r=e.className,n=f[t];return p(i.default,{className:r,height:i.default.Height.MEDIUM,onClick:this.handleClick},void 0,p("div",{className:c.default.innerPaymentButtonWrap},void 0,p(l.default,{type:n.icon,className:c.default.paymentSourceIcon}),n.copy))},n}(a.Component);t.default=y,y.displayName="PaymentSourceButton"}}]);
//# sourceMappingURL=25c446e6af9ce3db2190.js.map