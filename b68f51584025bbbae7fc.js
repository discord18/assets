(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{1168:function(e,t,r){"use strict";t.__esModule=!0;var n,a=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,a){var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===s)t.children=a;else if(s>1){for(var i=Array(s),u=0;u<s;u++)i[u]=arguments[u+3];t.children=i}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),o=i(r(19)),s=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(r(2)),i(r(50))),l=i(r(1087));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,r,n=e.children,i=e.isFlush,u=void 0!==i&&i,f=e.tag,d=void 0===f?"h3":f,c=e.hasBottomPadding,p=void 0!==c&&c;return a(s.default,{className:(0,o.default)(l.default.heading,(t={},t[l.default.flush]=u,t),(r={},r[l.default.extraPadding]=p,r)),color:s.default.Colors.WHITE,size:s.default.Sizes.MEDIUM_LARGE,tag:d,textCase:s.default.Cases.UPPERCASE,weight:s.default.Weights.MEDIUM},void 0,n)},e.exports=t.default},1170:function(e,t,r){"use strict";t.__esModule=!0;var n,a=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,a){var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===s)t.children=a;else if(s>1){for(var i=Array(s),u=0;u<s;u++)i[u]=arguments[u+3];t.children=i}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),o=i(r(19)),s=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(r(2)),i(r(50))),l=i(r(1088));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,r=e.children,n=e.isFlush,i=void 0!==n&&n,u=e.tag,f=void 0===u?"p":u;return a(s.default,{className:(0,o.default)(l.default.heading,(t={},t[l.default.flush]=i,t)),color:s.default.Colors.PRIMARY_400,size:s.default.Sizes.MEDIUM,tag:f,weight:s.default.Weights.NORMAL},void 0,r)},e.exports=t.default},1172:function(e,t,r){var n=r(1191),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},1173:function(e,t,r){var n=r(1172).Symbol;e.exports=n},1177:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},1178:function(e,t,r){var n=r(1173),a=r(1201),o=r(1200),s="[object Null]",l="[object Undefined]",i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?l:s:i&&i in Object(e)?a(e):o(e)}},1179:function(e,t){var r=Array.isArray;e.exports=r},1185:function(e,t,r){var n=r(1178),a=r(1177),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||a(e)&&n(e)==o}},1190:function(e,t,r){"use strict";t.__esModule=!0;var n,a=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,a){var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===s)t.children=a;else if(s>1){for(var i=Array(s),u=0;u<s;u++)i[u]=arguments[u+3];t.children=i}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(r(2)),l(r(65))),s=l(r(1094));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.children;return a(o.default,{align:o.default.Align.CENTER,justify:o.default.Justify.CENTER,className:s.default.wrapper},void 0,a(o.default.Child,{grow:0,shrink:0},void 0,t))},e.exports=t.default},1191:function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(14))},1200:function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},1201:function(e,t,r){var n=r(1173),a=Object.prototype,o=a.hasOwnProperty,s=a.toString,l=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,l),r=e[l];try{e[l]=void 0;var n=!0}catch(e){}var a=s.call(e);return n&&(t?e[l]=r:delete e[l]),a}},1227:function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}},1266:function(e,t,r){"use strict";t.__esModule=!0;t.arrayBufferToString=function(e){return"string"==typeof e?e:String.fromCharCode.apply(null,new Uint16Array(e))}},1267:function(e,t,r){"use strict";t.__esModule=!0;var n,a=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,a){var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===s)t.children=a;else if(s>1){for(var i=Array(s),u=0;u<s;u++)i[u]=arguments[u+3];t.children=i}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),o=A(r(19)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(2)),l=A(r(116)),i=r(1266),u=r(399),f=A(r(65)),d=r(162),c=A(d),p=A(r(1176)),h=A(r(401)),v=A(r(117)),g=A(r(1166)),m=A(r(1101)),y=r(43);function A(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=40,E=(0,l.default)({LOCAL_ASSET:null,REMOTE_ASSET:null}),_=function(e){function t(){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return r=n=S(this,e.call.apply(e,[this].concat(o))),n.canvasRef=null,n.state={error:null},n.handleFileLoad=function(e){var t=n.props,r=t.id,a=t.onFileLoad;if(null!=e.target){if(!(e.target instanceof FileReader))return;var o=e.target.result,s=(0,i.arrayBufferToString)(o),l=new Image;l.addEventListener("load",n.handleImageLoad),l.src=s,null!=a&&a(r,s)}},n.handleImageLoad=function(e){if(null!=n.canvasRef){var t=n.props,r=t.id,a=t.minSize,o=t.onAssetValidationError,s=t.onAssetValidationSuccess,l=e.currentTarget;null!=o&&null!=a&&(l.width<a||l.height<a)?(n.setState({error:y.Messages.RichPresence.MINIMUM_ASSET_SIZE.format({size:a})}),o(r)):null!=s&&s(r),n.canvasRef.width=b,n.canvasRef.height=b;var i=b,u=b,f=0,d=0;if(l.width<l.height){var c=b/l.width;u=l.height*c}else if(l.width>l.height){var p=b/l.height;i=l.width*p}u>b?d=(u-b)/-2:i>b&&(f=(i-b)/-2),n.canvasRef.getContext("2d").drawImage(l,f,d,i,u)}},n.handleNameChange=function(e){var t=n.props,r=t.onNameChange,a=t.id;null!=r&&r(a,e)},n.handleRemoveClick=function(){var e=n.props,t=e.id,r=e.onRemove;null!=r&&r(t)},n.setCanvasRef=function(e){n.canvasRef=e},S(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.getDerivedStateFromProps=function(e,t){return null==t.error&&null!=e.error?{error:e.error}:null},t.prototype.componentDidMount=function(){this.props.type===E.LOCAL_ASSET&&this.loadImage()},t.prototype.loadImage=function(){var e=this.props.file;if(null!=e&&!(0,u.isFileVideo)(e)){var t=new FileReader;t.addEventListener("load",this.handleFileLoad),t.readAsDataURL(e)}},t.prototype.renderAction=function(){var e=this.props,t=e.isBeingDeleted,r=e.isBeingUploaded;return t||r?a(v.default,{className:m.default.spinner,type:v.default.Type.PULSING_ELLIPSIS}):a(h.default,{onClick:this.handleRemoveClick})},t.prototype.renderErrorMessage=function(){var e=this.state.error;return null==e?null:a("div",{className:m.default.error},void 0,e)},t.prototype.renderImage=function(){var e=this.props,t=e.file;if(e.type===E.LOCAL_ASSET)return(0,u.isFileVideo)(t)?a("div",{className:m.default.videoPlaceholder},void 0,a(c.default,{className:m.default.videoIcon,name:d.IconNames.VIDEO_CAMERA})):s.createElement("canvas",{className:m.default.image,ref:this.setCanvasRef});var r=this.props,n=r.asset,o=r.getAssetUri;if(null!=n){var l=o(n)||"";return a("div",{className:m.default.image,style:{backgroundImage:"url("+l}},void 0,(0,u.isAssetVideo)(n)?a(c.default,{className:m.default.videoIcon,name:d.IconNames.VIDEO_CAMERA}):null)}},t.prototype.renderDragHandle=function(){return this.props.isDraggable?a(f.default.Child,{className:m.default.dragIconWrapper,grow:0,shrink:0,wrap:!0},void 0,a(c.default,{className:m.default.dragIcon,name:d.IconNames.DRAG_HANDLE})):null},t.prototype.renderName=function(){var e=this.props,t=e.asset,r=e.file,n=e.name;return e.type===E.LOCAL_ASSET&&null!=r?a(g.default,{defaultValue:n,onChange:this.handleNameChange}):null!=t?(0,u.getAssetLabel)(t):void 0},t.prototype.render=function(){var e,t=this.props.isDragging,r=this.state.error;return a(p.default,{className:(0,o.default)(m.default.wrapper,(e={},e[m.default.isDragging]=t,e)),borderColor:null==r?p.default.BorderColor.PRIMARY:p.default.BorderColor.RED,size:p.default.Size.SMALL},void 0,a(f.default,{className:m.default.content,align:f.default.Align.CENTER,wrap:f.default.Wrap.NO_WRAP},void 0,this.renderDragHandle(),a(f.default.Child,{className:m.default.imageWrapper,grow:0,shrink:0,wrap:!0},void 0,this.renderImage()),a(f.default.Child,{className:m.default.nameWrapper,grow:1,shrink:1,wrap:!0},void 0,this.renderName()),a(f.default.Child,{grow:0,shrink:0,wrap:!0},void 0,this.renderAction())),this.renderErrorMessage())},t}(s.Component);_.Types=E,_.defaultProps={isDraggable:!1,isDragging:!1},t.default=_,e.exports=t.default},1268:function(e,t,r){var n=r(1173),a=r(1227),o=r(1179),s=r(1185),l=1/0,i=n?n.prototype:void 0,u=i?i.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return a(t,e)+"";if(s(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-l?"-0":r}},1269:function(e,t,r){var n=r(1268);e.exports=function(e){return null==e?"":n(e)}},1360:function(e,t,r){e.exports=r.p+"bdf2ac0e8585551f26fbb4c5e909a225.svg"},1361:function(e,t,r){"use strict";t.__esModule=!0;var n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,r,a){var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===s)t.children=a;else if(s>1){for(var i=Array(s),u=0;u<s;u++)i[u]=arguments[u+3];t.children=i}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(2)),l=g(r(1731)),i=g(r(1267)),u=g(r(159)),f=g(r(1198)),d=g(r(65)),c=g(r(1162)),p=r(160),h=g(p),v=g(r(1131));function g(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){return e.replace(/\.[a-zA-Z0-9]{3,4}$/,"").replace(/[^A-Za-z0-9_-]+/g,"_").toLowerCase()},A=function(e){var t=e.children;return o(p.GridChild,{columnSpread:12,columnSpreadSmall:6,columnSpreadMedium:6,columnSpreadLarge:4,columnSpreadExtraLarge:4},void 0,t)},S={assetsBeingDeleted:[],assetsUploading:[],assetsWithValidationErrors:[],assetUploadErrors:{},errorMessage:null,localAssets:[]},b=function(e){function t(){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=n=m(this,e.call.apply(e,[this].concat(s))),n.state=a({},S,{hasLoadedRemoteAssets:!1}),n.localAssetData={},n.getAssetUploadError=function(e){var t=n.state.assetUploadErrors;return null!=t[e]?t[e]:null},n.handleLocalAssetLoad=function(e,t){n.localAssetData[e]=t},n.handleLocalAssetRemoval=function(e){n.setState(function(t){var r=a({},t.assetUploadErrors);return delete r[e],{assetsUploading:t.assetsUploading.filter(function(t){return t!==e}),assetUploadErrors:r,localAssets:t.localAssets.filter(function(t){return t.id!==e}),assetsWithValidationErrors:t.assetsWithValidationErrors.filter(function(t){return t!==e})}}),delete n.localAssetData[e]},n.handleFileSelectionChange=function(e){var t=e.currentTarget.files;n.setState(function(e){return{localAssets:[].concat(e.localAssets,Array.from(t).map(function(e){return{file:e,name:y(e.name),id:(0,l.default)()}}))}})},n.handleLocalAssetNameChange=function(e,t){n.setState(function(r){var n=r.localAssets.findIndex(function(t){return t.id===e}),o=r.localAssets[n];return{localAssets:[].concat(r.localAssets.slice(0,n),[a({},o,{name:t})],r.localAssets.slice(n+1))}})},n.handleLocalAssetError=function(e){n.setState(function(t){return{assetsWithValidationErrors:[].concat(t.assetsWithValidationErrors,[e])}})},n.handleLocalAssetSuccess=function(e){n.setState(function(t){return{assetsWithValidationErrors:t.assetsWithValidationErrors.filter(function(t){return t!==e})}})},n.handleRemoteAssetRemoval=function(e){n.setState(function(t){return{assetsBeingDeleted:[].concat(t.assetsBeingDeleted,[e])}}),n.props.deleteAsset(e).then(function(){n.setState(function(t){return{assetsBeingDeleted:t.assetsBeingDeleted.filter(function(t){return t!==e})}})})},n.uploadAllAssets=function(){var e=n.props.uploadAsset,t=n.state,r=t.localAssets,o=t.assetsWithValidationErrors,s=r.filter(function(e){return!o.includes(e.id)});n.setState({assetsUploading:s.map(function(e){return e.id})});var l=s.map(function(t){var r=t.id;return e({name:t.name,data:n.localAssetData[r],file:t.file}).then(function(){n.handleLocalAssetRemoval(r)}).catch(function(e){n.setState(function(n){var o;return{assetsUploading:n.assetsUploading.filter(function(e){return e!==t.id}),assetUploadErrors:a({},n.assetUploadErrors,(o={},o[r]=e.message,o))}})})});return Promise.all(l)},n.resetAssets=function(){n.setState(a({},S))},m(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.renderLocalAssets=function(){var e=this,t=this.props,r=t.getAssetUri,n=t.minAssetSize,a=this.state,s=a.localAssets,l=a.assetsUploading;return s.map(function(t){return o(A,{},t.id,o(i.default,{error:e.getAssetUploadError(t.id),getAssetUri:r,file:t.file,id:t.id,isBeingUploaded:l.includes(t.id),minSize:n,name:t.name,onAssetValidationError:e.handleLocalAssetError,onAssetValidationSuccess:e.handleLocalAssetSuccess,onFileLoad:e.handleLocalAssetLoad,onNameChange:e.handleLocalAssetNameChange,onRemove:e.handleLocalAssetRemoval,type:i.default.Types.LOCAL_ASSET}))})},t.prototype.renderRemoteAssets=function(){var e=this,t=this.props,r=t.assets,n=t.getAssetUri,a=this.state.assetsBeingDeleted;return r.map(function(t){return o(A,{},t.id,o(i.default,{getAssetUri:n,asset:t,id:t.id,isBeingDeleted:a.includes(t.id),onRemove:e.handleRemoteAssetRemoval,type:i.default.Types.REMOTE_ASSET}))})},t.prototype.renderAssetsHeading=function(){var e=this.state.localAssets,t=this.props,r=t.assets,n=t.assetsHeadingRenderer,a=e.length,s=r.length;return o(c.default,{},void 0,n(a+s))},t.prototype.renderAssets=function(){var e=this.renderLocalAssets(),t=this.renderRemoteAssets();return e.length>0||t.length>0?o(h.default,{},void 0,o(p.GridSection,{},void 0,e,t)):this.props.emptyState},t.prototype.render=function(){var e=this.props,t=e.actionCopy,r=e.assetLabel,n=e.fileTypeDescription,a=e.supportedExtensions;return o(s.Fragment,{},void 0,o(d.default,{className:v.default.addImageWrapper,align:d.default.Align.CENTER},void 0,o(d.default.Child,{grow:0,shrink:0,wrap:!0},void 0,o(u.default,{className:v.default.addImagesButton,tag:"div",wrapContent:!1},void 0,t,o(f.default,{multiple:!0,onChange:this.handleFileSelectionChange,filters:[{name:r,extensions:a}]}))),o(d.default.Child,{grow:1,shrink:1,wrap:!0},void 0,n)),this.renderAssetsHeading(),this.renderAssets())},t}(s.Component);t.default=b,e.exports=t.default},1731:function(e,t,r){var n=r(1269),a=0;e.exports=function(e){var t=++a;return n(e)+t}}}]);
//# sourceMappingURL=b68f51584025bbbae7fc.js.map