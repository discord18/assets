(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{1373:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}t.default=e}(r(1));var o,s=i(r(9)),a=i(r(25)),n=i(r(1237));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t,r=e.children,i=e.tag,l=void 0===i?"h2":i,u=e.isFlush,d=void 0!==u&&u;return function(e,t,r,s){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,n=arguments.length-3;if(t||0===n||(t={children:void 0}),t&&a)for(var i in a)void 0===t[i]&&(t[i]=a[i]);else t||(t=a||{});if(1===n)t.children=s;else if(n>1){for(var l=new Array(n),u=0;u<n;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}(a.default,{className:(0,s.default)(n.default.heading,(t={},t[n.default.flush]=d,t)),color:a.default.Colors.WHITE,size:a.default.Sizes.LARGE,tag:l,weight:a.default.Weights.MEDIUM},void 0,r)};l.displayName="PageHeading";var u=l;t.default=u},1374:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}t.default=e}(r(1));var o,s=i(r(9)),a=i(r(25)),n=i(r(1238));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t,r=e.children,i=e.className,l=e.tag,u=void 0===l?"p":l,d=e.isFlush,f=void 0!==d&&d;return function(e,t,r,s){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,n=arguments.length-3;if(t||0===n||(t={children:void 0}),t&&a)for(var i in a)void 0===t[i]&&(t[i]=a[i]);else t||(t=a||{});if(1===n)t.children=s;else if(n>1){for(var l=new Array(n),u=0;u<n;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}(a.default,{className:(0,s.default)(n.default.subheading,i,(t={},t[n.default.flush]=f,t)),color:a.default.Colors.PRIMARY_300,size:a.default.Sizes.MEDIUM_LARGE,tag:u,weight:a.default.Weights.NORMAL},void 0,r)};l.displayName="PageSubheading";var u=l;t.default=u},1375:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o=l(r(1)),s=i(r(9)),a=l(r(177)),n=i(r(1239));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}var d=function(e){var t,r;function i(){return e.apply(this,arguments)||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i.prototype.render=function(){var e=this.props,t=e.className,r=function(e,t){if(null==e)return{};var r,o,s={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,["className"]);return o.createElement(a.default,u({},r,{className:(0,s.default)(n.default.formStatusAlert,t)}))},i}(o.Component);t.default=d,d.displayName="FormStatusAlert",d.Types=a.AlertTypes},1381:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}t.default=e}(r(1));var o,s=i(r(9)),a=i(r(25)),n=i(r(1240));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t,r=e.children,i=e.className,l=e.isFlush,u=void 0!==l&&l,d=e.tag,f=void 0===d?"p":d;return function(e,t,r,s){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,n=arguments.length-3;if(t||0===n||(t={children:void 0}),t&&a)for(var i in a)void 0===t[i]&&(t[i]=a[i]);else t||(t=a||{});if(1===n)t.children=s;else if(n>1){for(var l=new Array(n),u=0;u<n;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}(a.default,{className:(0,s.default)(n.default.heading,(t={},t[n.default.flush]=u,t),i),color:a.default.Colors.PRIMARY_400,size:a.default.Sizes.MEDIUM,tag:f,weight:a.default.Weights.NORMAL},void 0,r)};l.displayName="PageSectionSubheading";var u=l;t.default=u},1474:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,s=p(r(1)),a=c(r(9)),n=c(r(1475)),i=p(r(420)),l=c(r(425)),u=r(431),d=c(r(1246)),f=c(r(1263));function c(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function h(e,t,r,s){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,n=arguments.length-3;if(t||0===n||(t={children:void 0}),t&&a)for(var i in a)void 0===t[i]&&(t[i]=a[i]);else t||(t=a||{});if(1===n)t.children=s;else if(n>1){for(var l=new Array(n),u=0;u<n;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var _=function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=o.prototype;return s.getAssetOptions=function(){var e=this;return this.props.assets.map(function(t){return{label:e.renderAsset(t),value:t.id}})},s.renderAsset=function(e){var t=(0,this.props.getAssetUri)(e),r=(0,u.isAssetVideo)(e)?h(i.default,{className:f.default.videoIcon,name:i.IconNames.VIDEO_CAMERA}):h(n.default,{className:f.default.image,assetUri:t||""});return h("div",{className:f.default.assetOption},void 0,h("div",{className:f.default.imageWrapper},void 0,r),h("div",{className:f.default.labelWrapper},void 0,(0,u.getAssetLabel)(e)))},s.render=function(){var e,t=this.props,r=t.onChange,o=t.selectedAssetId,s=t.restrictWidth,n=t.className,i=t.clearable,u=t.name;return h(l.default,{className:(0,a.default)((e={},e[d.default.restrictedWidth]=s,e),n),clearable:i,searchable:!1,onChange:r,options:this.getAssetOptions(),value:o,name:u})},o}(s.Component);t.default=_,_.displayName="AssetSelect",_.defaultProps={clearable:!1,restrictWidth:!1}},1475:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,s=u(r(1)),a=l(r(9)),n=u(r(53)),i=l(r(1262));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function d(e,t,r,s){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,n=arguments.length-3;if(t||0===n||(t={children:void 0}),t&&a)for(var i in a)void 0===t[i]&&(t[i]=a[i]);else t||(t=a||{});if(1===n)t.children=s;else if(n>1){for(var l=new Array(n),u=0;u<n;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var f=function(e){var t,r;function o(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).imagePlaceholderRef=s.createRef(),t.state={isHovered:!1},t.getAssetStyle=function(){var e={backgroundImage:"url("+t.props.assetUri};if(null!=t.imagePlaceholderRef.current){var r=t.imagePlaceholderRef.current.getBoundingClientRect();e.position="fixed",e.left=r.left-r.width/2,e.top=r.top-r.height/2}return e},t.handleMouseEnter=function(){t.setState({isHovered:!0})},t.handleMouseLeave=function(){t.setState({isHovered:!1})},t}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.prototype.render=function(){var e=this.props,t=e.assetUri,r=e.className,o=this.state.isHovered;return d(s.Fragment,{},void 0,s.createElement("div",{ref:this.imagePlaceholderRef,className:(0,a.default)(i.default.placeholderImage,r),onMouseEnter:this.handleMouseEnter,style:{backgroundImage:"url("+t}}),o?n.createPortal(d("div",{className:(0,a.default)(i.default.image,this.props.className),style:this.getAssetStyle(),onMouseLeave:this.handleMouseLeave}),window.document.body):null)},o}(s.Component);t.default=f,f.displayName="ExpandOnHover"},2596:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,s=O(r(1)),a=A(r(15)),n=O(r(129)),i=O(r(1403)),l=A(r(178)),u=A(r(1415)),d=r(128),f=A(r(423)),c=A(r(1375)),p=A(r(1373)),h=A(r(421)),_=A(r(1374)),v=A(r(426)),m=A(r(2597)),g=r(4),y=r(21);function A(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function b(e,t,r,s){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,n=arguments.length-3;if(t||0===n||(t={children:void 0}),t&&a)for(var i in a)void 0===t[i]&&(t[i]=a[i]);else t||(t=a||{});if(1===n)t.children=s;else if(n>1){for(var l=new Array(n),u=0;u<n;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var P={preview_video:{label:y.Messages.PromotionalAssets.PREVIEW_VIDEO,description:y.Messages.PromotionalAssets.PREVIEW_VIDEO_DESCRIPTION,metadata:y.Messages.PromotionalAssets.PREVIEW_VIDEO_METADATA},thumbnail:{label:y.Messages.PromotionalAssets.THUMBNAIL,description:y.Messages.PromotionalAssets.THUMBNAIL_DESCRIPTION,metadata:y.Messages.PromotionalAssets.THUMBNAIL_METADATA},header_background:{label:y.Messages.PromotionalAssets.HEADER_BACKGROUND,description:y.Messages.PromotionalAssets.HEADER_BACKGROUND_DESCRIPTION,metadata:y.Messages.PromotionalAssets.HEADER_BACKGROUND_METADATA},header_logo_dark_theme:{label:y.Messages.PromotionalAssets.HEADER_LOGO_DARK_THEME,description:y.Messages.PromotionalAssets.HEADER_LOGO_DARK_THEME_DESCRIPTION,metadata:y.Messages.PromotionalAssets.HEADER_LOGO_DARK_THEME_METADATA},header_logo_light_theme:{label:y.Messages.PromotionalAssets.HEADER_LOGO_LIGHT_THEME,description:y.Messages.PromotionalAssets.HEADER_LOGO_LIGHT_THEME_DESCRIPTION,metadata:y.Messages.PromotionalAssets.HEADER_LOGO_LIGHT_THEME_METADATA},box_art:{label:y.Messages.PromotionalAssets.BOX_ART,description:y.Messages.PromotionalAssets.BOX_ART_DESCRIPTION,metadata:y.Messages.PromotionalAssets.BOX_ART_METADATA},hero_background:{label:y.Messages.PromotionalAssets.HERO_BACKGROUND,description:y.Messages.PromotionalAssets.HERO_BACKGROUND_DESCRIPTION,metadata:y.Messages.PromotionalAssets.HERO_BACKGROUND_METADATA},hero_video:{label:y.Messages.PromotionalAssets.HERO_VIDEO,description:y.Messages.PromotionalAssets.HERO_VIDEO_DESCRIPTION,metadata:y.Messages.PromotionalAssets.HERO_VIDEO_METADATA}},S=function(e){var t,r;function o(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).formRef=s.createRef(),t.state={hasUnsavedChanges:!1,isSubmitting:!1,isLoading:!0,resetNumber:0,hasSubmitted:!1,errorMessage:null},t.handleFormChange=function(){t.state.hasUnsavedChanges||t.setState({hasUnsavedChanges:!0})},t.handleFormSubmit=function(e){var r=t.props.storeListing,o={preview_video_asset_id:e.preview_video||null,thumbnail_asset_id:e.thumbnail||null,header_background_asset_id:e.header_background||null,header_logo_dark_theme_asset_id:e.header_logo_dark_theme||null,header_logo_light_theme_asset_id:e.header_logo_light_theme||null,box_art_asset_id:e.box_art||null,hero_background_asset_id:e.hero_background||null,hero_video_asset_id:e.hero_video||null};t.setState({isSubmitting:!0},function(){i.updateStoreListing(r.id,o).then(function(){t.setState({isSubmitting:!1,hasSubmitted:!0,hasUnsavedChanges:!1})}).catch(function(e){t.setState({isSubmitting:!1,errorMessage:(0,d.getMessageFromAPIError)(e,y.Messages.Errors.ERROR_SAVING_PROMOTIONAL_ASSETS.format())})})})},t.handleFormReset=function(){t.setState(function(e){return{resetNumber:e.resetNumber+1,hasUnsavedChanges:!1}})},t}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=o.prototype;return a.componentDidMount=function(){var e=this,t=this.props.match.params.id;n.fetchStoreAssets(t).then(function(){e.setState({isLoading:!1})}).catch(function(){e.setState({isLoading:!1,errorMessage:y.Messages.Errors.ERROR_LOADING_ASSETS})})},a.renderFormStatus=function(){return this.state.hasSubmitted?b(c.default,{type:c.default.Types.SUCCESS},void 0,y.Messages.Alerts.SUCCESS_CHANGES_SAVED):null},a.renderAssetSections=function(){var e=this,t=this.props,r=t.storeAssets,o=t.storeListing,s=this.state.isLoading;if(null==o||s)return null;var a=r.filter(function(e){return e.mime_type.startsWith("video")}),n=r.filter(function(e){return e.mime_type.startsWith("image")}),i=Object.keys(P);return i.sort().map(function(t,r){var s=o[t],l=null!=s?s.id:null,u=t.includes("video")?a:n,d=P[t];return b(m.default,{fieldName:t,fieldLabel:d.label,fieldDescription:d.description,fieldMetadata:d.metadata,isLastSection:r===i.length-1,options:u,defaultValue:l,onChange:e.handleFormChange},t)})},a.render=function(){var e=this.state,t=e.hasUnsavedChanges,r=e.isSubmitting,o=e.resetNumber;return s.createElement(f.default,{onSubmit:this.handleFormSubmit,ref:this.formRef},b(h.default,{},void 0,b(p.default,{},void 0,y.Messages.PromotionalAssets.HEADING),b(_.default,{isFlush:!0},void 0,y.Messages.PromotionalAssets.SUBHEADING.format({supportUrl:g.Links.STORE_ASSETS_SUPPORT})),this.renderFormStatus()),b(s.Fragment,{},o,this.renderAssetSections()),b(v.default,{isVisible:t,actionCopy:y.Messages.Actions.PUBLISH_CHANGES,onReset:this.handleFormReset,submitting:r}))},o}(s.Component);S.displayName="PromotionalAssets";var M=a.default.connectStores([l.default,u.default],function(e){var t=e.match.params,r=t.id,o=t.skuId;return{storeAssets:l.default.getStoreAssets(r),storeListing:u.default.getCurrentStoreListing(o)}})(S);t.default=M},2597:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}(r(1)),a=r(83),n=r(130),i=c(r(1474)),l=c(r(419)),u=c(r(421)),d=c(r(1381)),f=c(r(1356));function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,s){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,n=arguments.length-3;if(t||0===n||(t={children:void 0}),t&&a)for(var i in a)void 0===t[i]&&(t[i]=a[i]);else t||(t=a||{});if(1===n)t.children=s;else if(n>1){for(var l=new Array(n),u=0;u<n;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var h=function(e){var t,r;function o(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).state={value:t.props.defaultValue},t.handleSelectChange=function(e){var r=t.props.onChange,o=null!=e?e.value:null;t.setState({value:o},r)},t.getAssetUri=function(e){return(0,n.getStoreAssetImage)(t.props.match.params.id,e)||""},t}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.prototype.render=function(){var e=this.props,t=e.fieldLabel,r=e.fieldDescription,o=e.fieldMetadata,s=e.fieldName,a=e.isLastSection,n=e.options,c=this.state.value;return p(u.default,{className:f.default.assetFieldWrapper,isFlush:a},void 0,p(l.default,{},void 0,t,p("span",{className:f.default.assetMetadata},void 0," — ",o)),p(d.default,{},void 0,r),p(i.default,{className:f.default.assetSelect,assets:n,getAssetUri:this.getAssetUri,onChange:this.handleSelectChange,selectedAssetId:c,name:s,clearable:!0,restrictWidth:!0}))},o}(s.Component);h.displayName="PromotionalAssetSection";var _=(0,a.withRouter)(h);t.default=_}}]);
//# sourceMappingURL=2527a4177de824972958.js.map