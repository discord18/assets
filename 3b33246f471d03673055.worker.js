!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/assets/",r(r.s=16)}([function(t,e,r){var n=r(1).Symbol;t.exports=n},function(t,e,r){var n=r(12),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,r){"use strict";e.__esModule=!0,e.sortByMatchScore=function(t,e){if(t.score===e.score){var r=t.comparator.toLocaleLowerCase(),n=e.comparator.toLocaleLowerCase();if(r<n)return-1;if(r>n)return 1}return e.score-t.score}},function(t,e,r){"use strict";e.__esModule=!0,e.default={escape:function(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}},t.exports=e.default},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,r){var n=r(0),o=Object.prototype,i=o.hasOwnProperty,u=o.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,a),r=t[a];try{t[a]=void 0;var n=!0}catch(t){}var o=u.call(t);return n&&(e?t[a]=r:delete t[a]),o}},function(t,e,r){var n=r(0),o=r(7),i=r(6),u="[object Null]",a="[object Undefined]",c=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?a:u:c&&c in Object(t)?o(t):i(t)}},function(t,e,r){var n=r(8),o=r(5),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&n(t)==i}},function(t,e,r){var n=r(2),o=r(9),i=NaN,u=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,f=/^0o[0-7]+$/i,s=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return i;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var r=c.test(t);return r||f.test(t)?s(t.slice(2),r?2:8):a.test(t)?i:+t}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,r(11))},function(t,e,r){var n=r(1);t.exports=function(){return n.Date.now()}},function(t,e,r){var n=r(2),o=r(13),i=r(10),u="Expected a function",a=Math.max,c=Math.min;t.exports=function(t,e,r){var f,s,l,d,p,v,y=0,b=!1,h=!1,E=!0;if("function"!=typeof t)throw new TypeError(u);function g(e){var r=f,n=s;return f=s=void 0,y=e,d=t.apply(n,r)}function S(t){var r=t-v;return void 0===v||r>=e||r<0||h&&t-y>=l}function x(){var t=o();if(S(t))return m(t);p=setTimeout(x,function(t){var r=e-(t-v);return h?c(r,l-(t-y)):r}(t))}function m(t){return p=void 0,E&&f?g(t):(f=s=void 0,d)}function j(){var t=o(),r=S(t);if(f=arguments,s=this,v=t,r){if(void 0===p)return function(t){return y=t,p=setTimeout(x,e),b?g(t):d}(v);if(h)return p=setTimeout(x,e),g(v)}return void 0===p&&(p=setTimeout(x,e)),d}return e=i(e)||0,n(r)&&(b=!!r.leading,l=(h="maxWait"in r)?a(i(r.maxWait)||0,e):l,E="trailing"in r?!!r.trailing:E),j.cancel=function(){void 0!==p&&clearTimeout(p),y=0,f=v=s=p=void 0},j.flush=function(){return void 0===p?d:m(o())},j}},function(t,e,r){"use strict";t.exports=function(t,e){var r=e.length,n=t.length;if(n>r)return!1;if(n===r)return t===e;t:for(var o=0,i=0;o<n;o++){for(var u=t.charCodeAt(o);i<r;)if(e.charCodeAt(i++)===u)continue t;return!1}return!0}},function(t,e,r){"use strict";var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o=c(r(15)),i=c(r(14)),u=c(r(4)),a=r(3);function c(t){return t&&t.__esModule?t:{default:t}}var f={UPDATE_USERS:"UPDATE_USERS",USER_RESULTS:"USER_RESULTS",QUERY_SET:"QUERY_SET",QUERY_CLEAR:"QUERY_CLEAR"},s=new Map,l=new Map,d=new Set,p=10,v=5,y=1,b="isFriend",h="isBot",E="username";function g(t){var e=!1,r=new Set;t.forEach(function(t){var o=t.id,i=function(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}(t,["id"]),u=s.get(o)||{},a=n({},u,i);s.set(o,a),l.size>0&&(a.isFriend&&(e=!0),Object.keys(a).forEach(function(t){t!==h&&t!==b&&t!==E&&r.add(t)}))}),l.forEach(function(t,n){var o=t.filters;(null==o||o.friends===e||r.has(o.guild))&&d.add(n)}),d.size>0&&S()}var S=(0,i.default)(function(){d.forEach(function(t){var e=l.get(t);e&&m(t,e)}),d.clear()},100,{leading:!0,trailing:!0});function x(t,e){return t*(e||1)}function m(t,e){var r=e.query,n=e.limit,i=e.filters,c=e.blacklist,f=e.whitelist,l=e.boosters,d=new RegExp("^"+u.default.escape(r),"i"),E=new RegExp(u.default.escape(r),"i"),g=[];if(""===r)return j(r,g,t);var S=r.toLocaleLowerCase();s.forEach(function(t,e){if(function(t,e,r,n,o){if(null!=n&&n.indexOf(t)>=0)return!1;if(null!=o&&o.indexOf(t)>=0)return!0;if(null!=r){var i=r.friends,u=r.guild;return!0===i&&!0===e.isFriend||null!=e[u]||null===e[u]}return!0}(e,t,i,c,f)){var r=t.username,n=void 0;Object.keys(t).forEach(function(i){var u=t[i];if(i!==h&&i!==b&&u){var a=void 0;d.test(u)?a={comparator:u,score:x(p,l[e])}:E.test(u)?a={comparator:u,score:x(v,l[e])}:(0,o.default)(S,u.toLocaleLowerCase())&&(a={comparator:u,score:x(y,l[e])}),a&&((null==n||n.score<a.score)&&(n=a),n.id=e,n.username=r)}}),null!=n&&g.push(n)}}),g.sort(a.sortByMatchScore),g.length>n&&(g.length=n),j(r,g,t)}function j(t,e,r){postMessage({uuid:r,type:f.USER_RESULTS,payload:{query:t,results:e}})}addEventListener("message",function(t){var e=t.data;if(!e)throw new Error("Invalid data");var r=e.uuid,n=e.type,o=e.payload;switch(n){case f.UPDATE_USERS:return g(o);case f.QUERY_SET:return function(t,e){l.set(t,e),m(t,e)}(r,o);case f.QUERY_CLEAR:return function(t){l.delete(t),d.delete(t),0===d.size&&S.cancel()}(r)}})}]);
//# sourceMappingURL=3b33246f471d03673055.worker.js.map