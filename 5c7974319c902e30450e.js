(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{5572:function(t,e,o){"use strict";e.__esModule=!0;var n,r=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,a=arguments.length-3;if(e||0===a||(e={}),e&&i)for(var s in i)void 0===e[s]&&(e[s]=i[s]);else e||(e=i||{});if(1===a)e.children=r;else if(a>1){for(var p=Array(a),l=0;l<a;l++)p[l]=arguments[l+3];e.children=p}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}}),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}(o(1)),s=x(o(73)),p=x(o(521)),l=x(o(9)),f=x(o(189)),u=x(o(3)),c=x(o(975)),d=x(o(951)),h=x(o(949)),y=x(o(192)),m=o(143),g=o(0),v=x(o(555)),b=x(o(5571));function x(t){return t&&t.__esModule?t:{default:t}}function w(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=10,C=14,S={left:b.default.popoutLeft,right:b.default.popoutRight,bottom:b.default.popoutBottom,"bottom-right":b.default.popoutBottomRight,"bottom-left":b.default.popoutBottomLeft,"top-left":b.default.popoutTopLeft,"top-right":b.default.popoutTopRight,top:b.default.popoutTop};function W(t){switch(t){case"left":return{x:-1,y:0};case"right":return{x:0,y:0};case"bottom":return{x:-.5,y:0};case"bottom-right":return{x:-1,y:0};case"bottom-left":return{x:0,y:0};case"top-left":return{x:0,y:-1};case"top-right":return{x:-1,y:-1};case"top":default:return{x:-.5,y:-1}}}var H=function(){function t(){k(this,t),this.animated=new f.default.ValueXY({x:0,y:0})}return t.prototype.run=function(t,e,o){var n=e.position;this.animated.setValue(W(n)),o()},t.prototype.getStyle=function(){return f.default.accelerate({transform:[{translateX:this.animated.x.interpolate({inputRange:[-1.05,1.05],outputRange:["-105%","105%"]})},{translateY:this.animated.y.interpolate({inputRange:[-1.05,1.05],outputRange:["-105%","105%"]})}]})},t}(),Y=function(){function t(){k(this,t),this.animated=new f.default.ValueXY({x:0,y:0})}return t.prototype.computeStyles=function(t){var e=void 0,o=void 0;switch(t){case"left":e={x:-1.05,y:0},o={x:-1,y:0};break;case"right":e={x:.05,y:0},o={x:0,y:0};break;case"bottom":e={x:-.5,y:.05},o={x:-.5,y:0};break;case"bottom-left":e={x:0,y:.05},o={x:0,y:0};break;case"bottom-right":e={x:0,y:.05},o={x:-1,y:0};break;case"top-left":e={x:0,y:-1.05},o={x:0,y:-1};break;case"top-right":e={x:0,y:-1.05},o={x:-1,y:-1};break;case"top":default:e={x:-.5,y:-1.05},o={x:-.5,y:-1}}return{startStyle:e,endStyle:o}},t.prototype.run=function(t,e,o){var n=e.position,r=this.computeStyles(n),i=r.startStyle,a=r.endStyle,s=t.getBoundingClientRect(),p=s.left,l=s.right,u=s.width;p-=E,l+=E;var c=u*a.x;if(l+=c,(p+=c)<0){var d=p/u;a.x+=d,i.x+=d}else if(l>window.innerWidth){var h=(l-window.innerWidth)/u;a.x-=h,i.x-=h}this.animated.setValue(i),f.default.timing(this.animated,{toValue:a,duration:150,easing:f.default.Easing.inOut(f.default.Easing.cubic)}).start(o)},t.prototype.getStyle=function(){return f.default.accelerate({transform:[{translateX:this.animated.x.interpolate({inputRange:[-1.05,1.05],outputRange:["-105%","105%"]})},{translateY:this.animated.y.interpolate({inputRange:[-1.05,1.05],outputRange:["-105%","105%"]})}]})},t}(),X=function(){function t(){k(this,t),this.animated=new f.default.Value(0)}return t.prototype.run=function(t,e,o){this.animated.setValue(0),f.default.spring(this.animated,{toValue:1,tension:80,friction:8,overshootClamping:!0}).start(o)},t.prototype.interpolate=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return this.animated.interpolate({inputRange:[0,1],outputRange:e})},t.prototype.getStyle=function(t){var e=t.position,o=t.height,n=t.width,r=t.x,a=t.offsetX,s=t.clickPos,p=W(e),l=void 0;return o>0&&(l={height:this.interpolate(0,o),width:this.interpolate(0,n),left:this.interpolate(r+s,r+a)}),f.default.accelerate(i({},l,{overflow:"hidden",transform:[{translateY:100*p.y+"%"},{translateX:100*p.x+"%"}]}))},t}(),L=function(t){function e(o){k(this,e);var n=w(this,t.call(this,o));n.preventNextClose=!1,n.componentWillEnterCallback=function(){},n.close=function(t){if(n.preventNextClose&&c.default.isOpen())n.preventNextClose=!1;else{var e=n.props,o=e.popoutKey,r=e.preventCloseFromModal,i=e.onClose;if(!r||!h.default.hasModalOpen()){if(null!=t)for(var a=t.target,p=s.default.findDOMNode(n);a instanceof Element;){if(a===p)return;if(null!=a.classList&&a.classList.contains("popout-open"))return;a=a.parentNode}i&&i(),y.default.close(o)}}},n.closeContext=function(t){if(null!=t)for(var e=t.target;e instanceof HTMLElement;){if(e===s.default.findDOMNode(n))return void(n.preventNextClose=!0);e=e instanceof HTMLElement?e.parentNode:null}n.preventNextClose&&c.default.isOpen()?n.preventNextClose=!1:y.default.close(n.props.popoutKey)},n.updateOffsets=function(){var t=n.props,e=t.position,o=t.preventInvert,r=s.default.findDOMNode(n);if(!(r instanceof HTMLElement))throw new Error("domNode is not instance of HTMLElement");var i=r.offsetWidth,a=r.offsetHeight,p=!1;o||(p="top"===e||"top-right"===e||"top-left"===e?n.props.y<.5*window.innerHeight&&n.props.y-r.offsetHeight<0:n.props.y+n.props.targetHeight+C+a>=window.innerHeight)&&("bottom"===e?e="top":"bottom-left"===e?e="top-left":"bottom-right"===e?e="top-right":"top-right"===e?e="bottom-right":"top-left"===e?e="bottom-left":"top"===e&&(e="bottom"));var l={invert:p,position:e,height:a,width:i,offsetX:0,offsetY:0};switch(e){case"left":l.offsetX=0,l.offsetY=n.props.targetHeight/2;break;case"right":l.offsetX=n.props.targetWidth,l.offsetY=n.props.targetHeight/2;break;case"bottom":l.offsetX=n.props.targetWidth/2,l.offsetY=n.props.targetHeight;break;case"bottom-left":l.offsetX=0,l.offsetY=n.props.targetHeight;break;case"bottom-right":l.offsetX=n.props.targetWidth,l.offsetY=n.props.targetHeight;break;case"top-left":l.offsetX=0,l.offsetY=0;break;case"top-right":l.offsetX=n.props.targetWidth,l.offsetY=0;break;case"top":default:l.offsetX=n.props.targetWidth/2,l.offsetY=0}!p||"right"!==e&&"left"!==e||(n.props.closeOnScroll?l.offsetY-=a-n.props.targetHeight:l.offsetY-=n.props.y+a-window.innerHeight+E),n.setState(l,n._componentWillEnter)};var r=void 0;switch(n.props.animationType){case"default":r=new Y;break;case"spring":r=new X;break;case"none":default:r=new H}return n.state={width:0,height:0,offsetX:null,offsetY:null,animation:r,position:"",invert:!1},n}return O(e,t),e.prototype.componentDidMount=function(){m.ComponentDispatch.subscribe(g.ComponentActions.POPOUT_CLOSE,this.close),document.addEventListener("click",this.close,!0),document.addEventListener("contextmenu",this.closeContext,!0),this.updateOffsets()},e.prototype.componentWillEnter=function(t){this.componentWillEnterCallback=t},e.prototype._componentWillEnter=function(){if(this.componentWillEnterCallback){var t=this.componentWillEnterCallback;delete this.componentWillEnterCallback;var e=s.default.findDOMNode(this);if(!(e instanceof HTMLElement))throw new Error("node is not an instance of HTMLElement");this.state.animation.run(e,{position:this.state.position,x:this.props.x,y:this.props.y,width:this.state.width,height:this.state.height,targetWidth:this.props.targetWidth,targetHeight:this.props.targetHeight,offsetX:this.state.offsetX,offsetY:this.state.offsetY},t)}},e.prototype.componentWillLeave=function(t){t()},e.prototype.componentDidUpdate=function(t){var e=t.text,o=t.position,n=t.x,r=t.y,i=t.targetWidth,a=t.targetHeight,s=t.closeOnScroll;this.props.text===e&&this.props.position===o&&this.props.x===n&&this.props.y===r&&this.props.targetWidth===i&&this.props.targetHeight===a&&this.props.closeOnScroll===s||this.updateOffsets()},e.prototype.UNSAFE_componentWillUpdate=function(t){t.needsRerender&&y.default.didRerender(this.props.popoutKey)},e.prototype.componentWillUnmount=function(){m.ComponentDispatch.unsubscribe(g.ComponentActions.POPOUT_CLOSE,this.close),document.removeEventListener("click",this.close,!0),document.removeEventListener("contextmenu",this.closeContext,!0)},e.prototype.render=function(){var t,e=this.state,o=e.offsetX,n=e.offsetY,a=e.invert,s=e.position,p=e.animation,u=this.props,c=u.zIndexBoost,d=u.closeOnScroll,h=u.x,y=u.y,m=u.popoutKey,g=u.animationType,v=u.clickPos,x=u.render,w=u.containerClass,O=i({},{left:null===o?null:h+o,top:null==n?null:y+n,zIndex:null!=c?1001+c:null},p.getStyle({position:s,width:this.state.width,height:this.state.height,x:h,y:y,offsetX:o,offsetY:n,clickPos:v}));O.visibility||(O.visibility=null==O.transform?"hidden":"visible");var k=((t={})[b.default.popoutInvert]=a&&d,t[b.default.noArrow]=!d,t[b.default.noShadow]=!this.props.shadow||"none"===g,t);return w&&(k[w]=!0),r(f.default.div,{className:(0,l.default)(k,b.default.popout,S[s],"popout"+s),style:O},void 0,x({popoutKey:m,onClose:this.close,inverted:a}))},e}(a.PureComponent);L.defaultProps={animationType:"default",closeOnScroll:!0,preventInvert:!1,preventCloseFromModal:!1,shadow:!0,text:"",offsetX:0,offsetY:0};var M=function(t){function e(){return k(this,e),w(this,t.apply(this,arguments))}return O(e,t),e.prototype.render=function(){var t=this.props,e=t.theme,o=t.className,n=t.popouts,s=n.some(function(t){return t.backdrop}),f=(n.find(function(t){return null!=t.zIndexBoost&&t.zIndexBoost>0})||{}).zIndexBoost,u=s?r(v.default,{backdropStyle:v.default.Styles.SUBTLE,zIndexBoost:null!=f?f:0}):null;return r(p.default,{className:(0,l.default)("theme-"+e,b.default.popouts,o),component:"div"},void 0,u,n.map(function(t){var e=t.key,o=function(t,e){var o={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o}(t,["key"]);return a.createElement(L,i({popoutKey:String(e)},o,{key:e+"-popout"}))}))},e}(a.PureComponent);e.default=u.default.connectStores([d.default],function(){return{popouts:d.default.getPopouts()}})(M),t.exports=e.default}}]);
//# sourceMappingURL=5c7974319c902e30450e.js.map