(window.webpackJsonp=window.webpackJsonp||[]).push([[1,146,159],{5556:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=f(n(3)),a=f(n(8)),i=f(n(2)),l=n(0),s=f(n(18)),u=f(n(12)),c=f(n(167));function f(e){return e&&e.__esModule?e:{default:e}}var d={},p=[];function h(){var e=(0,a.default)(d).toPairs().sortBy(function(e){e[0];return-e[1]}).map(function(e){return e[0]}).value(),t=!a.default.isEqual(p,e);return t&&(p=e),t}function y(e){return e.type===l.ChannelTypes.DM||e.type===l.ChannelTypes.GROUP_DM}function m(e){return null!=(e=null!=e?s.default.getChannel(e.id):null)&&e.isManaged()}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.initialize=function(){this.waitFor(s.default,u.default)},t.prototype.getPrivateChannelIds=function(){return p},t.prototype.getPrivateChannelTimestamps=function(){return d},t}(o.default.Store);t.default=new v(i.default,{CONNECTION_OPEN:function(e){var t=e.channels;d={},t.forEach(function(e){y(e)&&!m(e)&&(d[e.id]=c.default.extractTimestamp(e.last_message_id||e.id))}),h()},OVERLAY_INITIALIZE:function(e){var t=e.sortedPrivateChannels;d=r({},t),h()},CHANNEL_CREATE:function(e){var t=e.channel;return!(!y(t)||m(t))&&(d[t.id]=c.default.extractTimestamp(t.last_message_id||t.id),h())},CHANNEL_DELETE:function(e){var t=e.channel;return null!=d[t.id]&&(delete d[t.id],h())},MESSAGE_CREATE:function(e){var t=e.channelId,n=e.message;return null!=d[t]&&(d[t]=c.default.extractTimestamp(n.id),h())},GUILD_CREATE:function(e){var t=e.guild.id;return null!=d[t]&&(delete d[t],h())}}),e.exports=t.default},5990:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=d(n(9)),l=n(99),s=d(n(524)),u=d(n(945)),c=n(0),f=d(n(5933));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m={SMALL:"7px 10px",MEDIUM:"10px"},v=function(e){function t(){var n,r;p(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=h(this,e.call.apply(e,[this].concat(a))),r.handleClick=function(){var e=r.props,t=e.onClick,n=e.option;return t&&t(n)},h(r,n)}return y(t,e),t.prototype.render=function(){var e,t=this.props,n=t.checked,r=t.disabled,a=t.option,d=t.size,p=n?"checked":null,h=a.desc?o("div",{className:(0,l.getClass)(f.default,"desc",p)},void 0,a.desc):null,y=n?a.color||c.Colors.BRAND:"",m=n?c.Colors.WHITE:a.color,v=r||a.disabled;return o(s.default,{className:(0,i.default)(f.default.item,(e={},e[f.default.disabled]=v,e)),style:{borderColor:y,backgroundColor:y,padding:d},editable:!0,onClick:!v&&this.handleClick},void 0,o(u.default,{value:n,disabled:v,onChange:this.handleClick,color:y}),o("div",{className:f.default.info},void 0,o("div",{className:(0,l.getClass)(f.default,"title",p),style:{color:m}},void 0,a.name),h))},t}(a.PureComponent),g=function(e){function t(){var n,r;p(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=h(this,e.call.apply(e,[this].concat(i))),r.renderRadio=function(e){var t=r.props,n=t.value,a=t.disabled,i=t.size,l=n===e.value;return o(v,{disabled:a,checked:l,option:e,onClick:r.props.onChange,size:i},e.value)},h(r,n)}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.options,n=e.className;return o("div",{className:(0,i.default)(f.default.radioGroup,n)},void 0,t.map(this.renderRadio))},t}(a.PureComponent);g.Sizes=m,g.defaultProps={options:[],onChange:c.NOOP,value:null,disabled:!1,size:m.MEDIUM},t.default=g,e.exports=t.default},5992:function(e,t,n){"use strict";t.__esModule=!0;var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),s=v(n(9)),u=n(264),c=n(99),f=v(n(142)),d=v(n(79)),p=v(n(87)),h=v(n(6)),y=n(0),m=v(n(5564));function v(e){return e&&e.__esModule?e:{default:e}}var g={MINI:"Mini",SMALL:"Small",MEDIUM:"Medium",LARGE:"Large",XLARGE:"XLarge"},_=((o={})[g.MINI]=[12,12,10,10,8,6,4],o[g.SMALL]=[14,14,12,12,10,8,6],o[g.MEDIUM]=[16,16,14,14,12,10,8],o[g.LARGE]=[18,18,16,16,14,12,10],o[g.XLARGE]=[20,20,18,18,16,14,12],o),E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.renderAcronym=function(){var e=this.props.guild;return null!=e.icon?null:e.acronym},t.prototype.renderVerifiedIcon=function(){var e=this.props,t=e.showVerified,n=e.guild,r=e.verifiedIconOuterColor;return!t||!n.hasFeature||n.hasFeature&&!n.hasFeature(y.GuildFeatures.VERIFIED)?null:i(f.default,{color:f.default.Colors.BRAND,text:h.default.Messages.GUILD_VERIFIED},void 0,i(d.default,{className:m.default.verifiedIcon,name:d.default.Names.VERIFIED,outer:r,inner:y.Colors.BRAND,checkmark:y.Colors.WHITE}))},t.prototype.renderIcon=function(){var e,t=this.props,n=t.guild,r=t.iconSrc,o=t.className,i=(t.showVerified,t.active),u=t.size,f=t.style,d=t.textScale,h=(t.showTooltip,t.tooltipPosition,t.onClick),y=t.to,v=(t.verifiedIconOuterColor,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["guild","iconSrc","className","showVerified","active","size","style","textScale","showTooltip","tooltipPosition","onClick","to","verifiedIconOuterColor"])),g=_[u],E=null==n.icon?{fontSize:(g[n.acronym.length]||g[g.length-1])*d}:{backgroundImage:"url('"+(r||n.getIconURL&&n.getIconURL()||"")+"')"};return l.createElement(p.default,a({className:(0,s.default)(m.default.icon,o,(0,c.getClass)(m.default,"iconSize",u),(e={},e[(0,c.getClass)(m.default,"iconActive",u)]=i,e[m.default.iconInactive]=!i,e[m.default.noIcon]=null==n.icon,e)),style:a({},E,f),onClick:null!=y||null==h?null:h},v),this.renderAcronym(),this.renderVerifiedIcon())},t.prototype.renderTooltip=function(){var e=this.props,t=e.guild,n=e.showTooltip,r=e.tooltipPosition;return n?i(f.default,{text:t.name,position:r},void 0,this.renderIcon()):this.renderIcon()},t.prototype.render=function(){var e=this.props,t=e.to,n=e.guild;return null!=t?i(u.Link,{to:t,"aria-label":n.toString()},void 0,this.renderTooltip()):this.renderTooltip()},t}(l.PureComponent);E.Sizes=g,E.defaultProps={size:g.LARGE,textScale:1,showVerified:!1,showTooltip:!1,active:!1,tooltipPosition:f.default.Positions.TOP,verifiedIconOuterColor:y.Colors.WHITE},t.default=E,e.exports=t.default},5999:function(e,t,n){"use strict";t.__esModule=!0;var r=u(n(6227)),o=u(n(6470)),a=u(n(6038)),i=u(n(11)),l=u(n(45)),s=n(6225);function u(e){return e&&e.__esModule?e:{default:e}}var c=void 0,f=!1,d=(0,o.default)(new r.default(window)),p=/Darwin|OS X/.test(l.default.os.family||""),h=p?"cmd":"ctrl",y=p?"opt":"alt",m=p?"return":"enter",v=[].concat(s.JUMP_TO_GUILD.binds,["mod+shift+[","mod+shift+]","ctrl+shift+tab","ctrl+tab","mod+n","mod+t","mod+shift+t","mod+plus","mod+minus","mod+0"]).map(function(e){return e.replace("mod",h)}),g=[];i.default.isDesktop()&&new r.default(document).bind("backspace",function(e){return e.preventDefault()});function _(e){var t=[];for(var n in e)t=t.concat(e[n].binds);return t.map(function(e){return e.replace("mod",h)})}function E(e){var t=function(t){var n=e[t],r=a.default.getKeybindList();i.default.embedded||(r=r.concat(v));var o=n.binds.filter(function(e){return e=e.replace("mod",h),r.indexOf(e)<0});if(0===o.length)return"continue";var l,s,u,c=n.global?d.bindGlobal:d.bind;if(n.action&&c.call(d,o,n.action),n.keyup&&c.call(d,o,n.keyup,"keyup"),n.keydown){var f=o.indexOf("any-character");-1!==f&&(l="keydown",s=n.keydown,u=function(e){return s(e,e.key)},document.addEventListener(l,u),g.push(function(){return document.removeEventListener(l,u)}),o.splice(f,1)),o.length>0&&c.call(d,o,n.keydown,"keydown")}n.keypress&&c.call(d,o,n.keypress,"keypress")};for(var n in e)t(n)}t.default={combokeys:d,modKey:h,altKey:y,returnKey:m,checkDupes:function(e){for(var t={},n=[],r=_(e),o=0,a=r.length;o<a;o++)void 0===t[r[o]]?t[r[o]]=0:t[r[o]]+=1;for(var i in t)t[i]&&n.push(i);n.length&&console.warn("Duplicate keyboard shortcuts defined:",n)},setLayout:function(e){c=e},enable:function(){f||(f=!0,this.checkDupes(c),E(c))},enableTemp:function(e){E(e),f=!0},disableTemp:function(){this.disable(),this.enable()},disable:function(){f&&(f=!1,g.forEach(function(e){return e()}),g=[],d.reset())},validateKeybind:function(e){f&&this.hasBind(e)&&d.unbind(e)},hasBind:function(e){var t=_(c);return e=(e=e.replace("meta","cmd")).replace(/right|left/i,"").trim(),!(t.indexOf(e)<0)}},e.exports=t.default},6010:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=u(n(3)),a=u(n(2)),i=u(n(6233)),l=n(0),s=n(277);function u(e){return e&&e.__esModule?e:{default:e}}var c={},f=new Set;function d(e,t){var n=r({code:e,state:l.InviteStates.RESOLVING},c[e]);t(n),c[e]=r({},n)}function p(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&!f.has(e.channel_id))return!1;var t=(0,s.findInvites)(e.content);if(null==t||0===t.length)return!1;t.forEach(function(e){null==c[e]&&(h({code:e}),(0,s.resolveInvite)(e).then(function(e){var t=e.invite,n=e.code;null!=t?a.default.dispatch({type:l.ActionTypes.INVITE_RESOLVE_SUCCESS,invite:t,code:n}):a.default.dispatch({type:l.ActionTypes.INVITE_RESOLVE_FAILURE,code:n})}))})}function h(e){c[e.code]={code:e.code,state:l.InviteStates.RESOLVING}}function y(e){return d(e.code,function(e){e.state=l.InviteStates.EXPIRED})}function m(e){return p(e.message,!0)}function v(e){var t=e.channelId,n=e.messages;f.add(t),n.forEach(function(e){return p(e,!0)})}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getInvite=function(e){return c[e]},t.prototype.getInvites=function(e){return null!=e?(0,i.default)(c).filter(function(t){return null!=t.guild&&t.guild.id===e}):(0,i.default)(c)},t}(o.default.Store);t.default=new g(a.default,{CONNECTION_OPEN:function(e){return f.clear(),!1},CHANNEL_SELECT:function(e){var t=e.channelId;return null!=t&&f.add(t),!1},INVITE_RESOLVE:h,INVITE_RESOLVE_SUCCESS:function(e){return d(e.code,function(t){t.state=l.InviteStates.RESOLVED,t.guild=e.invite.guild,t.channel=e.invite.channel,t.inviter=e.invite.inviter,t.approximate_member_count=null!=e.invite.approximate_member_count?e.invite.approximate_member_count:null,t.approximate_presence_count=null!=e.invite.approximate_presence_count?e.invite.approximate_presence_count:null})},INVITE_RESOLVE_FAILURE:y,INSTANT_INVITE_REVOKE_SUCCESS:y,INVITE_ACCEPT:function(e){return d(e.code,function(e){e.state=l.InviteStates.ACCEPTED})},INVITE_ACCEPT_SUCCESS:function(e){return d(e.code,function(t){t.state=l.InviteStates.ACCEPTED,t.guild=e.invite.guild,t.channel=r({},t.channel,e.invite.channel)})},INVITE_ACCEPT_FAILURE:function(e){return d(e.code,function(e){e.state=l.InviteStates.EXPIRED})},INVITE_APP_OPENING:function(e){return d(e.code,function(e){e.state=l.InviteStates.APP_OPENING})},INVITE_APP_OPENED:function(e){return d(e.code,function(e){e.state=l.InviteStates.APP_OPENED})},INVITE_NATIVE_APP_MODAL_OPENING:function(e){return d(e.code,function(e){e.nativeAppState=l.InviteNativeAppStates.OPENING})},INVITE_NATIVE_APP_MODAL_OPENED:function(e){return d(e.code,function(e){e.nativeAppState=l.InviteNativeAppStates.OPEN})},INVITE_NATIVE_APP_MODAL_OPEN_FAILED:function(e){return d(e.code,function(e){e.nativeAppState=l.InviteNativeAppStates.OPEN_FAIL})},INVITE_APP_NOT_OPENED:function(e){return d(e.code,function(e){e.state=l.InviteStates.APP_NOT_OPENED})},MESSAGE_CREATE:m,MESSAGE_UPDATE:m,LOAD_MESSAGES_SUCCESS:v,LOAD_MESSAGES_AROUND_SUCCESS:v,LOAD_RECENT_MENTIONS_SUCCESS:function(e){e.messages.forEach(function(e){return p(e)})},LOAD_PINNED_MESSAGES_SUCCESS:function(e){e.messages.forEach(function(e){return p(e)})},SEARCH_FINISH:function(e){e.messages.forEach(function(e){e.forEach(function(e){return p(e)})})}}),e.exports=t.default},6011:function(e,t,n){"use strict";t.__esModule=!0,t.makeFile=function(e,t,n){if(null==t&&(t="unknown",e instanceof Blob))switch(e.type){case"image/png":t+=".png"}null==n&&(e instanceof Blob&&(n=e.type),n=n||o.default.lookup(t));if("function"!=typeof File){var r=new Date,a=0;return null!=e.size&&"number"==typeof e.size?a=e.size:null!=e.byteLength&&"number"==typeof e.byteLength&&(a=e.byteLength),{lastModified:r.getTime(),lastModifiedDate:r,name:t,size:a,type:n}}return new File([e],t,{type:n})},t.classifyFile=function(e){return f(e.name,e.type)},t.classifyFileName=f,t.sizeString=function(e){return a.default.filesize(e)},t.maxFileSize=d,t.fileTooLarge=p,t.anyFileTooLarge=function(e){var t=d();return r.default.some(e,function(e){return p(e,t)})};var r=u(n(8)),o=u(n(7869)),a=u(n(6268)),i=n(0),l=u(n(12)),s=u(n(536));function u(e){return e&&e.__esModule?e:{default:e}}var c=[{reType:/^image\/vnd.adobe.photoshop/,klass:"photoshop"},{reType:/^image\//,klass:"image"},{reType:/^video\//,klass:"video"},{reName:/\.pdf$/,klass:"acrobat"},{reName:/\.ae/,klass:"ae"},{reName:/\.sketch$/,klass:"sketch"},{reName:/\.ai$/,klass:"ai"},{reName:/\.(?:rar|zip|7z|tar|tar\.gz)$/,klass:"archive"},{reName:/\.(?:c\+\+|cpp|cc|c|h|hpp|mm|m|json|js|rb|rake|py|asm|fs|pyc|dtd|cgi|bat|rss|java|graphml|idb|lua|o|gml|prl|sls|conf|cmake|make|sln|vbe|cxx|wbf|vbs|r|wml|php|bash|applescript|fcgi|yaml|ex|exs|sh|ml|actionscript)$/,klass:"code"},{reName:/\.(?:txt|rtf|doc|docx|md|pages|ppt|pptx|pptm|key|log)$/,klass:"document"},{reName:/\.(?:xls|xlsx|numbers|csv)$/,klass:"spreadsheet"},{reName:/\.(?:html|xhtml|htm|js|xml|xls|xsd|css|styl)$/,klass:"webcode"},{reName:/\.(?:mp3|ogg|wav|flac)$/,klass:"audio"}];function f(e,t){e=e?e.toLowerCase():"";var n=r.default.find(c,function(n){return n.reType&&t?n.reType.test(t):!(!n.reName||!e)&&n.reName.test(e)});return n?n.klass:"unknown"}function d(){var e=l.default.getCurrentUser();return e&&s.default.canUploadLargeFiles(e)?i.MAX_PREMIUM_ATTACHMENT_SIZE:i.MAX_ATTACHMENT_SIZE}function p(e,t){return null==t&&(t=d()),e.size>t}},6019:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),c(n(9))),i=c(n(163)),l=n(533),s=c(n(5885)),u=n(532);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=e.icon,n=e.timestamp,r=e.className,i=e.children;return o(u.BackgroundOpacityContext.Consumer,{},void 0,function(e){return o("div",{className:(0,a.default)(s.default.container,r)},void 0,o("div",{className:s.default.icon,style:{backgroundImage:"url('"+t+"')"}}),o("div",{className:(0,a.default)(s.default.content,s.default[e.backgroundOpacity+"BackgroundOpacity"])},void 0,i,o("time",{dateTime:n.toISOString(),className:(0,a.default)(s.default.timestamp,s.default[e.backgroundOpacity+"BackgroundOpacity"])},void 0,(0,l.calendarFormat)(n))))})}f.Action=function(e){var t=e.onClick,n=e.children;return o("span",{className:s.default.action},void 0,"—",o(i.default,{onClick:t,className:s.default.actionAnchor},void 0,n))},t.default=f,e.exports=t.default},6023:function(e,t,n){"use strict";t.__esModule=!0,t.SearchBarIcon=void 0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=h(n(55)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=h(n(43)),s=h(n(9)),u=h(n(6)),c=h(n(163)),f=h(n(87));n(5593);var d=n(0),p=h(n(971));function h(e){return e&&e.__esModule?e:{default:e}}var y=t.SearchBarIcon=function(e){var t=e.hasContent,n=e.handleClear;return o(f.default,{className:"search-bar-icon",onClick:n},void 0,o("i",{className:(0,s.default)("icon icon-search-bar-eye-glass",{visible:!t})}),o("i",{className:(0,s.default)("icon icon-search-bar-clear",{visible:t})}))},m=o("div",{className:"close"}),v=(0,l.default)({displayName:"SearchBar",mixins:[p.default],propTypes:{query:a.default.string,gridResults:a.default.bool,tags:a.default.array,placeholder:a.default.string,selectedSection:a.default.number,selectedRow:a.default.number,sections:a.default.array,onSelectionChange:a.default.func,onSelect:a.default.func,onQueryChange:a.default.func,onFocus:a.default.func,onClear:a.default.func,onRemoveTag:a.default.func,light:a.default.bool,disabled:a.default.bool,autoFocus:a.default.bool,subscribeToFocusEvent:a.default.string},getDefaultProps:function(){return{query:"",sections:[],selectedSection:0,selectedRow:-1,selectedColumn:-1,tags:null,gridResults:!1,placeholder:u.default.Messages.DM_SEARCH_PLACEHOLDER,light:!1,disabled:!1,autoFocus:!1}},getSubscriptions:function(){var e,t=this;return this.props.subscribeToFocusEvent?((e={})[this.props.subscribeToFocusEvent]=function(){return t.focus()},e):null},handleKeyDownGrid:function(e){var t=this.props,n=t.selectedRow,r=t.selectedColumn,o=t.sections,a=t.query,i=t.tags;if(0!==o.length){switch(e.keyCode){case d.KeyboardKeys.BACKSPACE:(null==a||0===a.length)&&null!=i&&i.length>0&&(e.preventDefault(),e.stopPropagation(),this.props.onRemoveTag&&this.props.onRemoveTag(i.length-1));break;case d.KeyboardKeys.TAB:if(d.EnableAccessibility)break;case d.KeyboardKeys.ARROW_DOWN:e.preventDefault(),e.stopPropagation(),-1===n?(n=0,r=0):((n+=1)>=o.length&&(n=o.length-1),r>=o[n]&&(r=o[n]-1));break;case d.KeyboardKeys.ARROW_UP:e.preventDefault(),e.stopPropagation(),(n-=1)<0?(n=0,r=0):r>=o[n]&&(r=o[n]-1);break;case d.KeyboardKeys.ARROW_LEFT:e.preventDefault(),e.stopPropagation(),-1===n&&(n=0),(r-=1)<0&&((n-=1)>=0?r=o[n]-1:n<0&&(n=0,r=0));break;case d.KeyboardKeys.ARROW_RIGHT:e.preventDefault(),e.stopPropagation(),-1===n&&(n=0),(r+=1)>=o[n]&&(r=0,(n+=1)>=o.length&&(r=o[n=o.length-1]-1));break;case d.KeyboardKeys.ENTER:if(e.preventDefault(),e.stopPropagation(),-1===n&&(n=0),-1===r&&(r=0),n>=o.length||r>=o[n].items)return;return void this.props.onSelect(n,r,e);case d.KeyboardKeys.ESCAPE:return e.preventDefault(),e.stopPropagation(),void this.props.onSelect(null,null);default:return}this.props.onSelectionChange(n,r)}},handleKeyDownList:function(e){var t=this.props,n=t.sections,r=t.selectedSection,o=t.selectedRow,a=t.onSelect,i=t.onSelectionChange,l=t.query,s=t.tags;switch(e.keyCode){case d.KeyboardKeys.BACKSPACE:(null==l||0===l.length)&&null!=s&&s.length>0&&(e.preventDefault(),e.stopPropagation(),this.props.onRemoveTag&&this.props.onRemoveTag(s.length-1));break;case d.KeyboardKeys.TAB:if(d.EnableAccessibility)break;case d.KeyboardKeys.ARROW_DOWN:e.preventDefault(),e.stopPropagation(),n.length>r&&++o>=n[r]&&(++r>=n.length&&(r=0),o=0),i&&i(r,o);break;case d.KeyboardKeys.ARROW_UP:e.preventDefault(),e.stopPropagation(),--o<0&&(--r<0&&(r=n.length-1),o=n[r]-1),i&&i(r,o);break;case d.KeyboardKeys.ENTER:e.preventDefault(),e.stopPropagation(),n.length>r&&n[r]>o&&a&&a(r,o);break;case d.KeyboardKeys.ESCAPE:e.preventDefault(),e.stopPropagation(),a&&a(null,null),this.refs.search&&this.refs.search.blur()}},handleKeyDown:function(e){if(e.keyCode===d.KeyboardKeys.ESCAPE&&this.refs.search.value&&this.refs.search.value.length>0)return this.refs.search.value="",void this.props.onQueryChange("");this.props.gridResults?this.handleKeyDownGrid(e):this.handleKeyDownList(e)},handleChange:function(e){var t=e.currentTarget.value;this.props.onQueryChange(t)},handleFocus:function(e){var t=this.props.onFocus;t&&t(e)},handleClear:function(){this.props.onClear()},handleRemoveTag:function(e){this.props.onRemoveTag&&this.props.onRemoveTag(e)},focus:function(){this.refs.search.focus()},render:function(){var e=this,t=this.props,n=t.autoFocus,r=t.query,a=t.placeholder,l=t.light,u=t.disabled,f=t.onClear,d=t.tags,p=null!=r&&r.length>0,h=[];return null!=d&&d.forEach(function(t,n){return h.push(o(c.default,{className:"search-bar-tag",onClick:e.handleRemoveTag.bind(e,n)},n,t,m))}),o("div",{className:(0,s.default)("search-bar",{"search-bar-light":l,disabled:u})},void 0,o("div",{className:"search-bar-inner"},void 0,h,i.createElement("input",{type:"text",ref:"search",spellCheck:"false",placeholder:a,value:r,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,disabled:u,autoFocus:n}),f?o(y,{hasContent:p,handleClear:this.handleClear}):null))}});t.default=v},6025:function(e,t,n){"use strict";t.__esModule=!0;var r,o,a,i,l=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.getIconNameForChannel=v;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),u=y(n(40)),c=y(n(79)),f=y(n(87)),d=n(99),p=n(0),h=y(n(5935));function y(e){return e&&e.__esModule?e:{default:e}}function m(e){e.stopPropagation()}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e)return null;return e.type===p.ChannelTypes.GUILD_TEXT&&null!=e.isNSFW&&e.isNSFW()?c.default.Names.CHANNEL_TEXT_NSFW:t?c.default.Names.LOCK_CLOSED:!0===e.isRoleRequired||"function"==typeof e.isRoleRequired&&e.isRoleRequired()?n?c.default.Names.VIDEO_CAMERA_LIMITED:g[e.type]:n?c.default.Names.VIDEO_CAMERA:_[e.type]}var g=((o={})[p.ChannelTypes.GUILD_TEXT]=c.default.Names.CHANNEL_TEXT_LIMITED,o[p.ChannelTypes.GUILD_VOICE]=c.default.Names.SPEAKER_LIMITED,o),_=((a={})[p.ChannelTypes.GUILD_TEXT]=c.default.Names.CHANNEL_TEXT,a[p.ChannelTypes.GUILD_VOICE]=c.default.Names.SPEAKER,a),E=((i={})[p.ChannelTypes.GUILD_TEXT]="Text",i[p.ChannelTypes.GUILD_VOICE]="Voice",i),b="Selected",S="Connected",C="Hovered",A="Unread",T="Muted",I="Locked",O="Default",M=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.handleClick=r.handleClick.bind(r),r.handleMouseDown=r.handleMouseDown.bind(r),r.handleMouseUp=r.handleMouseUp.bind(r),r.handleContextMenu=r.handleContextMenu.bind(r),r.handleMouseEnter=r.handleMouseEnter.bind(r),r.handleMouseLeave=r.handleMouseLeave.bind(r),r.state={hovered:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getMode=function(){var e=this.props,t=e.muted,n=e.selected,r=e.connected,o=e.unread,a=e.locked,i=this.state.hovered;return n?b:r?S:a?I:i?C:t?T:o?A:O},t.prototype.handleClick=function(e){var t=this.props,n=t.onClick,r=t.channel;n&&n(e,r)},t.prototype.handleMouseEnter=function(e){var t=this.props,n=t.onMouseEnter,r=t.channel;this.setState({hovered:!0}),n&&n(e,r)},t.prototype.handleMouseLeave=function(e){var t=this.props,n=t.onMouseLeave,r=t.channel;this.setState({hovered:!1}),n&&n(e,r)},t.prototype.handleMouseDown=function(e){var t=this.props,n=t.onMouseDown,r=t.channel;n&&n(e,r)},t.prototype.handleMouseUp=function(e){var t=this.props,n=t.onMouseUp,r=t.channel;n&&n(e,r)},t.prototype.handleContextMenu=function(e){var t=this.props,n=t.onContextMenu,r=t.channel;n&&n(e,r)},t.prototype.renderUnread=function(){var e=this.props,t=e.unread,n=e.muted,r=e.selected;return n||!t||r?null:l("div",{className:h.default.unread})},t.prototype.renderTypeIcon=function(){var e=this.props,t=e.channel,n=v(t,e.locked,e.video),r=this.getMode();return l(u.default.Child,{wrap:!0,grow:0,shrink:0,className:h.default.marginReset},void 0,null!=n?l(c.default,{name:n,className:(0,d.getClass)(h.default,"color",r,E[t.type]),foreground:h.default.foreground,background:h.default.background,width:16,height:16}):null)},t.prototype.renderName=function(){var e=this.props,t=e.channel,n=t.name,r=t.type,o=e.unread,a=this.getMode();return a===C&&o&&(a=A),l(u.default.Child,{className:(0,d.getClass)(h.default,"name",a,E[r])},void 0,n)},t.prototype.renderIcons=function(){var e=this.props.children;return 0===s.Children.count(e)?null:l(u.default,{grow:0,onClick:m,align:u.default.Align.CENTER,className:h.default.marginReset},void 0,e)},t.prototype.render=function(){var e=this.props,t=e.onClick,n=e.onMouseDown,r=e.onMouseUp,o=e.onContextMenu,a=e.connectDragPreview,i=e.channel.type,s=this.getMode(),u=l("div",{className:(0,d.getClass)(h.default,"content",s,E[i])},void 0,this.renderTypeIcon(),this.renderName(),this.renderIcons());return l(f.default,{className:(0,d.getClass)(h.default,"wrapper",s,E[i]),onClick:t&&this.handleClick,onMouseUp:r&&this.handleMouseUp,onMouseDown:n&&this.handleMouseDown,onContextMenu:o&&this.handleContextMenu,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,this.renderUnread(),a?a(u):u)},t}(s.PureComponent);t.default=M},6031:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=s(n(9)),l=s(n(5784));function s(e){return e&&e.__esModule?e:{default:e}}var u=Object.freeze({UNKNOWN:"unknown",VISA:"visa",DISCOVER:"discover",MASTERCARD:"mastercard",AMEX:"amex",PAYPAL:"paypal"}),c={SMALL:l.default.cardIconSmall,MEDIUM:l.default.cardIconMedium,LARGE:l.default.cardIconLarge,XLARGE:l.default.cardIconXLarge},f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.getType=function(e){if(null==e)return u.UNKNOWN;var t=e.replace(/[^a-z]/gi,"").toUpperCase();return u[t]||u.UNKNOWN},t.prototype.render=function(){var e,t=this.props,n=t.flipped,r=t.type,a=t.className,s=t.size;return o("div",{className:(0,i.default)(s,l.default[r],a,(e={},e[l.default.flipped]=n,e))},void 0,r)},t}(a.PureComponent);f.Types=u,f.Sizes=c,f.defaultProps={size:c.SMALL,flipped:!1},t.default=f,e.exports=t.default},6038:function(e,t,n){"use strict";(function(r){t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=S(n(3)),i=S(n(8)),l=S(n(2)),s=S(n(11)),u=n(0),c=S(n(58)),f=S(n(144)),d=S(n(546)),p=S(n(268)),h=S(n(364)),y=S(n(367)),m=S(n(6101)),v=S(n(6227)),g=S(n(6470)),_=S(n(5999)),E=n(375),b=S(n(20));function S(e){return e&&e.__esModule?e:{default:e}}var C={},A={},T=0,I=!0,O={},M=[u.KeybindCustomActions.PUSH_TO_TALK,u.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK,u.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET];function N(e){if(s.default.embedded)s.default.inputEventUnregister(parseInt(e,10));else if(C[e]){var t=A[e],n=O[t.action];n&&!0===n.isPressed&&r.nextTick(function(){return n.onTrigger(!1)}),C[e].reset(),C[e]=null}}function P(e){if(I&&!__OVERLAY__){var t=e.shortcut,n=e.action;if(""!==t&&null!=t&&n!==u.KeybindCustomActions.UNASSIGNED)if(null!=O[n]){var r=e.id,a=O[n].keyEvents;!function(e,t,n,r){if(s.default.embedded)s.default.inputEventRegister(parseInt(e),t,n,r);else{N(e);var o=(0,g.default)(new v.default(document));r.keyup&&o.bindGlobal((0,E.toString)(t),function(){return n(!1)},"keyup"),r.keydown&&o.bindGlobal((0,E.toString)(t),function(){return n(!0)},"keydown"),C[e]=o}}(r,t,function(e){return function(e,t){var n=A[e];null!=n&&O[n.action].onTrigger(t)}(r,e)},o({focused:!0,blurred:!0,keydown:!1,keyup:!1},a)),_.default.validateKeybind((0,E.toString)(e.shortcut))}else console.error("KeybindStore: Looking for callback action "+n+" but it doesn't exist in this version. Skipping")}}function R(e){var t,n=o({id:T.toString(),action:u.KeybindCustomActions.UNASSIGNED,shortcut:[],managed:!1},e);return A=o({},A,((t={})[n.id]=n,t)),T+=1,n}function w(e){var t,n=e.keybind;A=o({},A,((t={})[n.id]=n,t)),__OVERLAY__||(b.default.track(u.AnalyticEvents.USER_SETTINGS_KEYBIND_UPDATED,{keybind_action:n.action,keybind_is_bound:!0,keybind_has_shortcut:!!n.shortcut.length}),n.action===u.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK?b.default.track(u.AnalyticEvents.OVERLAY_SETTINGS_UPDATED,{hotkey:n.action===u.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK?(0,E.toString)(n.shortcut):null}):n.action===u.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET&&b.default.track(u.AnalyticEvents.OVERLAY_SETTINGS_UPDATED,{text_activation_hotkey:n.action===u.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET?(0,E.toString)(n.shortcut):null})),P(n)}function L(){return!1!==(function(){var e=c.default.getModeOptions().shortcut,t=i.default.find(A,function(e){return e.action===u.KeybindCustomActions.PUSH_TO_TALK&&!0===e.managed});if(null==t)P(R({action:u.KeybindCustomActions.PUSH_TO_TALK,shortcut:e,managed:!0}));else{if(null==e)return!1;w({keybind:o({},t,{shortcut:"string"==typeof e?(0,E.toCombo)(e):e})})}}()||function(){if(d.default.enabled){if(null!=i.default.find(A,function(e){return e.action===u.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK&&!0===e.managed}))return!1;var e=(0,E.toCombo)("shift+`");P(R({action:u.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK,shortcut:e,managed:!0}))}}()||!0)}O[u.KeybindCustomActions.UNASSIGNED]={onTrigger:function(){},keyEvents:{}},O[u.KeybindCustomActions.PUSH_TO_TALK]={onTrigger:function(e){c.default.getMode()===u.InputModes.PUSH_TO_TALK&&(O[u.KeybindCustomActions.PUSH_TO_TALK].isPressed=e,c.default.getMediaEngine().eachConnection(function(t){return t.setForceAudioInput(e,!1)}))},keyEvents:{keyup:!0,keydown:!0},isPressed:!1},O[u.KeybindCustomActions.PUSH_TO_TALK_PRIORITY]={onTrigger:function(e){c.default.getMode()===u.InputModes.PUSH_TO_TALK&&(O[u.KeybindCustomActions.PUSH_TO_TALK_PRIORITY].isPressed=e,c.default.getMediaEngine().eachConnection(function(t){return t.setForceAudioInput(e,!0)}))},keyEvents:{keyup:!0,keydown:!0},isPressed:!1},O[u.KeybindCustomActions.PUSH_TO_MUTE]={onTrigger:function(e){c.default.getMode()===u.InputModes.VOICE_ACTIVITY&&(c.default.isSelfDeaf()||(O[u.KeybindCustomActions.PUSH_TO_MUTE].isPressed=e,h.default.setTemporarySelfMute(e)))},keyEvents:{keyup:!0,keydown:!0},isPressed:!1},O[u.KeybindCustomActions.TOGGLE_MUTE]={onTrigger:function(){h.default.toggleSelfMute()},keyEvents:{keyup:!0,keydown:!1}},O[u.KeybindCustomActions.TOGGLE_DEAFEN]={onTrigger:function(){h.default.toggleSelfDeaf()},keyEvents:{keyup:!0,keydown:!1}},O[u.KeybindCustomActions.TOGGLE_VOICE_MODE]={onTrigger:function(){var e=c.default.getMode()===u.InputModes.PUSH_TO_TALK?u.InputModes.VOICE_ACTIVITY:u.InputModes.PUSH_TO_TALK;h.default.setMode(e)},keyEvents:{keyup:!0,keydown:!1}},O[u.KeybindCustomActions.TOGGLE_OVERLAY]={onTrigger:function(){var e=d.default.enabled;y.default.setEnabled(!e)},keyEvents:{keyup:!0,keydown:!1}},O[u.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK]={onTrigger:function(e){e?y.default.setUILocked(!p.default.locked):y.default.setInputLocked(!d.default.locked)},keyEvents:{keyup:!0,keydown:!0}},O[u.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET]={onTrigger:function(){(null!=d.default.getFocusedPID()||!1)&&p.default.isPinned(u.OverlayWidgets.TEXT)&&d.default.locked&&y.default.activateRegion(u.OverlayActiveRegions.TEXT_WIDGET)},keyEvents:{keyup:!0,keydown:!1}},O[u.KeybindCustomActions.TOGGLE_STREAMER_MODE]={onTrigger:function(){m.default.setEnabled(!f.default.enabled)},keyEvents:{keyup:!0,keydown:!1}};var D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.initialize=function(e){__OVERLAY__||this.waitFor(c.default,d.default),A=e||{},i.default.forEach(A,function(e){T=Math.max(parseInt(e.id,10),T)+1;try{P(e)}catch(t){console.error("Failed to register keybind",e,t)}})},t.prototype.getState=function(){return A},t.prototype.getKeybindList=function(){var e=[];for(var t in A)A.hasOwnProperty(t)&&e.push((0,E.toString)(A[t].shortcut));return e},t.prototype.getOverlayKeybind=function(){return i.default.find(A,function(e){return e.action===u.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK&&!0===e.managed})},t.prototype.getOverlayChatKeybind=function(){return i.default.find(A,function(e){return e.action===u.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET&&!0===e.managed})},t}(a.default.PersistedStore);D.persistKey="keybinds",D.migrations=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.v,n=e.keybinds,r=void 0===n?e:n;return i.default.reduce(r,function(e,n,r){var o=parseInt(n.id,10);return isNaN(o)||n.id!==r?e:((null==t||t<2)&&("string"==typeof n.shortcut?(n.shortcut=n.shortcut.replace("escape","esc").replace("capslock","caps lock").replace("numlock","num lock").replace("pageup","page up").replace("pagedown","page down"),n.shortcut=(0,E.toCombo)(n.shortcut)):n.shortcut=n.shortcut.map(function(e){return e.length<3?[].concat(e,[(0,E.getEnv)()]):e})),e[r]=n,e)},{})},function(e){return Object.keys(e).filter(function(t){var n=e[t];return M.includes(n.action)&&!0===n.managed}).length!==M.length?(L(),A):e}],t.default=new D(l.default,{CONNECTION_OPEN:function(e){return L()},AUDIO_SET_MODE:function(e){return L()},OVERLAY_SET_ENABLED:function(e){return L()},KEYBINDS_ADD_KEYBIND:function(e){R()},KEYBINDS_DELETE_KEYBIND:function(e){var t=e.id,n=(A=o({},A))[t];delete A[t],__OVERLAY__||b.default.track(u.AnalyticEvents.USER_SETTINGS_KEYBIND_UPDATED,{keybind_action:n.action,keybind_is_bound:!1,keybind_has_shortcut:!1}),N(t)},KEYBINDS_SET_KEYBIND:w,KEYBINDS_ENABLE_ALL_KEYBINDS:function(e){var t=e.enable;I=t,t?(_.default.enable(),i.default.forEach(A,P)):(_.default.disable(),i.default.forEach(A,function(e){return N(e.id)}))}}),e.exports=t.default}).call(this,n(61))},6039:function(e,t,n){"use strict";t.__esModule=!0;var r=s(n(3)),o=s(n(2)),a=n(0),i=s(n(965)),l=n(270);function s(e){return e&&e.__esModule?e:{default:e}}var u=null,c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.hasAction=function(){return null!=u},t.prototype.getAction=function(){return u},t}(r.default.Store);function f(e){(u=e.requiredAction)===a.UserRequiredActions.REQUIRE_CAPTCHA||u===a.UserRequiredActions.REQUIRE_VERIFIED_EMAIL||u===a.UserRequiredActions.REQUIRE_VERIFIED_PHONE?(0,l.pushLayer)(a.Layers.VERIFICATION):i.default.hasLayers()&&null==u&&(0,l.popLayer)()}t.default=new c(o.default,{CONNECTION_OPEN:f,USER_REQUIRED_ACTION_UPDATE:f}),e.exports=t.default},6046:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=A(n(8)),a=A(n(60)),i=A(n(18)),l=A(n(12)),s=A(n(271)),u=A(n(65)),c=A(n(225)),f=A(n(26)),d=A(n(125)),p=A(n(80)),h=A(n(282)),y=A(n(5556)),m=A(n(59)),v=A(n(525)),g=A(n(76)),_=A(n(6128)),E=A(n(233)),b=A(n(6026)),S=n(6684),C=n(0);function A(e){return e&&e.__esModule?e:{default:e}}var T=10,I=5,O=1,M=50,N=function(){return!0},P=/(\t|\s)/,R=void 0,w=(R=n(7815)).MENTION_EVERYONE,L=R.MENTION_HERE,D=R.LAUNCHABLE_APPLICATIONS;function k(e,t,n,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return t.test(e)?T:n.test(e)?I:o&&(0,b.default)(r,e)?O:0}function U(e,t,n,r){for(var o=l.default.getUsers(),i=c.default.getGuildId(),s=(e=e.toLocaleLowerCase()).length,u=[],f=[],d=t.length,p=0,h=0;p<d;){var y=t[p],m=void 0,v=void 0;if(y.userId?(m=y.nick,v=o[y.userId]):(v=y,m=a.default.getNick(i,v.id)),!r||r(v)){var g=v.usernameLowerCase,_=null!=m?m.toLocaleLowerCase():null;g.substr(0,s)===e||m&&_.substr(0,s)===e?u.push({comparator:_||g,score:T,nick:m,user:v}):h<M&&((0,b.default)(e,g)||m&&(0,b.default)(e,_))&&(f.push({comparator:_||g,score:O,nick:m,user:v}),h+=1)}p+=1}return u.sort(S.sortByMatchScore),u.length<n&&(f.sort(S.sortByMatchScore),u=u.concat(f.slice(0,Math.max(0,n-u.length)))),u.length>n&&(u.length=n),u}function x(e,t){var n=i.default.getChannel(e);return(0,o.default)(s.default.getMessages(e).toArray()).reverse().map(function(e){return e.author}).reject(function(e){return e.isNonUserBot()}).uniqBy(function(e){return e.id}).map(function(e){var t=a.default.getMember(n.getGuildId(),e.id)||{};return{nick:t.nick||null,score:0,comparator:t.nick||e.username,user:e}}).take(t).value()}t.default={queryFriends:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments[3]);return U(e,m.default.getFriendIDs().map(function(e){return l.default.getUser(e)}),t,n)},queryDMUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments[3]);return U(e,i.default.getDMUserIds().map(function(e){return l.default.getUser(e)}),t,n)},queryChannelUsers:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=i.default.getChannel(e);if(null==o)return[];var s=void 0;if(o.isPrivate()){s=o.recipients.map(function(e){return{userId:e,nick:o.nicks[e]}});var u=l.default.getCurrentUser();s.push({userId:u.id,nick:o.nicks[u.id]})}else if(0===t.length){var c=x(o.id,n);if(null!=c&&c.length>0)return c;s=a.default.getMembers(o.guild_id)}else s=a.default.getMembers(o.guild_id),r&&_.default.requestMembers(o.guild_id,t,n);return U(t,s,n,function(e){return o.isPrivate()||g.default.can(C.Permissions.VIEW_CHANNEL,e,o)})},queryGuildUsers:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments[4];if(null==f.default.getGuild(e))return[];if(0===t.length)return x(u.default.getChannelId(e),n);var i=a.default.getMembers(e);return r&&t.length>0&&_.default.requestMembers(e,t,n),U(t,i,n,o)},queryUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(!(arguments.length>2&&void 0!==arguments[2])||arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3]),r=arguments[4];return n&&e.length>0&&_.default.requestMembers(null,e,t),U(e,(0,o.default)(l.default.getUsers()).values().value(),t,r)},queryChannels:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:N,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:C.ChannelTypes.GUILD_TEXT;e=e.toLocaleLowerCase();var u=new RegExp("^"+E.default.escape(e),"i"),c=new RegExp(E.default.escape(e),"i"),p=l.default.getCurrentUser(),h=void 0;return h=t?(0,o.default)(d.default.getChannels(t)[s]).map(function(e){return e.channel}):(0,o.default)(i.default.getChannels()).values().filter(function(e){return e.type===s}),s===C.ChannelTypes.GUILD_TEXT?h=h.filter(function(e){return g.default.can(C.Permissions.VIEW_CHANNEL,p,e)}):s===C.ChannelTypes.GUILD_VOICE&&(h=h.filter(function(e){return g.default.can(C.Permissions.VIEW_CHANNEL|C.Permissions.CONNECT,p,e)})),h.filter(a).map(function(n){var o=f.default.getGuild(n.guild_id),a=i.default.getChannel(n.parent_id),l=k((t?n.toString()+" "+(null!=a?a.toString():""):n.toString()+" "+(null!=a?a.toString():"")+" "+o.toString()).toLocaleLowerCase(),u,c,e,r);return l>0?{channel:n,score:l,comparator:n.toString()}:null}).filter(function(e){return!!e}).sortBy(function(e){return e.channel.name}).sort(S.sortByMatchScore).take(n).value()},queryGuilds:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;e=e.toLocaleLowerCase();var a=new RegExp("^"+E.default.escape(e),"i"),i=new RegExp(E.default.escape(e),"i");return(0,o.default)(f.default.getGuilds()).values().filter(r).map(function(t){var r=k(t.name.toLocaleLowerCase(),a,i,e,n);return r>0?{guild:t,score:r,comparator:t.toString()}:null}).filter(function(e){return!!e}).sortBy(function(e){return e.name}).sort(S.sortByMatchScore).take(t).value()},queryGroupDMs:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;e=e.toLocaleLowerCase();var r=new RegExp("^"+E.default.escape(e),"i"),a=new RegExp(E.default.escape(e),"i"),l=y.default.getPrivateChannelIds(),s=i.default.getChannels();return(0,o.default)(l).map(function(e){return s[e]}).map(function(n){if(n.type!==C.ChannelTypes.GROUP_DM)return null;var o=k(n.toString().toLocaleLowerCase(),r,a,e,t);return o>0?{channel:n,score:o,comparator:n.toString()}:null}).filter(function(e){return!!e}).filter(n).sort(S.sortByMatchScore).value()},queryApplications:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;e=e.toLocaleLowerCase();var a=new RegExp("^"+E.default.escape(e),"i"),i=new RegExp(E.default.escape(e),"i"),l=D();return(0,o.default)(l).map(function(t){var r=t.application,o=r.name.toLocaleLowerCase(),l=k(o,a,i,e,n);if(l>0)return{application:r,score:l,comparator:o}}).filter(Boolean).filter(r).sort(S.sortByMatchScore).take(t).value()},querySKUs:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;e=e.toLocaleLowerCase();var a=new RegExp("^"+E.default.escape(e),"i"),i=new RegExp(E.default.escape(e),"i"),l=v.default.getSKUs();return(0,o.default)(l).values().map(function(t){var r=t.name.toLocaleLowerCase(),o=k(r,a,i,e,n);if(o>0)return{sku:t,score:o,comparator:r}}).filter(Boolean).filter(r).sort(S.sortByMatchScore).take(t).value()},getRecentlyTalked:x,queryMentionResults:function(e,t,n){var a=this.queryChannelUsers(t.id,e).map(function(e){return r({},e,{status:p.default.getStatus(e.user.id)})}),i=a.length,l=[];if(i<C.MAX_AUTOCOMPLETE_RESULTS){var s=f.default.getGuild(t.getGuildId());null!=s&&((0,o.default)(s.roles).filter(function(t){var n=t.mentionable,r=t.name;return n&&(0,b.default)(e,r.toLowerCase())}).take(C.MAX_AUTOCOMPLETE_RESULTS-i).forEach(function(e){return l.push(e)}),i+=l.length)}var u=[];return t.isDM()||t.isGroupDM()||!n||(i<C.MAX_AUTOCOMPLETE_RESULTS&&(0,b.default)(e,w().test)&&(u.push(w()),i+=1),i<C.MAX_AUTOCOMPLETE_RESULTS&&(0,b.default)(e,L().test)&&u.push(L())),{users:a,globals:u,roles:l}},queryChannelResults:function(e,t){return{channels:this.queryChannels(e,t.getGuildId()).map(function(e){return e.channel})}},queryEmojiResults:function(e,t){return{emojis:h.default.search(t,e,C.MAX_AUTOCOMPLETE_RESULTS)}},matchSentinel:function(e,t,n){return!P.test(t)&&e===n}},e.exports=t.default},6055:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=s(n(3)),a=n(56),i=s(n(2)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u=[],c=[],f=null,d=new a.Timeout;function p(){location.pathname.startsWith(l.Routes.APPLICATION_STORE)?d.start(l.STORE_NAVIGATION_CACHE_TIME,p):i.default.dispatch({type:l.ActionTypes.APPLICATION_STORE_RESET_NAVIGATION})}function h(e){var t=null!=e&&null!=e.search?e.search:"";return null!=e?""+e.pathname+t:null}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getHistory=function(){return u},t.prototype.getFuture=function(){return c},t.prototype.getCurrentPath=function(){return null!=f?f.pathname:null},t.prototype.getCurrentRoute=function(){return h(f)},t.prototype.getLocationAtIndex=function(e){return 0===e?f:e>0?c[c.length-e]:u[u.length+e]},t.prototype.getRouteAtIndex=function(e){return h(this.getLocationAtIndex(e))},t.prototype.reset=function(){throw new Error("Should not reset the store this way outside of a test environment")},t}(o.default.Store);t.default=new y(i.default,{APPLICATION_STORE_LOCATION_CHANGE:function(e){var t=e.location;if(d.start(l.STORE_NAVIGATION_CACHE_TIME,p),null!=f){if(t.pathname===f.pathname&&t.search===f.search)return!1;var n=null!=t.state&&t.state.back,o=null!=t.state&&t.state.forward;n?(u.pop(),c.push(f)):u.push(f),o&&c.pop(),!o&&!n&&c.length>0&&(c=[]),f=r({},t)}else f=r({},t)},APPLICATION_STORE_RESET_NAVIGATION:function(e){return u=[],c=[],void(f=null)}}),e.exports=t.default},6057:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=u(n(9)),l=u(n(79)),s=u(n(5782));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className;return o("div",{className:(0,i.default)(s.default.error,n)},void 0,o(l.default,{name:l.default.Names.WARNING_BOX,className:s.default.icon}),o("div",{className:s.default.text},void 0,t))},t}(a.PureComponent);t.default=c,e.exports=t.default},6058:function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(3)),a=i(n(2));n(529),n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l=!1,s=!1,u=!1,c=!1,f=!1,d=!1,p=null,h=null;function y(){l=!1}function m(){c=!1}function v(){f=!1}function g(){d=!0}function _(){d=!1}var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"isBusy",get:function(){return l||s||d||u}},{key:"isUpdatingPaymentSource",get:function(){return s}},{key:"isRemovingPaymentSource",get:function(){return u}},{key:"isSyncing",get:function(){return c||f}},{key:"editSourceError",get:function(){return p}},{key:"removeSourceError",get:function(){return h}}]),t}(o.default.Store);t.default=new E(a.default,{BILLING_PAYMENT_SOURCE_CREATE_START:function(e){l=!0},BILLING_PAYMENT_SOURCE_CREATE_SUCCESS:function(e){return y()},BILLING_PAYMENT_SOURCE_CREATE_FAIL:function(e){return y()},STRIPE_TOKEN_FAILURE:function(e){return y()},BILLING_PAYMENT_SOURCE_REMOVE_START:function(e){u=!0},BILLING_PAYMENT_SOURCE_REMOVE_SUCCESS:function(e){u=!1},BILLING_PAYMENT_SOURCE_REMOVE_FAIL:function(e){var t=e.error;u=!1,h=t},BILLING_PAYMENT_SOURCE_REMOVE_CLEAR_ERROR:function(e){h=null},BILLING_PAYMENT_SOURCE_UPDATE_START:function(e){s=!0},BILLING_PAYMENT_SOURCE_UPDATE_SUCCESS:function(e){s=!1},BILLING_PAYMENT_SOURCE_UPDATE_FAIL:function(e){var t=e.error;s=!1,p=t},BILLING_PAYMENT_SOURCE_UPDATE_CLEAR_ERROR:function(e){p=null},BILLING_PAYMENT_SOURCES_FETCH_START:function(e){c=!0},BILLING_PAYMENT_SOURCES_FETCH_SUCCESS:function(e){return m()},BILLING_PAYMENT_SOURCES_FETCH_FAIL:function(e){return m()},BILLING_SUBSCRIPTION_FETCH_START:function(e){f=!0},BILLING_SUBSCRIPTION_FETCH_SUCCESS:function(e){return v()},BILLING_SUBSCRIPTION_FETCH_FAIL:function(e){return v()},BILLING_SUBSCRIPTION_UPDATE_START:function(e){return g()},BILLING_SUBSCRIPTION_CANCEL_START:function(e){return g()},BILLING_SUBSCRIPTION_UPDATE_SUCCESS:function(e){return _()},BILLING_SUBSCRIPTION_UPDATE_FAIL:function(e){return _()},BILLING_SUBSCRIPTION_CANCEL_FAIL:function(e){return _()},BILLING_SUBSCRIPTION_CANCEL_SUCCESS:function(e){return _()}}),e.exports=t.default},6067:function(e,t,n){"use strict";t.__esModule=!0;var r=i(n(3)),o=i(n(2)),a=i(n(25));n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l="GuildNSFWAgreeStore",s={};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.initialize=function(){s=a.default.get(l)||s},t.prototype.didAgree=function(e){return s[e]||!1},t}(r.default.Store);t.default=new u(o.default,{GUILD_NSFW_AGREE:function(e){var t=e.guildId;s[t]=!0,a.default.set(l,s)}}),e.exports=t.default},6068:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=j(n(8)),s=j(n(6026)),u=j(n(9)),c=j(n(45)),f=j(n(3)),d=j(n(6070)),p=j(n(144)),h=j(n(112)),y=j(n(274)),m=j(n(6617)),v=j(n(31)),g=j(n(125)),_=j(n(18)),E=j(n(972)),b=j(n(7501)),S=j(n(6110)),C=j(n(38)),A=j(n(7500)),T=j(n(7498)),I=j(n(6615)),O=j(n(40)),M=j(n(224)),N=j(n(6614)),P=j(n(6)),R=j(n(6046)),w=n(7484),L=j(n(233)),D=j(n(20)),k=n(0),U=j(n(5886)),x=n(532);function j(e){return e&&e.__esModule?e:{default:e}}var G="@",B="#",F=":",V="/",H="COMMAND";var Y=[].concat((0,l.default)(k.ChannelTextAreaIntegrations).values().map(function(e){return a({},e,{isIntegration:!0,horizontal:e.type===k.ChannelTextAreaIntegrationTypes.GIF,description:function(e){switch(e.title){case k.ChannelTextAreaIntegrations.XIVDB.title:return P.default.Messages.COMMAND_XIVDB_DESCRIPTION;case k.ChannelTextAreaIntegrations.GIPHY.title:case k.ChannelTextAreaIntegrations.TENOR.title:return P.default.Messages.COMMAND_GIPHY_DESCRIPTION;default:return""}}(e)})}).value(),[{command:"tts",description:P.default.Messages.COMMAND_TTS_DESCRIPTION,predicate:function(e){return v.default.enableTTSCommand&&(e.isPrivate()||h.default.can(k.Permissions.SEND_TSS_MESSAGES,e))}},{command:"me",description:P.default.Messages.COMMAND_ME_DESCRIPTION},{command:"tableflip",description:P.default.Messages.COMMAND_TABLEFLIP_DESCRIPTION},{command:"unflip",description:P.default.Messages.COMMAND_TABLEUNFLIP_DESCRIPTION},{command:"shrug",description:P.default.Messages.COMMAND_SHRUG_DESCRIPTION},{command:"nick",description:P.default.Messages.COMMAND_NICK_DESCRIPTION,predicate:function(e){return!e.isPrivate()&&(h.default.can(k.Permissions.CHANGE_NICKNAME,e)||h.default.can(k.Permissions.MANAGE_NICKNAMES,e))}}]),K=new RegExp("^("+Y.filter(function(e){return e.isIntegration}).map(function(e){return e.command}).join("|")+")\\s(.+)","i");function W(e,t,n,r){var a=n.length>0?e.format({prefix:r(n)}):t;return o(I.default.Title,{title:a},"autocomplete-title-"+a)}function z(e,t,n,r,o,l,s,u,c,f){if(null==n||0===n.length)return null;var d=n.map(function(e,n){return i.createElement(u,a({onClick:o,onHover:r,selected:t===n,index:n},c(e,n)))});return[W(l,s,e,f),d]}function $(e,t,n,r,a,i){var f;return(f={MENTIONS:{matches:function(e,t){return R.default.matchSentinel(e,t,G)},queryResults:function(t){return R.default.queryMentionResults(t,e,a)},renderResults:function(e,n,r,a,l){var s=l.users,u=l.globals,c=l.roles;if(null==s||null==u||null==c||0===s.length&&0===u.length&&0===c.length)return null;var f=s.map(function(e,l){return o(I.default.User,{onClick:a,onHover:r,selected:n===l,index:l,user:e.user,nick:e.nick,status:e.status,hidePersonalInformation:t,colorblindMode:i},e.user.id)}),d=u.map(function(e,t){return o(I.default.Generic,{onClick:a,onHover:r,selected:n===t+s.length,index:s.length+t,text:e.text,description:e.description},e.text)}),p=c.map(function(e,t){return o(I.default.Role,{onClick:a,onHover:r,selected:n===t+s.length+u.length,index:s.length+u.length+t,role:e},e.id)});return[W(P.default.Messages.MEMBERS_MATCHING,P.default.Messages.MEMBERS,e,function(e){return""+G+e}),f,s.length>0&&u.length>0?o(I.default.Divider,{},"autocomplete-divider-1"):null,d,s.length>0&&c.length>0||u.length>0&&c.length>0?o(I.default.Divider,{},"autocomplete-divider-2"):null,p]},getText:function(e,n){var r=n.users,o=n.globals,a=n.roles;if(null==r||null==o||null==a)return"";var i=r[e],l=o[e-r.length],s=a[e-r.length-o.length];return null!=i?t?""+G+i.user.username:""+G+i.user.tag:null!=l?l.text:null!=s?""+G+s.name:""}},CHANNELS:{matches:function(t,n){return!e.isDM()&&!e.isGroupDM()&&R.default.matchSentinel(t,n,B)},queryResults:function(t){return R.default.queryChannelResults(t,e)},renderResults:function(e,t,n,r,o){return z(e,t,o.channels,n,r,P.default.Messages.TEXT_CHANNELS_MATCHING,P.default.Messages.TEXT_CHANNELS,I.default.Channel,function(e){return{channel:e,key:e.id,category:_.default.getChannel(e.parent_id)}},function(e){return""+B+e})},getText:function(e,t){var n=t.channels;if(null==n)return"";var r=n[e];if(null==r)return"";var o=g.default.getTextChannelNameDisambiguations(r.guild_id)[r.id];return"#"+(null!=o?o.name:r.name)}},EMOJIS:{matches:function(e,t){return t.length>1&&e===F},queryResults:function(t){return R.default.queryEmojiResults(t,e)},renderResults:function(e,t,n,r,o){return z(e,t,o.emojis,n,r,P.default.Messages.EMOJI_MATCHING,P.default.Messages.EMOJI,I.default.Emoji,function(e){return{emoji:e,key:e.id||e.uniqueName||e.name,sentinel:F}},function(e){return""+F+e})},getText:function(e,t){var n=t.emojis;return null==n||null==n[e]?"":""+F+n[e].name+F}}})[H]={matches:function(e,t,n){return 0===n&&(e===V||null!=t.match(K))},queryResults:function(t){var n=t.match(K);if(n){var r=n[1],o=l.default.findKey(k.ChannelTextAreaIntegrations,function(e){return e.command===r});return b.default.search(o,n[2]),{integrationQuery:n[2],integration:o}}var a=new RegExp("^"+L.default.escape(t),"i"),i=[],u=[];(0,l.default)(Y).forEach(function(n){(null==n.predicate||n.predicate(e))&&(a.test(n.command)?i.push(n):(0,s.default)(t,n.command.toLowerCase())&&u.push(n))});var c=[],f=function(e){var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(r>=t.length)break;o=t[r++]}else{if((r=t.next()).done)break;o=r.value}var a=o;if(!(c.length<k.MAX_AUTOCOMPLETE_RESULTS))break;c.push(a)}};return f(i),f(u),{commands:c}},renderResults:function(e,t,a,i,l){if(null!=l&&null!=l.commands)return z(e,t,l.commands,a,i,P.default.Messages.COMMANDS_MATCHING,P.default.Messages.COMMANDS,I.default.Command,function(e){return{command:e.command,description:e.description,key:e.command}},function(e){return""+V+e});if(r)return o(M.default,{className:U.default.spinner,type:M.default.Type.SPINNING_CIRCLE});if(null!=n&&null!=n.integrations){var s,f=e.match(K);if(null==f||null==n.integrations)return null;var d=!1,p=n.integrations.map(function(e,n){switch(e.type){case k.ChannelTextAreaIntegrationTypes.GIF:return d=!0,o(I.default.GIFIntegration,{className:U.default.horizontalAutocomplete,onClick:i,onHover:a,selected:t===n,index:n,width:e.meta.width,height:e.meta.height,src:e.meta.src,url:e.meta.url},""+e.meta.url+e.meta.src);case k.ChannelTextAreaIntegrationTypes.LINK:return o(I.default.LinkIntegration,{onClick:i,onHover:a,selected:t===n,index:n,title:e.meta.title,url:e.meta.url,type:e.meta.type,iconUrl:e.meta.icon_url},""+e.meta.title+e.meta.url)}}),h=Y.find(function(e){return e.command===f[1]}),y=e.length>0&&null!=h&&null!=h.title?P.default.Messages.CONTENT_MATCHING.format({query:f[2],command:h.title}):null!=h&&null!=h.title?h.title:f[1];return[o(I.default.Title,{title:y},"autocomplete-title-"+y),d?o(O.default,{className:(0,u.default)((s={},s[U.default.horizontalAutocompletes]="Firefox"!==c.default.name,s))},"autocomplete-horizontal-completes",p):p]}},getText:function(e,t){var n=t.commands,r=t.integrations;return null!=n&&null!=n[e]?""+V+n[e].command:null!=r&&null!=r[e]?r[e].meta.url:""}},f}var J=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));l.default.bindAll(r,["renderEmojiPickerPopout","handleSetRef","handleSaveCurrentText","handleFileUpload","handleInviteToPlay","handleInviteToSpectate","handleInviteToListen","handleInviteToWatch","handleAutocompleteQuery","handleSubmit"]);var o={};return r.state={integration:null,integrationQuery:null,autocompleteOptions:$(n.channel,n.hidePersonalInformation,o,!1,n.canMentionEveryone,n.colorblindMode),autocompletes:o,isAutocompletesLoading:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.focused&&this.focus()},t.prototype.componentDidUpdate=function(e,t){var n=this;this.grabIntegrationResults(e,t,function(){return n.grabAutocompleteOptions(e,t)}),this.fixFocus(e)},t.prototype.fixFocus=function(e){e.focused&&!this.props.focused?this.blur():!e.focused&&this.props.focused&&this.focus()},t.prototype.focus=function(){this._ref&&this._ref.focus()},t.prototype.blur=function(){this._ref&&this._ref.blur()},t.prototype.grabIntegrationResults=function(e,t,n){var r=this.state,o=r.integration,a=r.integrationQuery,i=r.autocompletes,l=m.default.getResults(o,a);null==l||null!=i&&i.integrations===l.results?n():this.setState({autocompletes:{integrations:l.results},isAutocompletesLoading:l.loading},n)},t.prototype.grabAutocompleteOptions=function(e,t){var n=this.props,r=n.channel,o=n.hidePersonalInformation,a=n.canMentionEveryone,i=n.colorblindMode,l=this.state,s=l.autocompletes,u=l.isAutocompletesLoading;if(r!==e.channel||o!==e.hidePersonalInformation||!(null!=s&&null!=t.autocompletes||null==s&&null!=t.autocompletes||null!=s&&null!=t.autocompletes&&s.integrations!==t.autocompletes.integrations)||u!==t.isAutocompletesLoading||a!==e.canMentionEveryone||i!==e.colorblindMode){var c=$(r,o,s,u,a,i);this.setState({autocompleteOptions:c})}},t.prototype.getPlaceholder=function(){var e=this.props,t=e.disabled,n=e.placeholder;return t?P.default.Messages.NO_SEND_MESSAGES_PERMISSION_PLACEHOLDER:n},t.prototype.renderEmojiPickerPopout=function(e,t){return i.createElement(N.default,a({},e,t))},t.prototype.render=function(){var e=this,t=this.props,n=t.value,r=t.className,a=t.disabled,l=t.channel,s=t.type,u=t.canAttachFiles,c=t.canSendInvites,f=t.canPasteFiles,d=t.activities,p=t.onChange,h=t.onResize,y=t.onKeyDown,m=t.onKeyUp,v=t.onBlur,g=t.onFocus,_=this.state,E=_.autocompletes,b=_.autocompleteOptions;return o(x.BackgroundOpacityContext.Consumer,{},void 0,function(t){return i.createElement(T.default,{ref:e.handleSetRef,value:n,className:r,backgroundOpacity:t.backgroundOpacity,disabled:a,placeholder:e.getPlaceholder(),channel:l,type:s,canAttachFiles:u,canSendInvites:c,canPasteFiles:f,activities:d,autocompleteOptions:b,autocompletes:E,renderEmojiPickerPopout:e.renderEmojiPickerPopout,onChange:p,onResize:h,onKeyDown:y,onKeyUp:m,onSaveCurrentText:e.handleSaveCurrentText,onFileUpload:e.handleFileUpload,onInviteToPlay:e.handleInviteToPlay,onInviteToSpectate:e.handleInviteToSpectate,onInviteToListen:e.handleInviteToListen,onInviteToWatch:e.handleInviteToWatch,onOpenAttachPopout:e.handleOpenAttachPopout,onBlur:v,onFocus:g,onAutocompleteQuery:e.handleAutocompleteQuery,onSubmit:e.handleSubmit})})},t.prototype.handleSetRef=function(e){this._ref=e},t.prototype.handleSaveCurrentText=function(e){S.default.saveDraft(e,this.props.value)},t.prototype.handleFileUpload=function(e){(0,w.promptToUpload)(e,this.props.channel.id)},t.prototype.handleStartFileUpload=function(){this._ref&&this._ref.handleStartFileUpload()},t.prototype.handleInviteToPlay=function(e){var t=this.props.channel;D.default.track(k.AnalyticEvents.OPEN_MODAL,{type:"Send Join Invite",application_id:e.application_id}),C.default.push(function(){return o(A.default,{activity:e,channel:t,activityActionType:k.ActivityActionTypes.JOIN})})},t.prototype.handleInviteToSpectate=function(e){var t=this.props.channel;D.default.track(k.AnalyticEvents.OPEN_MODAL,{type:"Send Spectate Invite",application_id:e.application_id}),C.default.push(function(){return o(A.default,{activity:e,channel:t,activityActionType:k.ActivityActionTypes.SPECTATE})})},t.prototype.handleInviteToListen=function(e){var t=this.props.channel;D.default.track(k.AnalyticEvents.OPEN_MODAL,{type:"Send Listen Invite"}),C.default.push(function(){return o(A.default,{activity:e,channel:t,activityActionType:k.ActivityActionTypes.LISTEN})})},t.prototype.handleInviteToWatch=function(e){var t=this.props.channel;D.default.track(k.AnalyticEvents.OPEN_MODAL,{type:"Send Watch Invite"}),C.default.push(function(){return o(A.default,{activity:e,channel:t,activityActionType:k.ActivityActionTypes.WATCH})})},t.prototype.handleInsertText=function(e){var t=e.content;this._ref&&this._ref.insertText(t),this.focus()},t.prototype.handleOpenAttachPopout=function(){D.default.track(k.AnalyticEvents.OPEN_POPOUT,{type:"Send Attachment"})},t.prototype.handleAutocompleteQuery=function(e,t,n){var r=e.queryResults(t);n===H&&null==r.commands?this.setState({autocompletes:null,integrationQuery:r.integrationQuery,integration:r.integration}):this.setState({autocompletes:r,integrationQuery:null})},t.prototype.handleSubmit=function(e){return(0,this.props.onSubmit)(e)},t}(i.PureComponent);J.defaultProps={type:k.TextareaTypes.NORMAL,disableActivity:!1,disableAttachments:!1,disableImagePaste:!1,disableInvites:!1,focused:!1};var q=(0,d.default)(function(e,t){var n;return(n={})[k.ComponentActions.UPLOAD_FILE]=t.handleStartFileUpload.bind(t),n[k.ComponentActions.INSERT_TEXT]=t.handleInsertText.bind(t),n})(J),X=f.default.connectStores([m.default,h.default,y.default,p.default,E.default],function(e){var t=e.channel,n=e.disableAttachments,r=e.disableImagePaste,o=e.disableActivity,a=e.disableInvites,i=t.isPrivate(),l=i||h.default.can(k.Permissions.ATTACH_FILES,t),s=i||h.default.can(k.Permissions.EMBED_LINKS,t);return{query:m.default.getQuery(),canAttachFiles:!n&&l,canPasteFiles:!r&&l,canSendInvites:!a&&s,disabled:!i&&!h.default.can(k.Permissions.SEND_MESSAGES,t),canMentionEveryone:i||h.default.can(k.Permissions.MENTION_EVERYONE,t),activities:o?null:y.default.getActivities(),hidePersonalInformation:p.default.hidePersonalInformation,colorblindMode:E.default.colorblindMode}})(q);t.default=X,e.exports=t.default},6069:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=j(n(6068)),s=j(n(223)),u=n(263),c=j(n(7480)),f=n(6605),d=j(n(7467)),p=j(n(6603)),h=j(n(366)),y=n(6129),m=j(n(145)),v=j(n(6106)),g=j(n(977)),_=j(n(112)),E=j(n(12)),b=j(n(144)),S=j(n(191)),C=j(n(11)),A=j(n(7442)),T=j(n(6105)),I=j(n(3)),O=j(n(38)),M=n(33),N=n(6610),P=j(n(6231)),R=n(143),w=j(n(987)),L=n(0),D=j(n(531)),k=j(n(7429)),U=j(n(7428)),x=n(532);function j(e){return e&&e.__esModule?e:{default:e}}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var B=function(e){var t=e.guildId;return _.default.can(L.Permissions.MANAGE_GUILD,{guildId:t})},F=function(e){var t=e.message,n=e.channel,r=e.canChat,o=e.renderReactions,a=e.canAddNewReactions,i=n.isPrivate(),l=t.type!==L.MessageTypes.DEFAULT,s=!l&&(r||i);return{disableReactionReads:!o,disableReactionCreates:!s||!(!l&&(!0===a||i)),disableReactionUpdates:!s}},V=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,u=Array(s),p=0;p<s;p++)u[p]=arguments[p];return n=r=G(this,e.call.apply(e,[this].concat(u))),r.onResize=function(e){var t=e.target,n=e.isEditing,o=r.props,a=o.onEdit,i=o.onUpdate;n?a&&t&&a(t):i&&t&&i(t)},r.onClickUsername=function(e,t){var n=t.user;if(e.shiftKey&&!n.isNonUserBot()){var o=r.props.disablePersonalInformation,a=n.username,i=n.tag,l="@"+(o?a:i);R.ComponentDispatch.dispatchToLastSubscribed(L.ComponentActions.INSERT_TEXT,{content:l}),e.preventDefault(),e.stopPropagation();var s=r.props.channel;null!=s&&w.default.typing(s.id)}},r.onContextMenuMessage=function(e,t){if(C.default.embedded){var n=t.message.type!==L.MessageTypes.DEFAULT?L.ContextMenuTypes.MESSAGE_SYSTEM:L.ContextMenuTypes.MESSAGE_MAIN;(0,M.openContextMenu)(e,function(e){return i.createElement(A.default,a({},e,t,{type:n}))})}},r.onContextMenuUser=function(e,t){var n=t.user,r=t.channel;(0,N.openUserContextMenu)(e,n,r)},r.renderAccessories=function(e){var t=e.message,n=r.props,l=n.compact,s=n.channel,u=n.accessoriesClassName,c=n.gifAutoPlay,f=n.renderReactions,p=n.canAddNewReactions,h=n.inlineAttachmentMedia,y=n.inlineEmbedMedia,m=n.renderEmbeds,v=n.canChat,g=F({message:t,channel:s,canChat:v,renderReactions:f,canAddNewReactions:p});return o(x.BackgroundOpacityContext.Consumer,{},void 0,function(e){return i.createElement(d.default,a({},g,{className:u,message:t,channel:s,isCompact:l,disableAutoPlayGif:!c,disableEmbeds:!m,inlineAttachmentMedia:h,inlineEmbedMedia:y,onContextMenuMessage:r.onContextMenuMessage,backgroundOpacity:e.backgroundOpacity}))})},r.renderButtonsMessage=function(e){var t=e.message,n=e.channel,a=t.state===L.MessageStates.SENDING,l=r.props,s=l.developerMode,u=l.canManageMessages,c=l.messageOption,d=l.currentUserId;if(!1===c||a)return null;var p=t.author,y=u||p.id===d,g=t.type!==L.MessageTypes.DEFAULT,_=!g&&(u||n.isPrivate()),E=!g&&r.props.canEdit,b=r.props,S=b.canChat,C=b.canAddNewReactions,A=b.renderReactions,I=F({message:t,channel:n,canChat:S,renderReactions:A,canAddNewReactions:C}).disableReactionCreates;return o(i.Fragment,{},void 0,!I&&!g&&o(f.ButtonAddReaction,{message:t,channel:n}),o(k.default,{channel:n,message:t,developerMode:s,canEdit:E,canPin:_,canDelete:y,onStartEditMessage:m.default.startEditMessage,onRetrySendMessage:m.default.retrySendMessage,onDeleteMessage:m.default.deleteMessage,onConfirmDelete:T.default.confirmDelete,onConfirmPin:T.default.confirmPin,onOpenGuildSettings:h.default.open,onUnpinMessage:v.default.unpinMessage,onConfirmUnpin:T.default.confirmUnpin,onCanManageGuild:B,onShowReactionsModal:r.renderReactionsModal,currentUserId:d}))},r.renderEditor=function(e){var t=e.value,n=e.message,r=e.channel,a=e.onChange,i=e.onSubmit,s=e.onKeyDown,u=e.onResize;return o(l.default,{className:"margin-top-8",value:t,channel:r,type:L.TextareaTypes.EDIT,onChange:a,onSubmit:i,onKeyDown:s,onResize:u},n.id)},r.renderPopoutUser=function(e){return i.createElement(D.default,e)},r.renderSystemMessage=function(e){return i.createElement(c.default,a({},e,{key:e.message.id,onContextMenu:r.onContextMenuMessage}))},G(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.validateEdit=function(e){var t=e.value,n=e.channel;return g.default.applyChatRestrictions(null,t,n,!1,!1)},t.prototype.renderReactionsModal=function(e){var t=e.message;O.default.push(P.default,{message:t})},t.prototype.render=function(){var e=this,t=this.props,n=t.onClickAnywhere,r=t.hasDivider,l=t.compact,s=t.canFlash,u=t.enableInteraction,c=t.messages,f=t.channel,d=t.jumpSequenceId,p=t.jumpMessageId,h=t.registerMessageDOMNode,v=t.renderMentioned,g=t.groupOption,_=t.editingMessageId,E=t.disableInteractionLabel,b=t.editingContent,S=t.isFocusedWindow,C=t.className,A=t.cozyClassName,I=t.canChat,O=t.renderReactions,M=t.canAddNewReactions,N=t.gifAutoPlay,P=t.renderEmbeds,R=t.canManageMessages,w=t.developerMode,L={messages:c,channel:f,jumpSequenceId:d,jumpMessageId:p,registerMessageDOMNode:h,editingMessageId:_,disableInteractionLabel:E,editingContent:b,isFocusedWindow:S},D=a({},F({message:c[0],channel:f,canChat:I,renderReactions:O,canAddNewReactions:M}),{disableAutoPlayGif:!N,disableEmbeds:!P,disableManageMessages:!R,disableDeveloperMode:!w});return o(x.BackgroundOpacityContext.Consumer,{},void 0,function(t){return i.createElement(U.default,a({isCompact:l,onClick:n,disableDivider:r,disableJumpFlash:!s,disableInteraction:!u,disableMentionStyles:!v,onResize:e.onResize,validateEdit:e.validateEdit,onCancelEditing:m.default.endEditMessage,onConfirmDelete:T.default.confirmDelete,onChange:m.default.updateEditMessage,saveMessage:m.default.editMessage,editingMessageId:_,onManualAck:y.manualAck,onClickUsername:e.onClickUsername,onContextMenuMessage:e.onContextMenuMessage,onContextMenuUser:e.onContextMenuUser,onDeleteMessage:m.default.deleteMessage,renderAccessories:e.renderAccessories,renderButtonsMessage:e.renderButtonsMessage,renderEditor:e.renderEditor,renderPopoutUser:e.renderPopoutUser,renderSystemMessage:e.renderSystemMessage,renderButtonsGroup:g,className:C,cozyClassName:A,backgroundOpacity:t.backgroundOpacity},L,D))})},t}(i.Component);V.defaultProps={canManageMessages:!1,hasDivider:!1,popoutPosition:s.default.Positions.RIGHT,avatarSize:u.AvatarSizes.LARGE,compact:!1,messageOption:!0,canEdit:!0,jumpTargetIndex:-1,enableInteraction:!0,developerMode:!1,canFlash:!0,renderMentioned:!0,inlineAttachmentMedia:!1,inlineEmbedMedia:!1,gifAutoPlay:!1,renderEmbeds:!1,renderEmbedsSmall:!1,renderReactions:!0,canChat:!1},t.default=I.default.connectStores([p.default,E.default,S.default],function(e){var t=e.channel,n=e.messages,r=e.canEdit,o=t.id,a=!1!==r&&n.some(function(e){return e&&p.default.isEditing(o,e.id)}),i=a?p.default.getEditingMessageId():null,l=a?p.default.getEditingContent():null,s=S.default.isFocused(),u=b.default.hidePersonalInformation;return{currentUserId:E.default.getCurrentUser().id,editingMessageId:i,isFocusedWindow:s,disablePersonalInformation:u,editingContent:l}})(V),e.exports=t.default},6070:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){return function(t){return function(n){function l(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=i(this,n.call.apply(n,[this].concat(o))),e=t,t._subscriptions=null,t.handleSetRef=function(e){t._ref=e},i(t,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,n),l.prototype.componentDidMount=function(){for(var t in this._subscriptions=e(this.props,this._ref),this._subscriptions)null!=this._subscriptions&&this._subscriptions.hasOwnProperty(t)&&a.ComponentDispatch.subscribe(t,this._subscriptions[t])},l.prototype.componentWillUnmount=function(){for(var e in this._subscriptions)null!=this._subscriptions&&this._subscriptions.hasOwnProperty(e)&&a.ComponentDispatch.unsubscribe(e,this._subscriptions[e])},l.prototype.render=function(){return o.createElement(t,r({ref:this.handleSetRef},this.props))},l}(o.Component)}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),a=n(143);function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}e.exports=t.default},6077:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=y(n(9)),l=y(n(522)),s=y(n(38)),u=y(n(555)),c=y(n(87)),f=y(n(6)),d=y(n(5568)),p=y(n(5939)),h=n(0);function y(e){return e&&e.__esModule?e:{default:e}}var m=o(function(){return o("div",{className:p.default.premiumPromo},void 0,o(c.default,{onClick:function(){s.default.pop(),l.default.open(h.UserSettingsSections.PREMIUM)},className:p.default.content},void 0,f.default.Messages.PREMIUM_UPLOAD_PROMO.format({maxUploadPremium:f.default.Messages.FILE_UPLOAD_LIMIT_PREMIUM}),o("img",{alt:"",className:p.default.navArrow,src:n(7866)})))},{}),v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props.promo;return o("div",{className:d.default.uploadModalIn},void 0,o("div",{className:(0,i.default)(d.default.uploadDropModal,d.default.error)},void 0,o("div",{className:d.default.inner},void 0,o("div",{className:d.default.icons},void 0,o("div",{className:d.default.wrapOne},void 0,o("div",{className:(0,i.default)(d.default.icon,d.default.one)})),o("div",{className:d.default.wrapThree},void 0,o("div",{className:(0,i.default)(d.default.icon,d.default.three)})),o("div",{className:d.default.wrapTwo},void 0,o("div",{className:(0,i.default)(d.default.icon,d.default.two)}))),o("div",{className:d.default.title},void 0,this.props.title),o("div",{className:d.default.instructions},void 0,this.props.help),e?m:null)))},t}(a.Component);v.modalConfig={backdropStyle:u.default.Styles.DARK,backdropInstant:!0},t.default=v,e.exports=t.default},6079:function(e,t,n){"use strict";t.__esModule=!0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=M(n(3)),i=M(n(8)),l=M(n(5)),s=M(n(6026)),u=M(n(2)),c=M(n(11)),f=n(6274),d=n(290),p=n(127),h=n(231),y=M(n(68)),m=M(n(27)),v=M(n(537)),g=M(n(69)),_=M(n(383)),E=M(n(44)),b=M(n(31)),S=M(n(6273)),C=M(n(144)),A=M(n(6272)),T=M(n(129)),I=n(130),O=n(0);function M(e){return e&&e.__esModule?e:{default:e}}var N=5,P=(0,l.default)().subtract(1,"week"),R=[],w="";function L(e,t){return e.application.name.localeCompare(t.application.name,b.default.locale,{sensitivity:"base"})}var D=((r={})[O.GameTableListKeys.NAME]=L,r[O.GameTableListKeys.PLATFORM]=function(e,t,n){var r=e.libraryApplication.getDistributor(),o=t.libraryApplication.getDistributor();return r===o?(n===O.TableSortDirections.DESCENDING?-1:1)*L(e,t):null==r?1:null==o?-1:r.localeCompare(o)},r[O.GameTableListKeys.LAST_PLAYED]=function(e,t){return e.isNew&&!t.isNew?-1:!e.isNew&&t.isNew?1:e.lastPlayed===t.lastPlayed?0:e.lastPlayed>t.lastPlayed?-1:1},r[O.GameTableListKeys.ACTIONS]=null,r),k=(0,f.cachedFunction)(function(e){return e.filter(function(e){return null!=e.libraryApplication&&e.shouldShowInLibrary})}),U=(0,f.cachedFunction)(function(e){return e.filter(function(e){return e.isLaunchable})}),x=(0,f.cachedFunction)(function(e,t){return e.filter(function(e){return(0,s.default)(t.toLowerCase(),e.application.name.toLowerCase())})}),j=(0,f.cachedFunction)(function(e,t,n,r){var o=D[t];if(null==o)return e;var a=[].concat(e).sort(o);return n===O.TableSortDirections.DESCENDING?a.reverse():a}),G=(0,f.cachedFunction)(function(e){return e.filter(function(e){return null!=e.libraryApplication&&e.libraryApplication.isHidden()})});function B(){var e=new Set(y.default.getRunningVerifiedApplicationIds()),t={},n=v.default.isInExperiment(),r=new Set,o=y.default.getGamesSeen(!1,!1),a=Array.isArray(o),s=0;for(o=a?o:o[Symbol.iterator]();;){var u;if(a){if(s>=o.length)break;u=o[s++]}else{if((s=o.next()).done)break;u=s.value}var f=u,b=m.default.getGameBySettingGame(f);null!=b&&(t[b.id]=1e3*f.lastFocused,r.add(b.id))}if(n)for(var S=[].concat(Object.keys(E.default.getAllLibraryApplications()),Object.keys(T.default.localApplications)),O=0;O<S.length;O++){var M=S[O];r.add(M)}var w=Array.from(r).map(function(e){return m.default.getGame(e)}).filter(Boolean).map(function(n){var r=(0,p.getLibraryApplicationForApplicationId)(n.id,E.default,T.default),o=function(e,t){var n=A.default.getCurrentUserStatisticsForApplication(e.id);if(null!=n)return new Date(n.last_played_at).getTime();var r=t[e.id];return null!=r?r:0}(n,t),a=E.default.getActiveBranchId(n.id);return{id:n.id,application:n,libraryApplication:r,lastPlayed:o,shouldShowInLibrary:(0,p.shouldShowGameInLibrary)(n,E.default,T.default,C.default),supportsCloudSaves:null!=r&&!(r instanceof I.LocalApplicationRecord)&&g.default.supportsCloudSaves(n.id,a),isNew:function(e,t){return null!=e&&(0,l.default)(e.createdAt).isAfter(P)&&0===t&&!(e instanceof I.LocalApplicationRecord)}(r,o),isLaunching:m.default.launchingGames.has(n.id),isRunning:e.has(n.id),isLaunchable:(0,d.isLaunchable)(E.default,m.default,g.default,n.id,E.default.getActiveBranchId(n.id)),isUpdatingFlags:E.default.isUpdatingFlags(n.id),defaultAction:null!=r?(0,h.getDefaultLibraryApplicationAction)(r,a,g.default,_.default):null}}).sort(function(e,t){return e.lastPlayed===t.lastPlayed?0:e.lastPlayed>t.lastPlayed?-1:1});return!i.default.isEqual(w,R)&&(R=w,c.default.embedded&&c.default.setSystemTrayApplications(U(R).map(function(e){return e.application}).slice(0,N)),!0)}var F=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.initialize=function(){this.syncWith([m.default,y.default,g.default,_.default,E.default,A.default,C.default],B,200),this.syncWith([S.default,b.default],function(){return!0})},o(t,[{key:"applicationFilterQuery",get:function(){return w}},{key:"applicationViewItems",get:function(){return R}},{key:"launchableApplicationViewItems",get:function(){return U(R)}},{key:"libraryApplicationViewItems",get:function(){return k(R)}},{key:"filteredLibraryApplicationViewItems",get:function(){return x(this.libraryApplicationViewItems,w)}},{key:"sortedFilteredLibraryApplicationViewItems",get:function(){return j(this.filteredLibraryApplicationViewItems,S.default.sortKey,S.default.sortDirection,b.default.locale)}},{key:"hiddenLibraryApplicationViewItems",get:function(){return G(R)}}]),t}(a.default.Store);t.default=new F(u.default,{LIBRARY_APPLICATION_FILTER_UPDATE:function(e){var t=e.query;w=t}}),e.exports=t.default},6101:function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(0),a=n(2),i=(r=a)&&r.__esModule?r:{default:r};t.default={setEnabled:function(e){this.update({enabled:e})},update:function(e){var t=Object.keys(e),n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var a;if(n){if(r>=t.length)break;a=t[r++]}else{if((r=t.next()).done)break;a=r.value}var l=a;i.default.dispatch({type:o.ActionTypes.STREAMER_MODE_UPDATE,key:l,value:e[l]})}}},e.exports=t.default},6102:function(e,t,n){"use strict";t.__esModule=!0,t.PRETTY_KEYS=void 0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),s(n(5999))),i=s(n(9)),l=s(n(5563));function s(e){return e&&e.__esModule?e:{default:e}}var u=o("g",{fill:"#4F545C"},void 0,o("polygon",{transform:"translate(5.025000, 5.000000) scale(1, -1) translate(-5.025000, -5.000000) ",points:"4.16666667 10 4.16666672 3.33333333 1.25 6.25 0.05 5 5.00000005 0 9.99999967 5 8.75 6.25 5.83333338 3.33333333 5.83333333 10"})),c=function(e){var t=e.direction,n=void 0===t?"up":t;return o("svg",{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",className:(0,i.default)(l.default.bindArrow,l.default[n])},void 0,u)},f=o(c,{direction:"up"}),d=o(c,{direction:"down"}),p=o(c,{direction:"left"}),h=o(c,{direction:"right"}),y=t.PRETTY_KEYS={mod:function(){return a.default.modKey},alt:function(){return a.default.altKey},up:function(){return f},down:function(){return d},left:function(){return p},right:function(){return h},pageup:function(){return"page up"},pagedown:function(){return"page down"},"any-character":function(){return"any key"},return:function(){return a.default.returnKey}};t.default=function(e){var t=e.shortcut,n=e.className;return o("div",{className:(0,i.default)(l.default.keybindShortcut,n)},void 0,t.split("+").map(function(e){return y[e]?y[e]():e}).map(function(e,t){return o("span",{},t,e)}))}},6105:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=E(n(6)),s=E(n(9)),u=E(n(164)),c=E(n(6069)),f=E(n(7439)),d=E(n(67)),p=E(n(1021)),h=E(n(940)),y=E(n(38)),m=E(n(145)),v=E(n(6106)),g=n(7437),_=E(n(5875));function E(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=b(this,e.call.apply(e,[this].concat(a))),r.state={report:!1},r.handleDelete=function(){var e=r.state.report,t=r.props,n=t.channel,o=t.message;e?y.default.push(f.default,{channel:n,message:o,onReport:function(){m.default.deleteMessage(n.id,o.id)}}):m.default.deleteMessage(n.id,o.id)},r.handleToggleReport=function(e){r.setState({report:e.currentTarget.checked})},b(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.state.report,t=this.props,n=t.channel,r=t.message,s=t.showContextMenuHint,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["channel","message","showContextMenuHint"]),y=void 0;s&&(y=a(p.default,{className:_.default.spacingTop},void 0,l.default.Messages.DELETE_MESSAGE_CONTEXT_MENU_HINT.format()));var m=void 0;return(0,g.canReportMessage)(r)&&(m=a(h.default,{value:e,onChange:this.handleToggleReport,hideBorder:!0,className:_.default.spacingTop},void 0,l.default.Messages.DELETE_MESSAGE_REPORT)),i.createElement(u.default,o({header:l.default.Messages.DELETE_MESSAGE_TITLE,confirmText:l.default.Messages.DELETE,cancelText:l.default.Messages.CANCEL,onConfirm:this.handleDelete},f),a(d.default,{size:d.default.Sizes.MEDIUM,color:d.default.Colors.PRIMARY,className:_.default.spacing},void 0,l.default.Messages.DELETE_MESSAGE_BODY),a("div",{className:_.default.message},void 0,a(c.default,{channel:n,messages:[r],enableInteraction:!1})),m,y)},t}(i.PureComponent);t.default={confirmPin:function(e,t){y.default.push(function(n){var r=void 0;return r=e.isPrivate()?l.default.Messages.PIN_MESSAGE_BODY_PRIVATE_CHANNEL:l.default.Messages.PIN_MESSAGE_BODY.format({channelName:e.toString()}),i.createElement(u.default,o({red:!1,header:l.default.Messages.PIN_MESSAGE_TITLE,confirmText:l.default.Messages.PIN_CONFIRM,cancelText:l.default.Messages.CANCEL,onConfirm:function(){return v.default.pinMessage(e,t.id)}},n),a(d.default,{size:d.default.Sizes.MEDIUM,color:d.default.Colors.PRIMARY,className:_.default.spacing},void 0,r),a("div",{className:_.default.message},void 0,a(c.default,{channel:e,messages:[t],enableInteraction:!1})))})},confirmUnpin:function(e,t){y.default.push(function(n){return i.createElement(u.default,o({header:l.default.Messages.UNPIN_MESSAGE_TITLE,confirmText:l.default.Messages.UNPIN_CONFIRM,cancelText:l.default.Messages.CANCEL,onConfirm:function(){return v.default.unpinMessage(e,t.id)}},n),a(d.default,{size:d.default.Sizes.MEDIUM,color:d.default.Colors.PRIMARY,className:_.default.spacing},void 0,l.default.Messages.UNPIN_MESSAGE_BODY),a("div",{className:(0,s.default)(_.default.message,_.default.spacing)},void 0,a(c.default,{channel:e,messages:[t],enableInteraction:!1})),a(p.default,{},void 0,l.default.Messages.UNPIN_MESSAGE_CONTEXT_MENU_HINT.format()))})},confirmDelete:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y.default.push(function(r){return i.createElement(S,o({channel:e,message:t,showContextMenuHint:n},r))})}},e.exports=t.default},6106:function(e,t,n){"use strict";t.__esModule=!0;var r=u(n(2)),o=u(n(6602)),a=u(n(13)),i=u(n(6)),l=(u(n(124)),u(n(267))),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var c={pinMessage:function(e,t){var n=e.id,r=e.name;a.default.put({url:s.Endpoints.PIN(n,t)}).catch(function(){var t=void 0;t=e.isPrivate()?i.default.Messages.PIN_MESSAGE_TOO_MANY_BODY_PRIVATE_CHANNEL.format({maxPins:s.MAX_PINS_PER_CHANNEL}):i.default.Messages.PIN_MESSAGE_TOO_MANY_BODY.format({maxPins:s.MAX_PINS_PER_CHANNEL,channelName:r}),l.default.show({title:i.default.Messages.PIN_MESSAGE_TOO_MANY_TITLE,body:t,confirmText:i.default.Messages.OKAY})})},unpinMessage:function(e,t){a.default.delete({url:s.Endpoints.PIN(e.id,t)}).catch(function(){return l.default.show({title:i.default.Messages.UNPIN_MESSAGE_FAILED_TITLE,body:i.default.Messages.UNPIN_MESSAGE_FAILED_BODY,confirmText:i.default.Messages.TRY_AGAIN,cancelText:i.default.Messages.CANCEL,onConfirm:c.unpinMessage.bind(c,e,t)})})},ackPins:function(e){r.default.dirtyDispatch({type:s.ActionTypes.CHANNEL_PINS_ACK,channelId:e})},fetchPins:function(e){var t=o.default.getPinnedMessages(e);t&&(t.loaded||t.loading)||(r.default.dirtyDispatch({type:s.ActionTypes.LOAD_PINNED_MESSAGES,channelId:e}),a.default.get({url:s.Endpoints.PINS(e),retries:2}).then(function(t){r.default.dispatch({type:s.ActionTypes.LOAD_PINNED_MESSAGES_SUCCESS,messages:t.body,channelId:e})},function(){r.default.dispatch({type:s.ActionTypes.LOAD_PINNED_MESSAGES_FAILURE,channelId:e})}))}};t.default=c,e.exports=t.default},6107:function(e,t,n){"use strict";t.__esModule=!0,t.requestFullScreen=function(e,t){if("function"==typeof e.requestFullscreen)e.requestFullscreen();else if("function"==typeof e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if("function"==typeof e.mozRequestFullScreen)e.mozRequestFullScreen();else{if("function"!=typeof e.msRequestFullscreen)return void console.warn("Fullscreen API is not supported.");e.msRequestFullscreen()}null!=t&&t()},t.exitFullScreen=function(e){if("function"==typeof document.exitFullscreen)document.exitFullscreen();else if("function"==typeof document.webkitExitFullscreen)document.webkitExitFullscreen();else if("function"==typeof document.mozCancelFullScreen)document.mozCancelFullScreen();else{if("function"!=typeof document.msExitFullscreen)return void console.warn("Fullscreen API is not supported.");document.msExitFullscreen()}null!=e&&e()},t.isFullScreen=function(){return null!=document.fullscreenElement||null!=document.mozFullScreenElement||null!=document.webkitFullscreenElement||null!=document.msFullscreenElement};var r;t.FULLSCREEN_CHANGE_EVENT="function"==typeof(r=document.createElement("div")).requestFullscreen?"fullscreenchange":"function"==typeof r.webkitRequestFullscreen?"webkitfullscreenchange":"function"==typeof r.mozRequestFullScreen?"mozfullscreenchange":"function"==typeof r.msRequestFullscreen?"msfullscreenchange":"fullscreenchange"},6108:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=d(n(6)),s=d(n(980)),u=n(6011),c=d(n(6234)),f=n(0);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.src,n=e.fileSize,r=e.className,d=e.mediaPlayerClassName,p=e.poster,h=e.fileName,y=e.naturalWidth,m=e.naturalHeight,v=e.playable,g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["src","fileSize","className","mediaPlayerClassName","poster","fileName","naturalWidth","naturalHeight","playable"]);return i.createElement(s.default,o({alt:l.default.Messages.VIDEO,className:r,src:p},g,{minWidth:c.default.minWidth,shouldLink:!1,shouldAnimate:!1}),function(e){var r=e.src,o=e.size,i=o.width,l=o.height,s=!(y<=f.MAX_VIDEO_WIDTH&&m<=f.MAX_VIDEO_HEIGHT||y<=f.MAX_VIDEO_HEIGHT&&m<=f.MAX_VIDEO_WIDTH);return a(c.default,{className:d,forceExternal:s,src:t,poster:r,width:i,height:l,type:c.default.Types.VIDEO,fileName:h,fileSize:(0,u.sizeString)(n),playable:v})})},t}(i.Component);t.default=p,e.exports=t.default},6109:function(e,t,n){"use strict";t.__esModule=!0;var r=s(n(8)),o=s(n(3)),a=s(n(2)),i=s(n(18)),l=s(n(280));n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u=2500,c={};function f(e){var t=e.channelId,n=e.draft;return n?c[t]={timestamp:Date.now(),draft:function(e){return e.length>u&&(e=e.substr(0,u)),e}(n)}:delete c[t],!1}function d(){if(!(l.default.totalUnavailableGuilds>0))for(var e in c)null==i.default.getChannel(e)&&delete c[e]}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.initialize=function(e){c=e||{},this.waitFor(i.default,l.default)},t.prototype.getState=function(){return c},t.prototype.getRecentlyEditedDrafts=function(){return(0,r.default)(c).toPairs().map(function(e){var t=e[0],n=e[1];return{channelId:t,timestamp:n.timestamp,draft:n.draft}}).sortBy(function(e){return-e.timestamp}).value()},t.prototype.getDraft=function(e){var t=c[e];return null==t?"":t.draft},t}(o.default.PersistedStore);p.persistKey="DraftStore",t.default=new p(a.default,{CONNECTION_OPEN:function(e){return d(),!1},GUILD_DELETE:function(e){return d(),!1},CHANNEL_DELETE:function(e){var t=e.channel.id;return null!=c[t]&&delete c[t],!1},DRAFT_SAVE:function(e){f(e)},DRAFT_CHANGE:f}),e.exports=t.default},6110:function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(2),a=(r=o)&&r.__esModule?r:{default:r},i=n(0);t.default={saveDraft:function(e,t){a.default.dirtyDispatch({type:i.ActionTypes.DRAFT_SAVE,channelId:e,draft:t})},changeDraft:function(e,t){a.default.dirtyDispatch({type:i.ActionTypes.DRAFT_CHANGE,channelId:e,draft:t})}},e.exports=t.default},6128:function(e,t,n){"use strict";t.__esModule=!0;var r=l(n(571)),o=l(n(8)),a=l(n(229)),i=l(n(26));function l(e){return e&&e.__esModule?e:{default:e}}var s=new r.default({maxAge:6e4}),u=void 0;t.default={requestMembers:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=(e||"")+":"+t;null==s.get(r)&&(s.set(r,!0),function(e,t,n){null!=u&&clearTimeout(u),u=setTimeout(function(){var r=[],l=function(e){r.push(e.id)};if(null==e)o.default.forEach(i.default.getGuilds(),l);else{var s=i.default.getGuild(e);null!=s&&l(s)}r.length>0&&a.default.requestMembers(r,t.toLocaleLowerCase(),n)},200)}(e,t,n))},getAcronym:function(e){return null!=e?e.replace(/\w+/g,function(e){return e[0]}).replace(/\s/g,""):""}},e.exports=t.default},6129:function(e,t,n){"use strict";t.__esModule=!0,t.ack=c,t.ackCategory=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a.default.getChannel(e);if(null==r||null==r.guild_id)return;var o=i.default.getCategories(r.guild_id);if(null==o[e])return;o[e].filter(function(e){var t=e.channel;return t.type===s.ChannelTypes.GUILD_TEXT}).forEach(function(e){var r=e.channel;l.default.hasUnread(r.id)&&c(r.id,t,n)})},t.localAck=function(e){r.default.dispatch({type:s.ActionTypes.CHANNEL_LOCAL_ACK,channelId:e})},t.manualAck=function(e,t){o.default.post({url:s.Endpoints.MESSAGES(e)+"/"+t+"/ack",body:{manual:!0}})};var r=u(n(2)),o=u(n(13)),a=u(n(18)),i=u(n(954)),l=u(n(363)),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.default.dispatch({type:s.ActionTypes.CHANNEL_ACK,channelId:e,immediate:t,force:n,context:s.CURRENT_APP_CONTEXT})}},6149:function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=s(n(3)),i=s(n(2)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u=null,c=null,f=null,d={},p=null,h=!1,y=null,m=!1,v=!1,g=null,_=void 0,E=void 0;function b(e){null!=_&&null!=p?_(p):null!=E&&E(e),_=null,E=null}function S(e,t){return e+"-"+(null!=t?t:"")}var C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getPrice=function(e,t){return d[S(e,t)]},t.prototype.isOpen=function(){var e=__OVERLAY__?l.AppContext.OVERLAY:l.AppContext.APP;return g===e&&v},t.prototype.getProps=function(){return{skuId:u,applicationId:c}},r(t,[{key:"isPurchasingSKU",get:function(){return h}},{key:"error",get:function(){return y}},{key:"skuId",get:function(){return u}},{key:"applicationId",get:function(){return c}},{key:"analyticsLocation",get:function(){return f}},{key:"isIAP",get:function(){return m}}]),t}(a.default.Store);t.default=new C(i.default,{SKU_PURCHASE_MODAL_OPEN:function(e){b(),u=e.skuId,c=e.applicationId,m=e.isIAP,f=e.analyticsLocation,g=e.context,v=!0,_=e.resolve,E=e.reject,y=null,p=null},SKU_PURCHASE_MODAL_CLOSE:function(e){var t=e.error;v=!1,g=null,b(t)},SKU_PURCHASE_PREVIEW_FETCH_SUCCESS:function(e){var t,n=e.skuId,r=e.paymentSourceId,a=e.price;d=o({},d,((t={})[S(n,r)]=a,t))},SKU_PURCHASE_START:function(e){h=!0},SKU_PURCHASE_SUCCESS:function(e){h=!1,p=e.entitlements},SKU_PURCHASE_FAIL:function(e){var t=e.error;h=!1,y=t},SKU_PURCHASE_CLEAR_ERROR:function(e){y=null},OVERLAY_SET_LOCKED:function(e){if(!e.locked||g!==l.AppContext.OVERLAY)return!1;v=!1,g=null,b()}}),e.exports=t.default},6150:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.Background=H;var i=x(n(1)),l=U(n(147)),s=U(n(166)),u=U(n(3)),c=U(n(11)),f=n(955),d=n(527),p=U(n(20)),h=(n(529),U(n(27))),y=U(n(525)),m=U(n(279)),v=U(n(6149)),g=x(n(981)),_=x(n(1014)),E=n(979),b=n(6334),S=U(b),C=U(n(6057)),A=U(n(6333)),T=U(n(123)),I=U(n(520)),O=U(n(40)),M=U(n(79)),N=U(n(224)),P=U(n(372)),R=U(n(6161)),w=U(n(6326)),L=U(n(6)),D=n(0),k=U(n(5577));function U(e){return e&&e.__esModule?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var F=(0,s.default)({UNSUPPORTED_OS:null,TEST_MODE:null}),V=880;function H(e){var t=e.application.getSplashURL(V),n=null!=t?"url("+t+")":null;return a("div",{className:k.default.backgroundImage,style:{backgroundImage:n}})}var Y=a(N.default,{}),K=function(e){function t(){var n,r,i,s,u=this;j(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=G(this,e.call.apply(e,[this].concat(f))),r.state={paymentSourceId:null,skuPrice:v.default.getPrice(r.props.skuId)},r._loadId=l.default.v4(),r._stepStartTime=Date.now(),r._flowStartTime=Date.now(),r.handlePaymentSourceChange=function(e){var t=r.props,n=t.applicationId,o=t.skuId;null!=e?(g.fetchPurchasePreview(n,o,e.id),r.setState({paymentSourceId:e.id})):r.setState({paymentSourceId:null})},r.handlePurchase=(i=regeneratorRuntime.mark(function e(t){var n,a,i,l,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props,a=n.applicationId,i=n.sku,l=r.getPrice(),s=null!=l?l.amount:0,null!=i){e.next=5;break}throw new Error("SKU is null during purchase");case 5:return e.prev=5,p.default.track(D.AnalyticEvents.PAYMENT_FLOW_COMPLETED,o({},r.getBaseAnalyticsData(),{duration_ms:Date.now()-r._flowStartTime})),e.next=9,g.purchaseSKU(a,i.id,s,t.id,r._loadId);case 9:(0,E.acceptPurchaseTerms)(),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(5),p.default.track(D.AnalyticEvents.PAYMENT_FLOW_FAILED,o({},r.getBaseAnalyticsData(),{payment_gateway:t.type===D.PaymentSourceTypes.CARD?D.PaymentGateways.STRIPE:D.PaymentGateways.BRAINTREE,payment_source_id:t.id,duration_ms:Date.now()-r._flowStartTime,payment_error_code:e.t0.code})),e.t0;case 16:case"end":return e.stop()}},e,u,[[5,12]])}),s=function(){var e=i.apply(this,arguments);return new Promise(function(t,n){return function r(o,a){try{var i=e[o](a),l=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});t(l)}("next")})},function(e){return s.apply(this,arguments)}),r.handleClose=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=r.props;(0,t.onClose)(t.isIAP,e)},r.trackStepChange=function(e,t){var n=Date.now();p.default.track(D.AnalyticEvents.PAYMENT_FLOW_STEP,o({},r.getBaseAnalyticsData(),{from_step:e,to_step:t,step_duration_ms:n-r._stepStartTime,flow_duration_ms:n-r._flowStartTime})),r._stepStartTime=n},r.renderHeader=function(e,t,n){var o=r.props.application;switch(e){case b.Steps.CONFIRM:return a(H,{application:o});default:return r.renderDefaultHeader(e,t,n)}},r.renderConfirmation=function(){var e=r.props,t=e.application,n=e.sku,o=e.isIAP;if(null==n)throw new Error("No SKU for confirmation step!");return a("div",{className:k.default.confirmContent},void 0,a(O.default,{direction:O.default.Direction.VERTICAL},void 0,a(T.default.CloseButton,{onClick:function(){return r.handleClose()},className:k.default.confirmCloseButton}),a(w.default,{application:t,sku:n,isIAP:o,onClose:function(){return r.handleClose()}})))},G(r,n)}return B(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.sku,r=t.skuId,o=t.applicationId;null==n?g.fetchSKU(o,r).catch(function(t){return e.handleClose(t.message)}):p.default.track(D.AnalyticEvents.PAYMENT_FLOW_STARTED,this.getBaseAnalyticsData())},t.prototype.componentDidUpdate=function(e){null==e.sku&&null!=this.props.sku&&p.default.track(D.AnalyticEvents.PAYMENT_FLOW_STARTED,this.getBaseAnalyticsData())},t.getDerivedStateFromProps=function(e,t){var n=v.default.getPrice(e.skuId,t.paymentSourceId);return t.skuPrice!==n?{skuPrice:n}:null},t.prototype.getPrice=function(){var e=this.props,t=e.sku,n=e.isFetchingSKU;if(null==t||n)return null;var r=this.state,o=r.skuPrice,a=r.paymentSourceId,i=t.getPrice();if(null==i)throw new Error("Sku Price cannot be null");return null!=o?{amount:o.amount,tax:o.tax,taxInclusive:o.tax_inclusive,currency:o.currency}:null==a?{amount:i.amount,tax:0,currency:i.currency,taxInclusive:!1}:null},t.prototype.getBaseAnalyticsData=function(){var e=this.props,t=e.sku,n=e.analyticsLocation;if(null==t)return{};var r=this.getPrice();return{load_id:this._loadId,payment_type:"sku",location:n,sku_id:t.id,sku_type:t.type,price:null!=r?r.amount:null,currency:null!=r?r.currency:null}},t.prototype.renderPurchaseWarning=function(){var e=this.props,t=e.sku,n=e.isInTestMode,r=e.isIAP;if(null==t)return null;var o=(0,d.nativePlatformTypeToSKUOperatingSystem)(c.default.getPlatform()),l=[];if(!(null!=o&&t.supportedOperatingSystems.includes(o)||r)){if(1!==t.supportedOperatingSystems.length)throw new Error("Unexpected number of supported operating systems");l.push(a(A.default,{icon:M.default.Names.WARNING_BOX,color:A.default.Colors.WARNING,className:k.default.errorBlock},F.UNSUPPORTED_OS,L.default.Messages.APPLICATION_STORE_PURCHASE_GAME_UNSUPPORTED_OS.format({operatingSystem:(0,d.skuOperatingSystemToText)(t.supportedOperatingSystems[0])})))}return n&&l.push(a(A.default,{icon:M.default.Names.WARNING_BOX,color:A.default.Colors.WARNING,className:k.default.errorBlock},F.TEST_MODE,L.default.Messages.APPLICATION_STORE_PURCHASE_TEST_MODE)),a(i.Fragment,{},void 0,l)},t.prototype.renderGenericError=function(e,t){return null==e&&null==t?null:a(C.default,{className:k.default.errorBlock},void 0,null!=e?e.message:null!=t?t.message:null)},t.prototype.renderDefaultHeader=function(e,t,n){var r=this,o=this.props,i=o.isIAP,l=o.application,s=o.sku,u=o.purchaseError;if(null==s)return null;var c=this.getPrice();return a(T.default.Header,{direction:O.default.Direction.VERTICAL,align:O.default.Align.START,separator:!1},void 0,a(H,{application:l}),a(O.default,{align:O.default.Align.CENTER,className:k.default.headerHeader},void 0,a(I.default.FormTitle,{tag:I.default.FormTitleTags.H4},void 0,i?L.default.Messages.APPLICATION_STORE_PURCHASE_IAP:L.default.Messages.APPLICATION_STORE_PURCHASE_APPLICATION),a(T.default.CloseButton,{onClick:function(){return r.handleClose()}})),a(O.default,{align:O.default.Align.CENTER,className:k.default.headerContent},void 0,a(O.default,{align:O.default.Align.CENTER},void 0,a(P.default,{game:l}),a("div",{className:k.default.applicationName},void 0,s.name)),a("div",{className:k.default.price},void 0,null!=c?(0,f.formatPrice)(c.amount,c.currency):a(N.default,{type:N.default.Type.PULSING_ELLIPSIS,className:k.default.priceSpinner}))),this.renderPurchaseWarning(),this.renderGenericError(u,n),t.length>1?a(R.default,{activeId:e,breadcrumbs:t,className:k.default.breadcrumbs}):null)},t.prototype.render=function(){var e=this,t=this.props,n=t.sku,r=t.isFetchingSKU,o=t.isPurchasing,i=t.purchaseError;return null==n||r?Y:a(S.default,{canSubmit:null!=this.state.skuPrice,isPurchasing:o,purchaseError:i,price:this.getPrice(),size:k.default.modalSize,onPurchase:this.handlePurchase,onPaymentSourceChange:this.handlePaymentSourceChange,onClose:function(){return e.handleClose()},onClearError:g.clearPurchaseError,renderHeader:this.renderHeader,renderConfirmationBody:this.renderConfirmation,submitButtonText:L.default.Messages.APPLICATION_STORE_BUY,onStepChange:this.trackStepChange})},t}(i.PureComponent),W=u.default.connectStores([h.default,y.default,v.default,m.default],function(e){var t=e.applicationId,n=e.skuId,r=e.location;return{application:h.default.getGame(t),sku:y.default.get(n),location:r,skuId:n,applicationId:t,isFetchingSKU:y.default.isFetching(n),isPurchasing:v.default.isPurchasingSKU,purchaseError:v.default.error,analyticsLocation:v.default.analyticsLocation,isIAP:v.default.isIAP,isInTestMode:m.default.inTestModeForApplication(t)}})(K),z=function(e){function t(){return j(this,t),G(this,e.apply(this,arguments))}return B(t,e),t.prototype.handleClose=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_.closeSKUPaymentModal(e)},t.prototype.render=function(){return i.createElement(W,o({},this.props,{onClose:this.handleClose}))},t}(i.PureComponent);z.modalConfig={closable:!1,store:v.default},t.default=z},6153:function(e,t,n){"use strict";t.__esModule=!0,t.MARK_CHANNEL_READ=void 0;var r=n(0),o=n(143),a=d(n(225)),i=d(n(65)),l=d(n(271)),s=n(6129),u=d(n(145)),c=d(n(363)),f=d(n(975));function d(e){return e&&e.__esModule?e:{default:e}}var p=t.MARK_CHANNEL_READ={binds:["esc","shift+pagedown"],global:!0,action:function(){if(o.ComponentDispatch.hasSubscribers(r.ComponentActions.CALL_DECLINE))return o.ComponentDispatch.dispatch(r.ComponentActions.CALL_DECLINE),!1;if(f.default.isOpen())return o.ComponentDispatch.dispatch(r.ComponentActions.CONTEXT_MENU_CLOSE),!1;if(o.ComponentDispatch.hasSubscribers(r.ComponentActions.POPOUT_CLOSE))return o.ComponentDispatch.dispatch(r.ComponentActions.POPOUT_CLOSE),!1;if(o.ComponentDispatch.hasSubscribers(r.ComponentActions.MODAL_CLOSE))return o.ComponentDispatch.dispatch(r.ComponentActions.MODAL_CLOSE),!1;var e=a.default.getGuildId(),t=i.default.getChannelId(e);t&&(l.default.getMessages(t).hasMoreAfter&&u.default.jumpToPresent(t,r.MAX_MESSAGES_PER_CHANNEL),c.default.hasUnread(t)&&(0,s.ack)(t),(0,s.localAck)(t));return o.ComponentDispatch.dispatch(r.ComponentActions.SCROLLTO_PRESENT),!1}};t.default={MARK_CHANNEL_READ:p}},6161:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=p(n(9)),l=n(79),s=p(l),u=p(n(974)),c=p(n(87)),f=p(n(40)),d=p(n(5776));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,f=Array(a),p=0;p<a;p++)f[p]=arguments[p];return n=r=h(this,e.call.apply(e,[this].concat(f))),r.renderBreadcrumb=function(e,t){var n,a=r.props,f=a.activeId,p=a.onClick,h=a.breadcrumbs;return o("div",{className:d.default.breadcrumbWrapper},e.id,o(c.default,{tag:"span",onClick:function(){return r.handleClick(e)},className:(0,i.default)((n={},n[d.default.activeBreadcrumb]=e.id===f,n[d.default.interactiveBreadcrumb]=null!=p,n))},void 0,e.label),t!==h.length-1?o(s.default,{className:d.default.breadcrumbArrow,name:l.IconNames.CARET,direction:u.default.Directions.RIGHT}):null)},h(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleClick=function(e){var t=this.props.onClick;null!=t&&t(e)},t.prototype.render=function(){var e=this.props,t=e.breadcrumbs,n=e.className,r=t.map(this.renderBreadcrumb);return o(f.default,{justify:f.default.Justify.START,className:n},void 0,r)},t}(a.PureComponent);t.default=y,e.exports=t.default},6162:function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(7164),a=(r=o)&&r.__esModule?r:{default:r};var i={type:"",gaps:[4,8,12],lengths:[16],code:{name:"CVV",size:3}},l=/[^0-9]/g,s=/[^0-9/]/g;function u(e){for(var t=c(e).split(""),n=f(e),r=0;r<n.gaps.length;){var o=n.gaps[r]+r;if(!(o<t.length))break;t.splice(o,0," "),r+=1}return t.join("")}function c(e){return e.replace(l,"")}function f(e){var t=c(e);return t&&(0,a.default)(t)[0]||i}t.default={DEFAULT_CARD_TYPE:i,prettifyCreditCardNumber:u,formatCreditCardNumber:function(e){var t=c(e);return f(t),u(t)},getCreditCardType:f,cleanCardNumber:c,validateCardNumber:function(e){var t=f(e);if(null==t)throw new Error("Could not recognize card type.");if(!t.lengths.includes(e.length))throw new Error("Card number length is incorrect.")},getTypeInfo:function(e){return a.default.getTypeInfo(e)},formatExpiration:function(e){var t=e.replace(s,"").split("/"),n=t[0],r=t[1],o=[];return parseInt(n,10)>12&&(n=n.substring(0,1)),o.push(n),(parseInt(n,10)>1||2===n.length||r)&&o.push("/"),r&&parseInt(r,10)>99&&(r=(r+"").substring(0,2)),o.push(r),o.join("")}},e.exports=t.default},6163:function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(3)),a=i(n(2));n(0),n(529);function i(e){return e&&e.__esModule?e:{default:e}}var l="",s=null,u="",c="",f="",d=!1,p="",h="",y="",m="",v="",g="",_="",E=!1,b=null;function S(){l="",s=null,u="",c="",f="",d=!1,p="",h="",y="",m="",v="",g="",_="",E=!1,b=null}function C(){b=null}function A(e){var t=e.error;b=t}var T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getCreditCardInfo=function(){return{name:h,cardNumber:u,expirationDate:c,cvc:f}},t.prototype.getBillingAddressInfo=function(){return{name:h,country:p,line1:y,line2:m,city:v,postalCode:g,state:_}},r(t,[{key:"braintreeEmail",get:function(){return l}},{key:"braintreeNonce",get:function(){return s}},{key:"isCardInfoValid",get:function(){return d}},{key:"isBillingAddressInfoValid",get:function(){return E}},{key:"error",get:function(){return b}}]),t}(o.default.Store);t.default=new T(a.default,{NEW_PAYMENT_SOURCE_CARD_INFO_UPDATE:function(e){var t=e.info,n=e.isValid;u=t.cardNumber,c=t.expirationDate,f=t.cvc,h=t.name,d=n},NEW_PAYMENT_SOURCE_ADDRESS_INFO_UPDATE:function(e){var t=e.info,n=e.isValid;p=t.country,y=t.line1,m=t.line2,v=t.city,g=t.postalCode,_=t.state,E=n},BRAINTREE_TOKENIZE_PAYPAL_START:function(e){return l="",void(s=null)},BRAINTREE_TOKENIZE_PAYPAL_SUCCESS:function(e){var t=e.email,n=e.nonce,r=e.billingAddress;l=t,s=n,h=r.name,p=r.country,y=r.line1,m=r.line2,v=r.city,g=r.postalCode,_=r.state,E=p.length>0},BILLING_PAYMENT_SOURCE_CREATE_START:function(e){return C()},MODAL_POP:function(e){return C()},NEW_PAYMENT_SOURCE_CLEAR_ERROR:function(e){return C()},BILLING_PAYMENT_SOURCE_CREATE_FAIL:A,STRIPE_TOKEN_FAILURE:A,BILLING_PAYMENT_SOURCE_CREATE_SUCCESS:function(e){return S()},LOGOUT:function(e){return S()}}),e.exports=t.default},6164:function(e,t,n){"use strict";t.__esModule=!0;var r,o,a,i,l,s=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),f=E(n(7168)),d=E(n(7167)),p=E(n(7166)),h=(n(529),E(n(939))),y=E(n(944)),m=E(n(6394)),v=E(n(6)),g=n(0),_=E(n(5566));function E(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S="US",C="CA",A=f.default.map(function(e){return{value:e.code,label:e.name}}),T=Object.freeze({NAME:"name",COUNTRY:"country",LINE1:"line1",LINE2:"line2",CITY:"city",POSTAL_CODE:"postalCode",STATE:"state"}),I=Object.freeze({MODAL:"modal",SETTINGS:"settings"}),O=Object.freeze({EDIT:"edit",CREATE:"create"}),M=((o={})[S]=d.default,o[C]=p.default,o),N=((a={})[T.NAME]=function(e){return{name:T.NAME,title:v.default.Messages.BILLING_ADDRESS_NAME,autoComplete:"name",getClassNameForLayout:function(e){return e===I.MODAL?_.default.width100:_.default.width60},renderInput:function(e){return c.createElement(h.default,e)}}},a[T.COUNTRY]=function(e){return{name:T.COUNTRY,title:v.default.Messages.BILLING_ADDRESS_COUNTRY,autoComplete:"country",getClassNameForLayout:function(e){return e===I.MODAL?_.default.width100:_.default.width75},renderInput:function(e,t){return c.createElement(y.default,u({},e,{autofocus:!0,clearable:!1,disabled:t.mode===O.EDIT,options:A,onChange:function(t){var n=t.value;null!=e.onChange&&e.onChange(n,e.name)}}))}}},a[T.LINE1]=function(e){return{name:T.LINE1,title:v.default.Messages.BILLING_ADDRESS_ADDRESS,autoComplete:"address-line1",placeholder:v.default.Messages.BILLING_ADDRESS_ADDRESS_PLACEHOLDER,getClassNameForLayout:function(e){return e===I.MODAL?_.default.width100:_.default.width60},renderInput:function(e){return c.createElement(h.default,e)}}},a[T.LINE2]=function(e){return{name:T.LINE2,title:v.default.Messages.BILLING_ADDRESS_ADDRESS2,placeholder:v.default.Messages.BILLING_ADDRESS_ADDRESS2_PLACEHOLDER,autoComplete:"address-line2",getClassNameForLayout:function(e){return e===I.MODAL?_.default.width100:_.default.width40},renderInput:function(e){return c.createElement(h.default,e)}}},a[T.CITY]=function(e){return{name:T.CITY,title:v.default.Messages.BILLING_ADDRESS_CITY,autoComplete:"address-level2",placeholder:v.default.Messages.BILLING_ADDRESS_CITY_PLACEHOLDER,getClassNameForLayout:function(e){return e===I.MODAL?_.default.width100:_.default.width50},renderInput:function(e){return c.createElement(h.default,e)}}},a[T.POSTAL_CODE]=function(e){var t=void 0,n=void 0;switch(e){case S:t=v.default.Messages.BILLING_ADDRESS_ZIP_CODE,n=v.default.Messages.BILLING_ADDRESS_ZIP_CODE_PLACEHOLDER;break;case C:t=v.default.Messages.BILLING_ADDRESS_POSTAL_CODE,n=v.default.Messages.BILLING_ADDRESS_POSTAL_CODE_CANADA_PLACEHOLDER;break;default:t=v.default.Messages.BILLING_ADDRESS_POSTAL_CODE}return{name:T.POSTAL_CODE,title:t,autoComplete:"postal-code",placeholder:n,getClassNameForLayout:function(e){return e===I.MODAL?_.default.width50:_.default.width25},renderInput:function(e){return c.createElement(h.default,e)}}},a[T.STATE]=function(e){var t=void 0;switch(e){case S:t=v.default.Messages.BILLING_ADDRESS_STATE;break;case C:t=v.default.Messages.BILLING_ADDRESS_PROVINCE;break;default:t=v.default.Messages.BILLING_ADDRESS_REGION}return{name:T.STATE,title:t,autoComplete:"address-level1",getClassNameForLayout:function(e){return e===I.MODAL?_.default.width50:_.default.width25},renderInput:function(t){var n=M[e],r=!t.value||null!=n&&n.find(function(e){return e.value===t.value});return[S,C].includes(e)&&r?c.createElement(y.default,u({},t,{menuContainerStyle:t.layout===I.MODAL?{zIndex:9,position:"absolute",bottom:"100%",top:"auto"}:null,clearable:!1,options:M[e],onChange:function(e){var n=e.value;null!=t.onChange&&t.onChange(n,t.name)}})):c.createElement(h.default,t)}}},a),P=((i={})[I.MODAL]=[[N[T.COUNTRY]],[N[T.LINE1]],[N[T.LINE2]],[N[T.CITY]],[N[T.STATE],N[T.POSTAL_CODE]]],i[I.SETTINGS]=[[N[T.NAME]],[N[T.LINE1],N[T.LINE2]],[N[T.CITY],N[T.STATE],N[T.POSTAL_CODE]],[N[T.COUNTRY]]],i),R=function(e){function t(){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=o=b(this,e.call.apply(e,[this].concat(i))),o.state={values:(n={},n[T.NAME]=o.props[T.NAME],n[T.COUNTRY]=o.props[T.COUNTRY],n[T.LINE1]=o.props[T.LINE1],n[T.LINE2]=o.props[T.LINE2],n[T.CITY]=o.props[T.CITY],n[T.POSTAL_CODE]=o.props[T.POSTAL_CODE],n[T.STATE]=o.props[T.STATE],n),dirtyFields:{},errors:{}},o.handleFieldBlur=function(){o.setState({errors:o.validateForm(!0)})},o.handleFieldChange=function(e,t){var n,r;if(t){var a=o.state,i=a.values,l=a.errors,s=a.dirtyFields;delete l[t],o.setState({values:u({},i,(n={},n[t]=e,n)),dirtyFields:u({},s,(r={},r[t]=!0,r)),errors:l})}},b(o,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.handleInfoChange()},t.prototype.componentDidUpdate=function(e,t){this.state!==t&&this.handleInfoChange()},t.prototype.validateForm=function(e){var t=this.state,n=t.values,r=t.dirtyFields,o={};e&&!r[T.NAME]||n[T.NAME]||this.props.mode!==O.EDIT||(o[T.NAME]=v.default.Messages.BILLING_ADDRESS_NAME_ERROR_REQUIRED),e&&!r[T.COUNTRY]||n[T.COUNTRY]||(o[T.COUNTRY]=v.default.Messages.BILLING_ADDRESS_COUNTRY_ERROR_REQUIRED),e&&!r[T.LINE1]||n[T.LINE1]||(o[T.LINE1]=v.default.Messages.BILLING_ADDRESS_ADDRESS_ERROR_REQUIRED),e&&!r[T.CITY]||n[T.CITY]||(o[T.CITY]=v.default.Messages.BILLING_ADDRESS_CITY_ERROR_REQUIRED);var a=n[T.COUNTRY];switch(a){case S:if(!e||r[T.POSTAL_CODE]){var i=n[T.POSTAL_CODE];i?5!==i.length?o[T.POSTAL_CODE]=v.default.Messages.BILLING_ADDRESS_ZIP_CODE_ERROR_LENGTH:/^\d{5}$/.test(i)||(o[T.POSTAL_CODE]=v.default.Messages.BILLING_ADDRESS_ZIP_CODE_INVALID):o[T.POSTAL_CODE]=v.default.Messages.BILLING_ADDRESS_ZIP_CODE_ERROR_REQUIRED}e&&!r[T.STATE]||n[T.STATE]||(o[T.STATE]=v.default.Messages.BILLING_ADDRESS_STATE_ERROR_REQUIRED);break;case C:e&&!r[T.POSTAL_CODE]||n[T.POSTAL_CODE]||(o[T.POSTAL_CODE]=v.default.Messages.BILLING_ADDRESS_POSTAL_CODE_ERROR_REQUIRED),e&&!r[T.STATE]||n[T.STATE]||(o[T.STATE]=v.default.Messages.BILLING_ADDRESS_PROVINCE_ERROR_REQUIRED);break;default:e&&!r[T.POSTAL_CODE]||n[T.POSTAL_CODE]||g.COUNTRIES_WITHOUT_POSTAL_CODES.includes(a)||(o[T.POSTAL_CODE]=v.default.Messages.BILLING_ADDRESS_POSTAL_CODE_ERROR_REQUIRED)}return o},t.prototype.handleInfoChange=function(){var e=this.state,t=e.values,n=e.dirtyFields,r=this.validateForm(!1);this.props.onBillingAddressChange(t,0===Object.keys(r).length,Object.keys(n).length>0)},t.prototype.render=function(){var e=this.state,t=e.errors,n=e.values,r=this.props,o=r.layout,a=r.mode,i=r.className,l=r.error,u=P[o];if(null==u)throw new Error("Provide a proper layout property.");var c=n[T.COUNTRY],f=u.map(function(e){var t=e.map(function(e){return e(c)}).filter(Boolean);return t.length>0?{fields:t}:null}).filter(Boolean);return s(m.default,{className:i,form:f,layout:o,values:n,errors:t,formError:l,onFieldChange:this.handleFieldChange,onFieldBlur:this.handleFieldBlur,mode:a})},t}(c.PureComponent);R.Layouts=I,R.Modes=O,R.defaultProps=((l={})[T.NAME]="",l[T.COUNTRY]="",l[T.LINE1]="",l[T.LINE2]="",l[T.CITY]="",l[T.POSTAL_CODE]="",l[T.STATE]="",l.layout=I.MODAL,l.mode=O.CREATE,l.error=null,l),t.default=R,e.exports=t.default},6225:function(e,t,n){"use strict";t.__esModule=!0,t.JUMP_TO_GUILD=void 0;var r=n(0),o=s(n(538)),a=s(n(65)),i=s(n(225)),l=s(n(41));function s(e){return e&&e.__esModule?e:{default:e}}var u=t.JUMP_TO_GUILD={binds:function(){for(var e=[],t=1;t<10;t++)e.push("mod+"+t);return e}(),global:!0,action:function(e,t){var n=parseInt(t.split("+")[1],10);if(0===n&&(n=10),n){var s=void 0;if(s=1===n?r.ME:o.default.guildPositions[n-2]){var u=a.default.getChannelId(s);return s===r.ME&&null==i.default.getGuildId()&&(u=null),l.default.transitionTo(u?r.Routes.CHANNEL(s,u):r.Routes.GUILD(s)),!1}}}};t.default={JUMP_TO_GUILD:u}},6228:function(e,t,n){"use strict";t.__esModule=!0,t.SearchContext=void 0;var r=c(n(3)),o=c(n(2)),a=c(n(59)),i=c(n(18)),l=c(n(12)),s=n(0),u=c(n(147));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=null,p=10;function h(e){null!=d&&(e=e.filter(function(e){return null!=e}),d.postMessage({type:s.UserSearchWorkerMessageTypes.UPDATE_USERS,payload:e}))}function y(e){if(null==e||a.default.isBlocked(e.id))return null;var t={id:e.id,username:e.username+"#"+e.discriminator};return e.bot&&(t.isBot=!0),a.default.isFriend(e.id)&&(t.isFriend=!0),t}function m(e,t,n){null!=e&&(e[t]=n||null)}function v(e,t){var n=[];return e.forEach(function(e){var r=y(e.user);m(r,t,e.nick),n.push(r)}),n}function g(e){var t=e.guildId,n=e.user,r=e.nick,o=y(n);return null!=o&&(m(o,t,r),h([o])),!1}function _(e){var t=e.channel.id,n=E(i.default.getChannel(t));if(0===n.length)return!1;var r=y(l.default.getCurrentUser());return m(r,t),n.push(r),h(n),!1}function E(e){var t=[];if(null==e||e.type!==s.ChannelTypes.DM&&e.type!==s.ChannelTypes.GROUP_DM)return t;var n=e.recipients;return(void 0===n?[]:n).forEach(function(n){var r=y(l.default.getUser(n));null!=e&&m(r,e.id),t.push(r)}),t}var b=t.SearchContext=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;f(this,e),this.handleMessages=function(e){var t=e.data;t&&t.type===s.UserSearchWorkerMessageTypes.USER_RESULTS&&t.uuid===n._uuid&&(!1!==n._currentQuery&&n._callback(t.payload),null!=n._currentQuery&&(n._currentQuery=null),n._setNextQuery())},this._uuid=u.default.v4(),this._callback=t,this._limit=r,this._currentQuery=null,this._nextQuery=null,this._subscribed=!1,this._subscribe()}return e.prototype._subscribe=function(){null==d||this._subscribed||(d.addEventListener("message",this.handleMessages,!1),this._subscribed=!0,this._setNextQuery())},e.prototype._unsubscribe=function(){null!=d&&this._subscribed&&(d.removeEventListener("message",this.handleMessages,!1),this._subscribed=!1)},e.prototype.destroy=function(){this._unsubscribe(),this.clearQuery()},e.prototype.clearQuery=function(){this._currentQuery=!1,this._nextQuery=null,null!=d&&this._subscribed&&d.postMessage({uuid:this._uuid,type:s.UserSearchWorkerMessageTypes.QUERY_CLEAR})},e.prototype.setQuery=function(e,t,n,r,o){null!=e&&(this._nextQuery={query:e,filters:t,blacklist:n,whitelist:r,boosters:o||{},limit:this._limit},this._setNextQuery())},e.prototype._setNextQuery=function(){!this._currentQuery&&this._nextQuery&&(null!=d&&this._subscribed?(this._currentQuery=this._nextQuery,this._nextQuery=null,d.postMessage({uuid:this._uuid,type:s.UserSearchWorkerMessageTypes.QUERY_SET,payload:this._currentQuery})):this._subscribed||this._subscribe())},e}(),S=function(e){function t(){return f(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.initialize=function(){this.waitFor(a.default,i.default,l.default)},t.prototype.getSearchContext=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return new b(e,t)},t}(r.default.Store);t.default=new S(o.default,{LOGOUT:function(e){null!=d&&(d.terminate(),d=null)},CONNECTION_OPEN:function(e){var t=e.user,r=e.guilds,o=e.channels,a=e.relationships;null!=d&&d.terminate(),d=new(n(6598));var l=y(t),u=[l];return r.forEach(function(e){u=u.concat(v(e.members,e.id))}),o.forEach(function(e){var t=e.id,n=i.default.getChannel(t);null==n||n.type!==s.ChannelTypes.DM&&n.type!==s.ChannelTypes.GROUP_DM||(m(l,n.id),u=u.concat(E(n)))}),a.forEach(function(e){var t=e.user;u.push(y(t))}),h(u),!1},OVERLAY_INITIALIZE:function(e){var t=e.users,r=e.guildMembers;null!=d&&d.terminate(),d=new(n(6598));var o=new Map,a=t,i=Array.isArray(a),l=0;for(a=i?a:a[Symbol.iterator]();;){var s;if(i){if(l>=a.length)break;s=a[l++]}else{if((l=a.next()).done)break;s=l.value}var u=s;o.set(u.id,y(u))}var c=Object.keys(r),f=Array.isArray(c),p=0;for(c=f?c:c[Symbol.iterator]();;){var v;if(f){if(p>=c.length)break;v=c[p++]}else{if((p=c.next()).done)break;v=p.value}var g=v,_=r[g];if(null!=_){var E=Object.keys(_),b=Array.isArray(E),S=0;for(E=b?E:E[Symbol.iterator]();;){var C;if(b){if(S>=E.length)break;C=E[S++]}else{if((S=E.next()).done)break;C=S.value}var A=C,T=o.get(A),I=_[A];null!=T&&null!=I&&null!=I.nick&&(m(T,g,I.nick),o.set(A,T))}}}return h(Array.from(o.values())),o.clear(),!1},CURRENT_USER_UPDATE:function(e){var t=y(e.user);return t&&h([t]),!1},GUILD_CREATE:function(e){var t=e.guild;return h(v(t.members,t.id)),!1},GUILD_MEMBERS_CHUNK:function(e){return h(v(e.members,e.guildId)),!1},GUILD_MEMBER_ADD:g,GUILD_MEMBER_UPDATE:g,RELATIONSHIP_ADD:function(e){return h([y(e.relationship.user)]),!1},CHANNEL_CREATE:_,CHANNEL_UPDATE:_,CHANNEL_RECIPIENT_ADD:function(e){var t=e.channelId,n=y(e.user);m(n,t),h([n])}})},6230:function(e,t,n){"use strict";t.__esModule=!0,t.TabBarSeparator=t.TabBarItem=t.TabBarHeader=t.TabBarTypes=void 0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=u(n(9)),l=u(n(166)),s=u(n(87));function u(e){return e&&e.__esModule?e:{default:e}}n(5869);var c=t.TabBarTypes=(0,l.default)({SIDE:null,TOP:null,UNIQUE:null}),f=t.TabBarHeader=function(e){var t=e.className,n=e.onClick,r=e.children;return o(s.default,{className:(0,i.default)("tab-bar-header",t),onClick:n},void 0,r)},d=t.TabBarItem=function(e){var t=e.className,n=e.onClick,r=e.children;return o(s.default,{className:(0,i.default)("tab-bar-item",t),onClick:n},void 0,r)},p=o("div",{className:"tab-bar-separator"}),h=(t.TabBarSeparator=function(){return p},function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.selectedItem,n=e.onItemSelect,r=e.className,l=e.type,s=a.Children.map(this.props.children,function(e){if(null==e)return e;var r=void 0;if(e.type===f||e.type.displayName===f.name)r={key:"HEADER"};else if(e.type===d||e.type.displayName===d.name){var o=e.props,l=o.onClick,s=o.className;r={className:(0,i.default)(s,{selected:e.key===t}),onClick:function(){n&&n(e.key),l&&l.apply(void 0,arguments)}}}return a.cloneElement(e,r)});return o("div",{className:(0,i.default)("tab-bar",r,l)},void 0,s)},t}(a.Component));h.defaultProps={type:c.SIDE},t.default=h},6231:function(e,t,n){"use strict";(function(r){t.__esModule=!0;var o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,r){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=r;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),l=j(n(1)),s=x(n(3)),u=x(n(9)),c=x(n(8)),f=x(n(541)),d=x(n(123)),p=x(n(40)),h=x(n(87)),y=x(n(543)),m=x(n(265)),v=x(n(67)),g=x(n(224)),_=x(n(142)),E=x(n(947)),b=x(n(942)),S=x(n(79)),C=x(n(1019)),A=x(n(60)),T=x(n(18)),I=x(n(271)),O=x(n(12)),M=x(n(31)),N=j(n(550)),P=n(33),R=x(n(235)),w=x(n(81)),L=x(n(76)),D=x(n(234)),k=n(0),U=x(n(5874));function x(e){return e&&e.__esModule?e:{default:e}}function j(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var V=function(e){function t(){return G(this,t),B(this,e.apply(this,arguments))}return F(t,e),t.prototype.render=function(){var e,t=this.props,n=t.emoji,r=t.count,o=t.selected,a=t.setSelected,l=null==n.id?R.default.getURL(n.name):w.default.getEmojiURL({id:n.id,animated:n.animated}),s=void 0;s=null==n.id?D.default.convertSurrogateToName(n.name):":"+n.name+":";var c=l?i("img",{className:U.default.emoji,src:l,alt:n.name}):i("span",{className:(0,u.default)(U.default.emoji,U.default.emojiText)},void 0,n.name);return i(_.default,{position:_.default.Positions.LEFT,text:s},void 0,i(h.default,{className:(0,u.default)((e={},e[U.default.reactionDefault]=!o,e[U.default.reactionSelected]=o,e)),onClick:a},void 0,c,i(v.default,{color:v.default.Colors.PRIMARY,className:U.default.count},void 0,r)))},t}(l.PureComponent),H=function(e){function t(n){G(this,t);var r=B(this,e.call(this,n));return r.renderUserContextMenu=r.renderUserContextMenu.bind(r),r.removeReaction=r.removeReaction.bind(r),r}return F(t,e),t.prototype.removeReaction=function(){var e=this.props,t=e.emoji,n=e.user,r=e.message,o=e.channel;N.removeReaction(o.id,r.id,t,n.id)},t.prototype.renderUserContextMenu=function(e){var t=this;(0,P.openContextMenu)(e,function(e){return l.createElement(b.default,a({},e,{type:k.ContextMenuTypes.USER_CHANNEL_MEMBERS,user:t.props.user,guildId:t.props.guildId,channelId:t.props.channel.id}))})},t.prototype.render=function(){var e,t=this.props,n=t.user,r=t.guildId,o=t.channel,a=t.final,l=L.default.can(k.Permissions.MANAGE_MESSAGES,O.default.getCurrentUser(),o)?i(h.default,{onClick:this.removeReaction},void 0,i(S.default,{name:S.default.Names.CLOSE,width:16,height:16,className:U.default.remove})):null,s=null!=r&&A.default.getNick(r,n.id);return i(p.default,{className:(0,u.default)((e={},e[U.default.reactorDefault]=!a,e[U.default.reactorFinal]=a,e)),onContextMenu:this.renderUserContextMenu,align:p.default.Align.CENTER},void 0,i(p.default.Child,{wrap:!0,grow:0,shrink:0,className:"margin-reset"},void 0,i(E.default,{user:n,size:"xsmall"})),i(p.default.Child,{},void 0,i(v.default,{color:v.default.Colors.PRIMARY,className:U.default.name},void 0,s&&i("span",{className:U.default.nickname},void 0,s),i(f.default,{user:n,className:s?U.default.tagFaded:U.default.tag,discriminatorClass:U.default.discriminator}))),l)},t}(l.PureComponent),Y=s.default.connectStores([C.default],function(e){var t=e.message,n=e.reaction,r=C.default.getReactions(t.getChannelId(),t.id,n.emoji);return{hasMore:n.count>Object.keys(r).length,reactors:Object.values(r)}})(function(e){function t(n){G(this,t);var r=B(this,e.call(this,n));return r.handleScroll=r.handleScroll.bind(r),r.state={lastId:null,loadingMore:!1},r}return F(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.loadMore()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this;c.default.isEqual(this.props.reaction,e.reaction)||this.setState({lastId:null,loadingMore:!1},function(){return t.loadMore()})},t.prototype.handleScroll=function(){var e=this.refs.SCROLLER_REF.getScrollerNode();e.scrollTop+e.offsetHeight>=e.scrollHeight-44&&this.props.hasMore&&!this.state.loadingMore&&this.loadMore()},t.prototype.loadMore=function(){var e=this,t=this.props,n=t.message,r=t.reaction,o=this.state.lastId;this.setState({loadingMore:!0}),N.getReactions(n.getChannelId(),n.id,r.emoji,o).then(function(t){return e.setState({loadingMore:!1,lastId:t[t.length-1].id})})},t.prototype.render=function(){var e=this.props,t=e.message,n=e.guildId,r=e.channel,o=e.reaction,a=e.hasMore,s=e.reactors,u=s.map(function(e,a){return i(H,{message:t,emoji:o.emoji,guildId:n,channel:r,user:e,final:a===s.length-1},e.id)});return!u.length&&this.state.loadingMore?u.push(i(g.default,{className:U.default.spinner},"loadingMore")):a&&u.push(i(g.default,{className:U.default.spinnerMore},"hasMore")),l.createElement(y.default,{outerClassName:U.default.reactors,className:"scroller",fade:!0,theme:y.default.Themes.GHOST_HAIRLINE,ref:"SCROLLER_REF",onScroll:a?this.handleScroll:void 0,elementHeight:44,batchEndMultiplier:2},u)},t}(l.PureComponent)),K=i(g.default,{}),W=function(e){function t(n){G(this,t);var r=B(this,e.call(this,n)),o=r.props.reactions;return r.state={selectedReaction:o[0]},r}return F(t,e),t.prototype.UNSAFE_componentWillUpdate=function(e){var t=this.props,n=t.reactions,o=t.onClose;n.length!==e.reactions.length&&0===e.reactions.length&&r(o)},t.prototype.setSelectedReaction=function(e){this.setState({selectedReaction:e})},t.prototype.render=function(){var e=this,t=this.props,n=t.message,r=t.reactions,o=this.state.selectedReaction;if(!o)return K;var s=T.default.getChannel(n.getChannelId());if(null==s)throw new Error("MessageReactions.render: Message does not have a channelId");var u=null==s||s.isPrivate()?null:s.getGuildId(),f=r.map(function(e,t){return a({},e,{pos:t})}).sort(function(e,t){return e.count!==t.count?t.count-e.count:e.pos-t.pos}).map(function(t){return l.createElement(V,a({key:(t.emoji.id||"")+":"+t.emoji.name,selected:c.default.isEqual(o.emoji,t.emoji),setSelected:function(){return e.setSelectedReaction(t)}},t))});return i(d.default,{size:U.default.size,className:U.default.container},void 0,i(m.default,{outerClassName:U.default.sidebar,className:U.default.scroller,theme:m.default.Themes.GHOST_HAIRLINE,fade:!0},void 0,f),i(Y,{message:n,reaction:o,guildId:u,channel:s},(o.emoji.id||"")+":"+o.emoji.name))},t}(l.PureComponent);t.default=s.default.connectStores([I.default,M.default],function(e){var t=e.message,n=I.default.getMessage(t.getChannelId(),t.id),r=null!=n?n.reactions:[];return{theme:M.default.theme,reactions:r}})(W),e.exports=t.default}).call(this,n(35).setImmediate)},6234:function(e,t,n){"use strict";t.__esModule=!0,t.Controls=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=_(n(8)),s=_(n(9)),u=_(n(189)),c=_(n(79)),f=_(n(87)),d=_(n(558)),p=_(n(163)),h=_(n(7451)),y=n(6107),m=_(n(946)),v=_(n(5879)),g=n(532);function _(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C={friction:14,tension:200},A={VIDEO:"VIDEO",AUDIO:"AUDIO"},T={width:"100%",height:"100%",backgroundColor:"black"};function I(e){var t=(e|=0)%60;return(e-t)/60+":"+String(t).padStart(2,"0")}var O=function(e){var t=e.current,n=e.duration,r=null!=t?I(t):"-:--",o=null!=n?I(n):"-:--";return r=r.padStart(o.length,"0"),a("div",{className:v.default.durationTimeWrapper},void 0,a("span",{className:v.default.durationTimeDisplay},void 0,r),a("span",{className:v.default.durationTimeSeparator},void 0,"/"),a("span",{className:v.default.durationTimeDisplay},void 0,o))},M=t.Controls=function(e){function t(){var n,r;E(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=b(this,e.call.apply(e,[this].concat(a))),r.state={translateY:new u.default.Value(0),iconHover:!1,barHover:!1},r.setDurationRef=function(e){r.durationBar=e},r.setVolumeRef=function(e){r.volumeBar=e},b(r,n)}return S(t,e),t.prototype.componentDidMount=function(){this.state.translateY.setValue(0)},t.prototype.componentDidUpdate=function(e){var t=this.props.hide;t&&!e.hide?this.animateControls(1):!t&&e.hide&&this.animateControls(0)},t.prototype.updateProgress=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.durationBar;null!=n&&n.setGrabber(e,t)},t.prototype.animateControls=function(e){u.default.spring(this.state.translateY,o({toValue:e},C)).start()},t.prototype.getAnimatedStyle=function(){return{transform:[{translateY:this.state.translateY.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}]}},t.prototype.renderPlayIcon=function(){var e=this.props,t=e.playing,n=e.currentTime,r=e.duration,o=e.onPause,i=e.onPlay;return t?a(f.default,{onClick:o},void 0,a(c.default,{name:c.default.Names.PAUSE,className:v.default.controlIcon},"pause")):a(f.default,{onClick:i},void 0,null!=n&&n===r?a(c.default,{name:c.default.Names.REPLAY,className:v.default.controlIcon},"replay"):a(c.default,{name:c.default.Names.PLAY,className:v.default.controlIcon},"play"))},t.prototype.render=function(){var e=this,t=this.props,n=t.buffers,r=t.children,o=t.currentTime,l=t.duration,d=t.muted,p=t.onDrag,y=t.onDragEnd,_=t.onDragStart,E=t.onToggleMuted,b=t.width,S=t.volume,C=t.dragging,T=t.hide,I=t.type,M=this.state,N=M.barHover,P=M.iconHover,R=T||!N&&!P&&C!==h.default.Types.VOLUME,w="string"==typeof b||b>250,L=a(O,{current:o,duration:l});return a(g.BackgroundOpacityContext.Consumer,{},void 0,function(t){var o;return a(u.default.div,{className:(0,s.default)(I===A.VIDEO?v.default.videoControls:v.default.audioControls,v.default[t.backgroundOpacity+"BackgroundOpacity"]),onClick:function(e){return e.stopPropagation()},onDoubleClick:function(e){return e.stopPropagation()},style:e.getAnimatedStyle()},void 0,e.renderPlayIcon(),w?L:null,i.createElement(h.default,{buffers:n,value:l||0,onDrag:p,onDragEnd:y,onDragStart:_,type:h.default.Types.DURATION,ref:e.setDurationRef}),a("div",{className:m.default.flex,onMouseEnter:function(){clearTimeout(e._timeout),e.setState({barHover:!1,iconHover:!0})},onMouseLeave:function(){clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.setState({iconHover:!1})},500)}},void 0,a(f.default,{onClick:E},void 0,a(c.default,{name:d?c.default.Names.SPEAKER_OFF:c.default.Names.SPEAKER,className:(0,s.default)(v.default.controlIcon,R?void 0:v.default.opaque)}))),a("div",{className:(0,s.default)(I===A.VIDEO?v.default.videoVolumeWrapper:v.default.audioVolumeWrapper,(o={},o[v.default.hidden]=R,o)),onMouseEnter:function(){clearTimeout(e._timeout),e.setState({barHover:!0,iconHover:!1})},onMouseLeave:function(){clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.setState({barHover:!1})},500)}},void 0,i.createElement(h.default,{value:S,onDrag:p,onDragEnd:y,onDragStart:_,type:h.default.Types.VOLUME,ref:e.setVolumeRef})),r)})},t}(i.Component),N=function(e){function t(){var n,r;E(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=b(this,e.call.apply(e,[this].concat(a))),r.state={translateY:new u.default.Value(0)},b(r,n)}return S(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props.hide;t&&!e.hide?this.animateControls(1):!t&&e.hide&&this.animateControls(0)},t.prototype.animateControls=function(e){u.default.spring(this.state.translateY,o({toValue:e},C)).start()},t.prototype.getAnimatedStyle=function(){return{transform:[{translateY:this.state.translateY.interpolate({inputRange:[0,1],outputRange:["0%","-100%"]})}]}},t.prototype.renderVideoMetadata=function(){var e=this.props,t=e.fileName,n=e.fileSize,r=e.src;return a(u.default.div,{className:v.default.metadata,style:this.getAnimatedStyle()},void 0,a("div",{className:v.default.metadataContent},void 0,a("div",{className:v.default.metadataName},void 0,t),a("div",{className:v.default.metadataSize},void 0,n)),a(p.default,{href:r,target:"_blank",rel:"noreferrer noopener",className:v.default.metadataDownload},void 0,a(c.default,{name:c.default.Names.DOWNLOAD,className:v.default.metadataIcon})))},t.prototype.renderAudioMetadata=function(){var e=this.props,t=e.fileName,n=e.fileSize,r=e.src;return a(g.BackgroundOpacityContext.Consumer,{},void 0,function(e){return a("div",{className:(0,s.default)(v.default.audioMetadata,v.default[e.backgroundOpacity+"BackgroundOpacity"])},void 0,a("div",{className:v.default.metadataContent},void 0,a(p.default,{className:v.default.metadataName,href:r},void 0,t),a("div",{className:v.default.metadataSize},void 0,n)),a(p.default,{href:r,className:v.default.metadataDownload},void 0,a(c.default,{name:c.default.Names.DOWNLOAD,className:v.default.metadataIcon})))})},t.prototype.render=function(){return this.props.type===A.AUDIO?this.renderAudioMetadata():this.renderVideoMetadata()},t}(i.Component),P=function(e){function t(){var n,r;E(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=b(this,e.call.apply(e,[this].concat(i))),r.state={play:!1,scale:new u.default.Value(0),opacity:new u.default.Value(0)},r.popAnimation=function(){var e=r.state,t=e.opacity,n=e.scale;n.setValue(0),t.setValue(0),u.default.parallel([u.default.sequence([u.default.timing(t,{toValue:1,duration:200}),u.default.timing(t,{toValue:0,duration:200})]),u.default.spring(n,o({toValue:1.5},C,{friction:80}))]).start()},b(r,n)}return S(t,e),t.prototype.pop=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({play:e},this.popAnimation)},t.prototype.getAnimatedStyle=function(){var e=this.state,t=e.opacity,n=e.scale;return u.default.accelerate({opacity:t.interpolate({inputRange:[0,1],outputRange:[0,.8]}),transform:[{scale:n.interpolate({inputRange:[0,1],outputRange:[1,2]})}]})},t.prototype.render=function(){var e=this.state.play;return a(u.default.div,{className:v.default.playPausePop,style:this.getAnimatedStyle()},void 0,a(c.default,{name:e?c.default.Names.PLAY:c.default.Names.PAUSE,className:v.default.playPausePopIcon}))},t}(i.Component),R=function(e){function t(){var n,r;E(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=b(this,e.call.apply(e,[this].concat(a))),r._unmounted=!1,r._lastMove=0,r.state={buffers:[],currentTime:null,dragging:null,duration:null,fullscreen:!1,hasClickedPlay:!1,hasLoadedMetadata:!1,hideControls:!1,muted:!1,volume:1,playing:!1,preload:"none",width:t.minWidth},r.handleFullScreenExit=function(){(0,y.isFullScreen)()||r.setState({fullscreen:!1})},r.toggleFullscreen=function(){var e=!r.state.fullscreen;r.setState({fullscreen:e})},r.toggleMuted=function(){r.setState({muted:!r.state.muted})},r.setTime=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=r.elementRef;null!=n&&isFinite(n.duration)&&isFinite(n.currentTime)&&(n.currentTime=e,r.updateValue(e/n.duration,t),r.updateTime(e,n.duration))},r.handleUIUpdate=function(){if(r.state.playing&&!r._unmounted){var e=r.elementRef;null!=e&&(e.duration>0&&r.updateValue(e.currentTime/e.duration),r.updateTime(e.currentTime,e.duration),r.updateControlsVisibility(),requestAnimationFrame(r.handleUIUpdate))}},r.handleDrag=function(e,t){var n=r.elementRef;t===h.default.Types.DURATION?null!=n&&isFinite(n.duration)&&r.setTime(n.duration*e,!1):t===h.default.Types.VOLUME&&(0===e?r.setState({muted:!0,volume:e}):r.state.muted&&e>0?r.setState({muted:!1,volume:e}):r.setState({volume:e}))},r.handleLoaded=function(){var e=r.elementRef;null!=e&&(r.updateTime(e.currentTime,e.duration),r.setState({hasLoadedMetadata:!0,currentTime:e.currentTime,duration:e.duration}))},r.handleDurationChange=function(){var e=r.elementRef;null!=e&&(r.updateTime(e.currentTime,e.duration),r.setState({duration:e.duration}))},r.handleBuffer=l.default.debounce(function(){var e=r.elementRef,t=[];if(e)for(var n=e.duration,o=0;o<e.buffered.length;o++){var a=e.buffered.start(o),i=e.buffered.end(o);if(!(i-a<1)){var l=(i-a)/n,s=a/n;t.push([s,l])}}r.setState({buffers:t})},400),r.handleEnded=function(){r.setState({playing:!1,hideControls:!1})},r.handleMouseMove=function(){r._lastMove=Date.now()},r.handleMouseLeave=function(){r._lastMove=0},r.handlePreload=function(){r.setState({preload:"metadata"})},r.setControlRef=function(e){r.controlsRef=e},r.setPlayPausePopRef=function(e){r.playPausePopRef=e},r.handleVideoClick=function(){r.setPlay(!r.state.playing)},r.setPlay=function(e){var t=r.props,n=t.onPlay,o=t.onPause,a=r.state.hasClickedPlay,i=r.playPausePopRef;e?(n&&n(),r.setState({playing:e,hasClickedPlay:!0},function(){a&&null!=i&&i.pop(e)})):(o&&o(),r.setState({playing:!1,hideControls:!1}))},r.handleDragStart=function(e){r.setState({dragging:e})},r.handleDragEnd=function(){r.setState({dragging:null}),r._lastMove=Date.now()},b(r,n)}return S(t,e),t.getDerivedStateFromProps=function(e,t){return!e.playable&&t.playing?{playing:!1,hasClickedPlay:!1}:null},t.prototype.componentDidUpdate=function(e,t){var n=this.state,r=n.playing,o=n.fullscreen,a=n.muted,i=n.dragging,l=n.volume,s=this.elementRef,u=this.controlsRef;null!=s&&(r&&!t.playing?(s.play(),this.handleMouseMove(),this.handleUIUpdate()):!r&&t.playing&&s.pause(),o&&!t.fullscreen&&null!=s.parentNode?((0,y.requestFullScreen)(s.parentNode),document.addEventListener(y.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenExit)):!o&&t.fullscreen&&(document.removeEventListener(y.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenExit),(0,y.exitFullScreen)()),i===h.default.Types.DURATION&&t.dragging!==h.default.Types.DURATION&&r?s.pause():i!==h.default.Types.DURATION&&t.dragging===h.default.Types.DURATION&&r&&s.play(),a!==t.muted&&(s.muted=a,null!=u&&null!=u.volumeBar&&(a?u.volumeBar.setGrabber(0):u.volumeBar.setGrabber(l))),null!=u&&null!=u.volumeBar&&l!==t.volume&&(s.volume=l,u.volumeBar.setGrabber(l)),null!=u&&null!=u.volumeBar&&!a&&l>0&&u.volumeBar.setGrabber(l))},t.prototype.componentWillUnmount=function(){this._unmounted=!0},t.prototype.getWidth=function(){var e=this.props.width;return"100%"===e?e:Math.max(e,t.minWidth)},t.prototype.updateValue=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.controlsRef;null!=n&&n.updateProgress(e,t)},t.prototype.updateTime=function(e,t){e|=0,t|=0,this.state.currentTime===e&&this.state.duration===t||this.setState({currentTime:e,duration:t})},t.prototype.updateControlsVisibility=function(){var e=this.state,t=e.dragging,n=e.fullscreen?1e3:3e3,r=Math.max(0,Date.now()-this._lastMove)>n;r!==this.state.hideControls&&null==t&&this.setState({hideControls:r})},t.prototype.renderVideo=function(){var e=this,t=this.props,n=t.height,r=t.src,o=t.poster,l=t.forceExternal,s=t.onError,u=this.getWidth();return l?a("video",{className:v.default.video,controls:!1,height:n,poster:o,width:u}):i.createElement("video",{className:v.default.video,controls:!1,height:n,onClick:this.handleVideoClick,onEnded:this.handleEnded,onError:s,onLoadedMetadata:this.handleLoaded,onProgress:this.handleBuffer,poster:o,preload:this.state.preload,ref:function(t){return e.elementRef=t},width:u},a("source",{src:r}))},t.prototype.renderAudio=function(){var e=this;return i.createElement("audio",{className:v.default.audio,controls:!1,onClick:this.handleVideoClick,onEnded:this.handleEnded,onLoadedMetadata:this.handleLoaded,onProgress:this.handleBuffer,preload:this.state.preload,ref:function(t){return e.elementRef=t}},a("source",{src:this.props.src}))},t.prototype.renderControls=function(){var e=this,t=this.state,n=t.buffers,r=t.currentTime,o=t.duration,l=t.hasClickedPlay,s=t.hideControls,u=t.muted,p=t.playing,h=t.fullscreen,y=t.volume,m=t.dragging,_=this.props.type,E=this.getWidth();return l||_===A.AUDIO?i.createElement(M,{buffers:n,currentTime:r,duration:o,volume:y,hide:_===A.VIDEO&&s,muted:u,onDrag:this.handleDrag,onDragEnd:this.handleDragEnd,onDragStart:this.handleDragStart,onDurationChange:this.handleDurationChange,onPause:function(){e.setPlay(!1)},onPlay:function(){e.setPlay(!0)},onToggleMuted:this.toggleMuted,playing:p,dragging:m,type:_,ref:this.setControlRef,width:h?window.screen.width:E},_===A.VIDEO?a(f.default,{onClick:this.toggleFullscreen},void 0,a(c.default,{className:v.default.controlIcon,name:c.default.Names.FULL_SCREEN,style:{marginLeft:0}})):null):a("div",{className:v.default.playCenter},void 0,a(g.BackgroundOpacityContext.Consumer,{},void 0,function(t){return a(d.default,{className:v.default.playButton,onPlay:e.handleVideoClick,backgroundOpacity:t.backgroundOpacity})}))},t.prototype.renderMetadata=function(){var e=this.props,t=e.fileName,n=e.fileSize,r=e.src,o=e.type,i=this.state.hideControls;return null==t||null==n?null:a(N,{fileName:t,fileSize:n,src:r,hide:o===A.VIDEO&&i,type:o})},t.prototype.renderPlayPausePop=function(){return i.createElement(P,{ref:this.setPlayPausePopRef})},t.prototype.render=function(){var e=this,t=this.props,n=t.height,r=t.type,o=t.src,i=t.forceExternal,l=t.className,u=this.getWidth(),c=this.state,f=c.fullscreen,p=c.hideControls,h=c.playing,y=c.preload,m=v.default.wrapperPaused;return r===A.AUDIO?m=v.default.wrapperAudio:p?m=v.default.wrapperControlsHidden:h&&(m=v.default.wrapperPlaying),i&&r===A.VIDEO?a(g.BackgroundOpacityContext.Consumer,{},void 0,function(t){return a("div",{className:m,style:{width:u,height:n}},void 0,e.renderMetadata(),e.renderVideo(),a("div",{className:v.default.playCenter},void 0,a(d.default,{className:v.default.playButton,externalURL:o,backgroundOpacity:t.backgroundOpacity})))}):a("div",{className:(0,s.default)(m,l),"data-fullscreen":f,onMouseEnter:"none"===y?this.handlePreload:null,onMouseLeave:h?this.handleMouseLeave:null,onMouseMove:h?this.handleMouseMove:null,onDoubleClick:r===A.VIDEO?this.toggleFullscreen:null,style:f?T:{width:u,height:r===A.AUDIO?"auto":n}},void 0,this.renderMetadata(),r===A.AUDIO?this.renderAudio():this.renderVideo(),this.renderControls(),r===A.VIDEO?this.renderPlayPausePop():null)},t}(i.PureComponent);R.Types=A,R.defaultProps={width:498,height:80,forceExternal:!1,playable:!0},R.minWidth=150,t.default=R},6235:function(e,t,n){"use strict";t.__esModule=!0;var r={};r=n(6612),t.default=r,e.exports=t.default},6236:function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(2),a=(r=o)&&r.__esModule?r:{default:r},i=n(0);t.default={popFirstFile:function(){a.default.dispatch({type:i.ActionTypes.UPLOAD_MODAL_POP_FILE})},pushFiles:function(e){var t=e.files,n=e.channelId;a.default.dispatch({type:i.ActionTypes.UPLOAD_MODAL_PUSH_FILES,files:t,channelId:n})},clearAll:function(){a.default.dispatch({type:i.ActionTypes.UPLOAD_MODAL_CLEAR_ALL_FILES})}},e.exports=t.default},6272:function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(3)),a=l(n(2)),i=(n(0),n(7875));function l(e){return e&&e.__esModule?e:{default:e}}var s={};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.hasApplicationStatistic=function(e){return null!=s[e]},t.prototype.getCurrentUserStatisticsForApplication=function(e){return s[e]},t.prototype.getQuickSwitcherScoreForApplication=function(e){var t=s[e],n=0;if(null!=t){var r=Date.now(),o=new Date(t.last_played_at).getTime(),a=Math.floor((r-o)/864e5),i=Math.floor(1e3*t.total_duration/36e5);0===a?n+=50:a>=1&&a<2?n+=40:a>=2&&a<4?n+=30:a>=4&&a<7?n+=20:a>=7&&(n+=10),0===i?n+=0:i>=1&&i<12?n+=10:i>=12&&i<168?n+=20:i>=168&&i<720?n+=40:i>=720&&(n+=50)}return n},r(t,[{key:"applicationStatistics",get:function(){return s}}]),t}(o.default.Store);t.default=new u(a.default,{CONNECTION_OPEN:function(e){return(0,i.fetchActivityStatistics)(),!1},USER_ACTIVITY_STATISTICS_FETCH_SUCCESS:function(e){e.statistics.forEach(function(e){s[e.application_id]=e})},ACTIVITY_UPDATE_START:function(e){var t=e.duration,n=e.applicationId,r=e.isDiscordApplication,o=s[n],a=(new Date).toISOString(),i=0,l=0;null!=o&&(i=o.total_duration,l=o.total_discord_sku_duration||0),i+=t,r&&(l+=t),s[n]={application_id:n,total_duration:i,last_played_at:a,total_discord_sku_duration:l}},LOGOUT:function(e){s={}}}),e.exports=t.default},6273:function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(3)),a=u(n(25)),i=u(n(8)),l=u(n(2)),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var c="GameLibraryViewStore",f=s.TableSortDirections.ASCENDING,d=s.GameTableListKeys.LAST_PLAYED,p=void 0,h=!1,y=i.default.debounce(function(){h=!1,m.emitChange()},200);var m=new(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.initialize=function(){var e=a.default.get(c)||{};null!=e.sortDirection&&null!=e.sortKey&&(f=e.sortDirection,d=e.sortKey)},r(t,[{key:"sortDirection",get:function(){return f}},{key:"sortKey",get:function(){return d}},{key:"activeRowId",get:function(){return p}},{key:"isNavigatingByKeyboard",get:function(){return h}}]),t}(o.default.Store))(l.default,{LIBRARY_TABLE_SORT_UPDATE:function(e){var t=e.direction,n=e.key;f=t,d=n,a.default.set(c,{sortDirection:f,sortKey:d})},LIBRARY_TABLE_ACTIVE_ROW_ID_UPDATE:function(e){var t=e.id;e.isKeyboardEvent&&(h=!0,y()),p=t}});t.default=m,e.exports=t.default},6274:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.createDeferAndBatch=function(){var t=null,n=[];return function(r){n.push(r),null==t&&(t=e(function(){t=null;var e=[].concat(n);n.length=0,e.forEach(function(e){return e()})}))}},t.cachedFunction=function(e){var t=null,n=null;return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return function(e,t){if(null==e||null==t||e.length!==t.length)return!1;for(var n=e.length,r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}(t,o)||(n=e.apply(void 0,o)),t=o,n}}}).call(this,n(35).setImmediate)},6281:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=u(n(6)),l=u(n(34)),s=n(33);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=c(this,e.call.apply(e,[this].concat(a))),r.handleSearchWithGoogle=function(){(0,s.closeContextMenu)(),window.open("https://www.google.com/search?q="+encodeURIComponent(r.props.value||""),"_blank")},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props.value;return null==e||0===e.length?null:o(l.default,{label:i.default.Messages.SEARCH_WITH_GOOGLE,action:this.handleSearchWithGoogle})},t}(a.PureComponent);f.defaultProps={value:""},t.default=f,e.exports=t.default},6282:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=f(n(6)),l=f(n(11)),s=f(n(227)),u=f(n(34)),c=n(33);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=d(this,e.call.apply(e,[this].concat(a))),r.handleCopyLink=function(){(0,c.closeContextMenu)(),l.default.copy(r.props.href||r.props.src)},r.handleOpenLink=function(){(0,c.closeContextMenu)(),window.open(r.props.href||r.props.src)},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return l.default.embedded&&(this.props.href||this.props.src)?o(s.default,{},void 0,o(u.default,{label:i.default.Messages.COPY_LINK,action:this.handleCopyLink}),o(u.default,{label:i.default.Messages.OPEN_LINK,action:this.handleOpenLink})):null},t}(a.PureComponent);t.default=p,e.exports=t.default},6283:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=c(n(6)),l=c(n(11)),s=c(n(34)),u=n(33);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=f(this,e.call.apply(e,[this].concat(a))),r.handleCopyItem=function(){(0,u.closeContextMenu)(),l.default.copy(r.props.value),r.props.target&&r.props.target.focus()},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.useSelection,n=e.value;return!l.default.embedded||t&&(null==n||0===n.length)?null:o(s.default,{label:i.default.Messages.COPY,hint:l.default.isOSX()?"⌘C":"Ctrl+C",action:this.handleCopyItem})},t}(a.PureComponent);d.defaultProps={value:"",useSelection:!1},t.default=d,e.exports=t.default},6326:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=P(n(1)),l=N(n(3)),s=N(n(11)),u=N(n(2)),c=N(n(41)),f=n(527),d=N(n(198)),p=N(n(199)),h=N(n(44)),y=N(n(1221)),m=P(n(171)),v=n(979),g=n(578),_=N(n(40)),E=N(n(64)),b=N(n(945)),S=N(n(520)),C=N(n(978)),A=N(n(372)),T=N(n(1219)),I=N(n(6)),O=n(0),M=N(n(5692));function N(e){return e&&e.__esModule?e:{default:e}}function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=function(){return[I.default.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_TITLE_1,I.default.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_TITLE_2,I.default.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_TITLE_3,I.default.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_TITLE_4]},L=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=R(this,e.call.apply(e,[this].concat(a))),r.state={confirmHeaderIndex:Math.floor(Math.random()*w().length),installPath:r.props.defaultInstallationPath,hasInstallPathError:!1,hasAcceptedStoreTerms:!1},r.handleInstallPathChange=function(e,t){r.setState({installPath:e,hasInstallPathError:t})},r.handleToggleTermsAcceptance=function(e,t){r.setState({hasAcceptedStoreTerms:t})},r.handleInstall=function(){var e=r.props,t=e.application,n=e.branchId,o=e.buildId,a=e.manifestIds,i=e.onClose,l=r.state,s=l.installPath,u=l.hasInstallPathError;(0,v.acceptPurchaseTerms)(),u||null==o||null==a||(m.installApplication(t,n,o,a,s,O.AnalyticsLocations.APPLICATION_STORE_PAYMENT_MODAL),i(),c.default.transitionTo(O.Routes.GAME_LIBRARY))},R(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.fetchInstallSize=function(){var e=this.props,t=e.application,n=e.branchId,r=e.buildId,o=e.manifestIds,a=e.buildSizeKB;null!=r&&null!=o&&null==a&&u.default.wait(function(){(0,g.fetchBuildSize)(t.id,n,r,o)})},t.prototype.componentDidMount=function(){var e=this.props,t=e.application,n=e.branchId,r=e.buildId,o=e.manifestIds;null==r||null==o?u.default.wait(function(){return(0,g.fetchBuild)(t.id,n)}):this.fetchInstallSize()},t.prototype.componentDidUpdate=function(e){this.props.buildId===e.buildId&&this.props.manifestIds===e.manifestIds||this.fetchInstallSize()},t.prototype.render=function(){var e=this.props,t=e.application,n=e.isFetchingBuild,r=e.buildId,a=e.sku,l=e.isIAP,u=e.onClose,c=e.buildSizeKB,d=this.state,p=d.confirmHeaderIndex,h=d.installPath,y=d.hasInstallPathError,m=d.hasAcceptedStoreTerms,v=(0,f.nativePlatformTypeToSKUOperatingSystem)(s.default.getPlatform()),g=void 0;if(l)g=o(i.Fragment,{},void 0,o("div",{className:M.default.confirmBlurb},void 0,I.default.Messages.APPLICATION_IAP_PURCHASE_CONFIRMATION_BLURB.format({applicationName:t.name,itemName:a.name})),o("div",{className:M.default.divider}),o(E.default,{color:E.default.Colors.BRAND,onClick:u},void 0,I.default.Messages.APPLICATION_IAP_PURCHASE_RETURN_TO_GAME));else if(null!=v&&a.supportedOperatingSystems.includes(v))g=o(i.Fragment,{},void 0,o("div",{className:M.default.confirmBlurb},void 0,I.default.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_BLURB.format({name:t.name})),o("div",{className:M.default.divider}),o(T.default,{className:M.default.installSelector,value:h,requiredDiskKB:c,onChange:this.handleInstallPathChange}),this.shouldRequireStoreTerms?o("div",{className:M.default.storeTerms},void 0,o(S.default.FormTitle,{},void 0,I.default.Messages.BILLING_LEGAL_MUMBO_JUMBO),o(b.default,{type:b.default.Types.INVERTED,value:m,onChange:this.handleToggleTermsAcceptance},void 0,I.default.Messages.BILLING_LEGAL_MUMBO_JUMBO_LABEL.format({url:O.MarketingURLs.STORE_TERMS}))):null,o(C.default,{className:M.default.confirmButton,disabled:y||null==r||this.shouldRequireStoreTerms&&!m,onClick:this.handleInstall,submitting:n,color:E.default.Colors.GREEN},void 0,I.default.Messages.APPLICATION_STORE_PURCHASE_INSTALL_GAME));else{var N=a.supportedOperatingSystems[0];g=o(i.Fragment,{},void 0,o("div",{className:M.default.confirmBlurb},void 0,I.default.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_UNSUPPORTED_OS.format({name:t.name,operatingSystem:(0,f.skuOperatingSystemToText)(N)})),o(E.default,{onClick:u,className:M.default.confirmButton},void 0,I.default.Messages.OKAY))}return o(_.default,{direction:_.default.Direction.VERTICAL,align:_.default.Align.CENTER},void 0,o(A.default,{game:t,className:M.default.confirmIcon,size:A.default.Sizes.LARGE}),o("div",{className:M.default.confirmTitle},void 0,w()[p]),g)},a(t,[{key:"shouldRequireStoreTerms",get:function(){var e=this.props,t=e.hasPreviouslyAcceptedStoreTerms,n=e.sku;return!t&&!n.requiresPayment}}]),t}(i.Component);t.default=l.default.connectStores([p.default,d.default,h.default,y.default],function(e){var t=e.application,n=h.default.getActiveBranchId(t.id);null==n&&(n=t.id);var r=d.default.getTargetBuildId(t.id,n);return{defaultInstallationPath:p.default.defaultInstallationPath,branchId:n,isFetchingBuild:d.default.isFetching(t.id,n),buildId:r,manifestIds:d.default.getTargetManifests(t.id,n),buildSizeKB:null!=r?d.default.getBuildSize(r):null,hasPreviouslyAcceptedStoreTerms:y.default.hasAcceptedStoreTerms}})(L),e.exports=t.default},6333:function(e,t,n){"use strict";t.__esModule=!0;var r,o,a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=f(n(9)),s=f(n(40)),u=f(n(79)),c=f(n(5710));function f(e){return e&&e.__esModule?e:{default:e}}var d=Object.freeze({PRIMARY:"primary",WARNING:"warning",ERROR:"error"}),p=((o={})[d.PRIMARY]=c.default.colorPrimary,o[d.WARNING]=c.default.colorWarning,o[d.ERROR]=c.default.colorError,o),h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.color,r=e.children;return a(s.default,{className:(0,l.default)(c.default.note,p[n]),align:s.default.Align.CENTER},void 0,a(u.default,{name:t,className:c.default.icon}),a("div",{},void 0,r))},t}(i.PureComponent);h.Icons=u.default.Names,h.Colors=d,t.default=h,e.exports=t.default},6334:function(e,t,n){"use strict";t.__esModule=!0,t.Steps=void 0;var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),l=V(n(1)),s=F(n(3)),u=F(n(2)),c=n(955),f=n(272),d=(n(529),F(n(377))),p=F(n(6163)),h=F(n(6058)),y=F(n(144)),m=V(n(982)),v=V(n(535)),g=V(n(6393)),_=F(n(123)),E=F(n(520)),b=F(n(40)),S=F(n(64)),C=F(n(142)),A=F(n(978)),T=F(n(1025)),I=F(n(945)),O=F(n(6031)),M=F(n(6392)),N=F(n(6390)),P=F(n(6391)),R=F(n(6164)),w=F(n(6389)),L=F(n(6057)),D=F(n(6333)),k=n(964),U=F(k),x=F(n(6)),j=n(0),G=F(n(5580)),B=F(n(1241));function F(e){return e&&e.__esModule?e:{default:e}}function V(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function H(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var i=t[o](a),l=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}var Y=t.Steps=Object.freeze({PAYMENT_TYPE:"payment_type",PAYPAL:"paypal",CREDIT_CARD_INFORMATION:"credit_card_information",ADDRESS:"address",REVIEW:"review",CONFIRM:"confirm"}),K=(0,f.cssValueToNumber)(B.default.innerPadding),W=[Y.PAYMENT_TYPE,Y.CREDIT_CARD_INFORMATION,Y.REVIEW],z=[Y.PAYMENT_TYPE,Y.CREDIT_CARD_INFORMATION,Y.REVIEW],$=[Y.PAYMENT_TYPE,Y.PAYPAL,Y.ADDRESS,Y.REVIEW],J=[Y.PAYPAL,Y.ADDRESS,Y.REVIEW],q=[Y.PAYMENT_TYPE,Y.CREDIT_CARD_INFORMATION,Y.ADDRESS,Y.REVIEW],X=[Y.CREDIT_CARD_INFORMATION,Y.ADDRESS,Y.REVIEW],Q=[Y.REVIEW,Y.CONFIRM],Z=((o={})[Y.PAYMENT_TYPE]=x.default.Messages.BILLING_STEP_PAYMENT_TYPE,o[Y.PAYPAL]=x.default.Messages.BILLING_STEP_PAYPAL,o[Y.CREDIT_CARD_INFORMATION]=x.default.Messages.BILLING_STEP_CREDIT_CARD_INFORMATION,o[Y.ADDRESS]=x.default.Messages.BILLING_STEP_ADDRESS,o[Y.REVIEW]=x.default.Messages.BILLING_STEP_REVIEW,o[Y.CONFIRM]="",o),ee="***@***.***",te="****",ne="new_credit_card_id",re=new k.CreditCardSourceRecord({id:ne,brand:O.default.Types.UNKNOWN,type:j.PaymentSourceTypes.CARD});function oe(e,t){var n=Object.values(e);return null!=t?n.filter(function(e){return e instanceof U.default&&(null!=t&&t.includes(e.type))}):n}function ae(e,t,n){var r=oe(e,n),o=null!=t?r.find(function(e){return e.id===t}):null;return null!=o?o.id:r.length>0?r[0].id:null}function ie(e){if(null!=e){if(e.hasCardError())return Y.CREDIT_CARD_INFORMATION;if(e.hasAddressError())return Y.ADDRESS}return null}var le=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));ce.call(r);var o=Object.values(n.paymentSources).length>0,a=ae(n.paymentSources,n.defaultPaymentSourceId,n.validPaymentTypes);return r.state={hasAcceptedTerms:!1,paymentSourceId:a,steps:o?W:z,step:o?Y.REVIEW:Y.PAYMENT_TYPE,errorStep:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.billingError,r=t.errorStep;if(null==n)return null==r?null:{errorStep:null};var o=ie(n);return null!=o&&o!==t.errorStep?{step:o,errorStep:o}:null},t.prototype.componentDidMount=function(){m.createClient();var e=this.props,t=e.onPaymentSourceChange,n=e.paymentSources,r=e.defaultPaymentSourceId,o=this.state.paymentSourceId;null!=r&&null!=n[r]?t&&t(n[r]):null!=o&&o!==r&&null!=n[o]&&t&&t(n[o])},t.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.onPaymentSourceChange,o=n.paymentSources,a=n.onStepChange,i=this.state,l=i.paymentSourceId,s=i.step;t.paymentSourceId!==l&&null!=l&&null!=o[l]&&r&&r(o[l]),null!=a&&s!==t.step&&a(t.step,s)},t.prototype.componentWillUnmount=function(){m.teardown(),g.clearCardInfo();var e=this.props.onClearError;e&&e()},t.prototype.canSelectPaymentType=function(){var e=this.props.validPaymentTypes;return null==e||e.length>1},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.getStepIndex=function(){var e=this.state,t=e.step;return e.steps.findIndex(function(e){return e===t})},t.prototype.canGoBack=function(e){if(e>0)return!0;var t=this.props;return oe(t.paymentSources,t.validPaymentTypes).length>0},t.prototype.handleReopenPaypal=function(){m.reopenPayPalWindow()},t.prototype.handleAddNewPaymentSource=function(){var e=this.props.validPaymentTypes;if(null==e||this.canSelectPaymentType())this.setState({step:Y.PAYMENT_TYPE,steps:z,paymentSourceId:null});else switch(e[0]){case j.PaymentSourceTypes.CARD:this.setState({step:Y.CREDIT_CARD_INFORMATION,steps:X,paymentSourceId:null});break;case j.PaymentSourceTypes.PAYPAL:this.setState({step:Y.PAYPAL,steps:J,paymentSourceId:null})}},t.prototype.renderBackButton=function(){var e=this.getStepIndex(),t=this.canGoBack(e)?x.default.Messages.BACK:x.default.Messages.CANCEL;return i(S.default,{look:S.default.Looks.LINK,className:G.default.backButton,color:G.default.backButtonColor,size:G.default.backButtonSize,onClick:this.handleBack},void 0,t)},t.prototype.renderHeader=function(){var e=this.props,t=e.renderHeader,n=e.billingError,r=this.state;return t(r.step,r.steps.map(function(e){return{id:e,label:Z[e]}}),null==ie(n)?n:null)},t.prototype.render=function(){var e=this.props.size,t=this.state,n=t.step,r=t.steps,o=this.stepRenderer[n];return i(_.default,{size:e,className:G.default.modal,fullscreenOnMobile:!0},void 0,i("form",{className:G.default.form,onSubmit:this.preventDefault},void 0,this.renderHeader(),n!==Y.CONFIRM?i("div",{className:G.default.divider}):null,i(_.default.Content,{},void 0,i("div",{className:G.default.content},void 0,i(w.default,{step:n,steps:r,sideMargin:K},void 0,o.renderBody()))),o.renderFooter()))},t}(l.PureComponent);le.defaultProps={canSubmit:!0,useShinySubmitButton:!1,isSubscription:!1,size:_.default.Sizes.SMALL,requireAcceptingTerms:!0,showConfirmation:!0,renderPrice:function(e){return e},billingError:null};var se=i("div",{}),ue=i("div",{}),ce=function(){var e,t=this;this.handleBack=function(){var e=t.state.steps,n=t.getStepIndex();if(n>0){var r=e[n-1],o=r===Y.PAYMENT_TYPE;o&&g.clearError(),t.setState({step:r,steps:o?z:e})}else if(t.canGoBack(n)){var a=t.props,i=ae(a.paymentSources,a.defaultPaymentSourceId,a.validPaymentTypes);t.setState({step:Y.REVIEW,steps:W,paymentSourceId:i})}else t.props.onClose()},this.handleChoosePaymentType=function(e){switch(e){case j.PaymentSourceTypes.PAYPAL:t.setState({step:Y.PAYPAL,steps:$});break;case j.PaymentSourceTypes.CARD:t.setState({step:Y.CREDIT_CARD_INFORMATION,steps:q})}},this.handleToggleTermsAcceptance=function(e,n){t.setState({hasAcceptedTerms:n})},this.handlePaymentSourceChange=function(e){if(e.value===ne){t.handleAddNewPaymentSource();var n=t.props.onClearError;n&&n()}else t.setState({paymentSourceId:e.value})},this.handlePaypalAdd=H(regeneratorRuntime.mark(function e(){var n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,r=n.braintreeEmail,o=n.braintreeNonce,a=n.billingAddressInfo,0!==r.length&&null!=o){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,v.createPaypalPaymentSource(o,a);case 6:i=e.sent,t.setState({step:Y.REVIEW,paymentSourceId:i.id}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:case"end":return e.stop()}},e,t,[[3,10]])})),this.handlePaypalContinue=function(){var e=t.props,n=e.braintreeEmail,r=e.braintreeNonce;0!==n.length&&null!=r&&t.setState({step:Y.ADDRESS})},this.handleCreditCardContinue=function(){t.props.isCardInfoValid&&t.setState({step:Y.ADDRESS})},this.handleBillingAddressChange=function(e,t){u.default.wait(function(){return g.updateAddressInfo(e,t)})},this.handleCardInfoChange=function(e,t){u.default.wait(function(){return g.updateCardInfo(e,t)})},this.handleCreditCardAdd=H(regeneratorRuntime.mark(function e(){var n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,r=n.creditCardInfo,o=n.billingAddressInfo,e.prev=1,e.next=4,v.createCardPaymentSource(a({},r,{billingAddress:o,type:j.PaymentSourceTypes.CARD,isDefault:!1}));case 4:i=e.sent,t.setState({step:Y.REVIEW,paymentSourceId:i.id}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}},e,t,[[1,8]])})),this.handlePurchase=H(regeneratorRuntime.mark(function e(){var n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,r=n.paymentSources,o=n.showConfirmation,a=n.onPurchase,null!=(i=t.state.paymentSourceId)&&null!=r[i]){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,a(r[i]);case 7:o&&t.setState({steps:Q,step:Y.CONFIRM}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:case"end":return e.stop()}},e,t,[[4,10]])})),this.stepRenderer=((e={})[Y.PAYMENT_TYPE]={renderBody:function(){return t.props.hidePersonalInformation?i(L.default,{className:G.default.errorBlock},void 0,x.default.Messages.BILLING_ERROR_ADD_PAYMENT_SOURCE_STREAMER_MODE):i(M.default,{className:G.default.choosePaymentSourceType,onChooseType:t.handleChoosePaymentType,validPaymentTypes:t.props.validPaymentTypes})},renderFooter:function(){return i(_.default.Footer,{direction:b.default.Direction.HORIZONTAL},void 0,t.renderBackButton())}},e[Y.PAYPAL]={renderBody:function(){return i(N.default,{className:G.default.formItem})},renderFooter:function(){var e=t.props,n=e.submitting,r=e.braintreeNonce,o=null!=e.braintreeEmail&&null!=r;return i(_.default.Footer,{justify:b.default.Justify.BETWEEN,direction:b.default.Direction.HORIZONTAL},void 0,t.canSelectPaymentType()?t.renderBackButton():se,i(S.default,{submitting:n,look:o?S.default.Looks.FILLED:S.default.Looks.OUTLINED,onClick:o?t.handlePaypalContinue:t.handleReopenPaypal},void 0,o?x.default.Messages.NEXT:x.default.Messages.PAYMENT_SOURCE_PAYPAL_REOPEN))}},e[Y.CREDIT_CARD_INFORMATION]={renderBody:function(){var e=t.props,n=e.creditCardInfo,r=e.billingError,o=null!=r&&(null==r.code||ie(r)===Y.CREDIT_CARD_INFORMATION);return i(l.Fragment,{},void 0,o?i(L.default,{className:G.default.errorBlock},void 0,x.default.Messages.BILLING_ERROR_SECTION_CARD):null,l.createElement(P.default,a({className:G.default.formItem,onCardInfoChange:t.handleCardInfoChange,error:r},n)))},renderFooter:function(){var e=t.props,n=e.isCardInfoValid,r=e.submitting;return i(_.default.Footer,{justify:b.default.Justify.BETWEEN,direction:b.default.Direction.HORIZONTAL},void 0,t.canSelectPaymentType()?t.renderBackButton():ue,i(S.default,{type:"submit",disabled:!n,submitting:r,onClick:t.handleCreditCardContinue},void 0,x.default.Messages.NEXT))}},e[Y.ADDRESS]={renderBody:function(){var e=t.props,n=e.billingAddressInfo,r=e.billingError,o=null!=r&&(null==r.code||ie(r)===Y.ADDRESS);return i(l.Fragment,{},void 0,o?i(L.default,{className:G.default.errorBlock},void 0,x.default.Messages.BILLING_ERROR_SECTION_ADDRESS):null,l.createElement(R.default,a({className:G.default.formItem,onBillingAddressChange:t.handleBillingAddressChange,error:r},n)))},renderFooter:function(){var e=t.props,n=e.isBillingAddressInfoValid,r=e.submitting;return i(_.default.Footer,{justify:b.default.Justify.BETWEEN,direction:b.default.Direction.HORIZONTAL},void 0,t.renderBackButton(),i(S.default,{type:"submit",disabled:!n,submitting:r,onClick:[$,J].includes(t.state.steps)?t.handlePaypalAdd:t.handleCreditCardAdd},void 0,x.default.Messages.NEXT))}},e[Y.REVIEW]={renderBody:function(){var e=t.props,n=e.legalNotice,r=e.paymentSources,o=e.validPaymentTypes,a=e.price,s=e.requireAcceptingTerms,u=e.hidePersonalInformation,f=t.state,d=f.hasAcceptedTerms,p=f.paymentSourceId,h=[].concat(oe(r,o),[re]).map(function(e){if(!(e instanceof U.default))throw new Error("Invalid payment source");var t=function(e,t){if(e instanceof k.CreditCardSourceRecord)return e.id===ne?{brand:null,label:x.default.Messages.PAYMENT_SOURCES_ADD}:{brand:t?O.default.Types.UNKNOWN:e.brand,label:x.default.Messages.PAYMENT_SOURCE_CARD_ENDING_IN.format({last4:t?te:e.last4})};if(e instanceof k.PaypalSourceRecord)return{brand:O.default.Types.PAYPAL,label:t?ee:e.email};throw new Error("Invalid Payment Source")}(e,u),n=t.brand,r=t.label;return{value:e.id,label:i(b.default,{align:b.default.Align.CENTER},void 0,null!=n?i(O.default,{type:O.default.getType(n)}):null,i("div",{className:G.default.paymentSourceLabel},void 0,r))}}),y=void 0;return null!=a&&(a.taxInclusive?y=i(D.default,{icon:D.default.Icons.RECEIPT,color:D.default.Colors.PRIMARY},void 0,x.default.Messages.BILLING_SALES_TAX_INCLUDED):a.tax>0&&(y=i(D.default,{icon:D.default.Icons.RECEIPT,color:D.default.Colors.PRIMARY},void 0,x.default.Messages.BILLING_SALES_TAX_ADDED.format({tax:(0,c.formatPrice)(a.tax,a.currency)})))),i(l.Fragment,{},void 0,i(E.default.FormTitle,{className:G.default.formTitle},void 0,x.default.Messages.BILLING_PAY_FOR_IT_WITH),i(T.default,{searchable:!1,clearable:!1,options:h,value:p,className:G.default.paymentSourceSelect,onChange:t.handlePaymentSourceChange}),y,s?i(l.Fragment,{},void 0,i(E.default.FormTitle,{className:G.default.formTitle},void 0,x.default.Messages.BILLING_LEGAL_MUMBO_JUMBO),i(I.default,{type:I.default.Types.INVERTED,value:d,onChange:t.handleToggleTermsAcceptance},void 0,i("div",{className:G.default.checkboxLabel},void 0,x.default.Messages.BILLING_LEGAL_MUMBO_JUMBO_LABEL.format({url:j.MarketingURLs.STORE_TERMS})))):null,null!=n?i("div",{className:G.default.subscriptionLegal},void 0,n):null)},renderFooter:function(){var e=t.state,n=e.hasAcceptedTerms,r=e.paymentSourceId,o=t.props,s=o.canSubmit,u=o.submitButtonText,c=o.useShinySubmitButton,f=o.isPurchasing,d=o.requireAcceptingTerms&&!n,p=!d&&null!=r&&s,h={submitting:f,color:S.default.Colors.GREEN,disabled:!p,onClick:t.handlePurchase};return i(_.default.Footer,{},void 0,i("div",{className:G.default.buyButtonTooltipWrapper},void 0,h.disabled&&d?i(C.default,{text:x.default.Messages.BILLING_ACCEPT_TERMS_TOOLTIP},void 0,i("div",{"aria-hidden":!0,className:G.default.buyButtonTooltipTarget})):null,c?l.createElement(A.default,h,u):l.createElement(S.default,a({type:"submit"},h),u)))}},e[Y.CONFIRM]={renderBody:function(){var e=t.props.renderConfirmationBody;return null!=e?e():null},renderFooter:function(){var e=t.props.renderConfirmationFooter;return null!=e?e():null}},e)};t.default=s.default.connectStores([d.default,p.default,h.default,y.default],function(){return{submitting:h.default.isBusy,paymentSources:d.default.paymentSources,defaultPaymentSourceId:d.default.defaultPaymentSourceId,creditCardInfo:p.default.getCreditCardInfo(),isCardInfoValid:p.default.isCardInfoValid,billingAddressInfo:p.default.getBillingAddressInfo(),isBillingAddressInfoValid:p.default.isBillingAddressInfoValid,braintreeEmail:p.default.braintreeEmail,braintreeNonce:p.default.braintreeNonce,billingError:p.default.error,hidePersonalInformation:y.default.hidePersonalInformation}})(le)},6373:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=d(n(9)),l=d(n(40)),s=n(64),u=d(s),c=n(0),f=d(n(5737));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.title,n=e.description,r=e.agreement,a=e.disagreement,c=e.onAgree,d=e.onDisagree;return o(l.default,{className:f.default.gatedContent,justify:l.default.Justify.CENTER,align:l.default.Align.CENTER,direction:l.default.Direction.VERTICAL},void 0,o("div",{className:(0,i.default)(f.default.image,"margin-bottom-20")}),o("div",{className:(0,i.default)(f.default.title,"margin-bottom-8")},void 0,t),o("div",{className:(0,i.default)(f.default.description,"margin-bottom-20")},void 0,n),o("div",{className:(0,i.default)(f.default.separator,"margin-bottom-40")}),o(l.default,{justify:l.default.Justify.CENTER,align:l.default.Align.CENTER,grow:0},void 0,o(u.default,{className:f.default.action,size:s.ButtonSizes.LARGE,look:s.ButtonLooks.OUTLINED,color:s.ButtonColors.PRIMARY,onClick:d},void 0,a),o(u.default,{className:f.default.action,color:f.default.actionRed,size:s.ButtonSizes.LARGE,onClick:c},void 0,r)))},t}(a.PureComponent);p.defaultProps={onAgree:c.NOOP,onDisagree:c.NOOP},t.default=p,e.exports=t.default},6389:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=u(n(189)),l=u(n(521)),s=u(n(5777));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){var n,r;c(this,t);for(var o=arguments.length,l=Array(o),s=0;s<o;s++)l[s]=arguments[s];return n=r=f(this,e.call.apply(e,[this].concat(l))),r.state={animationProgress:new i.default.Value(0),animating:!1,targetHeight:0,baseHeight:0,leaving:!1},r.direction=r.props.getDirection(),r._measureRef=a.createRef(),f(r,n)}return d(t,e),t.prototype.componentDidMount=function(){if(null!=this._measureRef.current){var e=this._measureRef.current.getBoundingClientRect().height;this.setState({targetHeight:e,baseHeight:this.props.getBaseHeight()})}},t.prototype.componentDidUpdate=function(e,t){t.targetHeight!==this.state.targetHeight&&this.props.setHeight(this.state.targetHeight)},t.prototype.componentDidAppear=function(){var e=this.state,t=e.animationProgress,n=e.targetHeight;t.setValue(2),this.setState({baseHeight:n})},t.prototype.componentWillEnter=function(e){var t=this.props.duration,n=this.state.animationProgress;this.setState({animating:!0}),this.props.setHeight(this.state.targetHeight),i.default.timing(n,{toValue:2,duration:t,delay:t/2}).start(e)},t.prototype.componentDidEnter=function(){this.setState({animating:!1})},t.prototype.componentWillLeave=function(e){var t=this.state.animationProgress,n=this.props,r=n.duration,o=n.getDirection;this.direction=o(),this.setState({leaving:!0}),i.default.timing(t,{toValue:0,duration:r}).start(e)},t.prototype.getAnimatedStyle=function(){var e=this.state,t=e.animationProgress,n=e.leaving,r=e.baseHeight,o=e.targetHeight,a=e.animating,l=this.props.sideMargin||0,s=(n?-1:1)*this.direction;return{transform:[{translateX:t.interpolate({inputRange:[0,2],outputRange:[150*s+"%","0%"],extrapolate:"clamp",easing:i.default.Easing.inOut(i.default.Easing.ease)})}],height:a?t.interpolate({inputRange:[0,1],outputRange:[r,o],extrapolate:"clamp",easing:i.default.Easing.inOut(i.default.Easing.ease)}):"auto",opacity:t.interpolate({inputRange:[0,2],outputRange:[0,1],extrapolate:"clamp",easing:i.default.Easing.inOut(i.default.Easing.ease)}),overflow:a?"hidden":"auto",position:n?"absolute":void 0,top:n?0:void 0,left:n?l:void 0,right:n?l:void 0,bottom:n?0:void 0}},t.prototype.render=function(){return o(i.default.div,{style:this.getAnimatedStyle()},void 0,a.createElement("div",{ref:this._measureRef,className:s.default.measurement},this.props.children))},t}(a.PureComponent);p.defaultProps={duration:300};var h=function(e){function t(){var n,r;c(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=f(this,e.call.apply(e,[this].concat(a))),r.stepHeights={},r.prevStep=null,r.prevSteps=[],r.getBaseHeight=function(){return null!=r.prevStep&&null!=r.stepHeights[r.prevStep]?r.stepHeights[r.prevStep]:0},r.getDirection=function(){var e=r.props,t=e.steps,n=e.step,o=t.indexOf(r.prevStep),a=-1===o?r.prevSteps.indexOf(r.prevStep):-1;return Math.max(o,a)>t.indexOf(n)?-1:1},r.setHeight=function(e){var t=r.props.step;r.stepHeights[t]=e},f(r,n)}return d(t,e),t.prototype.componentDidMount=function(){this.setPrevSteps()},t.prototype.componentDidUpdate=function(){this.setPrevSteps()},t.prototype.setPrevSteps=function(){var e=this.props,t=e.step,n=e.steps;this.prevStep=t,this.prevSteps=n},t.prototype.render=function(){var e=this.props,t=e.step,n=e.sideMargin,r=e.children;return o(l.default,{component:"div"},void 0,o(p,{sideMargin:n,getDirection:this.getDirection,getBaseHeight:this.getBaseHeight,setHeight:this.setHeight},t,r))},t}(a.Component);t.default=h,e.exports=t.default},6390:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=m(n(1)),i=y(n(3)),l=y(n(6163)),s=y(n(1193)),u=m(n(982)),c=y(n(941)),f=y(n(939)),d=y(n(6031)),p=y(n(6)),h=y(n(5778));function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){u.tokenizePayPal()},t.prototype.componentWillUnmount=function(){u.teardown().then(function(){return u.createPayPalClient()})},t.prototype.render=function(){var e=this.props,t=e.braintreeEmail,n=e.className;return o(c.default,{className:n,title:p.default.Messages.PAYMENT_SOURCE_PAYPAL_ACCOUNT},void 0,o("div",{className:h.default.inputWrapper},void 0,o(d.default,{type:d.default.Types.PAYPAL,className:h.default.paypalIcon}),o(f.default,{value:t,editable:!1,readOnly:!0,placeholder:p.default.Messages.PAYMENT_SOURCE_CONFIRM_PAYPAL_DETAILS,inputClassName:h.default.paypalInput})))},t}(a.PureComponent);t.default=i.default.connectStores([s.default,l.default],function(){return{paypalClient:s.default.getPayPalClient(),braintreeEmail:l.default.braintreeEmail}})(v),e.exports=t.default},6391:function(e,t,n){"use strict";t.__esModule=!0;var r,o,a,i,l=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),c=E(n(8)),f=E(n(6162)),d=n(1198),p=(n(529),E(n(6394))),h=E(n(7163)),y=E(n(7162)),m=E(n(7161)),v=E(n(939)),g=E(n(6)),_=E(n(5566));function E(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=void 0,C=Object.freeze({CARD_NUMBER:"cardNumber",EXPIRATION_DATE:"expirationDate",CVC:"cvc",NAME:"name"}),A=Object.freeze({MODAL:"modal"}),T=((o={})[C.CARD_NUMBER]={name:C.CARD_NUMBER,title:g.default.Messages.CREDIT_CARD_NUMBER,autoComplete:"cc-number",placeholder:g.default.Messages.PAYMENT_SOURCE_CARD_NUMBER,getClassNameForLayout:function(){return _.default.width100},renderInput:function(e,t){return u.createElement(y.default,s({},e,{inputRef:function(n){return t.setInputRef(e.name,n)},flipped:t.codeFocused,autoFocus:!0}))}},o[C.EXPIRATION_DATE]={name:C.EXPIRATION_DATE,title:g.default.Messages.CREDIT_CARD_EXPIRATION_DATE,autoComplete:"cc-exp",placeholder:g.default.Messages.PAYMENT_SOURCE_EXPIRATION_DATE_PLACEHOLDER,getClassNameForLayout:function(){return _.default.width50},renderInput:function(e,t){return u.createElement(h.default,s({},e,{inputRef:function(n){return t.setInputRef(e.name,n)}}))}},o[C.CVC]={name:C.CVC,title:g.default.Messages.CREDIT_CARD_CVC,autoComplete:"cc-csc",placeholder:g.default.Messages.CREDIT_CARD_SECURITY_CODE,getClassNameForLayout:function(){return _.default.width50},renderInput:function(e,t){return u.createElement(m.default,s({},e,{cardType:t.cardType,inputRef:function(n){return t.setInputRef(e.name,n)}}))}},o[C.NAME]={name:C.NAME,title:g.default.Messages.CREDIT_CARD_NAME_ON_CARD,autoComplete:"cc-name",placeholder:g.default.Messages.CREDIT_CARD_NAME,getClassNameForLayout:function(){return _.default.width100},renderInput:function(e,t){return u.createElement(v.default,s({},e,{inputRef:function(n){return t.setInputRef(e.name,n)}}))}},o),I=((a={})[A.MODAL]=[{fields:[T[C.CARD_NUMBER]]},{fields:[T[C.EXPIRATION_DATE],T[C.CVC]]},{fields:[T[C.NAME]]}],a),O=function(e){function t(){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=o=b(this,e.call.apply(e,[this].concat(i))),o.state={codeFocused:!1,values:(n={},n[C.CARD_NUMBER]=o.props[C.CARD_NUMBER],n[C.EXPIRATION_DATE]=o.props[C.EXPIRATION_DATE],n[C.CVC]=o.props[C.CVC],n[C.NAME]=o.props[C.NAME],n),dirtyFields:{},errors:{}},o._refs={},o.setRef=function(e,t){o._refs[e]=t},o.handleFieldBlur=function(e,t){var n={errors:o.validateForm(!0)};t===C.CVC&&(n.codeFocused=!1),o.setState(n)},o.handleFieldFocus=function(e,t){t===C.CVC&&o.setState({codeFocused:!0})},o.handleFieldChange=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t)throw new Error("You must provide a name for the field.");var i=o.state,l=i.values,u=i.dirtyFields,c=i.errors;delete c[t],o.setState({values:s({},l,(n={},n[t]=e,n)),dirtyFields:s({},u,(r={},r[t]=!0,r)),errors:c},function(){if(a){if(null==t)throw new Error("You must provide a name for the field.");var e=o.getNextFieldName(t);null!=e&&null!=o._refs[e]&&o._refs[e].focus()}})},b(o,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e,t=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.ensureStripeIsLoaded)();case 2:S=e.sent,this.handleInfoChange();case 4:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var i=t[o](a),l=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})});return function(){return t.apply(this,arguments)}}(),t.prototype.componentDidUpdate=function(e,t){this.state!==t&&this.handleInfoChange()},t.prototype.getNextFieldName=function(e){var t=this.props.layout,n=I[t],r=(0,c.default)(n).flatMap(function(e){return e.fields}).map(function(e){return e.name}).value(),o=r.indexOf(e);return-1===o||o===r.length-1?null:r[o+1]},t.prototype.validateForm=function(e){if(null==S)return{};var t=this.state,n=t.values,r=t.dirtyFields,o={};return e&&!r[C.CARD_NUMBER]||(n[C.CARD_NUMBER]?S.card.validateCardNumber(n[C.CARD_NUMBER])||(o[C.CARD_NUMBER]=g.default.Messages.CREDIT_CARD_ERROR_NUMBER):o[C.CARD_NUMBER]=g.default.Messages.CREDIT_CARD_ERROR_REQUIRED),e&&!r[C.EXPIRATION_DATE]||S.card.validateExpiry(n[C.EXPIRATION_DATE])||(o[C.EXPIRATION_DATE]=g.default.Messages.CREDIT_CARD_ERROR_EXPIRATION),e&&!r[C.CVC]||S.card.validateCVC(n[C.CVC])||(o[C.CVC]=g.default.Messages.CREDIT_CARD_ERROR_SECURITY_CODE),e&&!r[C.NAME]||n[C.NAME]||(o[C.NAME]=g.default.Messages.PAYMENT_SOURCE_NAME_ERROR_REQUIRED),o},t.prototype.handleInfoChange=function(){var e=this.state.values,t=this.validateForm(!1);this.props.onCardInfoChange(e,0===Object.keys(t).length)},t.prototype.render=function(){var e=this.props,t=e.layout,n=e.error,r=e.className,o=this.state,a=o.errors,i=o.codeFocused,s=o.values,u=I[t];if(null==u)throw new Error("Provide a proper layout property.");var c=f.default.getCreditCardType(s[C.CARD_NUMBER]);return l(p.default,{className:r,form:u,layout:t,values:s,errors:a,formError:n,onFieldChange:this.handleFieldChange,onFieldBlur:this.handleFieldBlur,onFieldFocus:this.handleFieldFocus,codeFocused:i,cardType:c,setInputRef:this.setRef})},t}(u.PureComponent);O.Layouts=A,O.defaultProps=((i={})[C.CARD_NUMBER]="",i[C.EXPIRATION_DATE]="",i[C.CVC]="",i[C.NAME]="",i.layout=A.MODAL,i),t.default=O,e.exports=t.default},6392:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=p(n(520)),l=p(n(64)),s=p(n(40)),u=p(n(6031)),c=p(n(6)),f=n(0),d=p(n(5780));function p(e){return e&&e.__esModule?e:{default:e}}var h=[{type:f.PaymentSourceTypes.CARD,text:c.default.Messages.PAYMENT_SOURCE_CREDIT_CARD,iconType:u.default.Types.UNKNOWN},{type:f.PaymentSourceTypes.PAYPAL,text:c.default.Messages.PAYMENT_SOURCE_PAYPAL,iconType:u.default.Types.PAYPAL}];var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.onChooseType,n=e.className,r=function(e){return null==e?h:h.filter(function(t){var n=t.type;return null!=e&&e.includes(n)})}(e.validPaymentTypes).map(function(e){return o(l.default,{onClick:function(){return t(e.type)},className:d.default.button},e.type,o(s.default,{align:s.default.Align.CENTER},void 0,o(u.default,{className:d.default.buttonIcon,type:e.iconType}),e.text))});return o(i.default.FormSection,{title:c.default.Messages.PAYMENT_SOURCE_TYPE_SELECT,className:n},void 0,o(s.default,{},void 0,r))},t}(a.PureComponent);t.default=y,e.exports=t.default},6393:function(e,t,n){"use strict";t.__esModule=!0,t.updateCardInfo=function(e,t){a.default.dispatch({type:i.ActionTypes.NEW_PAYMENT_SOURCE_CARD_INFO_UPDATE,info:e,isValid:t})},t.clearCardInfo=function(){a.default.dispatch({type:i.ActionTypes.NEW_PAYMENT_SOURCE_CARD_INFO_UPDATE,info:{cardNumber:"",expirationDate:"",cvc:"",name:""},isValid:!1})},t.updateAddressInfo=function(e,t){a.default.dispatch({type:i.ActionTypes.NEW_PAYMENT_SOURCE_ADDRESS_INFO_UPDATE,info:e,isValid:t})},t.clearError=function(){a.default.dispatch({type:i.ActionTypes.NEW_PAYMENT_SOURCE_CLEAR_ERROR})};var r,o=n(2),a=(r=o)&&r.__esModule?r:{default:r},i=n(0)},6394:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=f(n(9)),s=(n(529),f(n(520))),u=f(n(40)),c=f(n(5566));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var p=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.state={changedSinceError:new Set},r.renderFormSection=r.renderFormSection.bind(r),r.renderFormRow=r.renderFormRow.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidUpdate=function(e){if(this.props.formError!==e.formError)this.setState({changedSinceError:new Set});else if(null!=this.props.formError){var t=this.state.changedSinceError;this.getChangedValues(e).forEach(function(e){return t.add(e)}),this.setState({changedSinceError:t})}},t.prototype.getChangedValues=function(e){var t=this.props.values,n=e.values;return Object.keys(t).filter(function(e){return t[e]!==n[e]})},t.prototype.getError=function(e){var t=this.props,n=t.errors,r=t.formError;return null!=n[e]?n[e]:null==r||this.state.changedSinceError.has(e)?null:r.getFieldMessage(e)},t.prototype.renderFormSection=function(e){var t=this.props,n=t.values,r=t.onFieldChange,i=t.onFieldFocus,u=t.onFieldBlur,c=t.layout,f=d(t,["values","onFieldChange","onFieldFocus","onFieldBlur","layout"]),p=e.getClassNameForLayout,h=e.renderInput,y=e.title,m=e.name,v=d(e,["getClassNameForLayout","renderInput","title","name"]),g=a({},v,{layout:c,error:this.getError(m),value:n[m],name:m,onChange:r,onFocus:i,onBlur:u});return o(s.default.FormSection,{className:(0,l.default)(p&&p(c)),title:y},m,h(g,f))},t.prototype.renderFormRow=function(e){var t=e.fields.map(this.renderFormSection);return o(u.default,{className:(0,l.default)(c.default.row,e.className)},e.fields.map(function(e){return e.name}).join(""),t)},t.prototype.render=function(){var e=this.props,t=e.form,n=e.className,r=t.map(this.renderFormRow);return o("div",{className:n},void 0,r)},t}(i.PureComponent);t.default=p,e.exports=t.default},6598:function(e,t,n){e.exports=function(){return new Worker(n.p+"3b33246f471d03673055.worker.js")}},6602:function(e,t,n){"use strict";t.__esModule=!0;var r=h(n(3)),o=h(n(8)),a=h(n(2)),i=(n(0),h(n(18))),l=h(n(12)),s=h(n(26)),u=h(n(31)),c=h(n(60)),f=h(n(276)),d=h(n(271)),p=h(n(59));function h(e){return e&&e.__esModule?e:{default:e}}var y={};function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=i.default.getChannel(e),a=null!=o?o.getGuildId():null;return{id:e,messages:t.map(function(e){return f.default.create(e)}),guildId:a,loaded:n,loading:r}}function v(){o.default.forEach(y,function(e){o.default.forEach(e.messages,function(e){e.timestamp.locale(u.default.locale)})})}function g(){o.default.forEach(y,function(e){e.messages=e.messages.map(function(e){return e.set("blocked",p.default.isBlocked(e.author.id))})})}var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.initialize=function(){this.waitFor(i.default,s.default,c.default,d.default,l.default,u.default)},t.prototype.getPinnedMessages=function(e){return y[e]&&y[e]||null},t.prototype.loaded=function(e){return y[e]&&y[e].loaded},t}(r.default.Store);t.default=new _(a.default,{CONNECTION_OPEN:function(e){y={}},GUILD_DELETE:function(e){var t=e.guild;y=(0,o.default)(y).filter(function(e){return e.guildId!==t.id}).keyBy("id").value()},MESSAGE_UPDATE:function(e){var t=e.message.id,n=e.message.channel_id,r=y[n];if(null!=e.message.author)if(e.message.pinned){if(!r)return r=m(n,[e.message],!1),void(y[n]=r);r.messages=r.messages.slice();var a=o.default.findIndex(r.messages,function(e){return e.id===t});-1===a?r.messages.unshift(f.default.create(e.message)):r.messages[a]=r.messages[a].updateMessage(e.message),y[n]=r}else{if(!r)return;var i=o.default.findIndex(r.messages,function(e){return e.id===t});if(-1===i)return;r.messages=r.messages.slice(),r.messages.splice(i,1),y[n]=r}else if(r){var l=o.default.findIndex(r.messages,function(e){return e.id===t});if(l>=0){var s=r.messages[l],u=s.updateMessage(e.message);if(u!==s){var c=r.messages.slice();c[l]=u,y[n].messages=c}}}},MESSAGE_DELETE:function(e){var t=e.id,n=e.channelId,r=y[n];r&&0!==o.default.remove(r.messages,function(e){return e.id===t}).length&&(r.messages=r.messages.slice(),y[n]=r)},MESSAGE_DELETE_BULK:function(e){var t=e.ids,n=e.channelId,r=y[n];r&&(r.messages=r.messages.filter(function(e){return-1===t.indexOf(e.id)}))},LOAD_PINNED_MESSAGES:function(e){var t=e.channelId;y[t]=m(t,[],!1,!0)},LOAD_PINNED_MESSAGES_SUCCESS:function(e){var t=e.channelId,n=e.messages;y[t]=m(t,n,!0)},LOAD_PINNED_MESSAGES_FAILURE:function(e){var t=e.channelId;delete y[t]},USER_SETTINGS_UPDATE:function(e){return v()},I18N_LOAD_SUCCESS:function(e){return v()},CHANNEL_DELETE:function(e){var t=e.channel;delete y[t.id]},RELATIONSHIP_ADD:function(e){return g()},RELATIONSHIP_REMOVE:function(e){return g()}}),e.exports=t.default},6603:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=s(n(3)),a=s(n(2)),i=s(n(271)),l=s(n(273));n(0);function s(e){return e&&e.__esModule?e:{default:e}}var u={editingChannelId:null,editingMessageId:null,editingContent:null};function c(){u={editingChannelId:null,editingMessageId:null,editingContent:null}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isEditing=function(e,t){return e===u.editingChannelId&&t===u.editingMessageId},t.prototype.getEditingContent=function(){return u.editingContent},t.prototype.getEditingMessageId=function(){return u.editingMessageId},t.prototype.getEditingMessage=function(){return null!=u.editingChannelId&&null!=u.editingMessageId?i.default.getMessage(u.editingChannelId,u.editingMessageId):null},t}(o.default.Store);t.default=new f(a.default,{MESSAGE_START_EDIT:function(e){var t=e.channelId,n=e.messageId,r=e.content;u={editingChannelId:t,editingMessageId:n,editingContent:l.default.unparse(r,t)}},MESSAGE_UPDATE_EDIT:function(e){var t=e.content;if(null==u.editingChannelId&&null==u.editingMessageId&&null==u.editingContent)return!1;u=r({},u,{editingContent:t})},MESSAGE_END_EDIT:function(e){return c()},CHANNEL_SELECT:function(e){return c()},GUILD_SELECT:function(e){return c()}}),e.exports=t.default},6604:function(e,t,n){"use strict";t.__esModule=!0,t.AttachmentUpload=void 0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),h(n(9))),i=h(n(6268)),l=h(n(6)),s=h(n(163)),u=h(n(1004)),c=h(n(79)),f=h(n(87)),d=n(6011),p=h(n(5881));function h(e){return e&&e.__esModule?e:{default:e}}var y=function(e){var t=e.filename,r=(0,d.classifyFileName)(t),a=n(7465)("./icon-file-small-"+r+".svg");return o("img",{className:p.default.icon,src:a,alt:l.default.Messages.IMG_ALT_ATTACHMENT_FILE_TYPE.format({fileType:r}),title:r})};t.AttachmentUpload=function(e){var t=e.className,n=e.filename,r=e.size,s=e.progress,d=e.onCancelUpload,h=e.onClick,m=e.onContextMenu,v=100===s,g=!v&&r>0;return o("div",{className:(0,a.default)(p.default.attachment,t)},void 0,o(y,{filename:n}),o("div",{className:p.default.attachmentInner},void 0,o("div",{className:p.default.filenameWrapper},void 0,o(f.default,{className:p.default.filename,onClick:h,onContextMenu:m},void 0,n),g?o("div",{className:p.default.size},void 0,"— "+i.default.filesize(r)):null),o("div",{className:p.default.progressContainer},void 0,v?l.default.Messages.ATTACHMENT_PROCESSING:o(u.default,{className:p.default.progress,percent:s}))),v?null:o(f.default,{onClick:d},void 0,o(c.default,{name:c.default.Names.CLOSE,className:p.default.cancelButton,width:24,height:24})))};t.default=function(e){var t=e.className,n=e.url,r=e.filename,l=e.size,u=e.onClick,f=e.onContextMenu;return o("div",{className:(0,a.default)(p.default.attachment,t)},void 0,o(y,{filename:r}),o("div",{className:p.default.attachmentInner},void 0,o("div",{className:p.default.filenameLinkWrapper},void 0,o(s.default,{className:p.default.fileNameLink,href:n,onClick:u,onContextMenu:f},void 0,r)),o("div",{className:p.default.metadata},void 0,i.default.filesize(l))),o(s.default,{href:n,target:"_blank",rel:"noreferrer noopener"},void 0,o(c.default,{name:c.default.Names.DOWNLOAD,className:p.default.downloadButton,width:24,height:24})))}},6605:function(e,t,n){"use strict";t.__esModule=!0,t.ButtonAddReaction=void 0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=T(n(8)),s=T(n(521)),u=T(n(189)),c=T(n(9)),f=T(n(1229)),d=T(n(6614)),p=T(n(142)),h=T(n(87)),y=T(n(223)),m=T(n(6)),v=T(n(7468)),g=n(550),_=T(n(1019)),E=T(n(191)),b=n(565),S=n(0),C=T(n(5882)),A=n(532);function T(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var N=t.ButtonAddReaction=function(e){function t(){var n,r;I(this,t);for(var o=arguments.length,l=Array(o),s=0;s<o;s++)l[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(l))),r.onAddReaction=function(e){if(null!=e){var t=r.props,n=t.channel,o=t.message;(0,g.addReaction)(n.id,o.id,(0,b.toReactionEmoji)(e))}},r.renderReactionPopout=function(e){var t=r.props.channel;return i.createElement(d.default,a({},e,{channel:t,onSelectEmoji:r.onAddReaction}))},O(r,n)}return M(t,e),t.prototype.render=function(){var e=this.props,t=e.message,n=e.left,r=e.className;return t.state===S.MessageStates.SENDING||t.author.isLocalBot()?null:o(y.default,{closeOnScroll:!1,render:this.renderReactionPopout,position:n?y.default.Positions.LEFT:y.default.Positions.RIGHT,offsetX:n?-10:0,tooltip:m.default.Messages.ADD_REACTION,subscribeTo:n?S.ComponentActions.TOGGLE_REACTION_POPOUT(t.id):null},void 0,o("div",{className:(0,c.default)(C.default.reactionBtn,r)}))},t}(i.Component);N.defaultProps={left:!0};var P=function(e){function t(n){I(this,t);var r=O(this,e.call(this,n));return r.state={tooltipText:""},r.scale=new u.default.Value(1),r.opacity=new u.default.Value(1),l.default.bindAll(r,["handleClick","handleMouseOver","handleMouseOut","handleStoreChange"]),r}return M(t,e),t.prototype.componentWillAppear=function(e){this.animateIn(e)},t.prototype.componentWillEnter=function(e){this.animateIn(e)},t.prototype.componentWillUnmount=function(){this.handleMouseOut()},t.prototype.animateIn=function(e){E.default.isFocused()?(this.scale.setValue(0),this.opacity.setValue(0),u.default.parallel([u.default.timing(this.scale,{toValue:1,duration:300,easing:u.default.Easing.inOut(u.default.Easing.back())}),u.default.timing(this.opacity,{toValue:1,duration:300})]).start(e)):(this.scale.setValue(1),this.opacity.setValue(1),e())},t.prototype.handleClick=function(){var e=this.props,t=e.message,n=e.emoji,r=e.me,o=e.readOnly,a=t.getChannelId();r?(0,g.removeReaction)(a,t.id,n):o||(0,g.addReaction)(a,t.id,n)},t.prototype.handleMouseOver=function(){var e=this;this.timeout=this.timeout||setTimeout(function(){e.timeout=null,e.handleStoreChange(),_.default.addChangeListener(e.handleStoreChange)},500)},t.prototype.handleMouseOut=function(){null!=this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.setState({tooltipText:""})),_.default.removeChangeListener(this.handleStoreChange)},t.prototype.handleStoreChange=function(){var e=this.props,t=e.message,n=e.emoji;this.setState({tooltipText:(0,b.getReactionTooltip)(t,n)})},t.prototype.render=function(){var e,t=this.props,n=t.count,r=t.emoji,a=t.me,i=t.readOnly,l=t.backgroundOpacity,s={transform:[{scale:this.scale}],opacity:this.opacity};return o(p.default,{text:this.state.tooltipText},void 0,o(u.default.div,{className:(0,c.default)(C.default.reaction,C.default[l+"BackgroundOpacity"],(e={},e[C.default.reactionMe]=a,e[C.default.reactionReadOnly]=i,e)),style:s},void 0,o(h.default,{className:C.default.reactionInner,onClick:this.handleClick,onMouseOver:this.handleMouseOver,onFocus:this.handleMouseOver,onMouseOut:this.handleMouseOut,onBlur:this.handleMouseOut},void 0,o(f.default,{emojiId:r.id,emojiName:r.name,animated:r.animated}),o(v.default,{className:(0,c.default)(C.default.reactionCount,C.default[l+"BackgroundOpacity"]),value:n,digitWidth:9}))))},t}(i.PureComponent),R=function(e){function t(){var n,r;I(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.state={disableTransitionAppear:!0,reactionsCount:r.props.message.reactions.length},O(r,n)}return M(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.message.reactions.length;return 0===t.reactionsCount&&n>0?{disableTransitionAppear:!1,reactionsCount:n}:t.reactionsCount!==n?{reactionsCount:n}:null},t.prototype.render=function(){var e=this.props,t=e.message,n=e.disableReactionCreates,r=e.disableReactionUpdates,l=e.channel,u=this.state.disableTransitionAppear;if(!t.reactions.length)return null;var c=o(N,{message:t,channel:l,left:!1});return o(A.BackgroundOpacityContext.Consumer,{},void 0,function(e){return o(s.default,{className:C.default.reactions,transitionAppear:!u,transitionLeave:!1},void 0,t.reactions.map(function(n){return i.createElement(P,a({key:(n.emoji.id||0)+":"+n.emoji.name,message:t,readOnly:r,backgroundOpacity:e.backgroundOpacity},n))}),!n&&c)})},t}(i.PureComponent);t.default=R},6606:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=h(n(9)),l=h(n(142)),s=h(n(6)),u=n(533),c=n(0),f=h(n(5883)),d=h(n(1226)),p=n(532);function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){var t=e.timestamp;return o(l.default,{text:null!=t?(0,u.calendarFormat)(t):null},void 0,o("time",{dateTime:t.toISOString(),className:f.default.edited,role:"note"},void 0,"(",s.default.Messages.MESSAGE_EDITED,")"))},v=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=y(this,e.call.apply(e,[this].concat(a))),r.onContextMenu=function(e){var t=r.props;(0,t.onContextMenu)(e,{message:t.message,channel:t.channel,target:e.target})},y(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e,t=this,n=this.props,r=n.className,a=n.message,l=n.channel,s=n.renderButtons,u=n.renderPrefix,h=n.children,y=n.disableButtons,v=n.disableMentionStyles,g=n.isCompact,_=a.isEdited(),E=a.state===c.MessageStates.SEND_FAILED,b=a.state===c.MessageStates.SENDING,S=a.type!==c.MessageTypes.DEFAULT,C=a.mentioned&&!S,A=(0,i.default)(r,((e={})[f.default.isMentionedCompact]=C&&!v&&g,e[f.default.isMentionedCozy]=C&&!v&&!g,e[f.default.isSending]=b,e[f.default.containerCompact]=g,e[f.default.containerCozy]=!g,e));return o(p.BackgroundOpacityContext.Consumer,{},void 0,function(e){var n;return o("div",{className:(0,i.default)(A,f.default[e.backgroundOpacity+"BackgroundOpacity"],d.default[e.backgroundOpacity+"BackgroundOpacity"]),onContextMenu:t.onContextMenu},void 0,!y&&s&&o("div",{className:f.default.buttonContainer},void 0,s({message:a,channel:l})),h||o("div",{className:(0,i.default)(f.default.markup,d.default.markup,(n={},n[f.default.isFailed]=E,n[f.default.isCompact]=g,n))},void 0,null!=u&&u({message:a,channel:l}),a.contentParsed,_&&null!=a.editedTimestamp&&o(m,{timestamp:a.editedTimestamp})))})},t}(a.PureComponent);v.defaultProps={disableMentionStyles:!1,disableButtons:!1},t.default=v,e.exports=t.default},6607:function(e,t,n){"use strict";t.__esModule=!0;var r=c(n(6)),o=n(0),a=c(n(14)),i=c(n(12)),l=n(580),s=c(n(286)),u=c(n(167));function c(e){return e&&e.__esModule?e:{default:e}}function f(){}var d=function(){return[r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_01,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_02,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_03,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_04,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_05,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_06,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_07,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_08,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_09,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_10,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_11,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_12,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_13,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_14,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_15,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_16,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_17,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_18,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_19,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_20,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_21,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_22,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_23,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_24,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_25,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_26,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_27,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_28,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_29,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_30,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_31,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_32,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_33,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_34,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_35,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_36,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_37,r.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_38]};function p(e){var t=d();return t[u.default.extractTimestamp(e)%t.length]}t.default={stringify:function(e){var t=e.mentions[0]&&i.default.getUser(e.mentions[0].id),n=e.channel_id,u=s.default.getName(null,n,e.author);switch(e.type){case o.MessageTypes.RECIPIENT_ADD:if(!t)return;return(0,l.astToString)(r.default.Messages.SYSTEM_MESSAGE_RECIPIENT_ADD.format({username:u,usernameOnClick:f,otherUsername:s.default.getName(null,n,t),otherUsernameOnClick:f},!1));case o.MessageTypes.RECIPIENT_REMOVE:if(!t)return;return e.author.id===t.id?(0,l.astToString)(r.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE_SELF.format({username:u,usernameOnClick:f},!1)):(0,l.astToString)(r.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE.format({username:u,usernameOnClick:f,otherUsername:s.default.getName(null,n,t),otherUsernameOnClick:f},!1));case o.MessageTypes.CALL:var c=e.call;return c&&-1===c.participants.indexOf(a.default.getId())?(0,l.astToString)(r.default.Messages.SYSTEM_MESSAGE_CALL_STARTED.format({username:u,usernameOnClick:f},!1)):void 0;case o.MessageTypes.CHANNEL_NAME_CHANGE:return(0,l.astToString)(r.default.Messages.SYSTEM_MESSAGE_CHANNEL_NAME_CHANGE.format({username:u,usernameOnClick:f,channelName:e.content},!1));case o.MessageTypes.CHANNEL_ICON_CHANGE:return(0,l.astToString)(r.default.Messages.SYSTEM_MESSAGE_CHANNEL_ICON_CHANGE.format({username:u,usernameOnClick:f},!1));case o.MessageTypes.CHANNEL_PINNED_MESSAGE:return(0,l.astToString)(r.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE_NO_CTA.format({username:u,usernameOnClick:f},!1));case o.MessageTypes.USER_JOIN:var d=p(e.id);return(0,l.astToString)(d.format({username:u,usernameOnClick:f},!1));default:return e.content}},getSystemMessageUserJoin:p},e.exports=t.default},6608:function(e,t,n){e.exports=n.p+"b8029fe196b8f1382e90bbe81dab50dc.svg"},6609:function(e,t,n){e.exports=n.p+"0c9615349350c4185381d58c69b88cbc.svg"},6610:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.openUserContextMenu=function(e,t,n){var o={user:t,channelId:n.id};n.isGroupDM()?o.type=l.ContextMenuTypes.USER_GROUP_DM:n.isDM()?(o.selected=!0,o.type=l.ContextMenuTypes.USER_PRIVATE_CHANNELS_MESSAGE):(o.type=l.ContextMenuTypes.USER_CHANNEL_MESSAGE,o.guildId=n.getGuildId());(0,i.openContextMenu)(e,function(e){return a.createElement(u.default,r({},e,o))})};var o,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=n(33),l=n(0),s=n(942),u=(o=s)&&o.__esModule?o:{default:o}},6611:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=M(n(43)),l=M(n(3)),s=M(n(6)),u=M(n(9)),c=M(n(6235)),f=n(0),d=M(n(6068)),p=M(n(6109)),h=M(n(951)),y=M(n(1e3)),m=M(n(6110)),v=M(n(192)),g=M(n(273)),_=M(n(967)),E=M(n(7481)),b=M(n(6236)),S=M(n(977)),C=M(n(971)),A=M(n(5568)),T=M(n(519)),I=M(n(142)),O=M(n(64));function M(e){return e&&e.__esModule?e:{default:e}}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){function t(){var n,r;N(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=P(this,e.call.apply(e,[this].concat(a))),r.tryAbort=function(){r.reader&&1===r.reader.readyState&&r.reader.abort()},r.loadImagePreview=function(e){r.tryAbort(),r.reader=new FileReader,r.reader.onload=function(e){return r.setState({imageDataUri:e.target.result,imageLoaded:!0})},r.reader.readAsDataURL(e.file)},r.state={imageDataUri:r.state?r.state.imageDataUri:null,imageLoaded:!1},P(r,n)}return R(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.loadImagePreview(this.props)},t.prototype.UNSAFE_componentWillUpdate=function(e){this.loadImagePreview(e)},t.prototype.componentWillUnmount=function(){this.tryAbort()},t.prototype.render=function(){var e;if(this.state.imageLoaded){var t={backgroundImage:"url('"+this.state.imageDataUri+"')"};return o("div",{className:(0,u.default)(A.default.icon,A.default.image),style:t})}return o("div",{className:(0,u.default)(A.default.icon,(e={},e[A.default.image]=!0,e))})},t}(a.PureComponent);w.defaultProps={file:null};var L=function(e){function t(){return N(this,t),P(this,e.apply(this,arguments))}return R(t,e),t.prototype.render=function(){return this.props.upload.isImage?o(w,{file:this.props.upload.file},this.props.upload.id):o("div",{className:(0,u.default)([A.default.icon],(e={},e[A.default[this.props.upload.classification]]=!0,e))});var e},t}(a.Component),D=(0,i.default)({displayName:"Upload",mixins:[l.default.StoreListenerMixin(E.default,y.default),_.default,S.default,C.default],statics:{modalConfig:{closable:!1}},getStateFromStores:function(){var e=E.default.getFirstUpload(),t=e?e.channel.id:null,n=t?y.default.getSlowmodeCooldownGuess(t):0;return{upload:e,file:e?e.file:null,hasAdditionalUploads:E.default.hasAdditionalUploads(),cooldown:n}},getInitialState:function(){var e=E.default.getFirstUpload(),t=e?e.channel.id:null;return{transitioning:!1,textValue:p.default.getDraft(t)||"",textFocused:!0}},getSubscriptions:function(){var e;return(e={})[f.ComponentActions.MODAL_SUBMIT]=this.confirm,e[f.ComponentActions.MODAL_CLOSE]=this.cancel,e},shouldComponentUpdate:function(e,t){return t.upload},cancelAll:function(){b.default.clearAll(),this.props.onClose()},cancel:function(){this.showNextFile()},confirm:function(){var e=this,t=this.state,n=t.transitioning,r=t.upload,o=t.textValue;return n||!r?Promise.resolve(!1):h.default.isOpen("popout-channel-text-area-shouting")?(v.default.close("popout-channel-text-area-shouting"),this.submitUpload(!0,o,r),Promise.resolve(!0)):this.applyChatRestrictions(this.channelTextAreaRef,o,r.channel).then(function(t){var n=t.valid;e.submitUpload(n,o,r)})},submitUpload:function(e,t,n){if(e){var r=g.default.parse(n.channel,t);m.default.saveDraft(n.channel.id,""),this.setState({textFocused:!0,textValue:""});var o=c.default.upload.bind(null,n.channel.id,n.file,r);setTimeout(o,125),this.showNextFile()}},showNextFile:function(){var e=this;this.state.transitioning||(this.state.hasAdditionalUploads?(this.setState({transitioning:!0}),this.setTimeout(function(){return b.default.popFirstFile()},100),this.setTimeout(function(){return e.setState({transitioning:!1})},200)):(b.default.popFirstFile(),this.props.onClose()))},handleTextChange:function(e,t){this.setState({textValue:t})},onSubmitText:function(){return this.confirm()},render:function(){var e,t=this,n=this.state,r=n.hasAdditionalUploads,i=n.transitioning,l=n.upload,c=n.sizeString,p=n.textValue,h=n.textFocused,y=n.cooldown,m=y>0,v=m?s.default.Messages.CHANNEL_SLOWMODE_COOLDOWN.format({seconds:Math.round((y+1e3)/1e3)}):null,g=null;return r&&(g=o("button",{type:"submit",className:(0,u.default)({button:!0}),onClick:this.cancelAll},void 0,o("span",{},void 0,s.default.Messages.UPLOAD_AREA_CANCEL_ALL))),o("div",{className:(0,u.default)(A.default.uploadModal,"theme-brand",(e={},e[A.default.transitioning]=i,e))},void 0,o("div",{className:A.default.inner},void 0,o("div",{className:A.default.file},void 0,o(L,{upload:l}),o("div",{className:A.default.description},void 0,o("div",{className:A.default.filename},void 0,l.filename),o("div",{className:A.default.filesize},void 0,c))),o("div",{className:A.default.comment},void 0,o("div",{className:A.default.label},void 0,o("span",{},void 0,s.default.Messages.UPLOAD_AREA_LEAVE_A_COMMENT),o("span",{className:A.default.optional},void 0,"(",s.default.Messages.UPLOAD_AREA_OPTIONAL,")")),a.createElement(d.default,{ref:function(e){t.channelTextAreaRef=e},className:(0,u.default)(A.default.channelTextAreaUpload,T.default.marginTop8),value:p,focused:h,channel:l.channel,onChange:this.handleTextChange,onSubmit:this.onSubmitText,type:f.TextareaTypes.FORM}))),o("div",{className:A.default.footer},void 0,g,o("button",{type:"submit",className:(0,u.default)({button:!0}),onClick:this.cancel},void 0,o("span",{},void 0,s.default.Messages.CANCEL)),o(I.default,{text:v},void 0,o("div",{},void 0,o(O.default,{disabled:m,type:"submit",className:(0,u.default)({button:!0,"button-primary":!0}),onClick:this.confirm},void 0,o("span",{},void 0,s.default.Messages.UPLOAD))))))}});t.default=D,e.exports=t.default},6612:function(e,t,n){"use strict";t.__esModule=!0;var r=c(n(2)),o=c(n(6)),a=c(n(38)),i=c(n(145)),l=c(n(6077)),s=c(n(7483)),u=n(0);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){var c="",d=!1;null!=n&&(c=n.content,d=n.tts);var p=new s.default(u.Endpoints.MESSAGES(e));p.on("start",function(t){r.default.dispatch({type:u.ActionTypes.UPLOAD_START,channelId:e,file:t,uploader:p})}),p.on("progress",function(t){r.default.dispatch({type:u.ActionTypes.UPLOAD_PROGRESS,channelId:e,file:t})}),p.on("error",function(t,s){r.default.dispatch({type:u.ActionTypes.UPLOAD_FAIL,channelId:e,file:t}),s!==u.AbortCodes.EXPLICIT_CONTENT?a.default.push(l.default,{title:o.default.Messages.UPLOAD_AREA_UPLOAD_FAILED_TITLE,help:o.default.Messages.UPLOAD_AREA_UPLOAD_FAILED_HELP.format({onClick:function(){a.default.pop(),f(e,t,n)}})}):i.default.sendClydeError(e,s)}),p.on("complete",function(t){r.default.dispatch({type:u.ActionTypes.UPLOAD_COMPLETE,channelId:e,file:t})}),p.upload(t,{content:c,tts:d})}t.default={instantBatchUpload:function(e,t){Array.prototype.forEach.call(t,function(t){f(e,t)})},upload:f,cancel:function(e){r.default.dispatch({type:u.ActionTypes.UPLOAD_CANCEL_REQUEST,file:e})}},e.exports=t.default},6613:function(e,t,n){e.exports=n.p+"f24711dae4f6d6b28335e866a93e9d9b.png"},6614:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=w(n(43)),s=w(n(57)),u=n(543),c=w(u),f=w(n(192)),d=w(n(522)),p=w(n(8)),h=w(n(9)),y=w(n(6)),m=w(n(6023)),v=w(n(64)),g=w(n(87)),_=w(n(7494)),E=w(n(3)),b=w(n(1231)),S=w(n(282)),C=w(n(26)),A=w(n(538)),T=w(n(6680)),I=w(n(189)),O=w(n(234)),M=w(n(20)),N=w(n(235)),P=n(0),R=w(n(5887));function w(e){return e&&e.__esModule?e:{default:e}}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var U=b.default.convert.fromCodePoint("1f44c"),x=125,j=function(e){function t(){var n,r;L(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=D(this,e.call.apply(e,[this].concat(a))),r.state={opacity:new I.default.Value(r.props.fade?0:1)},D(r,n)}return k(t,e),t.prototype.componentDidMount=function(){this.props.fade&&I.default.timing(this.state.opacity,{delay:this.props.delay,toValue:1,duration:150}).start()},t.prototype.render=function(){var e=this,t=N.default.getURL(U+this.props.surrogate),n={opacity:this.state.opacity,backgroundImage:'url("'+t+'")'};return a(I.default.div,{onClick:function(){return e.props.onClick(e.props.surrogate)},className:R.default.item,style:n})},t}(i.Component);j.defaultProps={delay:0,fade:!1};var G=28,B=function(e){function t(){var n,r;L(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=D(this,e.call.apply(e,[this].concat(a))),r.state={isOpen:!1,height:new I.default.Value(G)},r.me=i.createRef(),r.handleDiversityColorChange=function(e){T.default.setDiversityColor(e),r.close()},r.handleOpen=function(){I.default.timing(r.state.height,{fromValue:G,toValue:180,duration:x}).start(),r.setState({isOpen:!0}),document.addEventListener("click",r.close,!0),r.props.onOpen&&r.props.onOpen(!0)},r.close=function(e){if(null!=e&&null!=r.me.current)for(var t=e.target;null!=t;){if(t===r.me.current)return;t=t.parentNode}r.setState({isOpen:!1}),r.state.height.setValue(G),r.props.onOpen&&r.props.onOpen(!1)},D(r,n)}return k(t,e),t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.close,!0)},t.prototype.render=function(){var e=this,t=this.props.selectedSurrogate;if(this.state.isOpen){var n=[""].concat(P.DIVERSITY_SURROGATES);p.default.remove(n,function(e){return e===t}),n.unshift(t);var r=n.map(function(t,n){return a(j,{fade:n>0,delay:20*n,surrogate:t,onClick:e.handleDiversityColorChange},n)});return i.createElement("div",{ref:this.me,className:R.default.diversitySelector},a(I.default.div,{className:R.default.popout,style:{height:this.state.height}},void 0,r))}var o=N.default.getURL(U+t);return a(g.default,{className:R.default.diversitySelector,onClick:this.handleOpen},void 0,a("div",{className:R.default.item,style:{backgroundImage:'url("'+o+'")'}}))},t}(i.PureComponent),F=(0,l.default)({displayName:"EmojiPicker",mixins:[s.default,E.default.StoreListenerMixin(S.default)],getStateFromStores:function(){return{diversitySurrogate:S.default.diversitySurrogate}},getInitialState:function(){return{premiumPromoOpen:!1,diversityPickerOpen:!1,metaData:this.computeMetaData(null),searchResults:null,currentSection:S.default.categories[0],selectedRow:-1,selectedColumn:-1,query:"",placeholder:y.default.Messages.SEARCH_FOR_EMOJI}},selectEmoji:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null!=e&&N.default.isEmojiDisabled(e,this.props.channel)?this.setState({premiumPromoOpen:!0}):(this.props.onSelectEmoji&&this.props.onSelectEmoji(e),t?f.default.close(this.props.popoutKey):this.focusSearch())},clearNow:function(e){var t={query:"",placeholder:y.default.Messages.SEARCH_FOR_EMOJI,searchResults:null,metaData:this.computeMetaData(null),selectedRow:-1,selectedColumn:-1};""!==this.state.query&&(t.currentSection=S.default.categories[0]),this.focusSearch(),this.setState(t,e)},handleClear:function(){this.clearNow()},handleSelect:function(e,t,n){null!==e||null!==t?this.selectEmoji(this.state.metaData[e].items[t].emoji,!n.shiftKey):this.selectEmoji(null)},handleSelectionChange:function(e,t){if(!(e<0||t<0)){var n=this.state.metaData[e].items[t],r=n.emoji,o=n.offsetTop;this.setState({selectedRow:e,selectedColumn:t,placeholder:r.allNamesString}),this.refs.scroller.scrollIntoViewRect(o,o+32,!1)}},handleQueryChange:function(e){if(""!==e){var t=e;":"===t[0]&&(t=t.slice(1));var n=S.default.search(this.props.channel,t);this.setState({query:e,searchResults:n,metaData:this.computeMetaData(n),selectedRow:-1,selectedColumn:-1,currentSection:null})}else this.clearNow()},focusSearch:function(){this.refs.search.focus()},UNSAFE_componentWillMount:function(){this.spriteSheetSize=[22*P.EmojiSprites.NonDiversityPerRow+"px",22*Math.ceil(O.default.numNonDiversitySprites/P.EmojiSprites.NonDiversityPerRow)+"px"].join(" "),this.diversitySpriteSheetSize=[22*P.EmojiSprites.DiversityPerRow+"px",22*Math.ceil(O.default.numDiversitySprites/P.EmojiSprites.DiversityPerRow)+"px"].join(" ")},componentDidMount:function(){M.default.track(P.AnalyticEvents.OPEN_POPOUT,{type:"Emoji Picker"}),this.focusSearch();var e=this.props.onOpen;e&&e()},componentWillUnmount:function(){var e=this.props.onClose;e&&e()},onHoverEmoji:function(e,t,n){this.setState({selectedRow:t,selectedColumn:n,placeholder:e.allNamesString})},scrollNow:function(e){var t=this;this.clearNow(function(){t.refs.scroller.scrollTo(t.categoryOffsets[e],!0)})},getCurrentSection:function(){if(""!==this.state.query)return null;var e=this.refs.scroller.getScrollerNode(),t=e.scrollTop+.25*e.offsetHeight;if(0===e.scrollTop)return S.default.categories[0];var n=-1,r=null;return p.default.forEach(this.categoryOffsets,function(e,o){e<=t&&e>=n&&(n=e,r=o)}),r},handleScroll:function(){var e=this.getCurrentSection();e!==this.state.currentSection&&this.setState({currentSection:e})},computeMetaData:function(e){var t=this,n=S.default.categories.length,r=this.props.channel,o=r.getGuildId(),a=[],i=0,l=0,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=[],s=p.default.partition(e,function(e){return!N.default.isEmojiDisabled(e,r)}),u=s[0],c=s[1];p.default.forEach([].concat(u,c),function(e){N.default.isEmojiFiltered(e,r)||(o.push({emoji:e,offsetTop:32*i,row:l,column:o.length}),o.length===n&&(a.push({category:t,items:o}),o=[],l+=1,i+=1))}),o.length>0&&(a.push({category:t,items:o}),l+=1,i+=1)};if(e)s(e);else{if(this.cachedMetaDataNoSearch)return this.cachedMetaDataNoSearch;this.categoryOffsets={},this.categories=[];var u=function(e,n,r){t.categoryOffsets[e]=32*i,t.categories.push({category:e,offsetTop:32*i,title:n}),i+=1,s(r,e)},c=S.default.getDisambiguatedEmojiContext(o);p.default.forEach(S.default.categories,function(e){if(e===P.EMOJI_CATEGORY_CUSTOM){var t=0,n=c.getCustomEmoji(),r=p.default.groupBy(n,"guildId"),a=function(n){var o=r[n.id];null!=o&&0!==o.length&&u(0==t++?e:""+e+t,n.toString(),o)},i=C.default.getGuild(o);i&&a(i),p.default.each(A.default.getSortedGuilds(),function(e){var t=e.guild;t.id!==o&&a(t)})}else{var l=e===P.EMOJI_CATEGORY_RECENT?c.getFrequentlyUsedEmojis():O.default.getByCategory(e);u(e,y.default.Messages["EMOJI_CATEGORY_"+e.toUpperCase()],l)}}),this.cachedMetaDataNoSearch=a}return a},handleDiversityPickerToggled:function(e){this.setState({diversityPickerOpen:e})},renderStickyHeader:function(){if(""!==this.state.query)return null;if(!this.refs.scroller)return a("div",{className:R.default.stickyHeader},void 0,a("div",{className:R.default.category},void 0,this.categoryOffsets[S.default.categories[0]]));var e=this.refs.scroller.getScrollerNode().scrollTop,t=e+32,n=-1,r=null;p.default.forEach(this.categories,function(t,o){var a=t.offsetTop;a<=e&&n<a&&(n=a,r=o)});var o=r+1;if(o<this.categories.length&&this.categories[o].offsetTop<t){var i={marginTop:this.categories[o].offsetTop-t};return a("div",{className:R.default.stickyHeader,style:i},void 0,a("div",{className:R.default.category},void 0,this.categories[r].title),a("div",{className:R.default.category},void 0,this.categories[o].title))}return a("div",{className:R.default.stickyHeader},void 0,a("div",{className:R.default.category},void 0,this.categories[r].title))},render:function(){var e,t=this,r=[],l=null,s=null;if(0===this.state.metaData.length)s=a(_.default,{message:y.default.Messages.NO_EMOJI_SEARCH_RESULTS});else{var d=""!==this.state.diversitySurrogate?b.default.convert.toCodePoint(this.state.diversitySurrogate):"";p.default.forEach(this.state.metaData,function(e){var s=e.category,u=e.items;if(s&&s!==l){l=s;var c=p.default.find(t.categories,function(e){return e.category===s}).title;r.push(a("div",{name:s,className:R.default.category},s,c))}var f=p.default.map(u,function(e){var r,l=e.emoji,s=e.row,u=e.column,c=null,f=s===t.state.selectedRow&&u===t.state.selectedColumn,p={key:l.name+"-"+s+"-"+u,className:(0,h.default)(R.default.emojiItem,(r={},r[R.default.selected]=f,r[R.default.disabled]=N.default.isEmojiDisabled(l,t.props.channel),r)),onClick:function(e){return t.selectEmoji(l,!e.shiftKey)},onMouseOver:function(){return t.onHoverEmoji(l,s,u)}};if(!l.useSpriteSheet)return i.createElement("div",o({},p,{style:{backgroundImage:"url('"+l.url+"')"}}));if(l.hasDiversity){var y=-l.index%P.EmojiSprites.DiversityPerRow*22,m=22*-Math.floor(l.index/P.EmojiSprites.DiversityPerRow);c={backgroundImage:"url('"+n(7493)("./spritesheet-"+d+".png")+"')",backgroundPosition:y+"px "+m+"px",backgroundSize:t.diversitySpriteSheetSize}}else{var v=-l.index%P.EmojiSprites.NonDiversityPerRow*22,g=22*-Math.floor(l.index/P.EmojiSprites.NonDiversityPerRow);c={backgroundImage:"url('"+n(6613)+"')",backgroundPosition:v+"px "+g+"px",backgroundSize:t.spriteSheetSize}}return i.createElement("div",p,a("div",{className:R.default.spriteItem,style:c}))});r.push(a("div",{className:R.default.row},r.length,f))}),s=i.createElement(c.default,{ref:"scroller",outerClassName:R.default.scrollerWrap,className:R.default.scroller,onScroll:this.handleScroll,elementHeight:32,fade:!0,theme:u.Themes.LIGHT,renderStickyHeader:function(){return t.renderStickyHeader()}},r)}var v=p.default.map(S.default.categories,function(e){var n;return a(g.default,{"aria-label":e,className:(0,h.default)(R.default.item,R.default[e],(n={},n[R.default.selected]=null!=t.state.currentSection&&0===t.state.currentSection.indexOf(e),n)),onClick:function(){return t.scrollNow(e)}},e)}),E=void 0;return this.state.premiumPromoOpen&&(E=a(V,{onLearnMore:function(){return f.default.close(t.props.popoutKey)},onClose:function(){return t.setState({premiumPromoOpen:!1})}})),a("div",{className:R.default.emojiPicker},void 0,a("div",{className:(0,h.default)(R.default.dimmer,(e={},e[R.default.visible]=this.state.diversityPickerOpen,e))}),a("div",{className:R.default.header},void 0,i.createElement(m.default,{query:this.state.query,ref:"search",light:!0,placeholder:this.state.placeholder,gridResults:!0,selectedRow:this.state.selectedRow,selectedColumn:this.state.selectedColumn,sections:this.state.metaData.map(function(e){return e.items.length}),onClear:this.handleClear,onSelect:this.handleSelect,onSelectionChange:this.handleSelectionChange,onQueryChange:this.handleQueryChange}),a(B,{onOpen:this.handleDiversityPickerToggled,selectedSurrogate:this.state.diversitySurrogate})),s,a("div",{className:R.default.categories},void 0,v),E)}}),V=function(e){var t=e.onLearnMore,r=e.onClose;return a("div",{className:R.default.premiumPromo},void 0,a(g.default,{className:R.default.premiumPromoClose,onClick:r},void 0,y.default.Messages.CLOSE),a("img",{alt:"",className:R.default.premiumPromoImage,src:n(7485),width:124,height:96}),a("div",{className:R.default.premiumPromoTitle},void 0,y.default.Messages.PREMIUM_PROMO_TITLE),a("div",{className:R.default.premiumPromoDescription},void 0,y.default.Messages.PREMIUM_PROMO_DESCRIPTION),a(v.default,{onClick:function(){d.default.open(P.UserSettingsSections.PREMIUM),t()}},void 0,y.default.Messages.LEARN_MORE))};t.default=F,e.exports=t.default},6615:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=m(n(9)),s=n(99),u=m(n(40)),c=m(n(67)),f=m(n(263)),d=m(n(79)),p=m(n(87)),h=m(n(6)),y=m(n(5890));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=function(e){function t(n){v(this,t);var r=g(this,e.call(this,n));return r.selectable=!0,r.orientation="Vertical",r.handleMouseEnter=r.handleMouseEnter.bind(r),r.handleClick=r.handleClick.bind(r),r}return _(t,e),t.prototype.getSelectedMode=function(){return this.selectable&&this.props.selected?"Selected":""},t.prototype.renderContent=function(){throw new Error("AutocompleteRow: renderContent must be extended")},t.prototype.render=function(){var e;return a(p.default,{className:(0,l.default)(this.props.className,(0,s.getClass)(y.default,"autocompleteRow",this.orientation)),onMouseEnter:this.selectable?this.handleMouseEnter:null,onClick:this.selectable?this.handleClick:null},void 0,a("div",{className:(0,l.default)((0,s.getClass)(y.default,"selector",this.getSelectedMode()),(e={},e[y.default.selectable]=this.selectable,e))},void 0,this.renderContent()))},t.prototype.handleMouseEnter=function(){var e=this.props,t=e.onHover,n=e.index;t&&t(n)},t.prototype.handleClick=function(){var e=this.props,t=e.onClick,n=e.index;t&&t(n)},t}(i.PureComponent),b=function(e){function t(){return v(this,t),g(this,e.apply(this,arguments))}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.text,n=e.description;return a(u.default,{className:y.default.content},void 0,a(u.default.Child,{grow:1},void 0,t),a(u.default.Child,{grow:0},void 0,a(c.default,{className:y.default.description},void 0,n)))},t}(E),S=function(e){function t(n){v(this,t);var r=g(this,e.call(this,n));return r.selectable=!1,r}return _(t,e),t.prototype.renderContent=function(){var e=this.props.title;return a(c.default,{className:y.default.contentTitle,weight:c.default.Weights.SEMIBOLD,size:c.default.Sizes.SMALL},void 0,e)},t}(E),C=function(e){function t(n){v(this,t);var r=g(this,e.call(this,n));return r.selectable=!1,r}return _(t,e),t.prototype.renderContent=function(){return a("div",{className:y.default.divider})},t}(E),A=function(e){function t(){var n,r;v(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=g(this,e.call.apply(e,[this].concat(a))),r.statusStyle={width:10,height:10,right:"-4px",bottom:"-4px",borderWidth:2,borderStyle:"solid"},g(r,n)}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.user,n=e.nick,r=e.status,o=e.hidePersonalInformation,i=e.colorblindMode;return a(u.default,{align:u.default.Align.CENTER,className:y.default.content},void 0,a(f.default,{size:f.default.Sizes.XSMALL,src:t.getAvatarURL(),status:r,statusClassName:y.default.avatarStatus,statusStyle:i?this.statusStyle:{}}),a(u.default.Child,{className:y.default.marginLeft8},void 0,n||t.username),a(u.default,{grow:0,align:u.default.Align.BASELINE,className:y.default.description},void 0,a(c.default,{className:y.default.descriptionUsername},void 0,t.username),o?null:a(c.default,{className:y.default.descriptionDiscriminator},void 0,"#",t.discriminator)))},t}(E),T=function(e){function t(){return v(this,t),g(this,e.apply(this,arguments))}return _(t,e),t.prototype.renderContent=function(){var e=this.props.role;return a(u.default,{align:u.default.Align.CENTER,className:y.default.content},void 0,a(u.default.Child,{grow:1},void 0,a(c.default,{style:{color:e.colorString}},void 0,"@",e.name)),a(c.default,{className:y.default.description},void 0,h.default.Messages.MENTION_USERS_WITH_ROLE))},t}(E),I=function(e){function t(){return v(this,t),g(this,e.apply(this,arguments))}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.channel,n=e.category;return a(u.default,{align:u.default.Align.CENTER,className:y.default.content},void 0,a(d.default,{name:d.default.Names.CHANNEL_TEXT,className:y.default.icon,foreground:y.default.iconForeground}),a(u.default.Child,{className:y.default.marginLeft4},void 0,t.toString()),null!=n?a(c.default,{className:y.default.description},void 0,n.name):null)},t}(E),O=function(e){function t(){return v(this,t),g(this,e.apply(this,arguments))}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.command,n=e.description;return a(u.default,{align:u.default.Align.CENTER,className:y.default.content},void 0,a(d.default,{name:d.default.Names.SLASH,className:y.default.icon,foreground:y.default.iconForeground}),a(u.default.Child,{grow:1,className:y.default.marginLeft4},void 0,t),a(c.default,{className:y.default.description},void 0,n))},t}(E),M=function(e){function t(){return v(this,t),g(this,e.apply(this,arguments))}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.emoji,n=e.sentinel,r=t.url?a("img",{alt:"",className:y.default.icon,src:t.url}):a("span",{className:y.default.rawEmoji},void 0,t.surrogates);return a(u.default,{align:u.default.Align.CENTER,className:y.default.content},void 0,r,a("div",{className:y.default.marginLeft8},void 0,n,t.name,n))},t}(E),N=function(e){function t(n){v(this,t);var r=g(this,e.call(this,n));return r.orientation="Horizontal",r}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.width,n=e.height,r=e.src;return a("img",{alt:"",src:r,width:t,height:n})},t}(E),P=function(e){function t(){return v(this,t),g(this,e.apply(this,arguments))}return _(t,e),t.prototype.renderContent=function(){var e,t=this.props,n=t.title,r=t.type,o=t.iconUrl;return a(u.default,{className:y.default.content,align:u.default.Align.CENTER},void 0,null!=o?a("img",{alt:"",className:y.default.externalIcon,src:o}):null,a(u.default.Child,{grow:1,className:(0,l.default)((e={},e[y.default.marginLeft8]=null!=o,e))},void 0,n),a(c.default,{className:y.default.description},void 0,r))},t}(E),R=function(e){function t(){return v(this,t),g(this,e.apply(this,arguments))}return _(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","className"]);return 0===i.Children.count(t)?null:a("div",{className:(0,l.default)(y.default.autocomplete,n)},void 0,i.createElement("div",o({className:y.default.autocompleteInner},r),t))},t}(i.PureComponent);R.Generic=b,R.Title=S,R.Divider=C,R.User=A,R.Role=T,R.Channel=I,R.Command=O,R.Emoji=M,R.GIFIntegration=N,R.LinkIntegration=P,t.default=R,e.exports=t.default},6616:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=U(n(1)),l=k(n(3)),s=k(n(385)),u=k(n(568)),c=k(n(12)),f=k(n(236)),d=k(n(575)),p=k(n(60)),h=k(n(288)),y=k(n(27)),m=k(n(69)),v=k(n(44)),g=k(n(128)),_=k(n(38)),E=U(n(390)),b=k(n(11)),S=k(n(20)),C=n(290),A=k(n(81)),T=k(n(88)),I=n(113),O=k(n(7499)),M=k(n(369)),N=k(n(531)),P=n(1215),R=k(P),w=n(294),L=n(0),D=n(532);function k(e){return e&&e.__esModule?e:{default:e}}function U(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var x={spotify:"Spotify"};function j(e,t,n,r){var o=null!=r.application_id?v.default.getLibraryApplication(r.application_id):null;S.default.track(L.AnalyticEvents.APPLICATION_OPENED,{type:e,source:L.AnalyticsLocations.MESSAGE_EMBED,application_id:r.application_id,party_id:null!=r.party?r.party.id:void 0,other_user_id:t,message_id:n,distributor:null!=o?o.getDistributor():null})}var G=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.handleJoin=r.handleJoin.bind(r),r.handleSpectate=r.handleSpectate.bind(r),r.handleSync=r.handleSync.bind(r),r.handleDownloadApp=r.handleDownloadApp.bind(r),r.renderUserPopout=r.renderUserPopout.bind(r),r.renderSpotifyJoinButton=r.renderSpotifyJoinButton.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getCoverImage=function(){var e=this.props,t=e.activity,n=e.application,r=e.applicationId,o=e.coverImage,a=e.isPreview,i=e.message;if(a||null!=i&&(0,I.isInviteActive)(t,i,r)){var l=(0,I.getCoverImageFromActivity)(t,r);if(null!=l)return l}return null!=r?A.default.getApplicationIconURL({id:r,icon:null!=n?n.coverImage:o,size:L.ACTIVITY_INVITE_COVER_IMAGE_SIZE}):null},t.prototype.render=function(){var e=this,t=this.props,n=t.activity,r=t.partyId,o=t.myPartyId,i=t.applicationId,l=t.name,s=t.partyMembers,u=t.isPreview,c=t.isLaunching,f=t.activityActionType,d=t.className,p=t.channelId,h=t.message,y=t.hideParty,m=t.isSyncable,v=t.isLaunchable,g=void 0;if(null!=l)g=l;else if(null!=r){var _=r.split(":")[0];g=x[_]}var E=!b.default.embedded;return a(D.BackgroundOpacityContext.Consumer,{},void 0,function(t){return a(O.default,{activity:n,partyId:r,myPartyId:o,applicationId:i,name:g,partyMembers:s,className:d,coverImage:e.getCoverImage(),isPreview:u,isGameLaunchable:v,isLaunching:c,activityActionType:f,isInBrowser:E,isSyncable:m,channelId:p,message:h,hideParty:y,onJoin:e.handleJoin,onSpectate:e.handleSpectate,onSync:e.handleSync,onDownloadApp:e.handleDownloadApp,onOpenSpotifyTrack:e.handleOpenSpotifyTrack,onOpenSpotifyArtist:e.handleOpenSpotifyArtist,onOpenSpotifyAlbum:e.handleOpenSpotifyAlbum,renderUserPopout:e.renderUserPopout,renderSpotifyJoinButton:e.renderSpotifyJoinButton,backgroundOpacity:t.backgroundOpacity})})},t.prototype.handleJoin=function(){var e=this.props,t=e.activity,n=e.userId,r=e.applicationId,o=e.message,a=e.channelId;null!=t&&null!=n&&null!=o&&null!=t.session_id&&null!=t.application_id&&null!=r&&(g.default.join(n,t.session_id,r,a,o.id),j(L.AnalyticsGameOpenTypes.JOIN,n,o.id,t))},t.prototype.handleSpectate=function(){var e=this.props,t=e.activity,n=e.userId,r=e.applicationId,o=e.message,a=e.channelId;null!=t&&null!=n&&null!=o&&null!=t.session_id&&null!=t.application_id&&null!=r&&(g.default.spectate(n,t.session_id,r,a,o.id),j(L.AnalyticsGameOpenTypes.SPECTATE,n,o.id,t))},t.prototype.handleSync=function(){var e=this.props,t=e.activity,n=e.userId;null!=t&&null!=n&&E.sync(t,n)},t.prototype.handleDownloadApp=function(){_.default.push(M.default,{source:"Game Invite"})},t.prototype.handleOpenSpotifyTrack=function(e){(0,w.openTrack)(e)},t.prototype.handleOpenSpotifyArtist=function(e,t,n){(0,w.openArtist)(e,t,n)},t.prototype.handleOpenSpotifyAlbum=function(e,t){(0,w.openAlbum)(e,t)},t.prototype.renderUserPopout=function(e,t){var n=this.props,r=n.channelId,a=n.guildId;return null==r?null:i.createElement(N.default,o({},t,{user:e,guildId:a,channelId:r}))},t.prototype.renderSpotifyJoinButton=function(e){var t=this.props,n=t.channelId,r=t.guildId;return i.createElement(R.default,o({type:P.SpotifyButtonTypes.EMBED_SYNC,guildId:r,channelId:n,source:"Invite Embed"},e))},t}(i.PureComponent);G.defaultProps={isPreview:!1},t.default=l.default.connectStores([d.default,s.default,f.default,u.default,c.default,p.default,h.default,y.default,m.default,v.default],function(e){var t=e.activity,n=e.applicationId,r=e.partyId,o=e.userId,a=e.guildId,i=null!=t&&null!=t.party&&t.party.id===r?u.default.getParty(t.party.id):null,l=n?f.default.getApplicationActivity(n):f.default.findActivity(function(e){return e.type===L.ActivityTypes.LISTENING}),g=!1,_=!1;null!=n&&(g=d.default.getState(n,L.ActivityActionTypes.JOIN)===L.ActivityActionStates.LOADING,_=d.default.getState(n,L.ActivityActionTypes.SPECTATE)===L.ActivityActionStates.LOADING);var E=Array.from(i||[]).map(function(e){var t=a?p.default.getMember(a,e):null,n=null!=t?t.nick:null,r=c.default.getUser(e),o=null==r;return null==r&&(r=new T.default({discriminator:"0005"})),{user:r,unknownUser:o,nick:n}}),b=null!=t&&h.default.canPlay(t),S=h.default.getSyncingWith(),A=null!=S&&null!=o&&S.userId===o,I=b&&!A;return{partyMembers:E,application:null!=n?s.default.getApplication(n):null,myPartyId:null!=l&&null!=l.party?l.party.id:null,isLaunching:g||_,isSyncable:I,isLaunchable:null!=n&&(0,C.isLaunchable)(v.default,y.default,m.default,n)}})(G),e.exports=t.default},6617:function(e,t,n){"use strict";t.__esModule=!0;var r=i(n(3)),o=i(n(2)),a=n(0);function i(e){return e&&e.__esModule?e:{default:e}}var l={},s="",u="";var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getResults=function(e,t){if(null==e||null==t)return null;var n=l[e];return null!=n&&null!=n[t]?n[t]:null},t.prototype.getQuery=function(){return{integration:s,query:u}},t}(r.default.Store);t.default=new c(o.default,{INTEGRATION_QUERY:function(e){var t=e.integration,n=e.query;l[t]=l[t]||{},l[t][n]={loading:!0,results:[]}},INTEGRATION_QUERY_SUCCESS:function(e){var t=e.integration,n=e.query,r=e.results;l[t][n].loading=!1,l[t][n].results=r.map(function(e){return{type:a.ChannelTextAreaIntegrations[t].type,meta:e}}),u=n,s=t},INTEGRATION_QUERY_FAILURE:function(e){var t=e.integration,n=e.query;delete l[t][n]}}),e.exports=t.default},6680:function(e,t,n){"use strict";t.__esModule=!0;var r=i(n(2)),o=i(n(13)),a=n(0);function i(e){return e&&e.__esModule?e:{default:e}}t.default={setDiversityColor:function(e){r.default.dispatch({type:a.ActionTypes.EMOJI_DIVERSITY_COLOR_CHANGE,color:e})},fetchEmoji:function(e){r.default.maybeDispatch({type:a.ActionTypes.EMOJI_FETCH,guildId:e}),o.default.get({url:a.Endpoints.GUILD_EMOJIS(e)}).then(function(t){return r.default.dispatch({type:a.ActionTypes.EMOJI_FETCH_SUCCESS,guildId:e,emojis:t.body})},function(){return r.default.dispatch({type:a.ActionTypes.EMOJI_FETCH_FAILURE,guildId:e})})},uploadEmoji:function(e,t,n){return r.default.dispatch({type:a.ActionTypes.EMOJI_UPLOAD_START,guildId:e}),o.default.post({url:a.Endpoints.GUILD_EMOJIS(e),body:{image:t,name:n}}).then(function(){return r.default.dispatch({type:a.ActionTypes.EMOJI_UPLOAD_STOP,guildId:e})},function(t){return r.default.dispatch({type:a.ActionTypes.EMOJI_UPLOAD_STOP,guildId:e}),Promise.reject(t)})},deleteEmoji:function(e,t){r.default.dispatch({type:a.ActionTypes.EMOJI_DELETE,guildId:e,emojiId:t}),o.default.delete({url:a.Endpoints.GUILD_EMOJI(e,t)})},updateEmoji:function(e,t,n){o.default.patch({url:a.Endpoints.GUILD_EMOJI(e,t),body:{name:n}})}},e.exports=t.default},6684:function(e,t,n){"use strict";t.__esModule=!0,t.sortByMatchScore=function(e,t){if(e.score===t.score){var n=e.comparator.toLocaleLowerCase(),r=t.comparator.toLocaleLowerCase();if(n<r)return-1;if(n>r)return 1}return t.score-e.score}},6699:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=p(n(1)),a=d(n(11)),i=d(n(38)),l=d(n(6)),s=p(n(6011)),u=d(n(6077)),c=d(n(7865)),f=d(n(102));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){var t=["openFile"];e.multiple&&t.push("multiSelections");var n=e.filters,r=s.maxFileSize();f.default.fileManager.openFiles({properties:t,filters:n},r,s.makeFile).then(function(t){null!=t&&e.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:t}})},function(e){if("ETOOLARGE"!==e.code)throw e;i.default.push(u.default,{title:l.default.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:l.default.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:s.sizeString(r)})})})}var y=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.setRef=r.setRef.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.activateUploadDialogue=function(){if(this._ref)return this._ref.activateUploadDialogue()},t.prototype.setRef=function(e){this._ref=e},t.prototype.render=function(){return o.createElement(c.default,r({ref:this.setRef,handleNativeClick:h,embedded:a.default.isDesktop()},this.props))},t}(o.Component);t.default=y,e.exports=t.default},7161:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=n(939),l=(r=i)&&r.__esModule?r:{default:r};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=s(this,e.call.apply(e,[this].concat(a))),r._inputRef=null,r.setRef=function(e){var t=r.props.inputRef;r._inputRef=e,null!=t&&t(e)},r.handleChange=function(e,t){if(null!=r._inputRef){var n=r.props,o=n.cardType,a=n.onChange,i=o.code.size,l=e.length===i&&r._inputRef.selectionStart===i;null!=a&&a(e,t,l)}},s(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.cardType,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["cardType"]);return a.createElement(l.default,o({},n,{onChange:this.handleChange,maxLength:t.code.size,inputRef:this.setRef}))},t}(a.PureComponent);t.default=u,e.exports=t.default},7162:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=d(n(9)),s=d(n(6162)),u=d(n(939)),c=d(n(6031)),f=d(n(5779));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=p(this,e.call.apply(e,[this].concat(a))),r.selectionStart=0,r.setRef=function(e){var t=r.props.inputRef;r._inputRef=e,null!=t&&t(e)},r.handleChange=function(e,t){var n=r.props,o=n.value,a=n.onChange,i=r._inputRef;if(e!==o&&null!=i&&null!=o){var l=s.default.prettifyCreditCardNumber(e),u=i.selectionStart;if(o===l)u-=1,l=s.default.prettifyCreditCardNumber(l.substring(0,u)+l.substring(u+1));else{var c=l.length-e.length;c>0&&(u+=c)}r.selectionStart=u;var f=r.getMaxLength(l),d=l.length===f&&r.selectionStart===f;null!=a&&a(l,t,d)}},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidUpdate=function(e){var t=this._inputRef;e.value!==this.props.value&&null!=t&&t.setSelectionRange(this.selectionStart,this.selectionStart)},t.prototype.getMaxLength=function(e){var t=null!=e?s.default.getCreditCardType(e):s.default.DEFAULT_CARD_TYPE;return t.lengths[t.lengths.length-1]+t.gaps.length},t.prototype.render=function(){var e=this.props,t=e.value,n=e.flipped,r=e.inputClassName,d=e.className,p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value","flipped","inputClassName","className"]),h=s.default.getCreditCardType(t),y=this.getMaxLength(t);return a("div",{className:(0,l.default)(f.default.cardNumberWrapper,d)},void 0,a(c.default,{className:f.default.cardIcon,type:h.type,flipped:n}),i.createElement(u.default,o({},p,{value:s.default.prettifyCreditCardNumber(t),onChange:this.handleChange,inputRef:this.setRef,maxLength:y,inputClassName:(0,l.default)(f.default.cardNumberInput,r)})))},t}(i.PureComponent);h.defaultProps={flipped:!1},t.default=h,e.exports=t.default},7163:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=n(6162),l=n(939),s=(r=l)&&r.__esModule?r:{default:r};function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=/[^0-9]/g,f=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=u(this,e.call.apply(e,[this].concat(a))),r.selectionStart=0,r.setRef=function(e){var t=r.props.inputRef;r._inputRef=e,null!=t&&t(e)},r.handleChange=function(e,t){var n=r.props,o=n.value,a=n.onChange,l=r._inputRef;if(e!==o&&null!=l&&null!=o){var s=(0,i.formatExpiration)(e),u=l.selectionStart;s===o&&s.length<=3&&o.includes("/")&&!e.includes("/")?s=s.replace(c,""):s===o&&e.includes("/")&&!o.includes("/")&&(s+="/"),s.length>e.length&&(u+=s.length-e.length),r.selectionStart=u;var f=s.split("/")[1],d=null!=f&&2===f.length&&u===s.length;null!=a&&a(s,t,d)}},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidUpdate=function(e){var t=this._inputRef;e.value!==this.props.value&&null!=t&&t.setSelectionRange(this.selectionStart,this.selectionStart)},t.prototype.render=function(){return a.createElement(s.default,o({},this.props,{onChange:this.handleChange,inputRef:this.setRef}))},t}(a.PureComponent);t.default=f,e.exports=t.default},7426:function(e,t,n){"use strict";t.__esModule=!0;var r,o,a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=n(374),s=n(189),u=(o=s)&&o.__esModule?o:{default:o};function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=.2,d={toValue:0,duration:1e3,delay:1e3},p=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=c(this,e.call.apply(e,[this].concat(a))),r.state={backgroundColor:new u.default.Value},r.flashNow=function(){var e=r.props.onFlashComplete;r.state.backgroundColor.setValue(f),u.default.timing(r.state.backgroundColor,d).start(e)},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.flashNow()},t.prototype.componentDidUpdate=function(e){e.sequenceId!==this.props.sequenceId&&this.flashNow()},t.prototype.render=function(){var e={backgroundColor:this.state.backgroundColor.interpolate({inputRange:[0,1],outputRange:[l.Colors.BRAND_PURPLE_TRANSPARENT,l.Colors.BRAND_PURPLE]}),borderRadius:2};return a(u.default.div,{style:e},void 0,this.props.children)},t}(i.Component);t.default=p,e.exports=t.default},7427:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=c(n(6)),l=c(n(273)),s=n(0),u=c(n(5872));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return n=r=f(this,e.call.apply(e,[this].concat(i))),r.node=a.createRef(),r.onClickSave=function(){var e=r.props.value;r.onSubmit(e)},r.onSubmit=function(e){var t=r.props,n=t.message,o=t.channel,a=t.onConfirmDelete,i=t.onCancel,s=t.saveMessage,u=t.validateEdit;return 0===e.length?(a(o,n),i(),Promise.resolve(!1)):u({value:e,channel:o}).then(function(t){var n=t.valid;if(!n)return Promise.resolve(n);var o=l.default.parse(r.props.channel,e,!0);return o.content!==r.props.message.content&&s(r.props.channel.id,r.props.message.id,o),i(),Promise.resolve(n)})},r.onChange=function(e,t){(0,r.props.onChange)(t)},r.onKeyDown=function(e){if(e.keyCode===s.KeyboardKeys.ESCAPE&&!e.shiftKey){var t=r.props.onCancel;e.preventDefault(),t()}},r.onResize=function(){var e=r.props.onResize,t=r.node.current;e&&t instanceof HTMLElement&&e(t)},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.value,r=e.message,l=e.channel,s=e.onCancel,c=e.children;return a.createElement("div",{className:t,ref:this.node},c({value:n,message:r,channel:l,onChange:this.onChange,onSubmit:this.onSubmit,onKeyDown:this.onKeyDown,onResize:this.onResize}),o("div",{className:u.default.operations},void 0,i.default.Messages.EDIT_TEXTAREA_HELP.format({onCancel:s,onSave:this.onClickSave})))},t}(a.PureComponent);t.default=d,e.exports=t.default},7428:function(e,t,n){"use strict";t.__esModule=!0,t.Message=t.MessageAvatar=t.ClickOverlay=t.LocalBotMessage=t.MessageUsername=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.MessageTimestamp=M;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=b(n(9)),s=b(n(275)),u=b(n(223)),c=b(n(87)),f=b(n(263)),d=b(n(1031)),p=b(n(7427)),h=b(n(6606)),y=b(n(7426)),m=n(0),v=b(n(6)),g=n(81),_=n(533),E=b(n(5871));function b(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T={LATIN12:E.default.latin12CompactTimeStamp,LATIN24:E.default.latin24CompactTimeStamp,ASIAN:E.default.asianCompactTimeStamp},I=5,O=/(AM|PM)$/;function M(e){var t,n=e.isCompact,r=void 0!==n&&n,o=e.timestamp,i=e.isVisibleOnlyOnHover,s=void 0!==i&&i,u=e.isMentioned,c=e.backgroundOpacity,f=r?(0,_.dateFormat)(o,"LT"):(0,_.calendarFormat)(o),d=r?function(e){return e.match(O)?T.LATIN24:e.length<=I?T.LATIN12:T.ASIAN}(f):null;return a("time",{className:(0,l.default)(d,E.default[c+"BackgroundOpacity"],(t={},t[E.default.timestampVisibleOnHover]=s,t[E.default.timestampCozy]=!r,t[E.default.timestampCompact]=r&&!u,t[E.default.timestampCompactIsMentioned]=r&&u,t)),dateTime:o},void 0,r&&a("i",{className:E.default.separatorLeft},void 0,"["),f,r&&a("i",{className:E.default.separatorRight},void 0,"] "))}var N=t.MessageUsername=function(e){function t(){var n,r;S(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=C(this,e.call.apply(e,[this].concat(a))),r.onClick=function(e){var t=r.props,n=t.message;(0,t.onClick)(e,n)},C(r,n)}return A(t,e),t.prototype.onMouseDown=function(e){e.shiftKey&&(e.preventDefault(),e.stopPropagation())},t.prototype.render=function(){var e=this.props,t=e.message,n=e.isCompact,r=e.renderPopout,o=e.popoutPosition,i=e.onContextMenu,s=e.backgroundOpacity,f=t.colorString?{color:t.colorString}:null,p=t.author.bot?a(d.default,{className:n?E.default.botTagCompact:E.default.botTagCozy}):null;return a(u.default,{closeOnScroll:!1,render:r,position:o,shadow:!n},void 0,a("span",{onContextMenu:i,className:E.default.usernameWrapper},void 0,n?p:null,a(c.default,{tag:"span",className:(0,l.default)(E.default.username,E.default[s+"BackgroundOpacity"]),style:f,onMouseDown:this.onMouseDown,onClick:this.onClick},void 0,t.nick||t.author.toString()),n&&a("i",{className:E.default.separatorRight},void 0,": "),n?null:p))},t}(i.Component);N.defaultProps={isCompact:!1};var P=t.LocalBotMessage=function(e){function t(){var n,r;S(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=C(this,e.call.apply(e,[this].concat(a))),r.onDeleteMessages=function(){var e=r.props,t=e.messages,n=e.channelId,o=e.onDeleteMessage;t.forEach(function(e){return o(n,e.id,!0)})},C(r,n)}return A(t,e),t.prototype.render=function(){var e=this.props.messages.length;return a("div",{className:E.default.localBotMessage},void 0,v.default.Messages.ONLY_YOU_CAN_SEE_AND_DELETE_THESE.format({count:e,handleDelete:this.onDeleteMessages}))},t}(i.Component),R=t.ClickOverlay=function(e){var t=e.onClick,n=e.label;return t&&n?a(c.default,{className:E.default.clickOverride,onClick:t,"aria-label":n}):a("div",{className:E.default.disableInteraction})},w=t.MessageAvatar=function(e){var t=e.user,n=e.isAnimated,r=e.onContextMenu,o=e.renderPopout,i=(0,g.hasAnimatedAvatar)(t),l=n&&i?t.getAvatarURL("gif"):t.getAvatarURL("jpg");return a(u.default,{closeOnScroll:!1,render:o,position:u.default.Positions.RIGHT,shadow:!1},void 0,a(f.default,{"aria-hidden":!0,src:l,size:f.default.Sizes.LARGE,className:E.default.avatar,onContextMenu:r,tabIndex:-1}))},L=t.Message=function(e){function t(){var n,r;S(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=C(this,e.call.apply(e,[this].concat(s))),r.setRef=function(e){var t=r.props,n=t.registerMessageDOMNode,o=t.message;e&&(r.ref=e,null!=n&&n(o.id,e))},r.onClick=function(e){var t=r.props,n=t.onManualAck,o=t.channel,a=t.message;e.altKey&&(e.preventDefault(),n(o.id,a.id))},r.onContextMenuMessage=function(e,t){var n=r.props.onContextMenuMessage,a=e.target;n(e,o({target:a},t))},r.onContextMenuUser=function(e){var t=r.props,n=t.channel,o=t.message.author;(0,t.onContextMenuUser)(e,{user:o,channel:n})},r.onClickUsername=function(e,t){var n=r.props,o=n.onClickUsername,a=n.channel;o(e,{user:t.author,channel:a})},r.onResize=function(e){var t=r.props;(0,t.onResize)({target:e,isEditing:t.isEditing})},r.renderPopoutUser=function(e){var t=r.props,n=t.renderPopoutUser,a=t.channel,i=t.message.author,l=a.getGuildId(),s=a.id;return n(o({channelId:s,guildId:l,user:i},e))},r.renderCompactHeader=function(){var e=r.props,t=e.message,n=e.isHeader,o=e.isEditing,l=e.popoutPosition,s=e.backgroundOpacity,u=o||n,c=t.mentioned,f={message:t,isCompact:!0,renderPopout:r.renderPopoutUser,popoutPosition:l,onContextMenu:r.onContextMenuUser,onClick:r.onClickUsername,backgroundOpacity:s};return a("h2",{className:E.default.headerCompact},void 0,a(M,{isVisibleOnlyOnHover:!u,isCompact:!0,timestamp:t.timestamp,isMentioned:c,backgroundOpacity:s}),i.createElement(N,f))},C(r,n)}return A(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.isEditing,r=t.message,o=t.onResize,a=t.registerMessageDOMNode,i=e.message.embeds!==r.embeds||e.message.attachments!==r.attachments||e.message.reactions.length!==r.reactions.length;this.ref&&i&&o({isEditing:n,target:this.ref});var l=e.isEditing!==n;this.ref&&l&&o({isEditing:!0,target:this.ref}),e.registerMessageDOMNode!==a&&a&&this.ref&&a(r.id,this.ref)},t.prototype.renderCompact=function(){var e=this.props,t=e.message,n=e.channel,r=e.renderAccessories,o=e.renderEditor,l=e.renderButtons,s=e.editingContent,u=e.isEditing,c=e.onCancelEditing,f=e.onChange,d=e.onConfirmDelete,y=e.saveMessage,m=e.validateEdit,v=e.disableButtons,g=e.disableMentionStyles,_=e.isDisabled;return i.createElement("div",{ref:this.setRef,className:E.default.messageCompact,"aria-disabled":_,onClick:this.onClick},u&&this.renderCompactHeader(),u&&null!=s?a(p.default,{className:E.default.messageEditorCompact,channel:n,message:t,value:s,children:o,onCancel:c,onChange:f,onConfirmDelete:d,onResize:this.onResize,saveMessage:y,validateEdit:m}):a(h.default,{className:E.default.contentCompact,channel:n,message:t,isCompact:!0,onContextMenu:this.onContextMenuMessage,renderButtons:l,renderPrefix:this.renderCompactHeader,disableButtons:v,disableMentionStyles:g}),r({message:t}))},t.prototype.renderCozy=function(){var e=this.props,t=e.message,n=e.channel,r=e.renderAccessories,o=e.renderEditor,s=e.renderButtons,u=e.isFocusedWindow,c=e.disableAvatarAnimation,f=e.editingContent,d=e.isEditing,y=e.isHeader,m=e.onCancelEditing,v=e.onChange,g=e.onConfirmDelete,_=e.saveMessage,b=e.validateEdit,S=e.popoutPosition,C=e.disableButtons,A=e.disableMentionStyles,T=e.isDisabled,I=e.cozyClassName,O=e.backgroundOpacity,P={message:t,isCompact:!1,renderPopout:this.renderPopoutUser,popoutPosition:S,onContextMenu:this.onContextMenuUser,onClick:this.onClickUsername,backgroundOpacity:O};return i.createElement("div",{ref:this.setRef,className:(0,l.default)(I,E.default.messageCozy),"aria-disabled":T,onClick:this.onClick},y?a("div",{className:E.default.headerCozy},void 0,a(w,{user:t.author,onContextMenu:this.onContextMenuUser,renderPopout:this.renderPopoutUser,isAnimated:!c&&u}),a("h2",{className:E.default.headerCozyMeta},void 0,i.createElement(N,P),a(M,{timestamp:t.timestamp,backgroundOpacity:O}))):null,a("div",{className:E.default.contentCozy},void 0,d&&null!=f?a(p.default,{channel:n,message:t,value:f,children:o,onCancel:m,onChange:v,onConfirmDelete:g,onResize:this.onResize,saveMessage:_,validateEdit:b}):a(h.default,{channel:n,message:t,isCompact:!1,onContextMenu:this.onContextMenuMessage,renderButtons:s,renderPrefix:null,disableButtons:C,disableMentionStyles:A}),r({message:t})))},t.prototype.render=function(){var e=this.props,t=e.isCompact,n=e.disableJumpFlash,r=e.jumpSequenceId,o=t?this.renderCompact():this.renderCozy();return r&&!n?a(y.default,{sequenceId:r},void 0,o):o},t}(i.Component);L.defaultProps={disableAvatarAnimation:!0,isFocusedWindow:!0};var D=function(e){function t(){var n,r;S(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return n=r=C(this,e.call.apply(e,[this].concat(i))),r.state={disableAvatarAnimation:!0,isAnimatableAvatar:(0,g.hasAnimatedAvatar)(r.props.messages[0]&&r.props.messages[0].author)},r.onMouseEnter=function(){return r.setState({disableAvatarAnimation:!1})},r.onMouseLeave=function(){return r.setState({disableAvatarAnimation:!0})},r.renderButtonsMessage=function(e){var t=e.message,n=e.channel,o=r.props.renderButtonsMessage;return null==o?null:a("div",{className:E.default.buttonContainer},void 0,o({message:t,channel:n}))},C(r,n)}return A(t,e),t.prototype.shouldComponentUpdate=function(e,t){var n=this.props.messages;if(n.length!==e.messages.length)return!0;if(!(0,s.default)(this.props,e,["messages"])||!(0,s.default)(this.state,t))return!0;for(var r=!1,o=!1,a=!1,i=0,l=n.length;i<l;i++){var u=e.messages[i];if(!r&&u.reactions.length&&(r=!0),!o&&u.embeds.length&&(o=!0),!a&&u.attachments.length&&(a=!0),n[i]!==u)return!0}var c=this.props,f=c.disableReactionReads,d=c.disableReactionCreates,p=c.disableReactionUpdates,h=c.disableAutoPlayGif,y=c.disableEmbeds,m=c.disableManageMessages,v=c.disableDeveloperMode;return!(!r||p===e.disableReactionUpdates&&f===e.disableReactionReads)||(!(!o||h===e.disableAutoPlayGif&&y===e.disableEmbeds)||(!(!a||h===e.disableAutoPlayGif)||(d!==e.disableReactionCreates||m!==e.disableManageMessages||v!==e.disableDeveloperMode)))},t.getDerivedStateFromProps=function(e,t){var n=e.messages[0],r=n&&(0,g.hasAnimatedAvatar)(n.author);return r!==t.isAnimatableAvatar?{isAnimatableAvatar:r}:null},t.prototype.render=function(){var e,t=this,n=this.props,r=n.messages,s=n.channel,u=n.editingMessageId,c=n.renderButtonsGroup,f=n.renderSystemMessage,d=n.onClick,p=n.onDeleteMessage,h=n.disableInteraction,y=n.disableInteractionLabel,v=n.disableDivider,g=n.editingContent,_=n.isCompact,b=n.jumpMessageId,S=n.jumpSequenceId,C=n.className,A=n.backgroundOpacity,T=(n.renderButtonsMessage,n.disableReactionReads,n.disableReactionCreates,n.disableReactionUpdates,n.disableAutoPlayGif,n.disableEmbeds,n.disableManageMessages,n.disableDeveloperMode,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["messages","channel","editingMessageId","renderButtonsGroup","renderSystemMessage","onClick","onDeleteMessage","disableInteraction","disableInteractionLabel","disableDivider","editingContent","isCompact","jumpMessageId","jumpSequenceId","className","backgroundOpacity","renderButtonsMessage","disableReactionReads","disableReactionCreates","disableReactionUpdates","disableAutoPlayGif","disableEmbeds","disableManageMessages","disableDeveloperMode"])),I=this.state,O=I.isAnimatableAvatar,M=I.disableAvatarAnimation,N=r[0]&&r[0].author,w=N&&N.isLocalBot(),D=null!=d||h;return a("div",{className:(0,l.default)(C,(e={},e[E.default.isLocalBot]=w,e[E.default.containerCompactBounded]=_&&null==u,e[E.default.containerCozyBounded]=!_&&null==u,e[E.default.containerCompact]=_&&null!=u,e[E.default.containerCozy]=!_&&null!=u,e)),onMouseEnter:O?this.onMouseEnter:null,onMouseLeave:O?this.onMouseLeave:null},void 0,r.map(function(e,n){if(!e)return null;if(e.type!==m.MessageTypes.DEFAULT)return a("div",{className:E.default.content},e.id,f({message:e,channel:s,renderButtons:t.renderButtonsMessage}));var r=u===e.id,l=e.id===b,d=o({},T,{isCompact:_,isEditing:r,isDisabled:D,channel:s,message:e,editingContent:g,disableAvatarAnimation:M,backgroundOpacity:A,jumpSequenceId:l?S:null,disableButtons:D||null!=c,isHeader:0===n,renderButtons:t.renderButtonsMessage});return i.createElement(L,o({},d,{key:e.id}))}),w&&a(P,{channelId:s.id,messages:r,onDeleteMessage:p}),D&&a(R,{onClick:d,label:y}),c&&c({messages:r,channel:s}),!w&&a("hr",{"aria-hidden":!0,className:(0,l.default)(v?E.default.divider:E.default.dividerEnabled,E.default[A+"BackgroundOpacity"])}))},t}(i.Component);D.defaultProps={popoutPosition:u.default.Positions.RIGHT,disableDivider:!0,disableInteraction:!1,disableReactionReads:!1,disableReactionCreates:!0,disableReactionUpdates:!0,disableAutoPlayGif:!1,disableEmbeds:!1,disableManageMessages:!0,disableDeveloperMode:!0,disableInteractionLabel:void 0},t.default=D},7429:function(e,t,n){"use strict";t.__esModule=!0,t.MessageOptionPopout=void 0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=p(n(64)),l=n(963),s=n(0),u=p(n(6)),c=p(n(223)),f=p(n(9)),d=p(n(5873));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=t.MessageOptionPopout=function(e){function t(){var n,r;h(this,t);for(var a=arguments.length,c=Array(a),f=0;f<a;f++)c[f]=arguments[f];return n=r=y(this,e.call.apply(e,[this].concat(c))),r.handleCopyID=function(e){var t=r.props,n=t.message,o=t.onClose;(0,l.copy)(e.shiftKey?n.channel_id+"-"+n.id:n.id),o()},r.handleCopyLink=function(){var e=r.props,t=e.channel,n=e.message,o=e.onClose;(0,l.copy)(location.protocol+"//"+location.host+s.Routes.MESSAGE(t.guild_id,t.id,n.id)),o()},r.handleEdit=function(){var e=r.props,t=e.channel,n=e.message,o=e.onClose;(0,e.onStartEditMessage)(t.id,n.id,n.content),o()},r.handleRetry=function(){var e=r.props,t=e.channel,n=e.message,o=e.onClose;(0,e.onRetrySendMessage)(t,n.id,n.content,n.tts),o()},r.handleDelete=function(){var e=r.props,t=e.onDeleteMessage,n=e.onClose,o=e.onConfirmDelete;r.props.message.state===s.MessageStates.SEND_FAILED?t(r.props.channel.id,r.props.message.id,!0):o(r.props.channel,r.props.message),n()},r.handleReactions=function(){var e=r.props,t=e.onClose,n=e.message;(0,e.onShowReactionsModal)({message:n}),t()},r.handlePin=function(){var e=r.props,t=e.onConfirmPin,n=e.channel,o=e.message,a=e.onClose;t(n,o),a()},r.handleJoinNotifConfiguration=function(){var e=r.props,t=e.channel,n=e.onClose,o=e.onOpenGuildSettings,a=t.getGuildId();null!=a&&o(a,s.GuildSettingsSections.OVERVIEW),n()},r.handleUnpin=function(e){var t=r.props,n=t.onUnpinMessage,o=t.onConfirmUnpin,a=t.channel,i=t.onClose,l=t.message;e.shiftKey?n(a,l.id):o(a,l),i()},r.renderJoinNotificationOption=function(){var e=r.props,t=e.message,n=e.channel,a=e.onCanManageGuild,l=n.getGuildId();return null==l?null:t.type===s.MessageTypes.USER_JOIN&&a({guildId:l})?o(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,className:d.default.item,onClick:r.handleJoinNotifConfiguration},void 0,u.default.Messages.CONFIGURE):null},y(r,n)}return m(t,e),t.prototype.render=function(){var e=this.props,t=e.message,n=e.currentUserId,r=void 0,c=void 0,f=void 0,p=void 0,h=void 0,y=void 0;return t.state===s.MessageStates.SEND_FAILED?r=o(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,className:d.default.item,onClick:this.handleRetry,role:"menuitem"},void 0,u.default.Messages.RETRY):(this.props.canEdit&&t.author.id===n&&(c=o(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,className:d.default.item,onClick:this.handleEdit,role:"menuitem"},void 0,u.default.Messages.EDIT)),this.props.canPin&&(f=!1===t.pinned?o(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,className:d.default.item,onClick:this.handlePin,role:"menuitem"},void 0,u.default.Messages.PIN):o(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,className:d.default.item,onClick:this.handleUnpin,role:"menuitem"},void 0,u.default.Messages.UNPIN))),l.SUPPORTS_COPY&&this.props.developerMode&&(p=o(a.Fragment,{},void 0,o(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,className:d.default.item,onClick:this.handleCopyID,role:"menuitem"},void 0,u.default.Messages.COPY_ID),o(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,className:d.default.item,onClick:this.handleCopyLink,role:"menuitem"},void 0,u.default.Messages.COPY_LINK))),this.props.canDelete&&(h=o(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,className:d.default.item,onClick:this.handleDelete,role:"menuitem"},void 0,u.default.Messages.DELETE)),t.reactions.length&&(y=o(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,className:d.default.item,onClick:this.handleReactions,role:"menuitem"},void 0,u.default.Messages.REACTIONS)),o("div",{className:d.default.container,role:"menu"},void 0,f,c,r,p,h,y,this.renderJoinNotificationOption())},t}(a.PureComponent),g=function(e){function t(){var n,r;h(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=y(this,e.call.apply(e,[this].concat(i))),r.renderOptionPopout=function(e){var t=e.onClose,n=r.props,a=n.channel,i=n.message,l=n.canDelete,s=n.canEdit,u=n.canPin,c=n.developerMode,f=n.currentUserId,d=n.onStartEditMessage,p=n.onRetrySendMessage,h=n.onDeleteMessage,y=n.onConfirmPin,m=n.onOpenGuildSettings,g=n.onUnpinMessage,_=n.onConfirmUnpin,E=n.onCanManageGuild,b=n.onConfirmDelete,S=n.onShowReactionsModal;return o(v,{channel:a,message:i,developerMode:c,canEdit:s,canPin:u,canDelete:l,onClose:t,onStartEditMessage:d,onRetrySendMessage:p,onDeleteMessage:h,onConfirmDelete:b,onConfirmPin:y,onOpenGuildSettings:m,onUnpinMessage:g,onConfirmUnpin:_,onCanManageGuild:E,onShowReactionsModal:S,currentUserId:f})},y(r,n)}return m(t,e),t.prototype.render=function(){var e=this.props,t=e.message,n=e.currentUserId,r=e.canDelete,a=e.canPin,i=e.developerMode,s=e.className;return t.author.isLocalBot()?null:t.author.id===n||r||a||l.SUPPORTS_COPY&&i?o(c.default,{closeOnScroll:!1,render:this.renderOptionPopout,position:c.default.Positions.BOTTOM,offsetY:-6},void 0,o("div",{className:(0,f.default)(d.default.button,s)})):null},t}(a.PureComponent);t.default=g},7430:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=y(n(55)),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),y(n(43))),l=y(n(57)),s=y(n(6)),u=y(n(230)),c=y(n(34)),f=n(0),d=n(550),p=y(n(267)),h=n(33);function y(e){return e&&e.__esModule?e:{default:e}}var m=(0,i.default)({displayName:"MessageRemoveReactionsItem",mixins:[u.default,l.default],propTypes:{channel:a.default.object.isRequired,message:a.default.object.isRequired},render:function(){return this.can(f.Permissions.MANAGE_MESSAGES,this.props.channel)&&this.props.message.reactions&&this.props.message.reactions.length>0?o(c.default,{label:s.default.Messages.REMOVE_ALL_REACTIONS,action:this.handleRemoveAllReactions,danger:!0}):null},handleRemoveAllReactions:function(e){var t=this;(0,h.closeContextMenu)(),e.shiftKey?(0,d.removeAllReactions)(this.props.channel.id,this.props.message.id):p.default.show({title:s.default.Messages.REMOVE_ALL_REACTIONS_CONFIRM_TITLE,body:s.default.Messages.REMOVE_ALL_REACTIONS_CONFIRM_BODY,confirmText:s.default.Messages.YES_TEXT,cancelText:s.default.Messages.NO_TEXT,onConfirm:function(){(0,d.removeAllReactions)(t.props.channel.id,t.props.message.id)}})}});t.default=m,e.exports=t.default},7431:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=h(n(55)),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),h(n(43))),l=h(n(57)),s=h(n(6)),u=h(n(230)),c=h(n(34)),f=h(n(38)),d=h(n(6231)),p=n(33);function h(e){return e&&e.__esModule?e:{default:e}}var y=(0,i.default)({displayName:"MessageReactionsItem",mixins:[u.default,l.default],propTypes:{channel:a.default.object.isRequired,message:a.default.object.isRequired},render:function(){return this.props.message.reactions&&this.props.message.reactions.length>0?o(c.default,{label:s.default.Messages.REACTIONS,action:this.handleReactions}):null},handleReactions:function(){(0,p.closeContextMenu)(),f.default.push(d.default,{message:this.props.message})}});t.default=y,e.exports=t.default},7432:function(e,t,n){e.exports=n.p+"24e5837679a970699e904d047c741540.svg"},7433:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),s(n(9))),i=s(n(87)),l=s(n(197));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,n=e.styles,r=e.image,s=e.label,u=e.action,c=e.active,f=void 0!==c&&c,d=e.disabled,p=void 0!==d&&d,h=e.danger,y=void 0!==h&&h,m=void 0;return p||(m=function(e){return u(e,s,f)}),o(i.default,{className:(0,a.default)(l.default.item,l.default.itemImage,(t={},t[l.default.danger]=y,t)),style:n,onClick:m},void 0,o("div",{className:l.default.label},void 0,s),o("img",{alt:"",src:r}))},e.exports=t.default},7434:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=A(n(55)),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),A(n(43))),l=A(n(57)),s=A(n(6)),u=A(n(230)),c=A(n(379)),f=A(n(7433)),d=n(0),p=n(550),h=A(n(38)),y=A(n(6231)),m=n(143),v=A(n(81)),g=A(n(235)),_=A(n(234)),E=n(565),b=A(n(282)),S=A(n(31)),C=n(33);function A(e){return e&&e.__esModule?e:{default:e}}var T=(0,i.default)({displayName:"MessageAddReactionItem",mixins:[u.default,l.default],propTypes:{channel:a.default.object.isRequired,message:a.default.object.isRequired,invertChildY:a.default.bool},renderFrequentlyUsedEmojis:function(){var e=this,t=this.props.channel.getGuildId(),r=b.default.getDisambiguatedEmojiContext(t).getFrequentlyUsedEmojis().filter(function(t){return!g.default.isEmojiDisabled(t,e.props.channel)}).map(function(t){var n=void 0;n=null==t.id?g.default.getURL(t.surrogatePair):v.default.getEmojiURL({id:t.id,animated:t.animated});var r=void 0;r=null==t.id?_.default.convertSurrogateToName(t.surrogatePair):":"+t.name+":";var a=t.id||t.surrogatePair;return o(f.default,{label:r,image:n,action:function(){return e.handleAddReaction(t)}},a)});return r.push(o(f.default,{label:s.default.Messages.OTHER_REACTIONS,image:n(7432),action:this.renderEmojiPicker},"otherReactions")),r},render:function(){return S.default.renderReactions&&(this.props.channel.isPrivate()||this.can(d.Permissions.ADD_REACTIONS,this.props.channel))?o(c.default,{label:s.default.Messages.ADD_REACTION,render:this.renderFrequentlyUsedEmojis,invertChildY:this.props.invertChildY}):null},renderEmojiPicker:function(){(0,C.closeContextMenu)(),m.ComponentDispatch.dispatch(d.ComponentActions.TOGGLE_REACTION_POPOUT(this.props.message.id))},handleAddReaction:function(e){var t=this.props,n=t.channel,r=t.message;(0,p.addReaction)(n.id,r.id,(0,E.toReactionEmoji)(e)),(0,C.closeContextMenu)()},handleReactions:function(){h.default.push(y.default,{message:this.props.message})}});t.default=T,e.exports=t.default},7435:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=y(n(55)),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),y(n(43))),l=y(n(57)),s=y(n(6)),u=y(n(34)),c=n(33),f=y(n(6106)),d=y(n(6105)),p=y(n(230)),h=n(0);function y(e){return e&&e.__esModule?e:{default:e}}var m=(0,i.default)({displayName:"MessagePinItem",mixins:[l.default,p.default],propTypes:{channel:a.default.object.isRequired,message:a.default.object.isRequired},render:function(){var e=this.props,t=e.channel,n=e.message;return!this.can(h.Permissions.MANAGE_MESSAGES,t)&&!t.isPrivate()||n.state===h.MessageStates.SEND_FAILED?null:!1===n.pinned?o(u.default,{action:this.handlePin,label:s.default.Messages.PIN_MESSAGE}):o(u.default,{action:this.handleUnpin,label:s.default.Messages.UNPIN_MESSAGE})},handlePin:function(e){(0,c.closeContextMenu)(),e.shiftKey?f.default.pinMessage(this.props.channel,this.props.message.id):d.default.confirmPin(this.props.channel,this.props.message)},handleUnpin:function(e){(0,c.closeContextMenu)(),e.shiftKey?f.default.unpinMessage(this.props.channel,this.props.message.id):d.default.confirmUnpin(this.props.channel,this.props.message)}});t.default=m,e.exports=t.default},7436:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=f(n(6)),l=f(n(34)),s=n(33),u=f(n(145)),c=n(0);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=d(this,e.call.apply(e,[this].concat(a))),r.handleResendMessage=function(){var e=r.props,t=e.channel,n=e.message;(0,s.closeContextMenu)(),u.default.retrySendMessage(t,n.id,n.content,n.tts)},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return this.props.message.state===c.MessageStates.SEND_FAILED?o(l.default,{label:i.default.Messages.RESEND_MESSAGE,action:this.handleResendMessage}):null},t}(a.PureComponent);t.default=p,e.exports=t.default},7437:function(e,t,n){"use strict";t.__esModule=!0,t.canReportInChannel=c,t.canReportUser=f,t.canReportMessage=function(e){return null!=e&&f(e.author)&&c(e.getChannelId())};var r=n(0),o=s(n(14)),a=s(n(112)),i=s(n(18)),l=s(n(386));function s(e){return e&&e.__esModule?e:{default:e}}var u=50;function c(e){if(a.default.can(r.Permissions.MANAGE_MESSAGES,{channelId:e})){var t=i.default.getChannel(e);if(null!=t){var n=l.default.getMemberCount(t.getGuildId());return null!=n&&n>=u}}return!1}function f(e){if(null==e)return!1;var t=e.id;return o.default.getId()!==t}},7438:function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(0),a=n(13),i=(r=a)&&r.__esModule?r:{default:r};t.default={report:function(e){return i.default.post({url:o.Endpoints.REPORT,body:e})},getReasons:function(e){return i.default.get({url:o.Endpoints.REPORT,query:e}).then(function(e){return e.body})}},e.exports=t.default},7439:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=m(n(6)),l=m(n(123)),s=m(n(75)),u=m(n(266)),c=m(n(262)),f=m(n(64)),d=m(n(5990)),p=m(n(957)),h=(m(n(228)),m(n(124)),m(n(88)),m(n(276)),m(n(7438))),y=n(0);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r._isMounted=!1,r.handleReasonChange=r.handleReasonChange.bind(r),r.handleReport=r.handleReport.bind(r),r.state={loading:!0,submitting:!1,reasons:[],selectedReason:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,h.default.getReasons(this.getReportData()).then(function(t){e._isMounted&&e.setState({reasons:t,loading:!1})})},t.prototype.componentWillUnmount=function(){this._isMounted=!1},t.prototype.close=function(){(0,this.props.onClose)()},t.prototype.renderHeader=function(){var e=this.props,t=e.guild,n=e.message,r=e.user,a=void 0;return t?a=i.default.Messages.REPORT_SERVER.format({name:t.toString()}):n?a=i.default.Messages.REPORT_MESSAGE.format({name:n.getAuthorName()}):r&&(a=i.default.Messages.REPORT_USER.format({name:r.tag})),o(l.default.Header,{},void 0,o(s.default,{tag:s.default.Tags.H4},void 0,a))},t.prototype.getReportData=function(){var e=this.props,t=e.guild,n=e.message,r=e.user,o=this.state.selectedReason,a={};return null!=n?(a.channel_id=n.getChannelId(),a.message_id=n.id):null!=r?a.user_id=r.id:null!=t&&(a.guild_id=t.id),null!=o&&(a.reason=o),a},t.prototype.renderReasons=function(){var e=this.state,t=e.loading,n=e.reasons,r=e.selectedReason;if(t)return o(p.default,{style:{height:100}});var a=n.map(function(e){var t=e.reason;return{name:e.label,desc:e.description,value:t}});return o(d.default,{value:r,onChange:this.handleReasonChange,options:a})},t.prototype.renderFooter=function(){var e=this,t=this.state,n=t.loading,r=t.selectedReason,a=t.submitting,s=n||a||null==r;return o(l.default.Footer,{},void 0,o(f.default,{type:"submit",disabled:s,submitting:a},void 0,i.default.Messages.REPORT),o(f.default,{look:f.default.Looks.LINK,color:f.default.Colors.PRIMARY,onClick:function(){return e.close()}},void 0,i.default.Messages.CANCEL))},t.prototype.render=function(){return o(l.default,{tag:"form",onSubmit:this.handleReport},void 0,this.renderHeader(),o(l.default.Content,{},void 0,o(u.default,{title:i.default.Messages.FORM_LABEL_REPORT_REASON},void 0,this.renderReasons()),o(c.default,{type:c.default.Types.DESCRIPTION},void 0,i.default.Messages.FORM_REPORT_HELP_TEXT.format({guidelinesURL:y.MarketingURLs.GUIDELINES}))),this.renderFooter())},t.prototype.handleReasonChange=function(e){var t=e.value;if("number"!=typeof t)throw new Error("Report.handleReasonChange: Invalid reason type");this.setState({selectedReason:t})},t.prototype.handleReport=function(e){var t=this;e.preventDefault(),this.setState({submitting:!0});var n=this.props.onReport;h.default.report(this.getReportData()).then(function(){n&&n(),t.close()},function(){return t.setState({submitting:!1})})},t}(a.Component);t.default=v,e.exports=t.default},7440:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=m(n(55)),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),m(n(43))),l=m(n(57)),s=m(n(6)),u=m(n(230)),c=m(n(34)),f=m(n(12)),d=n(33),p=m(n(145)),h=n(0),y=m(n(6105));function m(e){return e&&e.__esModule?e:{default:e}}var v=(0,i.default)({displayName:"MessageDeleteItem",mixins:[u.default,l.default],propTypes:{channel:a.default.object.isRequired,message:a.default.object.isRequired},render:function(){return!this.can(h.Permissions.MANAGE_MESSAGES,this.props.channel)&&this.props.message.author.id!==f.default.getCurrentUser().id||this.props.message.state===h.MessageStates.SENDING?null:o(c.default,{label:s.default.Messages.DELETE_MESSAGE,action:this.handleDeleteMessage,danger:!0})},handleDeleteMessage:function(e){var t=this.props,n=t.channel,r=t.message;(0,d.closeContextMenu)(),r.state===h.MessageStates.SEND_FAILED?p.default.deleteMessage(n.id,r.id,!0):e.shiftKey?p.default.deleteMessage(n.id,r.id):y.default.confirmDelete(n,r,!0)}});t.default=v,e.exports=t.default},7441:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=d(n(6)),l=d(n(34)),s=d(n(12)),u=n(33),c=d(n(145)),f=n(0);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=p(this,e.call.apply(e,[this].concat(a))),r.handleEditMessage=function(){(0,u.closeContextMenu)(),c.default.startEditMessage(r.props.channelId,r.props.message.id,r.props.message.content)},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props.message,t=s.default.getCurrentUser();return e.state!==f.MessageStates.SEND_FAILED&&e.author.id===t.id?o(l.default,{label:i.default.Messages.EDIT_MESSAGE,action:this.handleEditMessage}):null},t}(a.PureComponent);t.default=h,e.exports=t.default},7442:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=_(n(227)),l=_(n(548)),s=_(n(7441)),u=_(n(7440)),c=_(n(7436)),f=_(n(6283)),d=_(n(6282)),p=_(n(7435)),h=_(n(7434)),y=_(n(7431)),m=_(n(7430)),v=_(n(6281)),g=n(0);function _(e){return e&&e.__esModule?e:{default:e}}var E=o(f.default,{}),b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.style,n=e.type,r=e.className,a=e.channel,f=e.message,_=e.invertChildY,b=e.attachment,S=this.props.target,C=void 0,A=void 0;if(b)A=C=b.url;else for(;null!=S;)S instanceof HTMLImageElement&&null!=S.src&&(A=S.src),S instanceof HTMLAnchorElement&&null!=S.href&&(C=S.href),S=S.parentNode;var T=void 0,I=void 0,O=document.getSelection?document.getSelection():null;switch(O&&O.rangeCount>0&&(T=E,I=o(v.default,{value:O.toString()})),n){case g.ContextMenuTypes.MESSAGE_MAIN:return o("div",{className:r,style:t},void 0,o(i.default,{},void 0,T),o(i.default,{},void 0,I),o(i.default,{},void 0,o(h.default,{channel:a,message:f,invertChildY:_}),o(p.default,{channel:a,message:f}),o(c.default,{channel:a,message:f}),o(s.default,{channelId:a.id,message:f}),o(y.default,{channel:a,message:f}),o(m.default,{channel:a,message:f}),o(u.default,{channel:a,message:f})),o(d.default,{href:C,src:A}),o(l.default,{id:f.id,shiftId:f.channel_id+"-"+f.id}));case g.ContextMenuTypes.MESSAGE_SYSTEM:return o("div",{className:r,style:t},void 0,o(i.default,{},void 0,T),o(i.default,{},void 0,I),o(i.default,{},void 0,o(u.default,{channel:a,message:f})),o(d.default,{href:C,src:A}),o(l.default,{id:f.id}));default:return null}},t}(a.PureComponent);t.default=b,e.exports=t.default},7443:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),c(n(3))),i=c(n(6616)),l=c(n(80)),s=n(0),u=c(n(5877));function c(e){return e&&e.__esModule?e:{default:e}}t.default=a.default.connectStores([l.default],function(e){var t=e.message;return{activity:null!=t.application?l.default.getApplicationActivity(t.author.id,t.application.id):l.default.findActivity(t.author.id,function(e){return e.type===s.ActivityTypes.LISTENING})}})(function(e){var t=e.channel,n=e.message,r=e.activity,a=e.hideParty;return o(i.default,{className:u.default.container,activity:r,activityActionType:n.activity.type,partyId:n.activity.party_id,userId:n.author.id,applicationId:null!=n.application?n.application.id:void 0,name:null!=n.application?n.application.name:void 0,coverImage:null!=n.application?n.application.cover_image:void 0,message:n,channelId:t.id,guildId:t.getGuildId(),hideParty:a})}),e.exports=t.default},7444:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=_(n(6)),s=_(n(75)),u=_(n(40)),c=_(n(67)),f=_(n(79)),d=_(n(263)),p=_(n(5992)),h=_(n(64)),y=n(6025),m=n(99),v=_(n(5592)),g=_(n(5564));function _(e){return e&&e.__esModule?e:{default:e}}var E=function(e){e.className,e.size;var t=e.checkmark,n=e.children,r=e.onClick,l=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","size","checkmark","children","onClick"]);return i.createElement(h.default,o({},l,{onClick:r,look:t?h.default.Looks.OUTLINED:h.default.Looks.FILLED,size:v.default.buttonSize,className:v.default.button,innerClassName:v.default.buttonInner}),a("div",{className:v.default.buttonContent},void 0,n),t?a(f.default,{name:f.default.Names.CHECKMARK,className:v.default.buttonIcon,width:18,height:18}):null)};E.Colors=h.default.Colors,E.Looks=h.default.Looks,E.defaultProps={checkmark:!1};var b=function(e){var t=e.children;return a("div",{className:v.default.wrapper},void 0,t)};b.Header=function(e){var t=e.text;return a(s.default,{className:v.default.header},void 0,t)},b.Body=function(e){var t=e.resolving,n=e.children;return a("div",{className:v.default.content},void 0,t?a("div",{className:v.default.resolving},void 0,a("div",{className:v.default.resolvingBackground})):n)},b.Icon=function(e){var t=e.guild,n=e.channel,r=e.onClick,o=e.expired;if(void 0!==o&&o||null==t&&null==n)return a("div",{className:v.default.guildIconExpired});var i=null==t||null!=t.icon,l=(0,m.getClass)(v.default,"guildIcon",i?"Image":"",null!=r?"Joined":"");return null!=t?a(p.default,{onClick:r,active:!0,size:p.default.Sizes.LARGE,guild:t,className:l}):null!=n?a(d.default,{onClick:r,src:n.getIconURL(),className:l,imageClassName:g.default.iconSizeLarge}):null},b.Info=function(e){var t=e.title,n=e.onClick,r=e.expired,o=e.children;return a(u.default,{className:v.default.guildInfo,direction:u.default.Direction.VERTICAL,justify:u.default.Justify.CENTER},void 0,a(c.default,{onClick:n,weight:c.default.Weights.SEMIBOLD,size:c.default.Sizes.MEDIUM,className:(0,m.getClass)(v.default,"guildName",r?"Expired":null!=n?"Joined":"")},void 0,t),a(c.default,{weight:c.default.Weights.SEMIBOLD,size:c.default.Sizes.SMALL,className:v.default.guildDetail},void 0,a(u.default,{grow:0,align:u.default.Align.CENTER},void 0,o)))},b.Data=function(e){var t=e.membersOnline,n=e.members,r=[];return null!=t&&t>0&&r.push(a(i.Fragment,{},"onlineCount",a("i",{className:v.default.statusOnline}),a("span",{className:v.default.onlineCount},void 0,l.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_ONLINE.format({membersOnline:t})))),null!=n&&r.push(a(i.Fragment,{},"memberCount",a("i",{className:v.default.statusOffline}),a("span",{},void 0,l.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_TOTAL.format({count:n})))),r},b.Channel=function(e){var t=e.channel,n=(0,y.getIconNameForChannel)(t);return null==t||null==n?null:[a(f.default,{name:n},"channel-icon"),a("span",{className:v.default.channelName},"channel-name",t.name)]},b.Button=E,t.default=b,e.exports=t.default},7445:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=A(n(6)),l=A(n(3)),s=A(n(9)),u=A(n(365)),c=A(n(18)),f=A(n(6010)),d=A(n(26)),p=A(n(12)),h=A(n(65)),y=A(n(144)),m=n(532),v=A(n(7444)),g=A(n(5592)),_=A(n(124)),E=A(n(228)),b=A(n(987)),S=n(143),C=n(0);function A(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var I=o(v.default.Body,{resolving:!0}),O=o(v.default.Icon,{expired:!0}),M=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=T(this,e.call.apply(e,[this].concat(a))),r.handleAcceptInstantInvite=function(e){var t=r.props,n=t.code,o=t.getAcceptInviteContext;u.default.acceptInvite(n,o("Invite Button Embed"),function(){r.handleTransitionToInviteChannel(e)})},r.handleTransitionToInviteChannel=function(e){var t=r.props.invite;null!=t.channel&&u.default.transitionToInviteChannelSync(t.channel.id)},r.handleMentionInviter=function(){var e=r.props,t=e.author,n=e.selectedChannelId,o=t.username,a=t.discriminator,i="@"+o;y.default.hidePersonalInformation||(i+="#"+a),S.ComponentDispatch.dispatchToLastSubscribed(C.ComponentActions.INSERT_TEXT,{content:i}),null!=n&&b.default.typing(n)},T(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.renderResolving=function(){return o(v.default,{},void 0,o(v.default.Header,{text:i.default.Messages.INVITE_BUTTON_RESOLVING}),I)},t.prototype.renderExpired=function(){var e=this.props,t=e.currentUserId,n=e.author,r=void 0,a=void 0,l=void 0;return t===n.id?(r=i.default.Messages.INVITE_BUTTON_INVALID_OWNER,l=i.default.Messages.INVITE_BUTTON_TITLE_INVITER_INVALID):(l=i.default.Messages.INVITE_BUTTON_TITLE_INVITED_INVALID,n&&n.username?(r=i.default.Messages.INSTANT_INVITE_ASK_USER_FOR_NEW_INVITE.format({username:n.username}),a=o(v.default.Button,{onClick:this.handleMentionInviter},void 0,i.default.Messages.MENTION)):r=i.default.Messages.INSTANT_INVITE_ASK_FOR_NEW_INVITE),o(v.default,{},void 0,o(v.default.Header,{text:l}),o(v.default.Body,{},void 0,O,o(v.default.Info,{expired:!0,title:i.default.Messages.INVITE_BUTTON_INVALID},void 0,r),a))},t.prototype.renderStandard=function(){var e=this.props,t=e.invite,n=e.author,r=e.currentUserId===n.id,a=t.channel,l=t.approximate_member_count,s=t.approximate_presence_count,u=t.state===C.InviteStates.ACCEPTING,c=this.props.guild,f=null!=c;if(null==c){if(null==t.guild)return this.renderResolving();c=new E.default(t.guild)}var d=void 0;null!=a&&a.type===C.ChannelTypes.GUILD_VOICE?d=o(v.default.Channel,{channel:a}):null!=l&&l>=5||null!=s&&s>0?d=o(v.default.Data,{members:l,membersOnline:s}):null!=a&&(d=o(v.default.Channel,{channel:a}));var p=f?this.handleTransitionToInviteChannel:this.handleAcceptInstantInvite,h=i.default.Messages.JOIN_SERVER,y=v.default.Button.Colors.GREEN;f&&(h=i.default.Messages.JOINED_SERVER,y=v.default.Button.Colors.PRIMARY);var m=i.default.Messages.INVITE_BUTTON_TITLE_INVITED;return r&&(m=i.default.Messages.INVITE_BUTTON_TITLE_INVITER),o(v.default,{},void 0,o(v.default.Header,{text:m}),o(v.default.Body,{},void 0,o(v.default.Icon,{guild:c,onClick:f?p:null}),o(v.default.Info,{title:c.name,onClick:f?p:null},void 0,d),o(v.default.Button,{onClick:p,submitting:u,checkmark:f,color:y},void 0,h)))},t.prototype.renderGroupDM=function(){var e=this.props,t=e.invite,n=e.author,r=e.currentUserId===n.id,a=t.state===C.InviteStates.ACCEPTING,l=this.props.channel,s=null!=l,u=void 0;if(null==l){if(null==t.channel)return this.renderResolving();l=new _.default(t.channel),u=null!=t.channel&&null!=t.channel.recipients?t.channel.recipients:[]}else u=l.recipients.reduce(function(e,t){var n=p.default.getUser(t);return null!=n&&e.push(n),e},[]),s&&u.push(p.default.getCurrentUser());var c=l.name;c||(c=u.length>0?u.filter(function(e){return null!=e}).map(function(e){return e.username}).join(", "):i.default.Messages.UNNAMED);var f=s?this.handleTransitionToInviteChannel:this.handleAcceptInstantInvite,d=i.default.Messages.JOIN_SERVER,h=v.default.Button.Colors.GREEN;s&&(d=i.default.Messages.JOINED_SERVER,h=v.default.Button.Colors.PRIMARY);var y=i.default.Messages.INVITE_BUTTON_TITLE_INVITED_GROUP_DM;return r&&(y=i.default.Messages.INVITE_BUTTON_TITLE_INVITER_GROUP_DM),o(v.default,{},void 0,o(v.default.Header,{text:y}),o(v.default.Body,{},void 0,o(v.default.Icon,{channel:l,onClick:s?f:null}),o(v.default.Info,{title:c,onClick:s?f:null},void 0,o(v.default.Data,{members:u.length})),o(v.default.Button,{onClick:f,submitting:a,checkmark:s,color:h},void 0,d)))},t.prototype.renderBody=function(){var e=this.props.invite;if(null==e)throw new Error("[InviteButton] Received null invite object");switch(e.state){case C.InviteStates.RESOLVING:return this.renderResolving();case C.InviteStates.EXPIRED:return this.renderExpired();default:return null!=e.channel&&e.channel.type===C.ChannelTypes.GROUP_DM?this.renderGroupDM():this.renderStandard()}},t.prototype.render=function(){var e=this;return o(m.BackgroundOpacityContext.Consumer,{},void 0,function(t){var n=t.backgroundOpacity;return n?o("div",{className:(0,s.default)(g.default[n+"BackgroundOpacity"])},void 0,e.renderBody()):e.renderBody()})},t}(a.PureComponent);M.defaultProps={invite:{state:C.InviteStates.RESOLVING,code:""}},t.default=l.default.connectStores([f.default,d.default],function(e){var t=e.code,n=f.default.getInvite(t);return{invite:n,guild:null!=n&&null!=n.guild?d.default.getGuild(n.guild.id):null,channel:null!=n&&null!=n.channel?c.default.getChannel(n.channel.id):null,selectedChannelId:h.default.getChannelId(),currentUserId:p.default.getCurrentUser().id}})(M),e.exports=t.default},7446:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=c(n(6)),s=n(0),u=c(n(980));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=f(this,e.call.apply(e,[this].concat(a))),r.videoRef=i.createRef(),f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidUpdate=function(e){if(e.play!==this.props.play){var t=this.videoRef.current;t instanceof HTMLVideoElement&&(this.props.play?t.play():t.pause())}},t.prototype.render=function(){var e=this.props,t=e.poster,n=e.src,r=e.width,o=e.height,l=e.naturalWidth,u=e.naturalHeight,c=e.play;return l<=s.MAX_VIDEO_WIDTH&&u<=s.MAX_VIDEO_HEIGHT||l<=s.MAX_VIDEO_HEIGHT&&u<=s.MAX_VIDEO_WIDTH?i.createElement("video",{ref:this.videoRef,poster:t,src:n,width:r,height:o,muted:!0,loop:!0,autoPlay:c,preload:"none"}):a("img",{alt:"",src:t,width:r,height:o})},t}(i.Component);d.defaultProps={play:!1};t.default=function(e){var t=e.src,n=e.poster,r=e.naturalWidth,s=e.naturalHeight,c=e.autoPlay,f=e.ImageComponent,p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["src","poster","naturalWidth","naturalHeight","autoPlay","ImageComponent"]),h=f||u.default;return i.createElement(h,o({alt:l.default.Messages.GIF,src:n,autoPlay:c},p,{animated:!0}),function(e){var n=e.src,o=e.size,i=e.animating;return a(d,{poster:n,src:t,width:o.width,height:o.height,naturalWidth:r,naturalHeight:s,play:i})})},e.exports=t.default},7447:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),a=s(n(232)),i=s(n(11)),l=s(n(163));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,l=Array(o),s=0;s<o;s++)l[s]=arguments[s];return n=r=u(this,e.call.apply(e,[this].concat(l))),r.openHref=function(){var e=r.props.href;if(i.default.embedded)window.open(e);else{var t=window.open();t.opener=null,t.location=e,t.target="_blank"}},r.onClick=function(e){var t=r.props,n=t.href,o=t.isTrusted,i=t.onClickUntrusted;null!=a.default.sanitizeUrl(n)?o||(e.preventDefault(),i({openHref:r.openHref})):e.preventDefault()},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.title,n=void 0===t?null:t,i=e.children,s=e.href,u=(e.onClickUntrusted,e.isTrusted,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["title","children","href","onClickUntrusted","isTrusted"])),c=a.default.sanitizeUrl(s);return o.createElement(l.default,r({},u,{title:n,target:"_blank",rel:"noreferrer noopener",href:c,onClick:this.onClick}),i||n)},t}(o.PureComponent);t.default=c,e.exports=t.default},7448:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=f(n(6)),l=f(n(980)),s=f(n(5878)),u=n(388),c=f(n(7447));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.src,n=e.original,r=e.placeholder,f=e.width,d=e.height,p=e.animated,h=e.children,y=e.isTrusted,m=e.onClickUntrusted,v=(e.maxWidth,e.maxHeight,e.shouldAnimate,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["src","original","placeholder","width","height","animated","children","isTrusted","onClickUntrusted","maxWidth","maxHeight","shouldAnimate"])),g=(0,u.zoomFit)(f,d),_=g.width,E=g.height;return a.createElement("div",v,o(l.default,{src:t,placeholder:r,shouldLink:!1,width:f,height:d,maxWidth:_,maxHeight:E,children:h,animated:p,autoPlay:!0}),null!=n&&o(c.default,{href:n,className:s.default.downloadLink,isTrusted:y,onClickUntrusted:m},void 0,i.default.Messages.OPEN_ORIGINAL_IMAGE))},t}(a.PureComponent);t.default=d,e.exports=t.default},7449:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),a=h(n(38)),i=h(n(6)),l=h(n(980)),s=h(n(7448)),u=n(388),c=h(n(267)),f=h(n(1200)),d=h(n(191)),p=n(1199);function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var n,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var h=arguments.length,m=Array(h),v=0;v<h;v++)m[v]=arguments[v];return n=l=y(this,e.call.apply(e,[this].concat(m))),l._isListeningToWindow=!1,l.state={isWindowFocused:d.default.isFocused()},l.addWindowListeners=function(){l._isListeningToWindow=!0,d.default.addChangeListener(l.onChangeWindowStore),l.onChangeWindowStore()},l.removeWindowListeners=function(){l._isListeningToWindow=!1,d.default.removeChangeListener(l.onChangeWindowStore)},l.onChangeWindowStore=function(){var e=d.default.isFocused();e!==l.state.isWindowFocused&&l.setState({isWindowFocused:e})},l.onMouseEnter=function(e,t){var n=t.preloadImage,r=l.props,o=r.width,a=r.height;n((0,u.zoomFit)(o,a))},l.onClickUntrusted=function(e){var t=e.openHref,n=l.props,r=n.original,o=n.src,a=r||o;c.default.show({title:i.default.Messages.HOLD_UP,body:i.default.Messages.MASKED_LINK_BODY.format({url:a}),cancelText:i.default.Messages.MASKED_LINK_CANCEL,confirmText:i.default.Messages.MASKED_LINK_CONFIRM,minorText:i.default.Messages.MASKED_LINK_TRUST_THIS_DOMAIN,onConfirm:t,onConfirmSecondary:function(){(0,p.trustDomain)(a),t()}})},l.onZoom=function(e,t){var n=t.placeholder;e.preventDefault();var i=l.props,u=i.src,c=i.original,d=i.width,p=i.height,h=i.animated,y=i.children,m=c||u,v={src:u,original:c||u,width:d,height:p,animated:h,children:y,placeholder:n,isTrusted:f.default.isTrusted(m),onClickUntrusted:l.onClickUntrusted};a.default.push(function(e){return o.createElement(s.default,r({},v,e,{shouldAnimate:l.state.isWindowFocused}))})},y(l,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){l.default.isAnimated(this.props)&&!this._isListeningToWindow&&this.addWindowListeners()},t.prototype.componentDidUpdate=function(){var e=l.default.isAnimated(this.props);e&&!this._isListeningToWindow?this.addWindowListeners():!e&&this._isListeningToWindow&&this.removeWindowListeners()},t.prototype.componentWillUnmount=function(){this._isListeningToWindow&&this.removeWindowListeners()},t.prototype.render=function(){return o.createElement(l.default,r({},this.props,{onZoom:this.onZoom,onMouseEnter:this.onMouseEnter,shouldAnimate:this.state.isWindowFocused}))},t}(o.PureComponent);m.defaultProps={alt:"",shouldLink:!0,autoPlay:!1,animated:!1},t.default=m,e.exports=t.default},7450:function(e,t,n){"use strict";t.__esModule=!0;var r,o,a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=n(6011),s=n(6234),u=(o=s)&&o.__esModule?o:{default:o};var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.src,n=e.fileSize,r=e.fileName;return a(u.default,{src:t,fileName:r,fileSize:(0,l.sizeString)(n),type:u.default.Types.AUDIO})},t}(i.PureComponent);t.default=c,e.exports=t.default},7451:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=c(n(9)),s=c(n(189)),u=c(n(5880));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d={friction:14,tension:200},p={DURATION:"DURATION",VOLUME:"VOLUME"};function h(e){var t=(e|=0)%60;return(e-t)/60+":"+String(t).padStart(2,"0")}var y=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=f(this,e.call.apply(e,[this].concat(a))),r.state={animatedProgress:new s.default.Value(0),dragging:!1,offsetLeft:0,offsetWidth:0,previewWidth:new s.default.Value(0)},r.handlePreviewChange=function(){var e=r,t=e.bubble,n=e.state,o=n.dragging,a=n.previewWidth,i=e.props.value;o||null==t||(t.innerHTML=h(a._value*i))},r.handleAnimatedChange=function(){var e=r,t=e.bubble,n=e.state,o=n.dragging,a=n.animatedProgress,i=e.props.value;o&&null!=t&&(t.innerHTML=h(a._value*i))},r.handleMouseMove=function(e){var t=r.state,n=t.dragging,o=t.previewWidth;if(!n){var a=e.clientX,i=e.clientY;o.setValue(r.calculatePercentage(a,i))}},r.handleDragMove=function(e){var t=r.props,n=t.onDrag,o=t.type,a=e.clientX,i=e.clientY;n(r.calculatePercentage(a,i),o)},r.handleDragStart=function(e){var t=r.props,n=t.onDragStart,o=t.onDrag,a=t.type,i=e.clientX,l=e.clientY;if(e.preventDefault(),null!=r.wrapper){var s=r.wrapper.getBoundingClientRect(),u=s.left,c=s.width;r.setState({dragging:!0,offsetLeft:u,offsetWidth:c},function(){n(a),o(r.calculatePercentage(i,l),a),window.addEventListener("mouseup",r.handleDragEnd,!1),window.addEventListener("mousemove",r.handleDragMove,!1)})}},r.handleDragEnd=function(){(0,r.props.onDragEnd)(),window.removeEventListener("mouseup",r.handleDragEnd,!1),window.removeEventListener("mousemove",r.handleDragMove,!1),r.setState({dragging:!1})},r.setBubbleRef=function(e){null==e?r.bubble=null:null!=e.componentRef?r.bubble=e.componentRef:null!=e.refs&&(r.bubble=e.refs.node)},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.UNSAFE_componentWillMount=function(){var e=this.state,t=e.previewWidth,n=e.animatedProgress;t.addListener(this.handlePreviewChange),n.addListener(this.handleAnimatedChange)},t.prototype.componentWillUnmount=function(){var e=this.state,t=e.previewWidth,n=e.animatedProgress;t.removeListener(this.handlePreviewChange),n.removeListener(this.handleAnimatedChange),window.removeEventListener("mouseup",this.handleDragEnd,!1),window.removeEventListener("mousemove",this.handleDragMove,!1)},t.prototype.componentDidUpdate=function(e,t){var n=this.state,r=n.dragging,o=n.previewWidth,a=n.animatedProgress;!r&&t.dragging&&o.setValue(a._value)},t.prototype.setGrabber=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.state.animatedProgress;t?s.default.spring(n,a({toValue:e},d)).start():n.setValue(e)},t.prototype.calculatePercentage=function(e,t){var n=this.wrapper,r=this.props.type;if(null==n)return 0;var o=n.getBoundingClientRect(),a=o.left,i=o.width,l=o.bottom,s=o.height,u=r===p.VOLUME?(l-t)/s:(e-a)/i;return Math.min(1,Math.max(0,u))},t.prototype.render=function(){var e=this,t=this.props,n=t.buffers,r=t.type,a=this.state,c=a.dragging,f=a.previewWidth,d=a.animatedProgress,h=c?d:f;return o("div",{className:r===p.VOLUME?u.default.vertical:u.default.horizontal},void 0,i.createElement("div",{className:(0,l.default)(c?u.default.mediaBarInteractionDragging:u.default.mediaBarInteraction,r===p.VOLUME?u.default.mediaBarInteractionVolume:null),onMouseDown:this.handleDragStart,onMouseMove:this.handleMouseMove,ref:function(t){return e.wrapper=t}},o("div",{className:(0,l.default)(u.default.mediaBarWrapper,r===p.VOLUME?u.default.mediaBarWrapperVolume:null)},void 0,null!=n?n.map(function(e,t){var n=e[0],r=e[1];return o("div",{className:u.default.buffer,style:{width:100*r+"%",left:100*n+"%"}},t)}):null,r===p.DURATION?o(s.default.div,{className:u.default.mediaBarPreview,style:{width:f.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}}):null,o(s.default.div,{className:u.default.mediaBarProgress,style:{width:d.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}},void 0,o("span",{className:u.default.mediaBarGrabber})),r===p.DURATION?i.createElement(s.default.div,{ref:this.setBubbleRef,className:u.default.bubble,style:{left:h.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}}):null)))},t}(i.Component);y.Types=p,t.default=y,e.exports=t.default},7452:function(e,t,n){e.exports=n.p+"a11e895b46cde503a094dd31641060a6.svg"},7453:function(e,t,n){e.exports=n.p+"83a157e8720aa50957c4338e10d01c80.svg"},7454:function(e,t,n){e.exports=n.p+"985ea67d2edab4424c62009886f12e44.svg"},7455:function(e,t,n){e.exports=n.p+"85f7a4063578f6e0e2c73f60bca0fcce.svg"},7456:function(e,t,n){e.exports=n.p+"f812168e543235a62b9f6deb2b094948.svg"},7457:function(e,t,n){e.exports=n.p+"a236ab3be009cf5fbbbae4d7a7437804.svg"},7458:function(e,t,n){e.exports=n.p+"9f358f466473586417baee7bacfba5ca.svg"},7459:function(e,t,n){e.exports=n.p+"481aa700fab464f2332ca9b5f4eb6ba4.svg"},7460:function(e,t,n){e.exports=n.p+"5b0da31dc2b00717c1e35fb1f84f9b9b.svg"},7461:function(e,t,n){e.exports=n.p+"73d212e3701483c36a4660b28ac15b62.svg"},7462:function(e,t,n){e.exports=n.p+"03ad68e1f4d47f2671d629cfeac048ef.svg"},7463:function(e,t,n){e.exports=n.p+"982bd8aedd89b0607f492d1175b3b3a5.svg"},7464:function(e,t,n){e.exports=n.p+"f167b4196f02faf2dc2e7eb266a24275.svg"},7465:function(e,t,n){var r={"./icon-file-small-acrobat.svg":7464,"./icon-file-small-ae.svg":7463,"./icon-file-small-ai.svg":7462,"./icon-file-small-archive.svg":7461,"./icon-file-small-audio.svg":7460,"./icon-file-small-code.svg":7459,"./icon-file-small-document.svg":7458,"./icon-file-small-ps.svg":7457,"./icon-file-small-sketch.svg":7456,"./icon-file-small-spreadsheet.svg":7455,"./icon-file-small-unknown.svg":7454,"./icon-file-small-video.svg":7453,"./icon-file-small-webcode.svg":7452};function o(e){var t=a(e);return n(t)}function a(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=7465},7466:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),u(n(6604))),i=u(n(980)),l=u(n(6108)),s=u(n(7450));function u(e){return e&&e.__esModule?e:{default:e}}var c=/\.(png|jpe?g|webp|gif)$/i,f=/\.(mp4|webm|mov)$/i,d=/\.(mp3|ogg|wav|flac)$/i;t.default=function(e){var t=e.attachment,n=e.inlineMedia,r=e.autoPlayGif,u=e.onClick,p=e.onContextMenu,h=e.ImageComponent,y=t.filename,m=t.width,v=t.height;if(n&&null!=m&&m>0&&null!=v&&v>0){if(c.test(y)){var g=h||i.default;return o(g,{src:t.proxy_url||t.url,original:t.url,width:m,height:v,autoPlay:r,onClick:u,onContextMenu:p})}if(f.test(y)&&null!=t.proxy_url)return o(l.default,{poster:t.proxy_url+"?format=jpeg",fileSize:t.size,fileName:t.filename,src:t.url,width:m,height:v,onClick:u,onContextMenu:p,naturalWidth:m,naturalHeight:v})}else if(null!=n&&d.test(y)&&null!=t.url)return o(s.default,{fileSize:t.size,fileName:t.filename,src:t.url});return o(a.default,{url:t.url,filename:t.filename,size:t.size,onClick:u,onContextMenu:p})},e.exports=t.default},7467:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=_(n(9)),s=_(n(990)),u=_(n(7466)),c=_(n(7449)),f=_(n(6108)),d=_(n(7446)),p=_(n(1201)),h=_(n(7445)),y=_(n(6605)),m=_(n(7443)),v=n(0),g=_(n(5876));function _(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=E(this,e.call.apply(e,[this].concat(a))),r.getAcceptInviteContext=function(e){var t=r.props,n=t.channel,o=t.message;return{location:e,location_guild_id:n.getGuildId(),location_channel_id:n.id,location_channel_type:n.type,location_message_id:o.id}},E(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.renderInvites=function(e){var t=this;return e.invites.length?e.invites.map(function(n){return a(h.default,{code:n,author:e.author,getAcceptInviteContext:t.getAcceptInviteContext},n)}):null},t.prototype.renderReactions=function(e){var t=this.props,n=t.disableReactionCreates,r=t.disableReactionReads,o=t.disableReactionUpdates,i=t.channel;return r?null:a(y.default,{message:e,channel:i,disableReactionCreates:n,disableReactionUpdates:o})},t.prototype.renderAttachments=function(e){var t=this.props,n=t.disableAutoPlayGif,r=t.inlineAttachmentMedia,o=t.onContextMenuMessage,i=t.channel;return e.attachments.length?e.attachments.map(function(t){return a(u.default,{attachment:t,inlineMedia:r,autoPlayGif:!n,onContextMenu:function(n){return o(n,{attachment:t,message:e,channel:i,target:n.target})},ImageComponent:c.default},t.id)}):null},t.prototype.renderEmbeds=function(e){var t=this.props,n=t.disableEmbeds,r=t.inlineEmbedMedia,a=t.disableAutoPlayGif,l=t.backgroundOpacity;return!e.embeds.length||n?null:e.embeds.map(function(e,t){var n={};return n.ImageComponent=c.default,n.VideoComponent=f.default,n.GIFVComponent=d.default,e.type===v.EmbedTypes.RICH&&(n.LinkComponent=p.default),i.createElement(s.default,o({key:t,embed:e,autoPlayGif:!a,hideMedia:!r},n,{backgroundOpacity:l}))})},t.prototype.renderActivityInvite=function(e){if(null==e.activity)return null;var t=this.props.channel;return a(m.default,{channel:t,message:e,hideParty:!1})},t.prototype.render=function(){var e=this.props,t=e.isCompact,n=e.className,r=e.message,o=this.renderInvites(r),i=this.renderAttachments(r),s=this.renderEmbeds(r),u=this.renderActivityInvite(r),c=this.renderReactions(r);return null==o&&null==i&&null==s&&null==u&&null==c?null:a("div",{className:(0,l.default)(n,t?g.default.containerCompact:g.default.containerCozy)},void 0,o,i,s,u,c)},t}(i.PureComponent);b.defaultProps={disableEmbeds:!0,isCompact:!1},t.default=b,e.exports=t.default},7468:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=c(n(8)),s=c(n(189)),u=c(n(191));function c(e){return e&&e.__esModule?e:{default:e}}var f={ABOVE:0,VISIBLE:1,BELOW:2};function d(e){return{toValue:e,duration:300,easing:s.default.Easing.inOut(s.default.Easing.back())}}var p=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.state={prevValue:null,currValue:n.value,nextValue:null},r.prevAnimate=new s.default.Value(f.ABOVE),r.currAnimate=new s.default.Value(f.VISIBLE),l.default.bindAll(r,["animateNext"]),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this.state,n=t.prevValue,r=t.currValue,o=t.nextValue;null==n&&r!==e.value?this.setState({prevValue:u.default.isFocused()?r:null,currValue:e.value}):null!=o&&o!==e.value&&this.setState({nextValue:e.value})},t.prototype.componentDidUpdate=function(e,t){var n=this.state,r=n.prevValue,o=n.currValue;r!==t.prevValue&&null!=r&&this.animateBetween(r,o)},t.prototype.animateBetween=function(e,t){var n=void 0;this.prevAnimate.setValue(f.VISIBLE),e>t?(this.currAnimate.setValue(f.ABOVE),n=f.BELOW):(this.currAnimate.setValue(f.BELOW),n=f.ABOVE),s.default.parallel([s.default.timing(this.prevAnimate,d(n)),s.default.timing(this.currAnimate,d(f.VISIBLE))]).start(this.animateNext)},t.prototype.animateNext=function(){var e=this.state,t=e.currValue,n=e.nextValue;null!=n?this.setState({prevValue:u.default.isFocused()?t:null,currValue:n,nextValue:null}):this.setState({prevValue:null})},t.prototype.getAnimatedStyle=function(e){return{transform:[{translateY:e.interpolate({inputRange:[0,1,2],outputRange:["-100%","0%","100%"]})}],position:"absolute",top:0,left:0,right:0,bottom:0}},t.prototype.getMinWidth=function(e){return Math.ceil(Math.log10(e+1))*this.props.digitWidth},t.prototype.render=function(){var e=this.state,t=e.prevValue,n=e.currValue,r=l.default.omit(this.props,["value","digitWidth"]);if(null==t)return i.createElement("div",a({},r,{style:{minWidth:this.getMinWidth(n)}}),n);var u=Math.max(t,n);return i.createElement("div",a({},r,{style:{position:"relative",overflow:"hidden"}}),o("div",{style:{visibility:"hidden",minWidth:this.getMinWidth(u)}},void 0,u),o(s.default.div,{style:this.getAnimatedStyle(this.prevAnimate)},void 0,t),o(s.default.div,{style:this.getAnimatedStyle(this.currAnimate)},void 0,n))},t}(i.PureComponent);t.default=p,e.exports=t.default},7469:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.default=function(e){var t=e.message,r=e.onClickUsername,l=e.onContextMenuUsername,s=t.id,u=t.author,c=a.default.getSystemMessageUserJoin(s).format({username:u.username,usernameOnClick:{onClick:r,onContextMenu:l}});return o(i.default,{icon:n(6608),timestamp:t.timestamp},void 0,c)};!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1));var a=l(n(6607)),i=l(n(6019));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},7470:function(e,t,n){e.exports=n.p+"aff52bc375fe2da876174301a5c6d09d.svg"},7471:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.default=function(e){var t=e.message,r=e.onClickUsername,l=e.onContextMenuUsername,s=t.getAuthorName(),u=void 0;if(e.otherUsername){var c=e.otherUsername,f=e.onClickOtherUsername,d=e.onContextMenuOtherUsername;u=a.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE.format({username:s,usernameOnClick:{onClick:r,onContextMenu:l},otherUsername:c,otherUsernameOnClick:{onClick:f,onContextMenu:d}})}else u=a.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE_SELF.format({username:s,usernameOnClick:{onClick:r,onContextMenu:l}});return o(i.default,{icon:n(7470),timestamp:t.timestamp},void 0,u)};!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1));var a=l(n(6)),i=l(n(6019));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},7472:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.default=function(e){var t=e.message,r=e.otherUsername,l=e.onClickUsername,s=e.onContextMenuUsername,u=e.onClickOtherUsername,c=e.onContextMenuOtherUsername,f=t.getAuthorName(),d=a.default.Messages.SYSTEM_MESSAGE_RECIPIENT_ADD.format({username:f,usernameOnClick:{onClick:l,onContextMenu:s},otherUsername:r,otherUsernameOnClick:{onClick:u,onContextMenu:c}});return o(i.default,{icon:n(6608),timestamp:t.timestamp},void 0,d)};!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1));var a=l(n(6)),i=l(n(6019));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},7473:function(e,t,n){e.exports=n.p+"4e4e1d9c907a3dc53d68f34e868fcb12.svg"},7474:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.default=function(e){var t=e.message,r=e.onClickUsername,s=e.onContextMenuUsername,u=e.onClickPins,c=t.nick,f=t.author,d=t.colorString,p=c||f.username,h=function(e,t){var n=d?{color:d}:null;return o(i.default,{onClick:r,onContextMenu:s,style:n},t,e)},y=null==u?a.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE_NO_CTA_FORMATTED.format({usernameOnClick:h,username:p}):a.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE.format({usernameHook:h,username:p,pinsActionOnClick:u});return o(l.default,{icon:n(7473),timestamp:t.timestamp},void 0,y)};!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1));var a=s(n(6)),i=s(n(163)),l=s(n(6019));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},7475:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.default=function(e){var t=e.message,r=e.onClickUsername,s=e.onContextMenuUsername;return o(i.default,{className:l.default.channelNameChange,icon:n(6609),timestamp:t.timestamp},void 0,a.default.Messages.SYSTEM_MESSAGE_CHANNEL_NAME_CHANGE.format({username:t.getAuthorName(),usernameOnClick:{onClick:r,onContextMenu:s},channelName:t.content}))};!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1));var a=s(n(6)),i=s(n(6019)),l=s(n(5884));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},7476:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.default=function(e){var t=e.message,r=e.onClickUsername,l=e.onContextMenuUsername;return o(i.default,{icon:n(6609),timestamp:t.timestamp},void 0,a.default.Messages.SYSTEM_MESSAGE_CHANNEL_ICON_CHANGE.format({username:t.getAuthorName(),usernameOnClick:{onClick:r,onContextMenu:l}}))};!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1));var a=l(n(6)),i=l(n(6019));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},7477:function(e,t,n){e.exports=n.p+"c30220457097b064286a8759a9b6c4af.svg"},7478:function(e,t,n){e.exports=n.p+"d80d1fdc43a3c42134a31a39581160ac.svg"},7479:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.default=function(e){var t=e.message,r=e.missed,l=e.joinable,s=e.onClickUsername,u=e.onContextMenuUsername,c=e.onClickJoinCall,f=t.getAuthorName(),d={onClick:s,onContextMenu:u};if(r)return o(i.default,{icon:n(7478),timestamp:t.timestamp},void 0,a.default.Messages.SYSTEM_MESSAGE_CALL_MISSED.format({username:f,usernameOnClick:d}));return o(i.default,{icon:n(7477),timestamp:t.timestamp},void 0,a.default.Messages.SYSTEM_MESSAGE_CALL_STARTED.format({username:f,usernameOnClick:d}),l?o(i.default.Action,{onClick:c},void 0,a.default.Messages.SYSTEM_MESSAGE_JOIN_CALL):null)};!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1));var a=l(n(6)),i=l(n(6019));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},7480:function(e,t,n){"use strict";var r;t.__esModule=!0;var o,a=(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,r){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=r;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),s=R(n(3)),u=R(n(14)),c=R(n(378)),f=R(n(18)),d=R(n(12)),p=R(n(89)),h=R(n(165)),y=n(0),m=n(143),v=n(6610),g=R(n(286)),_=R(n(238)),E=R(n(531)),b=n(223),S=R(b),C=R(n(7479)),A=R(n(7476)),T=R(n(7475)),I=R(n(7474)),O=R(n(7472)),M=R(n(7471)),N=R(n(7469)),P=R(n(6606));function R(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=function(e,t){return function(n){(0,b.openPopout)(n.currentTarget,{closeOnScroll:!1,position:S.default.Positions.RIGHT,shadow:!1,render:function(n){var r=f.default.getChannel(t);return null==r?null:l.createElement(E.default,i({},n,{user:e,guildId:r.getGuildId(),channelId:r.id}))}})}},U=function(e,t){return function(n){var r=f.default.getChannel(t);null!=r&&(0,v.openUserContextMenu)(n,e,r)}},x=function(e){function t(){var n,r;w(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=L(this,e.call.apply(e,[this].concat(a))),r.handleJoinCall=function(){var e=r.props.message;h.default.selectVoiceChannel(null,e.getChannelId())},L(r,n)}return D(t,e),t.prototype.render=function(){var e=this.props,t=e.message,n=e.missed,r=e.joinable,o=t.author,i=t.getChannelId();return a(C.default,{message:t,missed:n,joinable:r,onClickUsername:k(o,i),onContextMenuUsername:U(o,i),onClickJoinCall:this.handleJoinCall})},t}(l.PureComponent),j=s.default.connectStores([c.default,p.default],function(e){var t=e.message,n=u.default.getId(),r=t.getChannelId(),o=c.default.isCallActive(r,t.id),a=p.default.getVoiceState(y.ME,n);return{missed:!o&&null!=t.call&&!t.call.participants.includes(n),joinable:o&&(null==a||a.channelId!==r)}})(x),G=function(e){function t(){return w(this,t),L(this,e.apply(this,arguments))}return D(t,e),t.prototype.handleViewPins=function(){m.ComponentDispatch.dispatch(y.ComponentActions.TOGGLE_CHANNEL_PINS)},t.prototype.render=function(){var e=this.props.message,t=e.author,n=e.getChannelId();return a(I.default,{message:e,onClickUsername:k(t,n),onContextMenuUsername:U(t,n),onClickPins:__OVERLAY__?null:this.handleViewPins})},t}(l.PureComponent);var B=s.default.connectStores([d.default],function(e){var t=e.message;return{otherUser:d.default.getUser(t.mentions[0])}})(function(e){var t=e.message,n=e.otherUser,r=t.author,o=t.getChannelId(),i=g.default.getName(null,o,n);return a(O.default,{message:t,otherUsername:i,onClickUsername:k(r,o),onContextMenuUsername:U(r,o),onClickOtherUsername:k(n,o),onContextMenuOtherUsername:U(n,o)})});var F=s.default.connectStores([d.default],function(e){var t=e.message;return{otherUser:d.default.getUser(t.mentions[0])}})(function(e){var t=e.message,n=e.otherUser,r=t.author,o=t.getChannelId(),i=k(r,o),l=U(r,o);if(null!=n&&n.id!==r.id){var s=g.default.getName(null,o,n),u=k(n,o),c=U(n,o);return a(M.default,{message:t,onClickUsername:i,onContextMenuUsername:l,otherUsername:s,onClickOtherUsername:u,onContextMenuOtherUsername:c})}return a(M.default,{message:t,onClickUsername:i,onContextMenuUsername:l})}),V=((r={})[y.MessageTypes.RECIPIENT_ADD]=B,r[y.MessageTypes.RECIPIENT_REMOVE]=F,r[y.MessageTypes.CALL]=j,r[y.MessageTypes.CHANNEL_NAME_CHANGE]=function(e){var t=e.message,n=t.author,r=t.getChannelId();return a(T.default,{message:t,onClickUsername:k(n,r),onContextMenuUsername:U(n,r)})},r[y.MessageTypes.CHANNEL_ICON_CHANGE]=function(e){var t=e.message,n=t.author,r=t.getChannelId();return a(A.default,{message:t,onClickUsername:k(n,r),onContextMenuUsername:U(n,r)})},r[y.MessageTypes.CHANNEL_PINNED_MESSAGE]=G,r[y.MessageTypes.USER_JOIN]=function(e){var t=e.message,n=t.author,r=t.getChannelId();return a(N.default,{message:t,onClickUsername:k(n,r),onContextMenuUsername:U(n,r)})},r),H=function(e){function t(){var n,r;w(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=L(this,e.call.apply(e,[this].concat(a))),r.onContextMenu=function(e){var t=r.props,n=t.message,o=t.channel;(0,t.onContextMenu)(e,{message:n,channel:o,target:e.target})},L(r,n)}return D(t,e),t.prototype.render=function(){var e,t=this.props,n=t.message,r=t.renderButtons,o=t.channel,i=V[n.type];return null==i?(e=new Error("unknown message type "+n.type),_.default.captureException(e),console.error(e),null):a(P.default,{message:n,channel:o,isCompact:!1,onContextMenu:this.onContextMenu,renderButtons:y.MessageTypesDeletable[n.type]?r:null},void 0,a(i,{message:n}))},t}(l.PureComponent);t.default=H,e.exports=t.default},7481:function(e,t,n){"use strict";t.__esModule=!0;var r=s(n(3)),o=s(n(2)),a=(n(0),s(n(8))),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6011)),l=s(n(18));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function e(t,n){u(this,e),this.file=t,this.channel=l.default.getChannel(n),this.classification=i.classifyFile(t),this.isImage="image"===this.classification,this.sizeString=i.sizeString(t.size),this.filename=t.name},f=[];var d=function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getFirstUpload=function(){return f.length>0?f[0]:null},t.prototype.hasAdditionalUploads=function(){return f.length>1},t}(r.default.Store);t.default=new d(o.default,{UPLOAD_MODAL_POP_FILE:function(){f.shift(),f=[].concat(f)},UPLOAD_MODAL_PUSH_FILES:function(e){var t=e.files,n=e.channelId;f=[].concat(f),a.default.forEach(t,function(e){return f.push(new c(e,n))})},UPLOAD_MODAL_CLEAR_ALL_FILES:function(){f=[]}}),e.exports=t.default},7482:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return o._lastUpdate=0,o._loaded=0,o._aborted=!1,o._handleStart=function(e){o._cancel=e,o.emit("start",o._file)},o._handleProgress=function(e,t){var n=Date.now(),a=Math.min(Math.floor(e/t*100),100),i=Math.floor((e-o._loaded)/((n-o._lastUpdate)/1e3));o._lastUpdate=n,o._loaded=e,o._file=r({},o._file,{size:t,progress:a,rate:i}),o.emit("progress",o._file)},o._handleError=function(e){o._aborted||(o.emit("error",o._file,e),o.removeAllListeners())},o._handleComplete=function(){o.emit("complete",o._file),o.removeAllListeners()},o._url=n,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.cancel=function(){null!=this._cancel&&(this._aborted=!0,this._cancel()),this._handleComplete()},t.prototype.upload=function(e,t){if(null!=this._cancel)throw new Error("Uploader.upload(...): An upload is already in progress.");this._lastUpdate=Date.now(),this._loaded=0,this._file={id:o.default.uniqueId("Uploader"),name:e.name,size:0,progress:0,rate:0}},t}(a(n(46)).default);t.default=i,e.exports=t.default},7483:function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(8)),o=a(n(402));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=i(this,e.call.apply(e,[this].concat(a))),r._handleXHRProgress=function(e){r._handleProgress(e.loaded,e.total)},i(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.upload=function(t,n){var a=this;e.prototype.upload.call(this,t,n);var i=o.default.post(this._url);i.attach("file",t,t.name),i.on("error",function(){return a._handleError()}),null!=n&&r.default.each(n,function(e,t){i.field(t,e)});var l=i.end(function(e){e.ok?a._handleComplete():a._handleError(e.body&&e.body.code)}).xhr;l.upload?l.upload.onprogress=this._handleXHRProgress:l.addEventListener("progress",this._handleXHRProgress,!1),this._handleStart(function(){return i.abort()})},t}(a(n(7482)).default);t.default=l,e.exports=t.default},7484:function(e,t,n){"use strict";t.__esModule=!0,t.promptToUpload=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],p=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.length<1)return;if(f.anyFileTooLarge(e)){var h=r.default.getCurrentUser();s.default.push(i.default,{title:c.default.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:c.default.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:f.sizeString(f.maxFileSize())}),promo:!d.default.canUploadLargeFiles(h)})}else p?(o.default.pushFiles({files:e,channelId:t}),u.default.isModalOpen(l.default)||s.default.push(l.default,{backdropInstant:n})):a.default.instantBatchUpload(t,e)};var r=p(n(12)),o=p(n(6236)),a=p(n(6235)),i=p(n(6077)),l=p(n(6611)),s=p(n(38)),u=p(n(949)),c=p(n(6)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6011)),d=p(n(536));function p(e){return e&&e.__esModule?e:{default:e}}},7485:function(e,t,n){e.exports=n.p+"9cbfe5105fc5f29ef4e659059ee01a46.svg"},7486:function(e,t,n){e.exports=n.p+"4e51af83c4879cf313ad553bdc20dcf7.png"},7487:function(e,t,n){e.exports=n.p+"7c1fdd7a2f89b4bc6f7968c3fb3b6a14.png"},7488:function(e,t,n){e.exports=n.p+"df82ca7d3be7d1271f5fb93719ea65fe.png"},7489:function(e,t,n){e.exports=n.p+"5c0d73f3d0c4e89f92bcedbe1752ae94.png"},7490:function(e,t,n){e.exports=n.p+"757c4d5d07c5691452fde54dca7fcde8.png"},7491:function(e,t,n){e.exports=n.p+"b8fa63048881311b205927b3d4111bf6.png"},7492:function(e,t,n){e.exports=n.p+"6a4c3d24e0e1bb9bd102815d01cb3d87.png"},7493:function(e,t,n){var r={"./spritesheet-.png":7492,"./spritesheet-1f3fb.png":7491,"./spritesheet-1f3fc.png":7490,"./spritesheet-1f3fd.png":7489,"./spritesheet-1f3fe.png":7488,"./spritesheet-1f3ff.png":7487,"./spritesheet-emoji.png":6613,"./spritesheet-picker.png":7486};function o(e){var t=a(e);return n(t)}function a(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=7493},7494:function(e,t,n){"use strict";t.__esModule=!0;var r,o,a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1)),n(6)),l=(o=i)&&o.__esModule?o:{default:o};n(5593);var s=a("div",{className:"sad-discord"});t.default=function(e){var t=e.message,n=void 0===t?l.default.Messages.DM_SEARCH_NO_RESULTS:t;return a("div",{className:"no-search-results"},void 0,s,a("div",{},void 0,n))},e.exports=t.default},7496:function(e,t,n){"use strict";t.__esModule=!0,t.TabIndexKeys=void 0,t.getTabIndex=function(e){return l.indexOf(e)+1};var r,o=n(166),a=(r=o)&&r.__esModule?r:{default:r};var i=t.TabIndexKeys=(0,a.default)({CHANNEL_TEXT_AREA:null,CHANNEL_TEXT_AREA_EMOJI:null,CHANNEL_TEXT_AREA_UPLOAD:null}),l=[i.CHANNEL_TEXT_AREA,i.CHANNEL_TEXT_AREA_EMOJI,i.CHANNEL_TEXT_AREA_UPLOAD]},7497:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=d(n(9)),l=d(n(223)),s=d(n(64)),u=n(99),c=n(0),f=d(n(5889));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.state={hovered:!1,emojiIndex:0,isPopoutOpen:!1},r.renderEmojiPickerPopout=r.renderEmojiPickerPopout.bind(r),r.handleMouseOver=r.handleMouseOver.bind(r),r.handleMouseEnter=r.handleMouseEnter.bind(r),r.handleMouseLeave=r.handleMouseLeave.bind(r),r.handlePopoutOpen=r.handlePopoutOpen.bind(r),r.handlePopoutClose=r.handlePopoutClose.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getSpriteStyle=function(){var e=this.state.emojiIndex;return{backgroundPosition:-e%c.EmojiSprites.PickerPerRow*22+"px "+22*-Math.floor(e/c.EmojiSprites.PickerPerRow)+"px",backgroundSize:22*c.EmojiSprites.PickerPerRow+"px "+22*Math.ceil(c.EmojiSprites.PickerCount/c.EmojiSprites.PickerPerRow)+"px"}},t.prototype.renderEmojiPickerPopout=function(e){var t=this.props,n=t.renderEmojiPickerPopout;return n(e,{onSelectEmoji:t.onSelectEmoji,channel:t.channel})},t.prototype.render=function(){var e=this.props.tabIndex,t=this.state,n=t.hovered,r=t.isPopoutOpen,a=n||r,d=(0,u.getClass)(f.default,"emojiButton",a?"Hovered":"Normal"),p=(0,u.getClass)(f.default,"sprite",a?"Hovered":"Normal");return o(l.default,{closeOnScroll:!1,render:this.renderEmojiPickerPopout,position:l.default.Positions.TOP_RIGHT,zIndexBoost:1e3,shadow:!1,animationType:l.default.Animations.NONE,subscribeTo:c.ComponentActions.TOGGLE_EMOJI_POPOUT,onOpen:this.handlePopoutOpen,onClose:this.handlePopoutClose},void 0,o(s.default,{look:s.default.Looks.BLANK,size:s.default.Sizes.NONE,tabIndex:e,className:(0,i.default)(d,this.props.className),onMouseEnter:this.handleMouseEnter,onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave},void 0,o("div",{className:p,style:this.getSpriteStyle()})))},t.prototype.handleMouseOver=function(){this.handleMouseEnter()},t.prototype.handleMouseEnter=function(){if(!this.state.hovered&&!this.state.isPopoutOpen){var e=Math.floor(Math.random()*c.EmojiSprites.PickerCount);this.setState({hovered:!0,emojiIndex:e})}},t.prototype.handleMouseLeave=function(){this.setState({hovered:!1})},t.prototype.handlePopoutOpen=function(){this.setState({isPopoutOpen:!0})},t.prototype.handlePopoutClose=function(){this.setState({isPopoutOpen:!1})},t}(a.PureComponent);t.default=p,e.exports=t.default},7498:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=M(n(9)),s=M(n(8)),u=M(n(192)),c=M(n(189)),f=M(n(40)),d=M(n(223)),p=M(n(6615)),h=M(n(1210)),y=M(n(7497)),m=M(n(64)),v=M(n(6699)),g=M(n(79)),_=M(n(6)),E=n(99),b=n(6011),S=n(7496),C=n(113),A=M(n(5888)),T=n(0),I=M(n(131)),O=M(n(7495));function M(e){return e&&e.__esModule?e:{default:e}}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=/(\t|\s)/,L="UPLOAD_A_FILE",D="INVITE_TO_GAME",k="INVITE_TO_SPECTATE_GAME",U="INVITE_TO_LISTEN",x="INVITE_TO_WATCH",j=function(e,t,n,r){var o=[];return e&&o.push({type:L,icon:g.default.Names.UPLOAD,display:_.default.Messages.CHAT_ATTACH_UPLOAD_A_FILE}),t&&r.forEach(function(e){e.type===T.ActivityTypes.PLAYING&&(0,C.hasFlag)(e,T.ActivityFlags.JOIN)&&o.push({type:D,icon:g.default.Names.GAMEPAD,display:_.default.Messages.CHAT_ATTACH_INVITE_TO_PLAY_GAME.format({channel:n.toString(!0),game:null!=e?e.name:""}),activity:e}),e.type===T.ActivityTypes.PLAYING&&(0,C.hasFlag)(e,T.ActivityFlags.SPECTATE)&&o.push({type:k,icon:g.default.Names.EYE,display:_.default.Messages.CHAT_ATTACH_INVITE_TO_SPECTATE_GAME.format({channel:n.toString(!0),game:null!=e?e.name:""}),activity:e}),e.type===T.ActivityTypes.LISTENING&&(0,C.hasFlag)(e,T.ActivityFlags.SYNC)&&o.push({type:U,icon:g.default.Names.PERSON_PLAY,display:_.default.Messages.CHAT_ATTACH_INVITE_TO_LISTEN.format({channel:n.toString(!0),name:null!=e?e.name:""}),activity:e}),e.type===T.ActivityTypes.WATCHING&&(0,C.hasFlag)(e,T.ActivityFlags.SYNC)&&o.push({type:x,icon:g.default.Names.EYE,display:_.default.Messages.CHAT_ATTACH_INVITE_TO_WATCH.format({channel:n.toString(!0),name:null!=e?e.name:""}),activity:e})}),o},G=function(e){function t(n){N(this,t);var r=P(this,e.call(this,n));return r.handleFileUpload=function(){var e=r.props.onFileUpload;r.close(),e&&e()},r.handleInviteToPlay=function(e){var t=r.props.onInviteToPlay;r.close(),t&&t(e)},r.handleInviteToSpectate=function(e){var t=r.props.onInviteToSpectate;r.close(),t&&t(e)},r.handleInviteToListen=function(e){var t=r.props.onInviteToListen;r.close(),t&&t(e)},r.handleInviteToWatch=function(e){var t=r.props.onInviteToWatch;r.close(),t&&t(e)},r.state={animations:j(n.canAttachFiles,n.canSendInvites,n.channel,n.activities).map(function(){return new c.default.Value(0)})},r}return R(t,e),t.prototype.componentDidMount=function(){var e=[].concat(this.state.animations).reverse();c.default.stagger(50,e.map(function(e){return c.default.timing(e,{duration:200,toValue:1})})).start()},t.prototype.getOnClick=function(e){var t=this;switch(e.type){case L:return this.handleFileUpload;case D:var n=e.activity;return function(){return t.handleInviteToPlay(n)};case k:var r=e.activity;return function(){return t.handleInviteToSpectate(r)};case U:var o=e.activity;return function(){return t.handleInviteToListen(o)};case x:var a=e.activity;return function(){return t.handleInviteToListen(a)}}},t.prototype.close=function(){u.default.close("popout-channel-text-area-attachments")},t.prototype.render=function(){var e=this,t=this.props,n=t.canAttachFiles,r=t.canSendInvites,o=t.channel,i=t.activities,l=j(n,r,o,i).map(function(t,n){var r=e.state.animations[n];return a(c.default.div,{onClick:e.getOnClick(t),className:A.default.attachPopoutRow,style:{opacity:r}},n,a(f.default,{align:f.default.Align.CENTER},void 0,a(g.default,{name:t.icon,className:A.default.attachPopoutIcon,foreground:A.default.attachPopoutIconForeground}),a("div",{className:A.default.attachPopoutRowText},void 0,t.display)))});return a("div",{className:A.default.attachPopout},void 0,l)},t}(i.PureComponent);function B(e){return{prefix:null,focused:e,selectionStart:0,selectionEnd:0,selectedAutocomplete:0,autocompleteType:null,submitting:!1}}var F=function(e){function t(n){N(this,t);var r=P(this,e.call(this,n));return r._mounted=!1,r.state=B(!1),r.saveCurrentTextThrottled=s.default.throttle(r.saveCurrentText.bind(r,!1),500),s.default.bindAll(r,["focus","saveCurrentText","renderAttachPopout","handleSetRef","handleSetFileInputRef","handleKeyPress","handleKeyDown","handleKeyUp","handleStartFileUpload","handleFileUpload","handleOuterClick","handleClick","handleAutocompleteClick","handleAutocompleteHover","handleOnChange","handleFocus","handleBlur","handlePaste","handleSelectEmoji"]),r}return R(t,e),t.prototype.componentDidMount=function(){var e=this.props.value;this._ref&&this._ref.setSelection(e.length,e.length),this._mounted=!0,this.maybeShowAutocomplete(),window.addEventListener("beforeunload",this.saveCurrentText)},t.prototype.componentWillUnmount=function(){this._mounted=!1,this.saveCurrentText(),window.removeEventListener("beforeunload",this.saveCurrentText)},t.prototype.componentDidUpdate=function(e){var t=this;this.props.value!==e.value&&(this.maybeShowAutocomplete(function(){return t.fixSelectedAutocomplete()}),this.saveCurrentTextThrottled())},t.prototype.focus=function(){this._ref&&this._ref.focus()},t.prototype.blur=function(){this._ref&&this._ref.blur()},t.prototype.fixSelectedAutocomplete=function(){this.state.selectedAutocomplete>=this.getAutocompletes().length&&this.setState({selectedAutocomplete:0})},t.prototype.insertText=function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this._ref;if(null!=o){var a=this.state,i=a.selectionStart,l=a.selectionEnd,s=o.value.slice(0,n?o.selectionStart:i),u=o.value.slice(n?o.selectionEnd:l);r&&(e+=" ");var c=s+e+u,f=this.props.onChange;f&&f(null,c),this.setState({selectionStart:o.selectionStart,selectionEnd:o.selectionEnd},function(){var n=s.length+e.length;o.setSelection(n,n),t.maybeShowAutocomplete()}),this.saveCurrentText()}},t.prototype.clearValue=function(){this.setState(B(!0)),this.saveCurrentText()},t.prototype.saveCurrentText=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props,n=t.type,r=t.onSaveCurrentText,o=t.channel;n===T.TextareaTypes.NORMAL&&(e&&this.saveCurrentTextThrottled.cancel(),r&&r(o.id))},t.prototype.maybeShowAutocomplete=function(e){var t=this._ref;if(null!=t){var n=this.props,r=n.value,o=n.autocompleteOptions,a=n.onAutocompleteQuery;if(0!==r.trim().length){var i=t.selectionStart,l=t.selectionEnd,u=void 0,c=!1,f=null;do{var d=w.test(r[i-1]);if(0===i||d)if("break"===function(){var e=(u=r.slice(i,l)).slice(1).toLowerCase();if(null!=(f=(0,s.default)(o).keys().find(function(t){return o[t].matches(u[0],e,i)}))){var t=o[f];return a&&a(t,e,f),c=!0,"break"}}())break}while(--i>=0);this.setState({prefix:c?u:null,selectionStart:i,selectionEnd:l,autocompleteType:f},e)}else this.getAutocompletes().length>0&&this.setState({prefix:null})}},t.prototype.getAutocompletes=function(){var e=this.props.autocompletes,t=[];if(null!=e)for(var n in e){e[n].forEach(function(e){return t.push(e)})}return t},t.prototype.moveSelection=function(e){var t=this.state,n=t.selectedAutocomplete,r=t.prefix,o=this.getAutocompletes().length;return 0!==o&&null!=r&&(n+e>=o?this.setState({selectedAutocomplete:0}):n+e<0?this.setState({selectedAutocomplete:o-1}):this.setState({selectedAutocomplete:n+e}),!0)},t.prototype.selectAutocompletion=function(e){var t=null,n=this.state.autocompleteType,r=this.props,o=r.autocompleteOptions,a=r.autocompletes;null!=n&&null!=o[n]&&null!=a&&(t=o[n].getText(e,a)),null!=t&&this.insertText(t,!1)},t.prototype.getEnabledMode=function(){var e=this.props,t=e.disabled,n=e.canAttachFiles,r=e.canSendInvites,o=e.channel,a=e.activities,i=this.state.submitting;return t||i?"Disabled":0===j(n,r,o,a).length?"EnabledNoAttach":""},t.prototype.getAutocompleteMode=function(){var e=this.state,t=e.prefix,n=e.focused;return null!=t&&n?"Autocomplete":"NoAutocomplete"},t.prototype.getTypeMode=function(){switch(this.props.type){case T.TextareaTypes.EDIT:return"Edit";case T.TextareaTypes.FORM:return"Form";default:return""}},t.prototype.hasOpenCodeBlock=function(){var e=this._ref;if(null==e)return!1;var t=this.props.value.slice(0,e.selectionStart).match(/```/g);return null!=t&&t.length>0&&t.length%2!=0},t.prototype.renderAttachPopout=function(e){var t=this.props,n=t.channel,r=t.canAttachFiles,a=t.canSendInvites,l=t.activities,s=t.onInviteToPlay,u=t.onInviteToSpectate,c=t.onInviteToListen,f=t.onInviteToWatch;return i.createElement(G,o({},e,{canAttachFiles:r,canSendInvites:a,channel:n,activities:l,onFileUpload:this.handleStartFileUpload,onInviteToPlay:s,onInviteToSpectate:u,onInviteToListen:c,onInviteToWatch:f}))},t.prototype.renderAttachButton=function(){var e=this.props,t=e.disabled,n=e.type,r=e.canAttachFiles,o=e.canSendInvites,i=e.channel,l=e.activities,s=e.onOpenAttachPopout;if(t||n!==T.TextareaTypes.NORMAL||0===j(r,o,i,l).length)return null;var u=l.some(function(e){return(0,C.hasFlag)(e,T.ActivityFlags.SYNC)}),c=l.some(function(e){return(0,C.canJoinOrSpectate)(e)})||u;return o&&c?a(f.default,{},void 0,a(d.default,{closeOnScroll:!1,render:this.renderAttachPopout,position:d.default.Positions.TOP_LEFT,shadow:!1,animationType:d.default.Animations.NONE,uniqueId:"popout-channel-text-area-attachments",onOpen:s},void 0,a(m.default,{look:m.default.Looks.BLANK,size:m.default.Sizes.NONE,tabIndex:(0,S.getTabIndex)(S.TabIndexKeys.CHANNEL_TEXT_AREA_UPLOAD),className:A.default.attachButton,innerClassName:A.default.attachButtonInner},void 0,a(g.default,{name:g.default.Names.PLUS_CIRCLE_PLAY,className:A.default.attachButtonIcon,foreground:A.default.attachButtonPlay,background:A.default.attachButtonPlus,width:24,height:24}))),a("div",{className:A.default.attachButtonDivider})):a(f.default,{className:A.default.attachWrapper},void 0,a(m.default,{look:m.default.Looks.BLANK,size:m.default.Sizes.NONE,onClick:this.handleStartFileUpload,tabIndex:(0,S.getTabIndex)(S.TabIndexKeys.CHANNEL_TEXT_AREA_UPLOAD),className:A.default.attachButton,innerClassName:A.default.attachButtonInner},void 0,a(g.default,{name:g.default.Names.PLUS_CIRCLE,className:A.default.attachButtonIcon,foreground:A.default.attachButtonPlus,width:24,height:24})),a("div",{className:A.default.attachButtonDivider}))},t.prototype.renderEmojiButton=function(){var e=this.props,t=e.channel,n=e.renderEmojiPickerPopout;return e.disabled||null==n?null:a(y.default,{className:A.default.emojiButton,onSelectEmoji:this.handleSelectEmoji,channel:t,renderEmojiPickerPopout:n,tabIndex:(0,S.getTabIndex)(S.TabIndexKeys.CHANNEL_TEXT_AREA_EMOJI)})},t.prototype.renderAutocomplete=function(){var e=this.props,t=e.autocompleteOptions,n=e.autocompletes,r=this.state,o=r.focused,i=r.autocompleteType,l=r.selectedAutocomplete,s=r.prefix;if(!o||null==i||null==t[i]||null==s||null==n)return null;var u=s.slice(1).toLowerCase();return a(p.default,{className:A.default.autocomplete,onMouseDown:this.handleAutocompleteMouseDown},void 0,t[i].renderResults(u,l,this.handleAutocompleteHover,this.handleAutocompleteClick,n))},t.prototype.render=function(){var e=this.props,t=e.value,n=e.disabled,r=e.placeholder,o=e.onResize,s=e.className,u=e.backgroundOpacity,c=e.channel,f=this.state.submitting,d=n?_.default.Messages.NO_SEND_MESSAGES_PERMISSION_PLACEHOLDER:r,p=c.rateLimitPerUser<=0,y=this.getEnabledMode(),m=this.getAutocompleteMode(),g=this.getTypeMode();return a("div",{className:(0,l.default)((0,E.getClass)(A.default,"channelTextArea",y),s),onClick:this.handleOuterClick},void 0,a("div",{className:(0,l.default)((0,E.getClass)(A.default,"inner",y),(0,E.getClass)(A.default,"inner",m),A.default[u+"BackgroundOpacity"])},void 0,this.renderAttachButton(),a("div",{className:A.default.uploadInput},void 0,i.createElement(v.default,{ref:this.handleSetFileInputRef,onChange:this.handleFileUpload,multiple:p,tabIndex:-1})),i.createElement(h.default,{ref:this.handleSetRef,className:(0,l.default)((0,E.getClass)(A.default,"textArea",y),(0,E.getClass)(A.default,"textArea",g)),rows:1,fontWidthEstimate:6,autoFocus:!0,placeholder:d,disabled:n||f,onChange:this.handleOnChange,onResize:o,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onFocus:this.handleFocus,onBlur:this.handleBlur,onPaste:this.handlePaste,onClick:this.handleClick,value:n?"":t,tabIndex:(0,S.getTabIndex)(S.TabIndexKeys.CHANNEL_TEXT_AREA)}),this.renderEmojiButton(),this.renderAutocomplete()))},t.prototype.handleSetRef=function(e){this._ref=e},t.prototype.handleSetFileInputRef=function(e){this._fileInputRef=e},t.prototype.handleKeyPress=function(e){switch(e.which){case T.KeyboardKeys.ENTER:if(!e.shiftKey&&!e.ctrlKey&&!this.hasOpenCodeBlock())return e.preventDefault(),this.handleSubmit()}},t.prototype.handleKeyDown=function(e){switch(e.which){case T.KeyboardKeys.ARROW_DOWN:this.moveSelection(1)&&e.preventDefault();break;case T.KeyboardKeys.N:e.ctrlKey&&this.moveSelection(1)&&e.preventDefault();break;case T.KeyboardKeys.ARROW_UP:this.moveSelection(-1)&&e.preventDefault();break;case T.KeyboardKeys.P:e.ctrlKey&&this.moveSelection(-1)&&e.preventDefault();break;case T.KeyboardKeys.TAB:case T.KeyboardKeys.ENTER:this.handleTabOrEnterDown(e)}var t=this.props.onKeyDown;t&&t(e)},t.prototype.handleTabOrEnterDown=function(e){var t=this.state,n=t.selectedAutocomplete,r=t.prefix,o=this.getAutocompletes();null!=r&&0!==o.length?(e.preventDefault(),e.stopPropagation(),this.selectAutocompletion(n)):e.which===T.KeyboardKeys.TAB&&this.hasOpenCodeBlock()&&(e.preventDefault(),e.stopPropagation(),this.insertText("\t",!0,!1))},t.prototype.handleKeyUp=function(e){switch(e.which){case T.KeyboardKeys.ARROW_RIGHT:case T.KeyboardKeys.ARROW_LEFT:this.maybeShowAutocomplete()}var t=this.props.onKeyUp;t&&t(e)},t.prototype.handleStartFileUpload=function(){this._fileInputRef&&this._fileInputRef.activateUploadDialogue()},t.prototype.handleFileUpload=function(e){var t=this.props.onFileUpload;t&&t(e.currentTarget.files)},t.prototype.handleSubmit=function(){var e=this,t=this.props,n=t.value,r=t.onSubmit,o=t.type,a=n.trim();this.setState({submitting:!0},function(){r&&r(a).then(function(t){e._mounted&&(t&&o===T.TextareaTypes.NORMAL&&e.clearValue(),e.setState({submitting:!1},t?e.focus:void 0))})})},t.prototype.handleFocus=function(e){var t=this.props.onFocus;t&&t(e),this.setState({focused:!0})},t.prototype.handleBlur=function(e){var t=this.props.onBlur;t&&t(e),this.setState({focused:!1})},t.prototype.handlePaste=function(e){var t=this,n=this.props,r=n.channel,o=n.onFileUpload,a=n.canPasteFiles;if(!(n.type!==T.TextareaTypes.NORMAL||null==e.clipboardData||null==e.clipboardData.items||0===e.clipboardData.items.length||!r.isPrivate()&&!a||r.isPrivate()&&r.isManaged()))for(var i=0;i<e.clipboardData.items.length;i++){var l=e.clipboardData.items[i];!function(){switch(l.type){case"image/png":e.preventDefault();var n=l.getAsFile();if(null==n)break;t.saveCurrentText(),2===e.clipboardData.items.length?e.clipboardData.items[0].getAsString(function(e){o&&o([(0,b.makeFile)(n,t.extractFileName(e))])}):o&&o([(0,b.makeFile)(n)])}}()}},t.prototype.extractFileName=function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector("img");if(t instanceof HTMLImageElement){var n=void 0;try{var r=I.default.parse(t.src).pathname;null!=r&&r.length>0&&(n=O.default.basename(r).split(".")[0])}catch(e){}if(null!=n&&n.length>0)return n+".png"}},t.prototype.handleOuterClick=function(){this.focus()},t.prototype.handleClick=function(){this.maybeShowAutocomplete()},t.prototype.handleAutocompleteClick=function(e){return this.selectAutocompletion(e)},t.prototype.handleAutocompleteHover=function(e){this.setState({selectedAutocomplete:e})},t.prototype.handleAutocompleteMouseDown=function(e){e.preventDefault()},t.prototype.handleSelectEmoji=function(e){null!=e&&this.insertText(":"+e.name+":"),this.focus()},t.prototype.handleOnChange=function(e){var t=this.props.onChange,n=e.currentTarget.value;t&&t(e,n)},t}(i.PureComponent);F.defaultProps={type:T.TextareaTypes.NORMAL,disabled:!1},t.default=F,e.exports=t.default},7499:function(e,t,n){"use strict";t.__esModule=!0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),l=T(n(9)),s=n(99),u=n(113),c=T(n(64)),f=T(n(40)),d=n(263),p=T(n(79)),h=T(n(223)),y=T(n(163)),m=T(n(142)),v=T(n(970)),g=T(n(6)),_=T(n(5892)),E=T(n(523)),b=T(n(88)),S=T(n(1212)),C=n(0),A=n(172);function T(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var N=function(e){function t(n){I(this,t);var r=O(this,e.call(this,n));return r.renderUserPopout=r.renderUserPopout.bind(r),r}return M(t,e),t.prototype.renderUserPopout=function(e){var t=this.props,n=t.renderUserPopout;return n(t.member.user,e)},t.prototype.render=function(){var e=this.props,t=e.member,n=e.className;return a(h.default,{closeOnScroll:!1,render:t.unknownUser?void 0:this.renderUserPopout,position:h.default.Positions.LEFT,shadow:!1},void 0,a(m.default,{text:t.unknownUser?"":t.nick||t.user.username},void 0,a("div",{className:t.unknownUser?_.default.partyMember:_.default.partyMemberKnown},void 0,a(d.AvatarImage,{src:t.user.getAvatarURL(),size:d.AvatarSizes.XSMALL,className:(0,l.default)(_.default.partyAvatar,n)}))))},t}(i.PureComponent),P=function(e){function t(n){I(this,t);var r=O(this,e.call(this,n));return r.handleOpenSpotifyTrack=function(){var e=r.props,t=e.activity,n=e.onOpenSpotifyTrack;null!=t&&n&&n(t)},r.handleOpenSpotifyArtist=function(e){var t=r.props,n=t.activity,o=t.onOpenSpotifyArtist,a=t.message;null!=n&&null!=a&&o&&o(n,a.author.id,e)},r.handleOpenSpotifyAlbum=function(){var e=r.props,t=e.activity,n=e.onOpenSpotifyAlbum,o=e.message;null!=t&&null!=o&&n&&n(t,o.author.id)},r.handleJoin=r.handleJoin.bind(r),r.handleSpectate=r.handleSpectate.bind(r),r.handleSync=r.handleSync.bind(r),r.handleDownloadApp=r.handleDownloadApp.bind(r),r.renderUser=r.renderUser.bind(r),r}return M(t,e),t.prototype.isDeadInvite=function(){var e=this.props,t=e.isPreview,n=e.message,r=e.activity,o=e.applicationId;return!t&&!(null!=n&&(0,u.isInviteActive)(r,n,o))},t.prototype.getPartySize=function(){var e=this.props.activity;return null==e||null==e.party||null==e.party.size||e.party.size.length<2?[-1,-1]:e.party.size},t.prototype.getActionableMode=function(){return[C.ActivityActionTypes.LISTEN,C.ActivityActionTypes].includes(this.props.activityActionType)?"Actionable":this.props.isPreview||this.canSpectate()||this.canJoin()?"Actionable":"NotActionable"},t.prototype.isInParty=function(){var e=this.props,t=e.activity,n=e.myPartyId;return!e.isPreview&&null!=t&&null!=t.party&&n===t.party.id},t.prototype.isPartyFull=function(){var e=this.getPartySize(),t=e[0],n=e[1];return t>-1&&t>=n},t.prototype.hasPartySize=function(){var e=this.getPartySize(),t=e[0],n=e[1];return t>-1&&n>-1},t.prototype.isActionType=function(e){return this.props.activityActionType===e},t.prototype.canSpectate=function(){var e=this.props,t=e.isGameLaunchable,n=e.activity,r=e.isInBrowser,o=e.isPreview,a=(0,u.hasFlag)(n,C.ActivityFlags.SPECTATE);return!(!o||!a)||!(this.isDeadInvite()||!this.isActionType(C.ActivityActionTypes.SPECTATE)||!(0,u.hasFlag)(n,C.ActivityFlags.SPECTATE))&&!(r||!t||this.isInParty())},t.prototype.canJoin=function(){var e=this.props,t=e.activity,n=e.isPreview,r=e.isGameLaunchable,o=e.isInBrowser;return!!n||!(this.isDeadInvite()||!this.isActionType(C.ActivityActionTypes.JOIN)||!(0,u.hasFlag)(t,C.ActivityFlags.JOIN))&&(!(!this.hasPartySize()||this.isPartyFull())&&!(o||!r||this.isInParty()))},t.prototype.canSync=function(){var e=this.props,t=e.activity,n=e.isPreview,r=e.isSyncable,o=e.isInBrowser;return!!n||!(!this.isActionType(C.ActivityActionTypes.LISTEN)&&!this.isActionType(C.ActivityActionTypes.WATCH))&&(!(this.isDeadInvite()||!(0,u.hasFlag)(t,C.ActivityFlags.SYNC))&&!(o||!r||this.isInParty()))},t.prototype.getHelpdeskArticleURL=function(){var e=this.props.partyId;return null!=e&&(0,A.isSpotifyParty)(e)?C.HelpdeskArticles.SPOTIFY_CONNECTION:C.HelpdeskArticles.RICH_PRESENCE_INTRODUCTION},t.prototype.renderHeaderText=function(){var e=this.props,t=e.activityActionType,n=e.name;switch(t){case C.ActivityActionTypes.LISTEN:return g.default.Messages.INVITE_EMBED_INVITE_TO_LISTEN.format({name:n});case C.ActivityActionTypes.WATCH:return g.default.Messages.INVITE_EMBED_INVITE_TO_WATCH.format({name:n});case C.ActivityActionTypes.SPECTATE:return g.default.Messages.INVITE_EMBED_INVITE_TO_SPECTATE;case C.ActivityActionTypes.JOIN:default:return g.default.Messages.INVITE_EMBED_INVITE_TO_JOIN_GROUP}},t.prototype.renderPartyStatus=function(){var e=this,t=this.props,n=t.activityActionType,r=t.isGameLaunchable,o=t.isSyncable,i=t.isPreview,l=t.isInBrowser,s=t.name,c=t.activity,f=this.getPartySize(),d=f[0],p=f[1];if(this.isDeadInvite())switch(n){case C.ActivityActionTypes.LISTEN:return g.default.Messages.INVITE_EMBED_LISTEN_HAS_ENDED;case C.ActivityActionTypes.WATCH:return g.default.Messages.INVITE_EMBED_WATCH_HAS_ENDED;case C.ActivityActionTypes.SPECTATE:case C.ActivityActionTypes.JOIN:default:return g.default.Messages.INVITE_EMBED_GAME_HAS_ENDED}if(l&&!i)switch(n){case C.ActivityActionTypes.SPECTATE:return g.default.Messages.INVITE_EMBED_SPECTATE_VIA_DESKTOP_APP;case C.ActivityActionTypes.JOIN:return g.default.Messages.INVITE_EMBED_JOIN_VIA_DESKTOP_APP}if(this.isActionType(C.ActivityActionTypes.LISTEN)||this.isActionType(C.ActivityActionTypes.WATCH)){if(null!=c&&null!=c.details&&null!=c.state&&(0,u.isListeningOnSpotify)(c)){return[a("div",{className:_.default.details},"details",a(y.default,{className:_.default.textLink,onClick:this.handleOpenSpotifyTrack},void 0,c.details)),a("div",{className:_.default.state},"state",g.default.Messages.USER_ACTIVITY_LISTENING_ARTISTS.format({artists:c.state,artistsHook:function(t,n){return null!=c.state?a(S.default,{artists:c.state,linkClassName:_.default.textLink,canOpen:null!=c.sync_id,onOpenSpotifyArtist:e.handleOpenSpotifyArtist},n):null}}))]}return this.isActionType(C.ActivityActionTypes.LISTEN)?g.default.Messages.USER_ACTIVITY_LISTEN_ALONG:g.default.Messages.USER_ACTIVITY_WATCH_ALONG}return this.isInParty()?g.default.Messages.INVITE_EMBED_IN_GROUP:r||o||i?this.isActionType(C.ActivityActionTypes.SPECTATE)?g.default.Messages.INVITE_EMBED_SPECTATE:this.isPartyFull()?this.canSpectate()?g.default.Messages.INVITE_EMBED_FULL_GROUP_SPECTATE:g.default.Messages.INVITE_EMBED_FULL_GROUP:this.hasPartySize()?g.default.Messages.INVITE_EMBED_NUM_OPEN_SLOTS.format({number:p-d}):g.default.Messages.JOIN:g.default.Messages.USER_ACTIVITY_NOT_DETECTED.format({name:s})},t.prototype.renderActionButton=function(){var e=this,t=this.props,n=t.isInBrowser,r=t.isPreview,a=t.isGameLaunchable,l=t.partyId,s=t.activity,u=t.message,f=t.renderSpotifyJoinButton,d={className:_.default.actionButton,size:c.default.Sizes.SMALL};if(!this.isDeadInvite()&&this.isActionType(C.ActivityActionTypes.LISTEN)&&null!=l&&null!=u&&(0,A.isSpotifyParty)(l))return f(o({},d,{activity:s,user:u.author}));return i.createElement(c.default,o({},d,function(){if(!r&&n&&!e.isDeadInvite())return{children:g.default.Messages.USER_ACTIVITY_ACTION_DOWNLOAD_APP,onClick:e.handleDownloadApp};var t=e.canSpectate();return e.isActionType(C.ActivityActionTypes.SPECTATE)||e.isPartyFull()&&t?t?{children:g.default.Messages.USER_ACTIVITY_ACTION_SPECTATE,onClick:e.handleSpectate}:{children:g.default.Messages.USER_ACTIVITY_ACTION_SPECTATE,disabled:!0}:e.canJoin()?{children:g.default.Messages.JOIN,onClick:e.handleJoin}:e.canSync()?{children:g.default.Messages.JOIN,onClick:e.handleSync}:{children:g.default.Messages.JOIN,disabled:!0}}(),{color:!n&&!a||this.isDeadInvite()?c.default.Colors.GREY:c.default.Colors.GREEN,submitting:this.props.isLaunching}))},t.prototype.renderUser=function(e,t,n){var r=this.props.renderUserPopout;return null!=e?a(N,{member:e,renderUserPopout:r,className:t},n):a("div",{className:(0,l.default)(_.default.partyMemberEmpty,t)},n)},t.prototype.renderMoreUsers=function(e,t,n){return a("div",{className:_.default.moreUsers},n,e)},t.prototype.renderParty=function(){var e=this.props,t=e.partyId,n=e.partyMembers,r=e.hideParty,o=this.getPartySize(),i=o[0],l=o[1],s=this.hasPartySize()||this.isActionType(C.ActivityActionTypes.LISTEN)||this.isActionType(C.ActivityActionTypes.WATCH);if(this.isActionType(C.ActivityActionTypes.SPECTATE)||null==t||this.isDeadInvite()||!s||r)return null;for(var u=[].concat(n);u.length<i;)u.push({user:new b.default({discriminator:"0005"}),unknownUser:!0});for(var c=Math.min(l,106);u.length<c;)u.push(null);return a(v.default,{className:_.default.partyMembers,users:u,max:l>0?Math.min(l,6):6,renderUser:this.renderUser,renderMoreUsers:this.renderMoreUsers})},t.prototype.render=function(){var e=this.props,t=e.className,n=e.coverImage,r=e.name,o=e.activity,i=e.backgroundOpacity,c=this.isActionType(C.ActivityActionTypes.JOIN)||this.isActionType(C.ActivityActionTypes.SPECTATE),d=this.isDeadInvite(),h=void 0;return null==n||null==o||c?!c&&d&&(h=a("div",{className:_.default.artworkSpotifySessionEnded})):h=a("img",{alt:"",src:n,className:(0,s.getClass)(_.default,"artwork",this.getActionableMode())}),null!=o&&null!=h&&null!=o.assets&&o.assets.large_text&&!d&&(0,u.isListeningOnSpotify)(o)&&(h=a(m.default,{text:o.assets.large_text},void 0,a(y.default,{onClick:this.handleOpenSpotifyAlbum},void 0,h))),a("div",{className:(0,l.default)(_.default.invite,t,_.default[i+"BackgroundOpacity"])},void 0,a("div",{className:_.default.coverImageWrapper},void 0,a("div",{className:(0,l.default)((0,s.getClass)(_.default,"coverImage",this.getActionableMode()),null!=h?_.default.blurred:null),style:{backgroundImage:null!=n?"url('"+n+"')":null}})),a(f.default,{className:_.default.fullHeight},void 0,a(f.default,{direction:f.default.Direction.VERTICAL},void 0,a("div",{className:_.default.header},void 0,this.renderHeaderText()),a(f.default.Child,{className:_.default.partyStatus},void 0,this.renderPartyStatus()),a(f.default,{align:f.default.Align.END},void 0,a(f.default,{align:f.default.Align.CENTER,className:_.default.actionAndParty,basis:0,style:{marginRight:0}},void 0,this.renderActionButton(),this.renderParty()),null==h&&c?a("div",{className:_.default.name},void 0,r):null)),h),a(y.default,{href:E.default.getArticleURL(this.getHelpdeskArticleURL()),className:_.default.helpIcon},void 0,a(p.default,{name:p.default.Names.QUESTION_MARK,color:C.Colors.PRIMARY_300,width:12,height:12})))},t.prototype.handleJoin=function(){var e=this.props.onJoin;e&&e()},t.prototype.handleSpectate=function(){var e=this.props.onSpectate;e&&e()},t.prototype.handleSync=function(){var e=this.props.onSync;e&&e()},t.prototype.handleDownloadApp=function(){var e=this.props.onDownloadApp;e&&e()},t}(i.PureComponent);t.default=P,e.exports=t.default},7500:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=C(n(3)),l=C(n(273)),s=C(n(951)),u=C(n(1e3)),c=C(n(38)),f=C(n(145)),d=C(n(192)),p=C(n(977)),h=C(n(123)),y=C(n(6616)),m=C(n(64)),v=C(n(75)),g=C(n(6068)),_=C(n(6)),E=n(0),b=C(n(5891)),S=C(n(142));function C(e){return e&&e.__esModule?e:{default:e}}var A=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.state={textValue:"",textFocused:!0},r.handleTextChange=r.handleTextChange.bind(r),r.handleShare=r.handleShare.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.renderTitle=function(){switch(this.props.activity.type){case E.ActivityTypes.LISTENING:return _.default.Messages.INVITE_EMBED_LISTENING_INVITE;case E.ActivityTypes.PLAYING:case E.ActivityTypes.STREAMING:default:return _.default.Messages.INVITE_EMBED_GAME_INVITE}},t.prototype.render=function(){var e=this,t=this.state,n=t.textValue,r=t.textFocused,i=this.props,l=i.activity,s=i.channel,u=i.activityActionType,c=i.cooldown,f=c>0,d=f?_.default.Messages.CHANNEL_SLOWMODE_COOLDOWN.format({seconds:Math.round((c+1e3)/1e3)}):null;return o(h.default,{size:h.default.Sizes.SMALL},void 0,o(h.default.Header,{},void 0,o(v.default,{tag:v.default.Tags.H4},void 0,this.renderTitle())),o(h.default.Content,{},void 0,o("div",{className:b.default.subHeader},void 0,_.default.Messages.MESSAGE_PREVIEW),o(y.default,{activityActionType:u,activity:l,className:b.default.preview,applicationId:l.application_id,partyId:null!=l.party?l.party.id:null,name:l.name,isPreview:!0}),o("div",{className:b.default.subHeader},void 0,_.default.Messages.ADD_A_COMMENT_OPTIONAL),a.createElement(g.default,{className:b.default.textArea,value:n,focused:r,channel:s,onChange:this.handleTextChange,onSubmit:this.handleShare,type:E.TextareaTypes.FORM,ref:function(t){e.channelTextAreaRef=t}})),o(h.default.Footer,{},void 0,o(S.default,{text:d},void 0,o("div",{},void 0,o(m.default,{disabled:f,onClick:this.handleShare},void 0,_.default.Messages.INVITE_EMBED_SEND_INVITE))),o(m.default,{look:m.default.Looks.LINK,onClick:this.handleCancel},void 0,_.default.Messages.CANCEL)))},t.prototype.handleCancel=function(){c.default.pop()},t.prototype.handleTextChange=function(e,t){this.setState({textValue:t})},t.prototype.handleShare=function(){var e=this.props,t=e.channel,n=e.activity,r=e.activityActionType,o=e.cooldown,a=this.state.textValue;if(o>0)return Promise.resolve(!1);var i=l.default.parse(t,a),u={activity:n,type:r};return s.default.isOpen("popout-channel-text-area-shouting")?(d.default.close("popout-channel-text-area-shouting"),f.default.sendMessage(t.id,i,!0,u),c.default.pop(),Promise.resolve(!0)):p.default.applyChatRestrictions(this.channelTextAreaRef,a,t).then(function(e){e.valid&&(f.default.sendMessage(t.id,i,!0,u),c.default.pop())})},t}(a.PureComponent);t.default=i.default.connectStores([u.default],function(e){var t=e.channel;return{cooldown:u.default.getSlowmodeCooldownGuess(t.id)}})(A),e.exports=t.default},7501:function(e,t,n){"use strict";t.__esModule=!0;var r=l(n(2)),o=l(n(13)),a=l(n(6617)),i=n(0);function l(e){return e&&e.__esModule?e:{default:e}}t.default={search:function(e,t){null==a.default.getResults(e,t)&&(r.default.dirtyDispatch({type:i.ActionTypes.INTEGRATION_QUERY,integration:e,query:t}),o.default.get({url:i.Endpoints.INTEGRATIONS+"/"+i.ChannelTextAreaIntegrations[e].command+"/search",query:{q:t}}).then(function(n){r.default.dispatch({type:i.ActionTypes.INTEGRATION_QUERY_SUCCESS,integration:e,query:t,results:n.body})},function(){return r.default.dispatch({type:i.ActionTypes.INTEGRATION_QUERY_FAILURE,integration:e,query:t})}))}},e.exports=t.default},7815:function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(6)),o=a(n(6079));function a(e){return e&&e.__esModule?e:{default:e}}t.default={MENTION_EVERYONE:function(){return{test:"everyone",text:"@everyone",description:r.default.Messages.MENTION_EVERYONE_AUTOCOMPLETE_DESCRIPTION}},MENTION_HERE:function(){return{test:"here",text:"@here",description:r.default.Messages.MENTION_HERE_AUTOCOMPLETE_DESCRIPTION}},LAUNCHABLE_APPLICATIONS:function(){return o.default.launchableApplicationViewItems}},e.exports=t.default},7866:function(e,t,n){e.exports=n.p+"c83861b2303b7ee40c419e9590d57f11.svg"},7875:function(e,t,n){"use strict";t.__esModule=!0,t.fetchActivityStatistics=void 0;t.fetchActivityStatistics=(r=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.default.get({url:l.Endpoints.USER_ACTIVITY_STATISTICS});case 3:return t=e.sent,i.default.dispatch({type:l.ActionTypes.USER_ACTIVITY_STATISTICS_FETCH_SUCCESS,statistics:t.body}),e.abrupt("return",t.body);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}),o=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function r(o,a){try{var i=e[o](a),l=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});t(l)}("next")})},function(){return o.apply(this,arguments)});var r,o,a=s(n(13)),i=s(n(2)),l=n(0);function s(e){return e&&e.__esModule?e:{default:e}}},974:function(e,t,n){"use strict";t.__esModule=!0;var r,o=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,o){var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=s(n(9)),l=s(n(1011));function s(e){return e&&e.__esModule?e:{default:e}}var u={UP:l.default.directionUp,RIGHT:l.default.directionRight,DOWN:l.default.directionDown,LEFT:l.default.directionLeft},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props.direction,t=this.props,n=t.className,r=t.foreground,a=t.color,l=t.width,s=t.height,c=t.transition,f=t.expanded;return!0===f?e=u.DOWN:!1===f&&(e=u.RIGHT),o("svg",{className:(0,i.default)(n,c,e),width:l,height:s,viewBox:"0 0 24 24"},void 0,o("path",{className:r,fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M7 10L12 15 17 10"}))},t}(a.PureComponent);c.Directions=u,c.defaultProps={direction:u.DOWN,width:24,height:24,color:"currentColor",transition:l.default.transition},t.default=c,e.exports=t.default}}]);
//# sourceMappingURL=bdc17790b8b687f87569.js.map