(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{5556:function(t,e,n){"use strict";e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=s(n(3)),o=s(n(8)),u=s(n(2)),i=n(0),l=s(n(18)),f=s(n(12)),c=s(n(167));function s(t){return t&&t.__esModule?t:{default:t}}var p={},d=[];function h(){var t=(0,o.default)(p).toPairs().sortBy(function(t){t[0];return-t[1]}).map(function(t){return t[0]}).value(),e=!o.default.isEqual(d,t);return e&&(d=t),e}function E(t){return t.type===i.ChannelTypes.DM||t.type===i.ChannelTypes.GROUP_DM}function y(t){return null!=(t=null!=t?l.default.getChannel(t.id):null)&&t.isManaged()}var _=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.initialize=function(){this.waitFor(l.default,f.default)},e.prototype.getPrivateChannelIds=function(){return d},e.prototype.getPrivateChannelTimestamps=function(){return p},e}(a.default.Store);e.default=new _(u.default,{CONNECTION_OPEN:function(t){var e=t.channels;p={},e.forEach(function(t){E(t)&&!y(t)&&(p[t.id]=c.default.extractTimestamp(t.last_message_id||t.id))}),h()},OVERLAY_INITIALIZE:function(t){var e=t.sortedPrivateChannels;p=r({},e),h()},CHANNEL_CREATE:function(t){var e=t.channel;return!(!E(e)||y(e))&&(p[e.id]=c.default.extractTimestamp(e.last_message_id||e.id),h())},CHANNEL_DELETE:function(t){var e=t.channel;return null!=p[e.id]&&(delete p[e.id],h())},MESSAGE_CREATE:function(t){var e=t.channelId,n=t.message;return null!=p[e]&&(p[e]=c.default.extractTimestamp(n.id),h())},GUILD_CREATE:function(t){var e=t.guild.id;return null!=p[e]&&(delete p[e],h())}}),t.exports=e.default}}]);
//# sourceMappingURL=39baa4f10794fcb41fbb.js.map