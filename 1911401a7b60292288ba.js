(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{1199:function(e,t,a){"use strict";t.__esModule=!0;var n,r=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,a,r){var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&o)for(var i in o)void 0===t[i]&&(t[i]=o[i]);else t||(t=o||{});if(1===s)t.children=r;else if(s>1){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:n,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(2)),s=v(a(19)),i=v(a(1277)),l=v(a(1198)),u=v(a(162)),f=v(a(398)),c=a(75),d=a(168),p=a(43),h=v(a(1096));function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g={CIRCLE:h.default.circle,SQUARE:h.default.square},y=function(e){function t(){var a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return a=n=m(this,e.call.apply(e,[this].concat(o))),n.state={error:null},n.handleFileChange=function(e){e.stopPropagation(),e.preventDefault();var t=e.target.files[0],a=n.props,r=a.size,o=a.minSize,s=a.onChange,l=a.fieldName;if(null!=t){var u=new FileReader;u.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){if(null!=o&&(t.width<o||t.height<o))n.setState({error:p.Messages.AvatarUploader.MINIMUM_SIZE.format({size:o})});else{var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,e.width,e.height);var a=t.width<t.height?t.width/r:t.height/r,u=document.createElement("canvas");u.width=t.width/a,u.height=t.height/a,i.default.resizeCanvas(e,u,{alpha:!0},function(){var e=document.createElement("canvas");e.width=r,e.height=r;var t=(u.width-e.width)/-2,a=(u.height-e.height)/-2;e.getContext("2d").drawImage(u,t,a,u.width,u.height),s(e.toDataURL("image/png"),l)})}}},u.readAsDataURL(t)}},n.handleRemove=function(){var e=n.props,t=e.fieldName;(0,e.onChange)(null,t)},m(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.renderRemoveButton=function(){var e=this.props,t=e.disabled,a=e.size,n=e.avatar,o=this.state.error;return t?r("small",{className:h.default.removeButtonSmall},void 0,p.Messages.AvatarUploader.SIZE.format({size:a})):null!=o?r("small",{className:h.default.removeButtonSmallError},void 0,o):null!=n?r(f.default,{className:h.default.removeButton,onClick:this.handleRemove},void 0,p.Messages.AvatarUploader.REMOVE):r("small",{className:(0,c.getClass)(h.default,"removeButtonSmall",null!=o?"Error":null)},void 0,p.Messages.AvatarUploader.SIZE.format({size:a}))},t.prototype.render=function(){var e,t=this.props,a=t.avatar,n=t.hint,o=t.name,i=t.makeURL,f=t.hasBorder,c=t.shape,v=void 0,m=void 0,g=void 0;return(v=null!=a&&/^data:/.test(a)?a:i(a))?m='url("'+v+'")':g=r("div",{className:h.default.acronym},void 0,(0,d.getAcronym)(o)),r("div",{className:(0,s.default)(h.default.avatarUploader,(e={},e[h.default.border]=f,e))},void 0,r("div",{className:(0,s.default)(h.default.avatarUploaderInner,c),style:{backgroundImage:m}},void 0,r("div",{className:h.default.addPhotoWrapper},void 0,r(u.default,{className:h.default.addPhotoIcon,name:u.default.Names.ADD_PHOTO})),g,r("div",{className:h.default.hint},void 0,n),r(l.default,{onChange:this.handleFileChange,filters:[{name:p.Messages.AvatarUploader.IMAGES,extensions:["jpg","jpeg","png"]}]})),this.renderRemoveButton())},t}(o.PureComponent);y.Shape=g,y.defaultProps={name:"",size:64,makeURL:function(e){return e},hint:p.Messages.AvatarUploader.SELECT_IMAGE,disabled:!1,hasBorder:!1,shape:g.CIRCLE},t.default=y,e.exports=t.default},1728:function(e,t,a){"use strict";t.__esModule=!0;var n,r=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,a,r){var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&o)for(var i in o)void 0===t[i]&&(t[i]=o[i]);else t||(t=o||{});if(1===s)t.children=r;else if(s>1){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:n,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}),o=f(a(19)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(2)),i=f(a(159)),l=f(a(65)),u=f(a(1130));function f(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t,a=e.displayPlaceholderAvatar;return r("div",{className:(0,o.default)(u.default.partyAvatar,(t={},t[u.default.partyAvatarPlaceholder]=a,t))})},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.renderParty=function(){for(var e=[],t=0;t<6;t++)e.push(r(c,{displayPlaceholderAvatar:t<3},t));return r("div",{className:u.default.partyMembers},void 0,e)},t.prototype.render=function(){var e=this.props,t=e.name,a=e.coverImage;return r("div",{className:u.default.invite},void 0,r("div",{className:u.default.coverImageWrapper},void 0,r("div",{className:u.default.coverImageActionable,style:{backgroundImage:null!=a?"url('"+a+"')":null}})),r(l.default,{className:u.default.fullHeight},void 0,r(l.default,{direction:l.default.Direction.VERTICAL},void 0,r("div",{className:u.default.header},void 0,"Invite to join group"),r(l.default.Child,{className:u.default.partyStatus},void 0,"3 open slots"),r(l.default,{align:l.default.Align.END,wrap:l.default.Wrap.NO_WRAP},void 0,r(l.default.Child,{grow:0,shrink:0},void 0,r(l.default,{align:l.default.Align.CENTER,className:u.default.actionAndParty,wrap:l.default.Wrap.NO_WRAP},void 0,r(l.default.Child,{grow:0,shrink:0,wrap:!0},void 0,r(i.default,{className:u.default.actionButton,color:i.default.Color.GREEN,height:i.default.Height.SHORT},void 0,"Join")),r(l.default.Child,{grow:0,shrink:0,wrap:!0},void 0,this.renderParty()))),r(l.default.Child,{grow:1,shrink:1},void 0,r("div",{className:u.default.name},void 0,t))))))},t}(s.Component);t.default=d,e.exports=t.default},1729:function(e,t,a){"use strict";t.__esModule=!0;var n,r=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,a,r){var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&o)for(var i in o)void 0===t[i]&&(t[i]=o[i]);else t||(t=o||{});if(1===s)t.children=r;else if(s>1){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:n,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(2)),s=c(a(1199)),i=c(a(1162)),l=c(a(1176)),u=a(43),f=a(13);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return a=n=d(this,e.call.apply(e,[this].concat(o))),n.handleCoverImageChange=function(e){var t=n.props.onCoverImageChange;t&&t(e)},d(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props.coverImage;return r(o.Fragment,{},void 0,r(i.default,{},void 0,u.Messages.RichPresence.COVER_IMAGE),r(l.default,{},void 0,r("input",{type:"hidden",name:"coverImage",value:e||""}),r(s.default,{avatar:e,onChange:this.handleCoverImageChange,shape:s.default.Shape.SQUARE,size:f.COVER_IMAGE_UPLOAD_SIZE,minSize:f.MINIMUM_COVER_IMAGE_SIZE})))},t}(o.Component);t.default=p,e.exports=t.default},1730:function(e,t,a){"use strict";t.__esModule=!0;var n,r=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,a,r){var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&o)for(var i in o)void 0===t[i]&&(t[i]=o[i]);else t||(t=o||{});if(1===s)t.children=r;else if(s>1){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:n,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(2)),s=p(a(1729)),i=p(a(1162)),l=a(160),u=p(l),f=p(a(1728)),c=a(43),d=p(a(1129));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){return{coverImage:e.application.coverImage}},m=function(e){function t(){var a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return a=n=h(this,e.call.apply(e,[this].concat(o))),n.state=v(n.props),n.handleCoverImageChange=function(e){var t=n.props.onCoverImageChange;n.setState({coverImage:e}),t&&t(e)},n.resetImage=function(){n.setState(v(n.props))},h(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.state.coverImage,t=this.props.application;return r(u.default,{},void 0,r(l.GridSection,{},void 0,r(l.GridChild,{columnSpread:3,className:d.default.inviteImage},void 0,r(s.default,{coverImage:this.state.coverImage,onCoverImageChange:this.handleCoverImageChange})),r(l.GridChild,{columnSpread:8,columnSpreadExtraSmall:12,columnSpreadSmall:12,grow:1,shrink:1},void 0,r(i.default,{},void 0,c.Messages.RichPresence.IRL_INVITE_IMAGE_EXAMPLE),r(f.default,{coverImage:e,name:t.name}))))},t}(o.Component);t.default=m,e.exports=t.default},1732:function(e,t,a){"use strict";t.__esModule=!0;var n,r=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,a,r){var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&o)for(var i in o)void 0===t[i]&&(t[i]=o[i]);else t||(t=o||{});if(1===s)t.children=r;else if(s>1){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+3];t.children=l}return{$$typeof:n,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}),o=N(a(2)),s=a(74),i=R(a(22)),l=a(165),u=R(a(163)),f=R(a(166)),c=N(a(115)),d=a(396),p=R(d),h=R(a(1361)),v=R(a(1190)),m=R(a(1165)),g=R(a(1164)),y=R(a(395)),S=R(a(1168)),A=R(a(1170)),_=R(a(1163)),E=R(a(1169)),I=R(a(1730)),b=R(a(117)),M=a(43),C=a(13),w=R(a(1128));function R(e){return e&&e.__esModule?e:{default:e}}function N(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=r(b.default,{}),T=function(e){function t(){var a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,s=Array(r),i=0;i<r;i++)s[i]=arguments[i];return a=n=P(this,e.call.apply(e,[this].concat(s))),n.assetManagerRef=o.createRef(),n.inviteImageRef=o.createRef(),n.state={errorMessage:null,hasLoadedRemoteAssets:!1,hasUnsavedChanges:!1,inviteImageData:null,isSubmitting:!1,unblock:null},n.deleteAsset=function(e){return c.deleteAsset(n.props.applicationDetails.id,e)},n.getAssetUri=function(e){return(0,l.getAssetImage)(n.props.applicationDetails.id,e.id)},n.handleAssetsFormChange=function(){n.state.hasUnsavedChanges||n.setState({hasUnsavedChanges:!0,unblock:u.default.blockTransition()})},n.handleAssetsFormSubmit=function(e){n.setState({isSubmitting:!0});var t=n.state,a=t.inviteImageData,r=t.unblock,o=[];null!=n.assetManagerRef.current&&o.push(n.assetManagerRef.current.uploadAllAssets()),null!=a&&o.push(c.updateApplication(n.props.applicationDetails.id,{cover_image:e.coverImage}).then(function(){n.setState({inviteImageData:null})})),Promise.all(o).then(function(){null!=r&&r(),n.setState({errorMessage:null,hasUnsavedChanges:!1,isSubmitting:!1,unblock:null})}).catch(function(e){n.setState({errorMessage:e.message,isSubmitting:!1})})},n.handleInviteImageChange=function(e){var t=n.state.unblock,a={hasUnsavedChanges:!0,inviteImageData:e,unblock:t};null==t&&(a.unblock=u.default.blockTransition()),n.setState(a)},n.handleReset=function(){var e=n.state.unblock;null!=e&&e(),null!=n.assetManagerRef.current&&n.assetManagerRef.current.resetAssets(),null!=n.inviteImageRef.current&&n.inviteImageRef.current.resetImage(),n.setState({hasUnsavedChanges:!1,unblock:null})},n.uploadAsset=function(e){var t=n.props.applicationDetails;return null!=e.data?c.createAsset(t.id,{name:e.name,image:e.data,type:"1"}):Promise.resolve()},P(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.applicationDetails;c.fetchApplicationAssets(t.id).then(function(){e.setState({errorMessage:null,hasLoadedRemoteAssets:!0})}).catch(function(t){e.setState({errorMessage:t.message,hasLoadedRemoteAssets:!0})})},t.prototype.renderAssetsHeading=function(e){return M.Messages.RichPresence.ASSETS_MANAGER_HEADING.format({count:e})},t.prototype.renderAssetManager=function(){var e=this.props,t=e.applicationDetails,a=e.assets;return this.state.hasLoadedRemoteAssets?o.createElement(h.default,{actionCopy:M.Messages.RichPresence.ASSETS_ADD_IMAGES,application:t,assetLabel:M.Messages.RichPresence.ASSETS_IMAGES,assetsHeadingRenderer:this.renderAssetsHeading,assets:a,getAssetUri:this.getAssetUri,uploadAsset:this.uploadAsset,deleteAsset:this.deleteAsset,emptyState:this.renderEmptyAssetState(),fileTypeDescription:M.Messages.RichPresence.ASSETS_ACCEPTED_FILE_TYPES.format({minSize:C.MINIMUM_ASSET_IMAGE_SIZE,recommendedSize:C.RECOMMENDED_ASSET_IMAGE_SIZE}),minAssetSize:C.MINIMUM_ASSET_IMAGE_SIZE,ref:this.assetManagerRef,supportedExtensions:["jpg","jpeg","png"]}):O},t.prototype.renderEmptyAssetState=function(){return r(v.default,{},void 0,r("img",{alt:M.Messages.RichPresence.NO_ASSETS_UPLOADED,className:w.default.emptyStateImage,src:a(1360)}))},t.prototype.render=function(){var e=this.props.applicationDetails,t=this.state,a=t.hasUnsavedChanges,n=t.isSubmitting;return r(m.default,{onChange:this.handleAssetsFormChange,onSubmit:this.handleAssetsFormSubmit},void 0,r(y.default,{},void 0,r(g.default,{},void 0,M.Messages.RichPresence.ASSETS_HEADING),r(_.default,{},void 0,M.Messages.RichPresence.ASSETS_SUBHEADING),r("p",{},void 0,M.Messages.RichPresence.ASSETS_SUBHEADING_LINK.format({link:u.default.prependBasename(C.Routes.DOCS_RICH_PRESENCE_BEST_PRACTICES)}))),r(y.default,{},void 0,r(S.default,{},void 0,M.Messages.RichPresence.INVITE_IMAGE_HEADING),r(A.default,{},void 0,M.Messages.RichPresence.INVITE_IMAGE_SUBHEADING),o.createElement(I.default,{application:e,onCoverImageChange:this.handleInviteImageChange,ref:this.inviteImageRef})),r(y.default,{className:a?w.default.extraPadding:"",isFlush:!0},void 0,r(S.default,{},void 0,M.Messages.RichPresence.ASSETS_SECTION_HEADING),r(A.default,{},void 0,M.Messages.RichPresence.ASSETS_SECTION_SUBHEADING),r(p.default,{className:w.default.cachingWarning,type:d.AlertTypes.WARNING},void 0,M.Messages.RichPresence.ASSET_CACHING_WARNING),this.renderAssetManager()),a?r(E.default,{onReset:this.handleReset,submitting:n}):null)},t}(o.Component);t.default=i.default.connectStores([f.default],function(e){return{assets:f.default.getApplicationAssets(e.applicationDetails.id)}})((0,s.withRouter)(T)),e.exports=t.default}}]);
//# sourceMappingURL=1911401a7b60292288ba.js.map