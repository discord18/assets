(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{5689:function(t,e,n){"use strict";e.__esModule=!0;var o,a=(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,n,a){var r=t&&t.defaultProps,i=arguments.length-3;if(e||0===i||(e={}),e&&r)for(var s in r)void 0===e[s]&&(e[s]=r[s]);else e||(e=r||{});if(1===i)e.children=a;else if(i>1){for(var u=Array(i),l=0;l<i;l++)u[l]=arguments[l+3];e.children=u}return{$$typeof:o,type:t,key:void 0===n?null:""+n,ref:null,props:e,_owner:null}}),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(1)),i=T(n(40)),s=T(n(67)),u=T(n(5)),l=T(n(13)),d=n(56),f=n(0),c=T(n(530)),p=T(n(6148)),h=T(n(20)),m=T(n(6)),v=T(n(5688)),y=T(n(5575)),g=T(n(6144)),b=T(n(6143)),_=T(n(79));function T(t){return t&&t.__esModule?t:{default:t}}function w(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var N=function(t){var e=t.step,n=t.children;return a(r.Fragment,{},void 0,a(s.default,{className:v.default.sectionSubheader,color:s.default.Colors.WHITE,weight:s.default.Weights.SEMIBOLD},void 0,m.default.Messages.STEP_NUMBER.format({number:e})),a(s.default,{className:v.default.sectionSubtitle,color:s.default.Colors.WHITE,weight:s.default.Weights.LIGHT,size:s.default.Sizes.LARGE},void 0,n))},S=function(t){var e=t.pin,n=t.timeRemaining;return a(r.Fragment,{},void 0,a(s.default,{className:v.default.pinNumber,color:s.default.Colors.WHITE,family:s.default.Family.CODE,weight:s.default.Weights.LIGHT},void 0,e),a(s.default,{className:v.default.pinExpiresText,color:s.default.Colors.WHITE,weight:s.default.Weights.MEDIUM},void 0,n))},A=function(t){function e(){var n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=o=w(this,t.call.apply(t,[this].concat(r))),o.state={pin:"",currentTime:(0,u.default)(),endTime:null,loading:!0,errorMessage:null},o.tick=function(){var t=o.state.endTime;o.setState({currentTime:(0,u.default)()}),null!=t&&(0,u.default)().isAfter(t)&&o.interval.stop()},o.getMinutesLeftText=function(){var t=o.state.endTime;return o.state.loading?m.default.Messages.LOADING_YOUR_PIN:null!=t&&(0,u.default)().isAfter(t)?m.default.Messages.YOUR_PIN_IS_EXPIRED:null!=t?m.default.Messages.YOUR_PIN_EXPIRES.format({time:t.fromNow()}):void 0},w(o,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){var t=this,e=c.default.parse(this.props.location.search),n=e.code,o=e.state;h.default.track(f.AnalyticEvents.ACCOUNT_LINK_STEP,{previous_step:"microsoft auth",current_step:"PIN code display",session_id:o,platform_type:f.PlatformTypes.XBOX}),u.default.locale(window.navigator.userLanguage||window.navigator.language),l.default.post({url:f.Endpoints.CONNECTIONS_CALLBACK_CONTINUATION("xbox"),body:{code:n,state:o}}).then(function(e){t.setState({pin:e.body.short_code,currentTime:(0,u.default)(),endTime:(0,u.default)(e.body.expires_at),loading:!1}),t.interval=new d.Interval,t.interval.start(1e3,t.tick)}).catch(function(e){var n=void 0;try{n=e.body.message}catch(t){n=String(e)}h.default.track(f.AnalyticEvents.ACCOUNT_LINK_FAILED,{error_message:n,status_code:e.status,link_type:"pin",current_step:"PIN code display",platform_type:f.PlatformTypes.XBOX}),t.setState({errorMessage:n})})},e.prototype.componentWillUnmount=function(){null!=this.interval&&this.interval.stop()},e.prototype.handleDone=function(){window.location=f.Routes.CONNECTIONS(f.PlatformTypes.XBOX)},e.prototype.goBack=function(){window.history.back()},e.prototype.renderXboxButtons=function(){return a("div",{className:y.default.xboxButtonContainer},void 0,a(p.default.Button,{type:p.default.Button.A,text:m.default.Messages.CLOSE,style:y.default.gamepadButton,onClick:this.handleDone}),this.renderErrorMessage())},e.prototype.renderErrorMessage=function(){var t=this.state.errorMessage;return null==t?null:a("div",{className:y.default.errorMessageContainer},void 0,a(_.default,{name:_.default.Names.WARNING_TRIANGLE,className:y.default.errorMessageIcon}),a("div",{className:y.default.errorMessage},void 0,t))},e.prototype.renderContent=function(){var t=this.state.pin,e=null==t?null:a(S,{pin:t,timeRemaining:this.getMinutesLeftText()});return a("div",{className:y.default.pageWrapper},void 0,a("img",{alt:"Discord",className:y.default.logo,src:b.default}),a(i.default,{className:y.default.container,justify:i.default.Justify.CENTER,align:i.default.Align.CENTER},void 0,a(i.default.Child,{className:v.default.leftPanel},void 0,e,a(s.default,{className:v.default.sectionTitle,color:s.default.Colors.WHITE,weight:s.default.Weights.BOLD},void 0,m.default.Messages.LINK_YOUR_DISCORD_ACCOUNT),a(N,{step:1},void 0,m.default.Messages.XBOX_PIN_STEP1),a(N,{step:2},void 0,m.default.Messages.XBOX_PIN_STEP2),a(N,{step:3},void 0,m.default.Messages.XBOX_PIN_STEP3),this.renderXboxButtons()),a(i.default.Child,{className:y.default.rightPanel},void 0,a("img",{alt:"",className:y.default.image,src:g.default}))))},e.prototype.render=function(){return a(p.default,{onAPressed:this.handleDone,onBPressed:this.goBack},void 0,this.renderContent())},e}(r.PureComponent);e.default=A,t.exports=e.default},6052:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XBOX=void 0;var o,a=n(6145),r=(o=a)&&o.__esModule?o:{default:o};e.XBOX=r.default,e.default={XBOX:r.default}},6143:function(t,e,n){t.exports=n.p+"02a8c6a7d718b8e215bf28e86c932176.svg"},6144:function(t,e,n){t.exports=n.p+"73f58e6829ada2677574e5e3f7a96e94.png"},6145:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={buttons:["A","B","X","Y","LB","RB","LT","RT","Back","Start","LS","RS","DPadUp","DPadDown","DPadLeft","DPadRight"],axis:["LeftStickX","-LeftStickY","RightStickX","-RightStickY"],buttonAxis:[null,null,null,null,null,null,"LeftTrigger","RightTrigger"]}},6146:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(1),i=(o=r)&&o.__esModule?o:{default:o},s=n(6052);var u=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.padState={connected:!1,buttons:{A:!1,B:!1,X:!1,Y:!1,LB:!1,LT:!1,LS:!1,RB:!1,RT:!1,RS:!1,Start:!1,Back:!1,DPadUp:!1,DPadRight:!1,DPadDown:!1,DPadLeft:!1},axis:{LeftStickX:0,LeftStickY:0,RightStickX:0,RightStickY:0,RightTrigger:0,LeftTrigger:0}},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default.Component),a(e,[{key:"componentDidMount",value:function(){this.mounted=!0,window&&window.requestAnimationFrame&&window.requestAnimationFrame(this.updateGamepad.bind(this))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"updateGamepad",value:function(){if(this.mounted){var t=this.props.gamepadIndex,e=navigator.getGamepads();if(e.length&&e.length>t&&e[t]){var n=e[t];this.padState.connected||(this.padState.connected=!0,this.props.onConnect(t)),this.updateAllButtons(n),this.updateAllAxis(n)}else this.padState.connected&&(this.padState.connected=!1,this.props.onDisconnect(t));window&&window.requestAnimationFrame&&window.requestAnimationFrame(this.updateGamepad.bind(this))}}},{key:"updateAllButtons",value:function(t){for(var e=0;e<t.buttons.length;++e){var n=t.buttons[e].pressed,o=t.buttons[e].value,a=this.buttonIndexToButtonName(e);this.updateButton(a,n);var r=this.buttonIndexToAxisName(e);this.updateAxis(r,o)}}},{key:"updateButton",value:function(t,e){void 0===this.padState.buttons[t]?console.error("Unknown button "+t):this.padState.buttons[t]!==e&&(this.padState.buttons[t]=e,this.props.onButtonChange(t,e),this.props["onButton"+(e?"Down":"Up")](t),e&&this.props["on"+t.replace("DPad","")]())}},{key:"updateAllAxis",value:function(t){for(var e=0;e<t.axes.length;++e){var n=this.axisIndexToAxisName(e);t.axes[e];this.updateAxis(n,t.axes[e])}}},{key:"updateAxis",value:function(t,e){if(t&&void 0!==e&&null!==e&&NaN!==e){var n="-"===t[0],o=e*(n?-1:1);if(Math.abs(o)<this.props.deadZone&&(o=0),n&&(t=t.substr(1)),this.padState.axis[t]!==o){var a=this.padState.axis[t];this.padState.axis[t]=o,this.props.onAxisChange(t,o,a),"LeftStickX"===t&&(a<=this.props.stickThreshold&&o>this.props.stickThreshold&&this.props.onRight(),a>=-this.props.stickThreshold&&o<-this.props.stickThreshold&&this.props.onLeft()),"LeftStickY"===t&&(a<=this.props.stickThreshold&&o>this.props.stickThreshold&&this.props.onUp(),a>=-this.props.stickThreshold&&o<-this.props.stickThreshold&&this.props.onDown())}}}},{key:"buttonIndexToButtonName",value:function(t){var e=this.props.layout;return e.buttons&&e.buttons.length>=t+1?e.buttons[t]:null}},{key:"buttonIndexToAxisName",value:function(t){var e=this.props.layout;return e.buttonAxis&&e.buttonAxis.length>=t+1?e.buttonAxis[t]:null}},{key:"axisIndexToAxisName",value:function(t){var e=this.props.layout;return e.axis&&e.axis.length>=t+1?e.axis[t]:null}},{key:"render",value:function(){return i.default.Children.only(this.props.children)}}]),e}();u.defaultProps={layout:s.XBOX,stickThreshold:.5,deadZone:.08,gamepadIndex:0,onConnect:function(){},onDisconnect:function(){},onButtonDown:function(){},onButtonUp:function(){},onButtonChange:function(){},onAxisChange:function(){},onA:function(){},onB:function(){},onX:function(){},onY:function(){},onStart:function(){},onBack:function(){},onLT:function(){},onRT:function(){},onLB:function(){},onRB:function(){},onLS:function(){},onRS:function(){},onUp:function(){},onDown:function(){},onLeft:function(){},onRight:function(){}},e.default=u},6147:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.layouts=e.Gamepad=void 0;var o=r(n(6146)),a=r(n(6052));function r(t){return t&&t.__esModule?t:{default:t}}o.default.layouts=a.default,e.Gamepad=o.default,e.layouts=a.default,e.default=o.default},6148:function(t,e,n){"use strict";e.__esModule=!0;var o,a=(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,n,a){var r=t&&t.defaultProps,i=arguments.length-3;if(e||0===i||(e={}),e&&r)for(var s in r)void 0===e[s]&&(e[s]=r[s]);else e||(e=r||{});if(1===i)e.children=a;else if(i>1){for(var u=Array(i),l=0;l<i;l++)u[l]=arguments[l+3];e.children=u}return{$$typeof:o,type:t,key:void 0===n?null:""+n,ref:null,props:e,_owner:null}}),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(1)),i=f(n(6147)),s=f(n(79)),u=f(n(87)),l=n(0),d=f(n(5576));function f(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m={A:{iconName:s.default.Names.XBOX_GAMEPAD_A,color:l.Colors.STATUS_GREEN_400},B:{iconName:s.default.Names.XBOX_GAMEPAD_B,color:l.Colors.STATUS_RED_400}},v=function(t){function e(){return c(this,e),p(this,t.apply(this,arguments))}return h(e,t),e.prototype.render=function(){var t=this.props,e=t.type,n=t.text,o=t.style,r=t.onClick,i=null!=r?{cursor:"pointer"}:null;return a(u.default,{className:d.default.gamepadButtonContainer,style:i,onClick:r},void 0,a(s.default,{name:e.iconName,className:o,color:e.color,backgroundColor:l.Colors.PRIMARY_600}),a("div",{className:d.default.gamepadButtonText},void 0,n))},e}(r.Component);v.A=m.A,v.B=m.B;var y=function(t){function e(){var n,o;c(this,e);for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=o=p(this,t.call.apply(t,[this].concat(r))),o.state={gamepadConnected:!1},o.setGamepadConnected=function(){o.setState({gamepadConnected:!0})},o.setGamepadDisconnected=function(){o.setState({gamepadConnected:!1})},p(o,n)}return h(e,t),e.prototype.render=function(){var t=this.props,e=t.onAPressed,n=t.onBPressed,o=t.children;if(null==o)return null;var s=r.cloneElement(r.Children.only(o),{hasGamepad:this.state.gamepadConnected});return a(i.default,{onA:e,onB:n,onConnect:this.setGamepadConnected,onDisconnect:this.setGamepadDisconnected},void 0,s)},e}(r.PureComponent);y.Button=v,e.default=y,t.exports=e.default}}]);
//# sourceMappingURL=63aee251e32b456c5d41.js.map